import pn, { useState as vs } from "react";
var Re = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {};
function Kt(t) {
  return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t;
}
function Dl(t) {
  if (t.__esModule)
    return t;
  var e = t.default;
  if (typeof e == "function") {
    var i = function n() {
      return this instanceof n ? Reflect.construct(e, arguments, this.constructor) : e.apply(this, arguments);
    };
    i.prototype = e.prototype;
  } else
    i = {};
  return Object.defineProperty(i, "__esModule", { value: !0 }), Object.keys(t).forEach(function(n) {
    var l = Object.getOwnPropertyDescriptor(t, n);
    Object.defineProperty(i, n, l.get ? l : {
      enumerable: !0,
      get: function() {
        return t[n];
      }
    });
  }), i;
}
var nn = { exports: {} }, ii = {};
/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var jn;
function bs() {
  if (jn)
    return ii;
  jn = 1;
  var t = pn, e = Symbol.for("react.element"), i = Symbol.for("react.fragment"), n = Object.prototype.hasOwnProperty, l = t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, r = { key: !0, ref: !0, __self: !0, __source: !0 };
  function u(h, s, m) {
    var c, g = {}, x = null, T = null;
    m !== void 0 && (x = "" + m), s.key !== void 0 && (x = "" + s.key), s.ref !== void 0 && (T = s.ref);
    for (c in s)
      n.call(s, c) && !r.hasOwnProperty(c) && (g[c] = s[c]);
    if (h && h.defaultProps)
      for (c in s = h.defaultProps, s)
        g[c] === void 0 && (g[c] = s[c]);
    return { $$typeof: e, type: h, key: x, ref: T, props: g, _owner: l.current };
  }
  return ii.Fragment = i, ii.jsx = u, ii.jsxs = u, ii;
}
var ni = {};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var Gn;
function ys() {
  return Gn || (Gn = 1, process.env.NODE_ENV !== "production" && function() {
    var t = pn, e = Symbol.for("react.element"), i = Symbol.for("react.portal"), n = Symbol.for("react.fragment"), l = Symbol.for("react.strict_mode"), r = Symbol.for("react.profiler"), u = Symbol.for("react.provider"), h = Symbol.for("react.context"), s = Symbol.for("react.forward_ref"), m = Symbol.for("react.suspense"), c = Symbol.for("react.suspense_list"), g = Symbol.for("react.memo"), x = Symbol.for("react.lazy"), T = Symbol.for("react.offscreen"), L = Symbol.iterator, A = "@@iterator";
    function a(F) {
      if (F === null || typeof F != "object")
        return null;
      var Q = L && F[L] || F[A];
      return typeof Q == "function" ? Q : null;
    }
    var o = t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;
    function d(F) {
      {
        for (var Q = arguments.length, ae = new Array(Q > 1 ? Q - 1 : 0), ge = 1; ge < Q; ge++)
          ae[ge - 1] = arguments[ge];
        p("error", F, ae);
      }
    }
    function p(F, Q, ae) {
      {
        var ge = o.ReactDebugCurrentFrame, Ee = ge.getStackAddendum();
        Ee !== "" && (Q += "%s", ae = ae.concat([Ee]));
        var Le = ae.map(function(Se) {
          return String(Se);
        });
        Le.unshift("Warning: " + Q), Function.prototype.apply.call(console[F], console, Le);
      }
    }
    var v = !1, _ = !1, b = !1, S = !1, k = !1, w;
    w = Symbol.for("react.module.reference");
    function z(F) {
      return !!(typeof F == "string" || typeof F == "function" || F === n || F === r || k || F === l || F === m || F === c || S || F === T || v || _ || b || typeof F == "object" && F !== null && (F.$$typeof === x || F.$$typeof === g || F.$$typeof === u || F.$$typeof === h || F.$$typeof === s || // This needs to include all possible module reference object
      // types supported by any Flight configuration anywhere since
      // we don't know which Flight build this will end up being used
      // with.
      F.$$typeof === w || F.getModuleId !== void 0));
    }
    function M(F, Q, ae) {
      var ge = F.displayName;
      if (ge)
        return ge;
      var Ee = Q.displayName || Q.name || "";
      return Ee !== "" ? ae + "(" + Ee + ")" : ae;
    }
    function N(F) {
      return F.displayName || "Context";
    }
    function O(F) {
      if (F == null)
        return null;
      if (typeof F.tag == "number" && d("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."), typeof F == "function")
        return F.displayName || F.name || null;
      if (typeof F == "string")
        return F;
      switch (F) {
        case n:
          return "Fragment";
        case i:
          return "Portal";
        case r:
          return "Profiler";
        case l:
          return "StrictMode";
        case m:
          return "Suspense";
        case c:
          return "SuspenseList";
      }
      if (typeof F == "object")
        switch (F.$$typeof) {
          case h:
            var Q = F;
            return N(Q) + ".Consumer";
          case u:
            var ae = F;
            return N(ae._context) + ".Provider";
          case s:
            return M(F, F.render, "ForwardRef");
          case g:
            var ge = F.displayName || null;
            return ge !== null ? ge : O(F.type) || "Memo";
          case x: {
            var Ee = F, Le = Ee._payload, Se = Ee._init;
            try {
              return O(Se(Le));
            } catch {
              return null;
            }
          }
        }
      return null;
    }
    var I = Object.assign, $ = 0, Y, j, R, Z, W, H, q;
    function P() {
    }
    P.__reactDisabledLog = !0;
    function V() {
      {
        if ($ === 0) {
          Y = console.log, j = console.info, R = console.warn, Z = console.error, W = console.group, H = console.groupCollapsed, q = console.groupEnd;
          var F = {
            configurable: !0,
            enumerable: !0,
            value: P,
            writable: !0
          };
          Object.defineProperties(console, {
            info: F,
            log: F,
            warn: F,
            error: F,
            group: F,
            groupCollapsed: F,
            groupEnd: F
          });
        }
        $++;
      }
    }
    function X() {
      {
        if ($--, $ === 0) {
          var F = {
            configurable: !0,
            enumerable: !0,
            writable: !0
          };
          Object.defineProperties(console, {
            log: I({}, F, {
              value: Y
            }),
            info: I({}, F, {
              value: j
            }),
            warn: I({}, F, {
              value: R
            }),
            error: I({}, F, {
              value: Z
            }),
            group: I({}, F, {
              value: W
            }),
            groupCollapsed: I({}, F, {
              value: H
            }),
            groupEnd: I({}, F, {
              value: q
            })
          });
        }
        $ < 0 && d("disabledDepth fell below zero. This is a bug in React. Please file an issue.");
      }
    }
    var le = o.ReactCurrentDispatcher, te;
    function se(F, Q, ae) {
      {
        if (te === void 0)
          try {
            throw Error();
          } catch (Ee) {
            var ge = Ee.stack.trim().match(/\n( *(at )?)/);
            te = ge && ge[1] || "";
          }
        return `
` + te + F;
      }
    }
    var ne = !1, J;
    {
      var ce = typeof WeakMap == "function" ? WeakMap : Map;
      J = new ce();
    }
    function fe(F, Q) {
      if (!F || ne)
        return "";
      {
        var ae = J.get(F);
        if (ae !== void 0)
          return ae;
      }
      var ge;
      ne = !0;
      var Ee = Error.prepareStackTrace;
      Error.prepareStackTrace = void 0;
      var Le;
      Le = le.current, le.current = null, V();
      try {
        if (Q) {
          var Se = function() {
            throw Error();
          };
          if (Object.defineProperty(Se.prototype, "props", {
            set: function() {
              throw Error();
            }
          }), typeof Reflect == "object" && Reflect.construct) {
            try {
              Reflect.construct(Se, []);
            } catch (xt) {
              ge = xt;
            }
            Reflect.construct(F, [], Se);
          } else {
            try {
              Se.call();
            } catch (xt) {
              ge = xt;
            }
            F.call(Se.prototype);
          }
        } else {
          try {
            throw Error();
          } catch (xt) {
            ge = xt;
          }
          F();
        }
      } catch (xt) {
        if (xt && ge && typeof xt.stack == "string") {
          for (var Ce = xt.stack.split(`
`), Xe = ge.stack.split(`
`), Pe = Ce.length - 1, Ue = Xe.length - 1; Pe >= 1 && Ue >= 0 && Ce[Pe] !== Xe[Ue]; )
            Ue--;
          for (; Pe >= 1 && Ue >= 0; Pe--, Ue--)
            if (Ce[Pe] !== Xe[Ue]) {
              if (Pe !== 1 || Ue !== 1)
                do
                  if (Pe--, Ue--, Ue < 0 || Ce[Pe] !== Xe[Ue]) {
                    var rt = `
` + Ce[Pe].replace(" at new ", " at ");
                    return F.displayName && rt.includes("<anonymous>") && (rt = rt.replace("<anonymous>", F.displayName)), typeof F == "function" && J.set(F, rt), rt;
                  }
                while (Pe >= 1 && Ue >= 0);
              break;
            }
        }
      } finally {
        ne = !1, le.current = Le, X(), Error.prepareStackTrace = Ee;
      }
      var Zt = F ? F.displayName || F.name : "", Yn = Zt ? se(Zt) : "";
      return typeof F == "function" && J.set(F, Yn), Yn;
    }
    function we(F, Q, ae) {
      return fe(F, !1);
    }
    function ve(F) {
      var Q = F.prototype;
      return !!(Q && Q.isReactComponent);
    }
    function _e(F, Q, ae) {
      if (F == null)
        return "";
      if (typeof F == "function")
        return fe(F, ve(F));
      if (typeof F == "string")
        return se(F);
      switch (F) {
        case m:
          return se("Suspense");
        case c:
          return se("SuspenseList");
      }
      if (typeof F == "object")
        switch (F.$$typeof) {
          case s:
            return we(F.render);
          case g:
            return _e(F.type, Q, ae);
          case x: {
            var ge = F, Ee = ge._payload, Le = ge._init;
            try {
              return _e(Le(Ee), Q, ae);
            } catch {
            }
          }
        }
      return "";
    }
    var Me = Object.prototype.hasOwnProperty, $e = {}, xe = o.ReactDebugCurrentFrame;
    function Ae(F) {
      if (F) {
        var Q = F._owner, ae = _e(F.type, F._source, Q ? Q.type : null);
        xe.setExtraStackFrame(ae);
      } else
        xe.setExtraStackFrame(null);
    }
    function Be(F, Q, ae, ge, Ee) {
      {
        var Le = Function.call.bind(Me);
        for (var Se in F)
          if (Le(F, Se)) {
            var Ce = void 0;
            try {
              if (typeof F[Se] != "function") {
                var Xe = Error((ge || "React class") + ": " + ae + " type `" + Se + "` is invalid; it must be a function, usually from the `prop-types` package, but received `" + typeof F[Se] + "`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");
                throw Xe.name = "Invariant Violation", Xe;
              }
              Ce = F[Se](Q, Se, ge, ae, null, "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");
            } catch (Pe) {
              Ce = Pe;
            }
            Ce && !(Ce instanceof Error) && (Ae(Ee), d("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).", ge || "React class", ae, Se, typeof Ce), Ae(null)), Ce instanceof Error && !(Ce.message in $e) && ($e[Ce.message] = !0, Ae(Ee), d("Failed %s type: %s", ae, Ce.message), Ae(null));
          }
      }
    }
    var wt = Array.isArray;
    function Ye(F) {
      return wt(F);
    }
    function dt(F) {
      {
        var Q = typeof Symbol == "function" && Symbol.toStringTag, ae = Q && F[Symbol.toStringTag] || F.constructor.name || "Object";
        return ae;
      }
    }
    function Ge(F) {
      try {
        return Te(F), !1;
      } catch {
        return !0;
      }
    }
    function Te(F) {
      return "" + F;
    }
    function ei(F) {
      if (Ge(F))
        return d("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.", dt(F)), Te(F);
    }
    var nt = o.ReactCurrentOwner, et = {
      key: !0,
      ref: !0,
      __self: !0,
      __source: !0
    }, Oe, je, We;
    We = {};
    function Ut(F) {
      if (Me.call(F, "ref")) {
        var Q = Object.getOwnPropertyDescriptor(F, "ref").get;
        if (Q && Q.isReactWarning)
          return !1;
      }
      return F.ref !== void 0;
    }
    function qt(F) {
      if (Me.call(F, "key")) {
        var Q = Object.getOwnPropertyDescriptor(F, "key").get;
        if (Q && Q.isReactWarning)
          return !1;
      }
      return F.key !== void 0;
    }
    function mt(F, Q) {
      if (typeof F.ref == "string" && nt.current && Q && nt.current.stateNode !== Q) {
        var ae = O(nt.current.type);
        We[ae] || (d('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref', O(nt.current.type), F.ref), We[ae] = !0);
      }
    }
    function ti(F, Q) {
      {
        var ae = function() {
          Oe || (Oe = !0, d("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)", Q));
        };
        ae.isReactWarning = !0, Object.defineProperty(F, "key", {
          get: ae,
          configurable: !0
        });
      }
    }
    function rs(F, Q) {
      {
        var ae = function() {
          je || (je = !0, d("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)", Q));
        };
        ae.isReactWarning = !0, Object.defineProperty(F, "ref", {
          get: ae,
          configurable: !0
        });
      }
    }
    var as = function(F, Q, ae, ge, Ee, Le, Se) {
      var Ce = {
        // This tag allows us to uniquely identify this as a React Element
        $$typeof: e,
        // Built-in properties that belong on the element
        type: F,
        key: Q,
        ref: ae,
        props: Se,
        // Record the component responsible for creating this element.
        _owner: Le
      };
      return Ce._store = {}, Object.defineProperty(Ce._store, "validated", {
        configurable: !1,
        enumerable: !1,
        writable: !0,
        value: !1
      }), Object.defineProperty(Ce, "_self", {
        configurable: !1,
        enumerable: !1,
        writable: !1,
        value: ge
      }), Object.defineProperty(Ce, "_source", {
        configurable: !1,
        enumerable: !1,
        writable: !1,
        value: Ee
      }), Object.freeze && (Object.freeze(Ce.props), Object.freeze(Ce)), Ce;
    };
    function os(F, Q, ae, ge, Ee) {
      {
        var Le, Se = {}, Ce = null, Xe = null;
        ae !== void 0 && (ei(ae), Ce = "" + ae), qt(Q) && (ei(Q.key), Ce = "" + Q.key), Ut(Q) && (Xe = Q.ref, mt(Q, Ee));
        for (Le in Q)
          Me.call(Q, Le) && !et.hasOwnProperty(Le) && (Se[Le] = Q[Le]);
        if (F && F.defaultProps) {
          var Pe = F.defaultProps;
          for (Le in Pe)
            Se[Le] === void 0 && (Se[Le] = Pe[Le]);
        }
        if (Ce || Xe) {
          var Ue = typeof F == "function" ? F.displayName || F.name || "Unknown" : F;
          Ce && ti(Se, Ue), Xe && rs(Se, Ue);
        }
        return as(F, Ce, Xe, Ee, ge, nt.current, Se);
      }
    }
    var Fi = o.ReactCurrentOwner, Vn = o.ReactDebugCurrentFrame;
    function Wt(F) {
      if (F) {
        var Q = F._owner, ae = _e(F.type, F._source, Q ? Q.type : null);
        Vn.setExtraStackFrame(ae);
      } else
        Vn.setExtraStackFrame(null);
    }
    var Pi;
    Pi = !1;
    function Vi(F) {
      return typeof F == "object" && F !== null && F.$$typeof === e;
    }
    function Un() {
      {
        if (Fi.current) {
          var F = O(Fi.current.type);
          if (F)
            return `

Check the render method of \`` + F + "`.";
        }
        return "";
      }
    }
    function us(F) {
      {
        if (F !== void 0) {
          var Q = F.fileName.replace(/^.*[\\\/]/, ""), ae = F.lineNumber;
          return `

Check your code at ` + Q + ":" + ae + ".";
        }
        return "";
      }
    }
    var qn = {};
    function cs(F) {
      {
        var Q = Un();
        if (!Q) {
          var ae = typeof F == "string" ? F : F.displayName || F.name;
          ae && (Q = `

Check the top-level render call using <` + ae + ">.");
        }
        return Q;
      }
    }
    function Wn(F, Q) {
      {
        if (!F._store || F._store.validated || F.key != null)
          return;
        F._store.validated = !0;
        var ae = cs(Q);
        if (qn[ae])
          return;
        qn[ae] = !0;
        var ge = "";
        F && F._owner && F._owner !== Fi.current && (ge = " It was passed a child from " + O(F._owner.type) + "."), Wt(F), d('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.', ae, ge), Wt(null);
      }
    }
    function Zn(F, Q) {
      {
        if (typeof F != "object")
          return;
        if (Ye(F))
          for (var ae = 0; ae < F.length; ae++) {
            var ge = F[ae];
            Vi(ge) && Wn(ge, Q);
          }
        else if (Vi(F))
          F._store && (F._store.validated = !0);
        else if (F) {
          var Ee = a(F);
          if (typeof Ee == "function" && Ee !== F.entries)
            for (var Le = Ee.call(F), Se; !(Se = Le.next()).done; )
              Vi(Se.value) && Wn(Se.value, Q);
        }
      }
    }
    function hs(F) {
      {
        var Q = F.type;
        if (Q == null || typeof Q == "string")
          return;
        var ae;
        if (typeof Q == "function")
          ae = Q.propTypes;
        else if (typeof Q == "object" && (Q.$$typeof === s || // Note: Memo only checks outer props here.
        // Inner props are checked in the reconciler.
        Q.$$typeof === g))
          ae = Q.propTypes;
        else
          return;
        if (ae) {
          var ge = O(Q);
          Be(ae, F.props, "prop", ge, F);
        } else if (Q.PropTypes !== void 0 && !Pi) {
          Pi = !0;
          var Ee = O(Q);
          d("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?", Ee || "Unknown");
        }
        typeof Q.getDefaultProps == "function" && !Q.getDefaultProps.isReactClassApproved && d("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.");
      }
    }
    function ds(F) {
      {
        for (var Q = Object.keys(F.props), ae = 0; ae < Q.length; ae++) {
          var ge = Q[ae];
          if (ge !== "children" && ge !== "key") {
            Wt(F), d("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.", ge), Wt(null);
            break;
          }
        }
        F.ref !== null && (Wt(F), d("Invalid attribute `ref` supplied to `React.Fragment`."), Wt(null));
      }
    }
    function $n(F, Q, ae, ge, Ee, Le) {
      {
        var Se = z(F);
        if (!Se) {
          var Ce = "";
          (F === void 0 || typeof F == "object" && F !== null && Object.keys(F).length === 0) && (Ce += " You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");
          var Xe = us(Ee);
          Xe ? Ce += Xe : Ce += Un();
          var Pe;
          F === null ? Pe = "null" : Ye(F) ? Pe = "array" : F !== void 0 && F.$$typeof === e ? (Pe = "<" + (O(F.type) || "Unknown") + " />", Ce = " Did you accidentally export a JSX literal instead of a component?") : Pe = typeof F, d("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s", Pe, Ce);
        }
        var Ue = os(F, Q, ae, Ee, Le);
        if (Ue == null)
          return Ue;
        if (Se) {
          var rt = Q.children;
          if (rt !== void 0)
            if (ge)
              if (Ye(rt)) {
                for (var Zt = 0; Zt < rt.length; Zt++)
                  Zn(rt[Zt], F);
                Object.freeze && Object.freeze(rt);
              } else
                d("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");
            else
              Zn(rt, F);
        }
        return F === n ? ds(Ue) : hs(Ue), Ue;
      }
    }
    function fs(F, Q, ae) {
      return $n(F, Q, ae, !0);
    }
    function ms(F, Q, ae) {
      return $n(F, Q, ae, !1);
    }
    var ps = ms, gs = fs;
    ni.Fragment = n, ni.jsx = ps, ni.jsxs = gs;
  }()), ni;
}
process.env.NODE_ENV === "production" ? nn.exports = bs() : nn.exports = ys();
var pi = nn.exports;
class lt {
  // The + prefix indicates that these fields aren't writeable
  // Lexer holding the input string.
  // Start offset, zero-based inclusive.
  // End offset, zero-based exclusive.
  constructor(e, i, n) {
    this.lexer = void 0, this.start = void 0, this.end = void 0, this.lexer = e, this.start = i, this.end = n;
  }
  /**
   * Merges two `SourceLocation`s from location providers, given they are
   * provided in order of appearance.
   * - Returns the first one's location if only the first is provided.
   * - Returns a merged range of the first and the last if both are provided
   *   and their lexers match.
   * - Otherwise, returns null.
   */
  static range(e, i) {
    return i ? !e || !e.loc || !i.loc || e.loc.lexer !== i.loc.lexer ? null : new lt(e.loc.lexer, e.loc.start, i.loc.end) : e && e.loc;
  }
}
class vt {
  // don't expand the token
  // used in \noexpand
  constructor(e, i) {
    this.text = void 0, this.loc = void 0, this.noexpand = void 0, this.treatAsRelax = void 0, this.text = e, this.loc = i;
  }
  /**
   * Given a pair of tokens (this and endToken), compute a `Token` encompassing
   * the whole input range enclosed by these two.
   */
  range(e, i) {
    return new vt(i, lt.range(this, e));
  }
}
class ie {
  // Error start position based on passed-in Token or ParseNode.
  // Length of affected text based on passed-in Token or ParseNode.
  // The underlying error message without any context added.
  constructor(e, i) {
    this.name = void 0, this.position = void 0, this.length = void 0, this.rawMessage = void 0;
    var n = "KaTeX parse error: " + e, l, r, u = i && i.loc;
    if (u && u.start <= u.end) {
      var h = u.lexer.input;
      l = u.start, r = u.end, l === h.length ? n += " at end of input: " : n += " at position " + (l + 1) + ": ";
      var s = h.slice(l, r).replace(/[^]/g, "$&̲"), m;
      l > 15 ? m = "…" + h.slice(l - 15, l) : m = h.slice(0, l);
      var c;
      r + 15 < h.length ? c = h.slice(r, r + 15) + "…" : c = h.slice(r), n += m + s + c;
    }
    var g = new Error(n);
    return g.name = "ParseError", g.__proto__ = ie.prototype, g.position = l, l != null && r != null && (g.length = r - l), g.rawMessage = e, g;
  }
}
ie.prototype.__proto__ = Error.prototype;
var _s = function(e, i) {
  return e.indexOf(i) !== -1;
}, ws = function(e, i) {
  return e === void 0 ? i : e;
}, xs = /([A-Z])/g, Cs = function(e) {
  return e.replace(xs, "-$1").toLowerCase();
}, Ss = {
  "&": "&amp;",
  ">": "&gt;",
  "<": "&lt;",
  '"': "&quot;",
  "'": "&#x27;"
}, ks = /[&><"']/g;
function Ts(t) {
  return String(t).replace(ks, (e) => Ss[e]);
}
var Hl = function t(e) {
  return e.type === "ordgroup" || e.type === "color" ? e.body.length === 1 ? t(e.body[0]) : e : e.type === "font" ? t(e.body) : e;
}, Es = function(e) {
  var i = Hl(e);
  return i.type === "mathord" || i.type === "textord" || i.type === "atom";
}, Ls = function(e) {
  if (!e)
    throw new Error("Expected non-null, but got " + String(e));
  return e;
}, zs = function(e) {
  var i = /^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(e);
  return i != null ? i[1] : "_relative";
}, pe = {
  contains: _s,
  deflt: ws,
  escape: Ts,
  hyphenate: Cs,
  getBaseElem: Hl,
  isCharacterBox: Es,
  protocolFromUrl: zs
}, ki = {
  displayMode: {
    type: "boolean",
    description: "Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",
    cli: "-d, --display-mode"
  },
  output: {
    type: {
      enum: ["htmlAndMathml", "html", "mathml"]
    },
    description: "Determines the markup language of the output.",
    cli: "-F, --format <type>"
  },
  leqno: {
    type: "boolean",
    description: "Render display math in leqno style (left-justified tags)."
  },
  fleqn: {
    type: "boolean",
    description: "Render display math flush left."
  },
  throwOnError: {
    type: "boolean",
    default: !0,
    cli: "-t, --no-throw-on-error",
    cliDescription: "Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."
  },
  errorColor: {
    type: "string",
    default: "#cc0000",
    cli: "-c, --error-color <color>",
    cliDescription: "A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",
    cliProcessor: (t) => "#" + t
  },
  macros: {
    type: "object",
    cli: "-m, --macro <def>",
    cliDescription: "Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",
    cliDefault: [],
    cliProcessor: (t, e) => (e.push(t), e)
  },
  minRuleThickness: {
    type: "number",
    description: "Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",
    processor: (t) => Math.max(0, t),
    cli: "--min-rule-thickness <size>",
    cliProcessor: parseFloat
  },
  colorIsTextColor: {
    type: "boolean",
    description: "Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",
    cli: "-b, --color-is-text-color"
  },
  strict: {
    type: [{
      enum: ["warn", "ignore", "error"]
    }, "boolean", "function"],
    description: "Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",
    cli: "-S, --strict",
    cliDefault: !1
  },
  trust: {
    type: ["boolean", "function"],
    description: "Trust the input, enabling all HTML features such as \\url.",
    cli: "-T, --trust"
  },
  maxSize: {
    type: "number",
    default: 1 / 0,
    description: "If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",
    processor: (t) => Math.max(0, t),
    cli: "-s, --max-size <n>",
    cliProcessor: parseInt
  },
  maxExpand: {
    type: "number",
    default: 1e3,
    description: "Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",
    processor: (t) => Math.max(0, t),
    cli: "-e, --max-expand <n>",
    cliProcessor: (t) => t === "Infinity" ? 1 / 0 : parseInt(t)
  },
  globalGroup: {
    type: "boolean",
    cli: !1
  }
};
function Ms(t) {
  if (t.default)
    return t.default;
  var e = t.type, i = Array.isArray(e) ? e[0] : e;
  if (typeof i != "string")
    return i.enum[0];
  switch (i) {
    case "boolean":
      return !1;
    case "string":
      return "";
    case "number":
      return 0;
    case "object":
      return {};
  }
}
class gn {
  constructor(e) {
    this.displayMode = void 0, this.output = void 0, this.leqno = void 0, this.fleqn = void 0, this.throwOnError = void 0, this.errorColor = void 0, this.macros = void 0, this.minRuleThickness = void 0, this.colorIsTextColor = void 0, this.strict = void 0, this.trust = void 0, this.maxSize = void 0, this.maxExpand = void 0, this.globalGroup = void 0, e = e || {};
    for (var i in ki)
      if (ki.hasOwnProperty(i)) {
        var n = ki[i];
        this[i] = e[i] !== void 0 ? n.processor ? n.processor(e[i]) : e[i] : Ms(n);
      }
  }
  /**
   * Report nonstrict (non-LaTeX-compatible) input.
   * Can safely not be called if `this.strict` is false in JavaScript.
   */
  reportNonstrict(e, i, n) {
    var l = this.strict;
    if (typeof l == "function" && (l = l(e, i, n)), !(!l || l === "ignore")) {
      if (l === !0 || l === "error")
        throw new ie("LaTeX-incompatible input and strict mode is set to 'error': " + (i + " [" + e + "]"), n);
      l === "warn" ? typeof console < "u" && console.warn("LaTeX-incompatible input and strict mode is set to 'warn': " + (i + " [" + e + "]")) : typeof console < "u" && console.warn("LaTeX-incompatible input and strict mode is set to " + ("unrecognized '" + l + "': " + i + " [" + e + "]"));
    }
  }
  /**
   * Check whether to apply strict (LaTeX-adhering) behavior for unusual
   * input (like `\\`).  Unlike `nonstrict`, will not throw an error;
   * instead, "error" translates to a return value of `true`, while "ignore"
   * translates to a return value of `false`.  May still print a warning:
   * "warn" prints a warning and returns `false`.
   * This is for the second category of `errorCode`s listed in the README.
   */
  useStrictBehavior(e, i, n) {
    var l = this.strict;
    if (typeof l == "function")
      try {
        l = l(e, i, n);
      } catch {
        l = "error";
      }
    return !l || l === "ignore" ? !1 : l === !0 || l === "error" ? !0 : l === "warn" ? (typeof console < "u" && console.warn("LaTeX-incompatible input and strict mode is set to 'warn': " + (i + " [" + e + "]")), !1) : (typeof console < "u" && console.warn("LaTeX-incompatible input and strict mode is set to " + ("unrecognized '" + l + "': " + i + " [" + e + "]")), !1);
  }
  /**
   * Check whether to test potentially dangerous input, and return
   * `true` (trusted) or `false` (untrusted).  The sole argument `context`
   * should be an object with `command` field specifying the relevant LaTeX
   * command (as a string starting with `\`), and any other arguments, etc.
   * If `context` has a `url` field, a `protocol` field will automatically
   * get added by this function (changing the specified object).
   */
  isTrusted(e) {
    e.url && !e.protocol && (e.protocol = pe.protocolFromUrl(e.url));
    var i = typeof this.trust == "function" ? this.trust(e) : this.trust;
    return !!i;
  }
}
class At {
  constructor(e, i, n) {
    this.id = void 0, this.size = void 0, this.cramped = void 0, this.id = e, this.size = i, this.cramped = n;
  }
  /**
   * Get the style of a superscript given a base in the current style.
   */
  sup() {
    return pt[As[this.id]];
  }
  /**
   * Get the style of a subscript given a base in the current style.
   */
  sub() {
    return pt[Bs[this.id]];
  }
  /**
   * Get the style of a fraction numerator given the fraction in the current
   * style.
   */
  fracNum() {
    return pt[Ns[this.id]];
  }
  /**
   * Get the style of a fraction denominator given the fraction in the current
   * style.
   */
  fracDen() {
    return pt[Rs[this.id]];
  }
  /**
   * Get the cramped version of a style (in particular, cramping a cramped style
   * doesn't change the style).
   */
  cramp() {
    return pt[Ds[this.id]];
  }
  /**
   * Get a text or display version of this style.
   */
  text() {
    return pt[Hs[this.id]];
  }
  /**
   * Return true if this style is tightly spaced (scriptstyle/scriptscriptstyle)
   */
  isTight() {
    return this.size >= 2;
  }
}
var vn = 0, Ei = 1, jt = 2, kt = 3, oi = 4, ut = 5, Gt = 6, Je = 7, pt = [new At(vn, 0, !1), new At(Ei, 0, !0), new At(jt, 1, !1), new At(kt, 1, !0), new At(oi, 2, !1), new At(ut, 2, !0), new At(Gt, 3, !1), new At(Je, 3, !0)], As = [oi, ut, oi, ut, Gt, Je, Gt, Je], Bs = [ut, ut, ut, ut, Je, Je, Je, Je], Ns = [jt, kt, oi, ut, Gt, Je, Gt, Je], Rs = [kt, kt, ut, ut, Je, Je, Je, Je], Ds = [Ei, Ei, kt, kt, ut, ut, Je, Je], Hs = [vn, Ei, jt, kt, jt, kt, jt, kt], de = {
  DISPLAY: pt[vn],
  TEXT: pt[jt],
  SCRIPT: pt[oi],
  SCRIPTSCRIPT: pt[Gt]
}, ln = [{
  // Latin characters beyond the Latin-1 characters we have metrics for.
  // Needed for Czech, Hungarian and Turkish text, for example.
  name: "latin",
  blocks: [
    [256, 591],
    // Latin Extended-A and Latin Extended-B
    [768, 879]
    // Combining Diacritical marks
  ]
}, {
  // The Cyrillic script used by Russian and related languages.
  // A Cyrillic subset used to be supported as explicitly defined
  // symbols in symbols.js
  name: "cyrillic",
  blocks: [[1024, 1279]]
}, {
  // Armenian
  name: "armenian",
  blocks: [[1328, 1423]]
}, {
  // The Brahmic scripts of South and Southeast Asia
  // Devanagari (0900–097F)
  // Bengali (0980–09FF)
  // Gurmukhi (0A00–0A7F)
  // Gujarati (0A80–0AFF)
  // Oriya (0B00–0B7F)
  // Tamil (0B80–0BFF)
  // Telugu (0C00–0C7F)
  // Kannada (0C80–0CFF)
  // Malayalam (0D00–0D7F)
  // Sinhala (0D80–0DFF)
  // Thai (0E00–0E7F)
  // Lao (0E80–0EFF)
  // Tibetan (0F00–0FFF)
  // Myanmar (1000–109F)
  name: "brahmic",
  blocks: [[2304, 4255]]
}, {
  name: "georgian",
  blocks: [[4256, 4351]]
}, {
  // Chinese and Japanese.
  // The "k" in cjk is for Korean, but we've separated Korean out
  name: "cjk",
  blocks: [
    [12288, 12543],
    // CJK symbols and punctuation, Hiragana, Katakana
    [19968, 40879],
    // CJK ideograms
    [65280, 65376]
    // Fullwidth punctuation
    // TODO: add halfwidth Katakana and Romanji glyphs
  ]
}, {
  // Korean
  name: "hangul",
  blocks: [[44032, 55215]]
}];
function Is(t) {
  for (var e = 0; e < ln.length; e++)
    for (var i = ln[e], n = 0; n < i.blocks.length; n++) {
      var l = i.blocks[n];
      if (t >= l[0] && t <= l[1])
        return i.name;
    }
  return null;
}
var Ti = [];
ln.forEach((t) => t.blocks.forEach((e) => Ti.push(...e)));
function Il(t) {
  for (var e = 0; e < Ti.length; e += 2)
    if (t >= Ti[e] && t <= Ti[e + 1])
      return !0;
  return !1;
}
var $t = 80, Os = function(e, i) {
  return "M95," + (622 + e + i) + `
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l` + e / 2.075 + " -" + e + `
c5.3,-9.3,12,-14,20,-14
H400000v` + (40 + e) + `H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M` + (834 + e) + " " + i + "h400000v" + (40 + e) + "h-400000z";
}, Fs = function(e, i) {
  return "M263," + (601 + e + i) + `c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l` + e / 2.084 + " -" + e + `
c4.7,-7.3,11,-11,19,-11
H40000v` + (40 + e) + `H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M` + (1001 + e) + " " + i + "h400000v" + (40 + e) + "h-400000z";
}, Ps = function(e, i) {
  return "M983 " + (10 + e + i) + `
l` + e / 3.13 + " -" + e + `
c4,-6.7,10,-10,18,-10 H400000v` + (40 + e) + `
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M` + (1001 + e) + " " + i + "h400000v" + (40 + e) + "h-400000z";
}, Vs = function(e, i) {
  return "M424," + (2398 + e + i) + `
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l` + e / 4.223 + " -" + e + `c4,-6.7,10,-10,18,-10 H400000
v` + (40 + e) + `H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M` + (1001 + e) + " " + i + `
h400000v` + (40 + e) + "h-400000z";
}, Us = function(e, i) {
  return "M473," + (2713 + e + i) + `
c339.3,-1799.3,509.3,-2700,510,-2702 l` + e / 5.298 + " -" + e + `
c3.3,-7.3,9.3,-11,18,-11 H400000v` + (40 + e) + `H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM` + (1001 + e) + " " + i + "h400000v" + (40 + e) + "H1017.7z";
}, qs = function(e) {
  var i = e / 2;
  return "M400000 " + e + " H0 L" + i + " 0 l65 45 L145 " + (e - 80) + " H400000z";
}, Ws = function(e, i, n) {
  var l = n - 54 - i - e;
  return "M702 " + (e + i) + "H400000" + (40 + e) + `
H742v` + l + `l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 ` + i + "H400000v" + (40 + e) + "H742z";
}, Zs = function(e, i, n) {
  i = 1e3 * i;
  var l = "";
  switch (e) {
    case "sqrtMain":
      l = Os(i, $t);
      break;
    case "sqrtSize1":
      l = Fs(i, $t);
      break;
    case "sqrtSize2":
      l = Ps(i, $t);
      break;
    case "sqrtSize3":
      l = Vs(i, $t);
      break;
    case "sqrtSize4":
      l = Us(i, $t);
      break;
    case "sqrtTall":
      l = Ws(i, $t, n);
  }
  return l;
}, $s = function(e, i) {
  switch (e) {
    case "⎜":
      return "M291 0 H417 V" + i + " H291z M291 0 H417 V" + i + " H291z";
    case "∣":
      return "M145 0 H188 V" + i + " H145z M145 0 H188 V" + i + " H145z";
    case "∥":
      return "M145 0 H188 V" + i + " H145z M145 0 H188 V" + i + " H145z" + ("M367 0 H410 V" + i + " H367z M367 0 H410 V" + i + " H367z");
    case "⎟":
      return "M457 0 H583 V" + i + " H457z M457 0 H583 V" + i + " H457z";
    case "⎢":
      return "M319 0 H403 V" + i + " H319z M319 0 H403 V" + i + " H319z";
    case "⎥":
      return "M263 0 H347 V" + i + " H263z M263 0 H347 V" + i + " H263z";
    case "⎪":
      return "M384 0 H504 V" + i + " H384z M384 0 H504 V" + i + " H384z";
    case "⏐":
      return "M312 0 H355 V" + i + " H312z M312 0 H355 V" + i + " H312z";
    case "‖":
      return "M257 0 H300 V" + i + " H257z M257 0 H300 V" + i + " H257z" + ("M478 0 H521 V" + i + " H478z M478 0 H521 V" + i + " H478z");
    default:
      return "";
  }
}, Xn = {
  // The doubleleftarrow geometry is from glyph U+21D0 in the font KaTeX Main
  doubleleftarrow: `M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,
  // doublerightarrow is from glyph U+21D2 in font KaTeX Main
  doublerightarrow: `M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,
  // leftarrow is from glyph U+2190 in font KaTeX Main
  leftarrow: `M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,
  // overbrace is from glyphs U+23A9/23A8/23A7 in font KaTeX_Size4-Regular
  leftbrace: `M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,
  leftbraceunder: `M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,
  // overgroup is from the MnSymbol package (public domain)
  leftgroup: `M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,
  leftgroupunder: `M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,
  // Harpoons are from glyph U+21BD in font KaTeX Main
  leftharpoon: `M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,
  leftharpoonplus: `M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,
  leftharpoondown: `M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,
  leftharpoondownplus: `M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,
  // hook is from glyph U+21A9 in font KaTeX Main
  lefthook: `M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,
  leftlinesegment: `M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,
  leftmapsto: `M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,
  // tofrom is from glyph U+21C4 in font KaTeX AMS Regular
  leftToFrom: `M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,
  longequal: `M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,
  midbrace: `M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,
  midbraceunder: `M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,
  oiintSize1: `M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,
  oiintSize2: `M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,
  oiiintSize1: `M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,
  oiiintSize2: `M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,
  rightarrow: `M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,
  rightbrace: `M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,
  rightbraceunder: `M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,
  rightgroup: `M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,
  rightgroupunder: `M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,
  rightharpoon: `M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,
  rightharpoonplus: `M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,
  rightharpoondown: `M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,
  rightharpoondownplus: `M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,
  righthook: `M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,
  rightlinesegment: `M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,
  rightToFrom: `M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,
  // twoheadleftarrow is from glyph U+219E in font KaTeX AMS Regular
  twoheadleftarrow: `M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,
  twoheadrightarrow: `M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,
  // tilde1 is a modified version of a glyph from the MnSymbol package
  tilde1: `M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,
  // ditto tilde2, tilde3, & tilde4
  tilde2: `M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,
  tilde3: `M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,
  tilde4: `M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,
  // vec is from glyph U+20D7 in font KaTeX Main
  vec: `M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,
  // widehat1 is a modified version of a glyph from the MnSymbol package
  widehat1: `M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,
  // ditto widehat2, widehat3, & widehat4
  widehat2: `M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,
  widehat3: `M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,
  widehat4: `M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,
  // widecheck paths are all inverted versions of widehat
  widecheck1: `M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,
  widecheck2: `M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,
  widecheck3: `M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,
  widecheck4: `M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,
  // The next ten paths support reaction arrows from the mhchem package.
  // Arrows for \ce{<-->} are offset from xAxis by 0.22ex, per mhchem in LaTeX
  // baraboveleftarrow is mostly from glyph U+2190 in font KaTeX Main
  baraboveleftarrow: `M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,
  // rightarrowabovebar is mostly from glyph U+2192, KaTeX Main
  rightarrowabovebar: `M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,
  // The short left harpoon has 0.5em (i.e. 500 units) kern on the left end.
  // Ref from mhchem.sty: \rlap{\raisebox{-.22ex}{$\kern0.5em
  baraboveshortleftharpoon: `M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,
  rightharpoonaboveshortbar: `M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,
  shortbaraboveleftharpoon: `M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,
  shortrightharpoonabovebar: `M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`
}, Ys = function(e, i) {
  switch (e) {
    case "lbrack":
      return "M403 1759 V84 H666 V0 H319 V1759 v" + i + ` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v` + i + " v1759 h84z";
    case "rbrack":
      return "M347 1759 V0 H0 V84 H263 V1759 v" + i + ` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v` + i + " v1759 h84z";
    case "vert":
      return "M145 15 v585 v" + i + ` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v` + -i + ` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v` + i + " v585 h43z";
    case "doublevert":
      return "M145 15 v585 v" + i + ` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v` + -i + ` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v` + i + ` v585 h43z
M367 15 v585 v` + i + ` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v` + -i + ` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v` + i + " v585 h43z";
    case "lfloor":
      return "M319 602 V0 H403 V602 v" + i + ` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v` + i + " v1715 H319z";
    case "rfloor":
      return "M319 602 V0 H403 V602 v" + i + ` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v` + i + " v1715 H319z";
    case "lceil":
      return "M403 1759 V84 H666 V0 H319 V1759 v" + i + ` v602 h84z
M403 1759 V0 H319 V1759 v` + i + " v602 h84z";
    case "rceil":
      return "M347 1759 V0 H0 V84 H263 V1759 v" + i + ` v602 h84z
M347 1759 V0 h-84 V1759 v` + i + " v602 h84z";
    case "lparen":
      return `M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,` + (i + 84) + `c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-` + (i + 92) + `c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;
    case "rparen":
      return `M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,` + (i + 9) + `
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-` + (i + 144) + `c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;
    default:
      throw new Error("Unknown stretchy delimiter.");
  }
};
class hi {
  // HtmlDomNode
  // Never used; needed for satisfying interface.
  constructor(e) {
    this.children = void 0, this.classes = void 0, this.height = void 0, this.depth = void 0, this.maxFontSize = void 0, this.style = void 0, this.children = e, this.classes = [], this.height = 0, this.depth = 0, this.maxFontSize = 0, this.style = {};
  }
  hasClass(e) {
    return pe.contains(this.classes, e);
  }
  /** Convert the fragment into a node. */
  toNode() {
    for (var e = document.createDocumentFragment(), i = 0; i < this.children.length; i++)
      e.appendChild(this.children[i].toNode());
    return e;
  }
  /** Convert the fragment into HTML markup. */
  toMarkup() {
    for (var e = "", i = 0; i < this.children.length; i++)
      e += this.children[i].toMarkup();
    return e;
  }
  /**
   * Converts the math node into a string, similar to innerText. Applies to
   * MathDomNode's only.
   */
  toText() {
    var e = (i) => i.toText();
    return this.children.map(e).join("");
  }
}
var gt = {
  "AMS-Regular": {
    32: [0, 0, 0, 0, 0.25],
    65: [0, 0.68889, 0, 0, 0.72222],
    66: [0, 0.68889, 0, 0, 0.66667],
    67: [0, 0.68889, 0, 0, 0.72222],
    68: [0, 0.68889, 0, 0, 0.72222],
    69: [0, 0.68889, 0, 0, 0.66667],
    70: [0, 0.68889, 0, 0, 0.61111],
    71: [0, 0.68889, 0, 0, 0.77778],
    72: [0, 0.68889, 0, 0, 0.77778],
    73: [0, 0.68889, 0, 0, 0.38889],
    74: [0.16667, 0.68889, 0, 0, 0.5],
    75: [0, 0.68889, 0, 0, 0.77778],
    76: [0, 0.68889, 0, 0, 0.66667],
    77: [0, 0.68889, 0, 0, 0.94445],
    78: [0, 0.68889, 0, 0, 0.72222],
    79: [0.16667, 0.68889, 0, 0, 0.77778],
    80: [0, 0.68889, 0, 0, 0.61111],
    81: [0.16667, 0.68889, 0, 0, 0.77778],
    82: [0, 0.68889, 0, 0, 0.72222],
    83: [0, 0.68889, 0, 0, 0.55556],
    84: [0, 0.68889, 0, 0, 0.66667],
    85: [0, 0.68889, 0, 0, 0.72222],
    86: [0, 0.68889, 0, 0, 0.72222],
    87: [0, 0.68889, 0, 0, 1],
    88: [0, 0.68889, 0, 0, 0.72222],
    89: [0, 0.68889, 0, 0, 0.72222],
    90: [0, 0.68889, 0, 0, 0.66667],
    107: [0, 0.68889, 0, 0, 0.55556],
    160: [0, 0, 0, 0, 0.25],
    165: [0, 0.675, 0.025, 0, 0.75],
    174: [0.15559, 0.69224, 0, 0, 0.94666],
    240: [0, 0.68889, 0, 0, 0.55556],
    295: [0, 0.68889, 0, 0, 0.54028],
    710: [0, 0.825, 0, 0, 2.33334],
    732: [0, 0.9, 0, 0, 2.33334],
    770: [0, 0.825, 0, 0, 2.33334],
    771: [0, 0.9, 0, 0, 2.33334],
    989: [0.08167, 0.58167, 0, 0, 0.77778],
    1008: [0, 0.43056, 0.04028, 0, 0.66667],
    8245: [0, 0.54986, 0, 0, 0.275],
    8463: [0, 0.68889, 0, 0, 0.54028],
    8487: [0, 0.68889, 0, 0, 0.72222],
    8498: [0, 0.68889, 0, 0, 0.55556],
    8502: [0, 0.68889, 0, 0, 0.66667],
    8503: [0, 0.68889, 0, 0, 0.44445],
    8504: [0, 0.68889, 0, 0, 0.66667],
    8513: [0, 0.68889, 0, 0, 0.63889],
    8592: [-0.03598, 0.46402, 0, 0, 0.5],
    8594: [-0.03598, 0.46402, 0, 0, 0.5],
    8602: [-0.13313, 0.36687, 0, 0, 1],
    8603: [-0.13313, 0.36687, 0, 0, 1],
    8606: [0.01354, 0.52239, 0, 0, 1],
    8608: [0.01354, 0.52239, 0, 0, 1],
    8610: [0.01354, 0.52239, 0, 0, 1.11111],
    8611: [0.01354, 0.52239, 0, 0, 1.11111],
    8619: [0, 0.54986, 0, 0, 1],
    8620: [0, 0.54986, 0, 0, 1],
    8621: [-0.13313, 0.37788, 0, 0, 1.38889],
    8622: [-0.13313, 0.36687, 0, 0, 1],
    8624: [0, 0.69224, 0, 0, 0.5],
    8625: [0, 0.69224, 0, 0, 0.5],
    8630: [0, 0.43056, 0, 0, 1],
    8631: [0, 0.43056, 0, 0, 1],
    8634: [0.08198, 0.58198, 0, 0, 0.77778],
    8635: [0.08198, 0.58198, 0, 0, 0.77778],
    8638: [0.19444, 0.69224, 0, 0, 0.41667],
    8639: [0.19444, 0.69224, 0, 0, 0.41667],
    8642: [0.19444, 0.69224, 0, 0, 0.41667],
    8643: [0.19444, 0.69224, 0, 0, 0.41667],
    8644: [0.1808, 0.675, 0, 0, 1],
    8646: [0.1808, 0.675, 0, 0, 1],
    8647: [0.1808, 0.675, 0, 0, 1],
    8648: [0.19444, 0.69224, 0, 0, 0.83334],
    8649: [0.1808, 0.675, 0, 0, 1],
    8650: [0.19444, 0.69224, 0, 0, 0.83334],
    8651: [0.01354, 0.52239, 0, 0, 1],
    8652: [0.01354, 0.52239, 0, 0, 1],
    8653: [-0.13313, 0.36687, 0, 0, 1],
    8654: [-0.13313, 0.36687, 0, 0, 1],
    8655: [-0.13313, 0.36687, 0, 0, 1],
    8666: [0.13667, 0.63667, 0, 0, 1],
    8667: [0.13667, 0.63667, 0, 0, 1],
    8669: [-0.13313, 0.37788, 0, 0, 1],
    8672: [-0.064, 0.437, 0, 0, 1.334],
    8674: [-0.064, 0.437, 0, 0, 1.334],
    8705: [0, 0.825, 0, 0, 0.5],
    8708: [0, 0.68889, 0, 0, 0.55556],
    8709: [0.08167, 0.58167, 0, 0, 0.77778],
    8717: [0, 0.43056, 0, 0, 0.42917],
    8722: [-0.03598, 0.46402, 0, 0, 0.5],
    8724: [0.08198, 0.69224, 0, 0, 0.77778],
    8726: [0.08167, 0.58167, 0, 0, 0.77778],
    8733: [0, 0.69224, 0, 0, 0.77778],
    8736: [0, 0.69224, 0, 0, 0.72222],
    8737: [0, 0.69224, 0, 0, 0.72222],
    8738: [0.03517, 0.52239, 0, 0, 0.72222],
    8739: [0.08167, 0.58167, 0, 0, 0.22222],
    8740: [0.25142, 0.74111, 0, 0, 0.27778],
    8741: [0.08167, 0.58167, 0, 0, 0.38889],
    8742: [0.25142, 0.74111, 0, 0, 0.5],
    8756: [0, 0.69224, 0, 0, 0.66667],
    8757: [0, 0.69224, 0, 0, 0.66667],
    8764: [-0.13313, 0.36687, 0, 0, 0.77778],
    8765: [-0.13313, 0.37788, 0, 0, 0.77778],
    8769: [-0.13313, 0.36687, 0, 0, 0.77778],
    8770: [-0.03625, 0.46375, 0, 0, 0.77778],
    8774: [0.30274, 0.79383, 0, 0, 0.77778],
    8776: [-0.01688, 0.48312, 0, 0, 0.77778],
    8778: [0.08167, 0.58167, 0, 0, 0.77778],
    8782: [0.06062, 0.54986, 0, 0, 0.77778],
    8783: [0.06062, 0.54986, 0, 0, 0.77778],
    8785: [0.08198, 0.58198, 0, 0, 0.77778],
    8786: [0.08198, 0.58198, 0, 0, 0.77778],
    8787: [0.08198, 0.58198, 0, 0, 0.77778],
    8790: [0, 0.69224, 0, 0, 0.77778],
    8791: [0.22958, 0.72958, 0, 0, 0.77778],
    8796: [0.08198, 0.91667, 0, 0, 0.77778],
    8806: [0.25583, 0.75583, 0, 0, 0.77778],
    8807: [0.25583, 0.75583, 0, 0, 0.77778],
    8808: [0.25142, 0.75726, 0, 0, 0.77778],
    8809: [0.25142, 0.75726, 0, 0, 0.77778],
    8812: [0.25583, 0.75583, 0, 0, 0.5],
    8814: [0.20576, 0.70576, 0, 0, 0.77778],
    8815: [0.20576, 0.70576, 0, 0, 0.77778],
    8816: [0.30274, 0.79383, 0, 0, 0.77778],
    8817: [0.30274, 0.79383, 0, 0, 0.77778],
    8818: [0.22958, 0.72958, 0, 0, 0.77778],
    8819: [0.22958, 0.72958, 0, 0, 0.77778],
    8822: [0.1808, 0.675, 0, 0, 0.77778],
    8823: [0.1808, 0.675, 0, 0, 0.77778],
    8828: [0.13667, 0.63667, 0, 0, 0.77778],
    8829: [0.13667, 0.63667, 0, 0, 0.77778],
    8830: [0.22958, 0.72958, 0, 0, 0.77778],
    8831: [0.22958, 0.72958, 0, 0, 0.77778],
    8832: [0.20576, 0.70576, 0, 0, 0.77778],
    8833: [0.20576, 0.70576, 0, 0, 0.77778],
    8840: [0.30274, 0.79383, 0, 0, 0.77778],
    8841: [0.30274, 0.79383, 0, 0, 0.77778],
    8842: [0.13597, 0.63597, 0, 0, 0.77778],
    8843: [0.13597, 0.63597, 0, 0, 0.77778],
    8847: [0.03517, 0.54986, 0, 0, 0.77778],
    8848: [0.03517, 0.54986, 0, 0, 0.77778],
    8858: [0.08198, 0.58198, 0, 0, 0.77778],
    8859: [0.08198, 0.58198, 0, 0, 0.77778],
    8861: [0.08198, 0.58198, 0, 0, 0.77778],
    8862: [0, 0.675, 0, 0, 0.77778],
    8863: [0, 0.675, 0, 0, 0.77778],
    8864: [0, 0.675, 0, 0, 0.77778],
    8865: [0, 0.675, 0, 0, 0.77778],
    8872: [0, 0.69224, 0, 0, 0.61111],
    8873: [0, 0.69224, 0, 0, 0.72222],
    8874: [0, 0.69224, 0, 0, 0.88889],
    8876: [0, 0.68889, 0, 0, 0.61111],
    8877: [0, 0.68889, 0, 0, 0.61111],
    8878: [0, 0.68889, 0, 0, 0.72222],
    8879: [0, 0.68889, 0, 0, 0.72222],
    8882: [0.03517, 0.54986, 0, 0, 0.77778],
    8883: [0.03517, 0.54986, 0, 0, 0.77778],
    8884: [0.13667, 0.63667, 0, 0, 0.77778],
    8885: [0.13667, 0.63667, 0, 0, 0.77778],
    8888: [0, 0.54986, 0, 0, 1.11111],
    8890: [0.19444, 0.43056, 0, 0, 0.55556],
    8891: [0.19444, 0.69224, 0, 0, 0.61111],
    8892: [0.19444, 0.69224, 0, 0, 0.61111],
    8901: [0, 0.54986, 0, 0, 0.27778],
    8903: [0.08167, 0.58167, 0, 0, 0.77778],
    8905: [0.08167, 0.58167, 0, 0, 0.77778],
    8906: [0.08167, 0.58167, 0, 0, 0.77778],
    8907: [0, 0.69224, 0, 0, 0.77778],
    8908: [0, 0.69224, 0, 0, 0.77778],
    8909: [-0.03598, 0.46402, 0, 0, 0.77778],
    8910: [0, 0.54986, 0, 0, 0.76042],
    8911: [0, 0.54986, 0, 0, 0.76042],
    8912: [0.03517, 0.54986, 0, 0, 0.77778],
    8913: [0.03517, 0.54986, 0, 0, 0.77778],
    8914: [0, 0.54986, 0, 0, 0.66667],
    8915: [0, 0.54986, 0, 0, 0.66667],
    8916: [0, 0.69224, 0, 0, 0.66667],
    8918: [0.0391, 0.5391, 0, 0, 0.77778],
    8919: [0.0391, 0.5391, 0, 0, 0.77778],
    8920: [0.03517, 0.54986, 0, 0, 1.33334],
    8921: [0.03517, 0.54986, 0, 0, 1.33334],
    8922: [0.38569, 0.88569, 0, 0, 0.77778],
    8923: [0.38569, 0.88569, 0, 0, 0.77778],
    8926: [0.13667, 0.63667, 0, 0, 0.77778],
    8927: [0.13667, 0.63667, 0, 0, 0.77778],
    8928: [0.30274, 0.79383, 0, 0, 0.77778],
    8929: [0.30274, 0.79383, 0, 0, 0.77778],
    8934: [0.23222, 0.74111, 0, 0, 0.77778],
    8935: [0.23222, 0.74111, 0, 0, 0.77778],
    8936: [0.23222, 0.74111, 0, 0, 0.77778],
    8937: [0.23222, 0.74111, 0, 0, 0.77778],
    8938: [0.20576, 0.70576, 0, 0, 0.77778],
    8939: [0.20576, 0.70576, 0, 0, 0.77778],
    8940: [0.30274, 0.79383, 0, 0, 0.77778],
    8941: [0.30274, 0.79383, 0, 0, 0.77778],
    8994: [0.19444, 0.69224, 0, 0, 0.77778],
    8995: [0.19444, 0.69224, 0, 0, 0.77778],
    9416: [0.15559, 0.69224, 0, 0, 0.90222],
    9484: [0, 0.69224, 0, 0, 0.5],
    9488: [0, 0.69224, 0, 0, 0.5],
    9492: [0, 0.37788, 0, 0, 0.5],
    9496: [0, 0.37788, 0, 0, 0.5],
    9585: [0.19444, 0.68889, 0, 0, 0.88889],
    9586: [0.19444, 0.74111, 0, 0, 0.88889],
    9632: [0, 0.675, 0, 0, 0.77778],
    9633: [0, 0.675, 0, 0, 0.77778],
    9650: [0, 0.54986, 0, 0, 0.72222],
    9651: [0, 0.54986, 0, 0, 0.72222],
    9654: [0.03517, 0.54986, 0, 0, 0.77778],
    9660: [0, 0.54986, 0, 0, 0.72222],
    9661: [0, 0.54986, 0, 0, 0.72222],
    9664: [0.03517, 0.54986, 0, 0, 0.77778],
    9674: [0.11111, 0.69224, 0, 0, 0.66667],
    9733: [0.19444, 0.69224, 0, 0, 0.94445],
    10003: [0, 0.69224, 0, 0, 0.83334],
    10016: [0, 0.69224, 0, 0, 0.83334],
    10731: [0.11111, 0.69224, 0, 0, 0.66667],
    10846: [0.19444, 0.75583, 0, 0, 0.61111],
    10877: [0.13667, 0.63667, 0, 0, 0.77778],
    10878: [0.13667, 0.63667, 0, 0, 0.77778],
    10885: [0.25583, 0.75583, 0, 0, 0.77778],
    10886: [0.25583, 0.75583, 0, 0, 0.77778],
    10887: [0.13597, 0.63597, 0, 0, 0.77778],
    10888: [0.13597, 0.63597, 0, 0, 0.77778],
    10889: [0.26167, 0.75726, 0, 0, 0.77778],
    10890: [0.26167, 0.75726, 0, 0, 0.77778],
    10891: [0.48256, 0.98256, 0, 0, 0.77778],
    10892: [0.48256, 0.98256, 0, 0, 0.77778],
    10901: [0.13667, 0.63667, 0, 0, 0.77778],
    10902: [0.13667, 0.63667, 0, 0, 0.77778],
    10933: [0.25142, 0.75726, 0, 0, 0.77778],
    10934: [0.25142, 0.75726, 0, 0, 0.77778],
    10935: [0.26167, 0.75726, 0, 0, 0.77778],
    10936: [0.26167, 0.75726, 0, 0, 0.77778],
    10937: [0.26167, 0.75726, 0, 0, 0.77778],
    10938: [0.26167, 0.75726, 0, 0, 0.77778],
    10949: [0.25583, 0.75583, 0, 0, 0.77778],
    10950: [0.25583, 0.75583, 0, 0, 0.77778],
    10955: [0.28481, 0.79383, 0, 0, 0.77778],
    10956: [0.28481, 0.79383, 0, 0, 0.77778],
    57350: [0.08167, 0.58167, 0, 0, 0.22222],
    57351: [0.08167, 0.58167, 0, 0, 0.38889],
    57352: [0.08167, 0.58167, 0, 0, 0.77778],
    57353: [0, 0.43056, 0.04028, 0, 0.66667],
    57356: [0.25142, 0.75726, 0, 0, 0.77778],
    57357: [0.25142, 0.75726, 0, 0, 0.77778],
    57358: [0.41951, 0.91951, 0, 0, 0.77778],
    57359: [0.30274, 0.79383, 0, 0, 0.77778],
    57360: [0.30274, 0.79383, 0, 0, 0.77778],
    57361: [0.41951, 0.91951, 0, 0, 0.77778],
    57366: [0.25142, 0.75726, 0, 0, 0.77778],
    57367: [0.25142, 0.75726, 0, 0, 0.77778],
    57368: [0.25142, 0.75726, 0, 0, 0.77778],
    57369: [0.25142, 0.75726, 0, 0, 0.77778],
    57370: [0.13597, 0.63597, 0, 0, 0.77778],
    57371: [0.13597, 0.63597, 0, 0, 0.77778]
  },
  "Caligraphic-Regular": {
    32: [0, 0, 0, 0, 0.25],
    65: [0, 0.68333, 0, 0.19445, 0.79847],
    66: [0, 0.68333, 0.03041, 0.13889, 0.65681],
    67: [0, 0.68333, 0.05834, 0.13889, 0.52653],
    68: [0, 0.68333, 0.02778, 0.08334, 0.77139],
    69: [0, 0.68333, 0.08944, 0.11111, 0.52778],
    70: [0, 0.68333, 0.09931, 0.11111, 0.71875],
    71: [0.09722, 0.68333, 0.0593, 0.11111, 0.59487],
    72: [0, 0.68333, 965e-5, 0.11111, 0.84452],
    73: [0, 0.68333, 0.07382, 0, 0.54452],
    74: [0.09722, 0.68333, 0.18472, 0.16667, 0.67778],
    75: [0, 0.68333, 0.01445, 0.05556, 0.76195],
    76: [0, 0.68333, 0, 0.13889, 0.68972],
    77: [0, 0.68333, 0, 0.13889, 1.2009],
    78: [0, 0.68333, 0.14736, 0.08334, 0.82049],
    79: [0, 0.68333, 0.02778, 0.11111, 0.79611],
    80: [0, 0.68333, 0.08222, 0.08334, 0.69556],
    81: [0.09722, 0.68333, 0, 0.11111, 0.81667],
    82: [0, 0.68333, 0, 0.08334, 0.8475],
    83: [0, 0.68333, 0.075, 0.13889, 0.60556],
    84: [0, 0.68333, 0.25417, 0, 0.54464],
    85: [0, 0.68333, 0.09931, 0.08334, 0.62583],
    86: [0, 0.68333, 0.08222, 0, 0.61278],
    87: [0, 0.68333, 0.08222, 0.08334, 0.98778],
    88: [0, 0.68333, 0.14643, 0.13889, 0.7133],
    89: [0.09722, 0.68333, 0.08222, 0.08334, 0.66834],
    90: [0, 0.68333, 0.07944, 0.13889, 0.72473],
    160: [0, 0, 0, 0, 0.25]
  },
  "Fraktur-Regular": {
    32: [0, 0, 0, 0, 0.25],
    33: [0, 0.69141, 0, 0, 0.29574],
    34: [0, 0.69141, 0, 0, 0.21471],
    38: [0, 0.69141, 0, 0, 0.73786],
    39: [0, 0.69141, 0, 0, 0.21201],
    40: [0.24982, 0.74947, 0, 0, 0.38865],
    41: [0.24982, 0.74947, 0, 0, 0.38865],
    42: [0, 0.62119, 0, 0, 0.27764],
    43: [0.08319, 0.58283, 0, 0, 0.75623],
    44: [0, 0.10803, 0, 0, 0.27764],
    45: [0.08319, 0.58283, 0, 0, 0.75623],
    46: [0, 0.10803, 0, 0, 0.27764],
    47: [0.24982, 0.74947, 0, 0, 0.50181],
    48: [0, 0.47534, 0, 0, 0.50181],
    49: [0, 0.47534, 0, 0, 0.50181],
    50: [0, 0.47534, 0, 0, 0.50181],
    51: [0.18906, 0.47534, 0, 0, 0.50181],
    52: [0.18906, 0.47534, 0, 0, 0.50181],
    53: [0.18906, 0.47534, 0, 0, 0.50181],
    54: [0, 0.69141, 0, 0, 0.50181],
    55: [0.18906, 0.47534, 0, 0, 0.50181],
    56: [0, 0.69141, 0, 0, 0.50181],
    57: [0.18906, 0.47534, 0, 0, 0.50181],
    58: [0, 0.47534, 0, 0, 0.21606],
    59: [0.12604, 0.47534, 0, 0, 0.21606],
    61: [-0.13099, 0.36866, 0, 0, 0.75623],
    63: [0, 0.69141, 0, 0, 0.36245],
    65: [0, 0.69141, 0, 0, 0.7176],
    66: [0, 0.69141, 0, 0, 0.88397],
    67: [0, 0.69141, 0, 0, 0.61254],
    68: [0, 0.69141, 0, 0, 0.83158],
    69: [0, 0.69141, 0, 0, 0.66278],
    70: [0.12604, 0.69141, 0, 0, 0.61119],
    71: [0, 0.69141, 0, 0, 0.78539],
    72: [0.06302, 0.69141, 0, 0, 0.7203],
    73: [0, 0.69141, 0, 0, 0.55448],
    74: [0.12604, 0.69141, 0, 0, 0.55231],
    75: [0, 0.69141, 0, 0, 0.66845],
    76: [0, 0.69141, 0, 0, 0.66602],
    77: [0, 0.69141, 0, 0, 1.04953],
    78: [0, 0.69141, 0, 0, 0.83212],
    79: [0, 0.69141, 0, 0, 0.82699],
    80: [0.18906, 0.69141, 0, 0, 0.82753],
    81: [0.03781, 0.69141, 0, 0, 0.82699],
    82: [0, 0.69141, 0, 0, 0.82807],
    83: [0, 0.69141, 0, 0, 0.82861],
    84: [0, 0.69141, 0, 0, 0.66899],
    85: [0, 0.69141, 0, 0, 0.64576],
    86: [0, 0.69141, 0, 0, 0.83131],
    87: [0, 0.69141, 0, 0, 1.04602],
    88: [0, 0.69141, 0, 0, 0.71922],
    89: [0.18906, 0.69141, 0, 0, 0.83293],
    90: [0.12604, 0.69141, 0, 0, 0.60201],
    91: [0.24982, 0.74947, 0, 0, 0.27764],
    93: [0.24982, 0.74947, 0, 0, 0.27764],
    94: [0, 0.69141, 0, 0, 0.49965],
    97: [0, 0.47534, 0, 0, 0.50046],
    98: [0, 0.69141, 0, 0, 0.51315],
    99: [0, 0.47534, 0, 0, 0.38946],
    100: [0, 0.62119, 0, 0, 0.49857],
    101: [0, 0.47534, 0, 0, 0.40053],
    102: [0.18906, 0.69141, 0, 0, 0.32626],
    103: [0.18906, 0.47534, 0, 0, 0.5037],
    104: [0.18906, 0.69141, 0, 0, 0.52126],
    105: [0, 0.69141, 0, 0, 0.27899],
    106: [0, 0.69141, 0, 0, 0.28088],
    107: [0, 0.69141, 0, 0, 0.38946],
    108: [0, 0.69141, 0, 0, 0.27953],
    109: [0, 0.47534, 0, 0, 0.76676],
    110: [0, 0.47534, 0, 0, 0.52666],
    111: [0, 0.47534, 0, 0, 0.48885],
    112: [0.18906, 0.52396, 0, 0, 0.50046],
    113: [0.18906, 0.47534, 0, 0, 0.48912],
    114: [0, 0.47534, 0, 0, 0.38919],
    115: [0, 0.47534, 0, 0, 0.44266],
    116: [0, 0.62119, 0, 0, 0.33301],
    117: [0, 0.47534, 0, 0, 0.5172],
    118: [0, 0.52396, 0, 0, 0.5118],
    119: [0, 0.52396, 0, 0, 0.77351],
    120: [0.18906, 0.47534, 0, 0, 0.38865],
    121: [0.18906, 0.47534, 0, 0, 0.49884],
    122: [0.18906, 0.47534, 0, 0, 0.39054],
    160: [0, 0, 0, 0, 0.25],
    8216: [0, 0.69141, 0, 0, 0.21471],
    8217: [0, 0.69141, 0, 0, 0.21471],
    58112: [0, 0.62119, 0, 0, 0.49749],
    58113: [0, 0.62119, 0, 0, 0.4983],
    58114: [0.18906, 0.69141, 0, 0, 0.33328],
    58115: [0.18906, 0.69141, 0, 0, 0.32923],
    58116: [0.18906, 0.47534, 0, 0, 0.50343],
    58117: [0, 0.69141, 0, 0, 0.33301],
    58118: [0, 0.62119, 0, 0, 0.33409],
    58119: [0, 0.47534, 0, 0, 0.50073]
  },
  "Main-Bold": {
    32: [0, 0, 0, 0, 0.25],
    33: [0, 0.69444, 0, 0, 0.35],
    34: [0, 0.69444, 0, 0, 0.60278],
    35: [0.19444, 0.69444, 0, 0, 0.95833],
    36: [0.05556, 0.75, 0, 0, 0.575],
    37: [0.05556, 0.75, 0, 0, 0.95833],
    38: [0, 0.69444, 0, 0, 0.89444],
    39: [0, 0.69444, 0, 0, 0.31944],
    40: [0.25, 0.75, 0, 0, 0.44722],
    41: [0.25, 0.75, 0, 0, 0.44722],
    42: [0, 0.75, 0, 0, 0.575],
    43: [0.13333, 0.63333, 0, 0, 0.89444],
    44: [0.19444, 0.15556, 0, 0, 0.31944],
    45: [0, 0.44444, 0, 0, 0.38333],
    46: [0, 0.15556, 0, 0, 0.31944],
    47: [0.25, 0.75, 0, 0, 0.575],
    48: [0, 0.64444, 0, 0, 0.575],
    49: [0, 0.64444, 0, 0, 0.575],
    50: [0, 0.64444, 0, 0, 0.575],
    51: [0, 0.64444, 0, 0, 0.575],
    52: [0, 0.64444, 0, 0, 0.575],
    53: [0, 0.64444, 0, 0, 0.575],
    54: [0, 0.64444, 0, 0, 0.575],
    55: [0, 0.64444, 0, 0, 0.575],
    56: [0, 0.64444, 0, 0, 0.575],
    57: [0, 0.64444, 0, 0, 0.575],
    58: [0, 0.44444, 0, 0, 0.31944],
    59: [0.19444, 0.44444, 0, 0, 0.31944],
    60: [0.08556, 0.58556, 0, 0, 0.89444],
    61: [-0.10889, 0.39111, 0, 0, 0.89444],
    62: [0.08556, 0.58556, 0, 0, 0.89444],
    63: [0, 0.69444, 0, 0, 0.54305],
    64: [0, 0.69444, 0, 0, 0.89444],
    65: [0, 0.68611, 0, 0, 0.86944],
    66: [0, 0.68611, 0, 0, 0.81805],
    67: [0, 0.68611, 0, 0, 0.83055],
    68: [0, 0.68611, 0, 0, 0.88194],
    69: [0, 0.68611, 0, 0, 0.75555],
    70: [0, 0.68611, 0, 0, 0.72361],
    71: [0, 0.68611, 0, 0, 0.90416],
    72: [0, 0.68611, 0, 0, 0.9],
    73: [0, 0.68611, 0, 0, 0.43611],
    74: [0, 0.68611, 0, 0, 0.59444],
    75: [0, 0.68611, 0, 0, 0.90138],
    76: [0, 0.68611, 0, 0, 0.69166],
    77: [0, 0.68611, 0, 0, 1.09166],
    78: [0, 0.68611, 0, 0, 0.9],
    79: [0, 0.68611, 0, 0, 0.86388],
    80: [0, 0.68611, 0, 0, 0.78611],
    81: [0.19444, 0.68611, 0, 0, 0.86388],
    82: [0, 0.68611, 0, 0, 0.8625],
    83: [0, 0.68611, 0, 0, 0.63889],
    84: [0, 0.68611, 0, 0, 0.8],
    85: [0, 0.68611, 0, 0, 0.88472],
    86: [0, 0.68611, 0.01597, 0, 0.86944],
    87: [0, 0.68611, 0.01597, 0, 1.18888],
    88: [0, 0.68611, 0, 0, 0.86944],
    89: [0, 0.68611, 0.02875, 0, 0.86944],
    90: [0, 0.68611, 0, 0, 0.70277],
    91: [0.25, 0.75, 0, 0, 0.31944],
    92: [0.25, 0.75, 0, 0, 0.575],
    93: [0.25, 0.75, 0, 0, 0.31944],
    94: [0, 0.69444, 0, 0, 0.575],
    95: [0.31, 0.13444, 0.03194, 0, 0.575],
    97: [0, 0.44444, 0, 0, 0.55902],
    98: [0, 0.69444, 0, 0, 0.63889],
    99: [0, 0.44444, 0, 0, 0.51111],
    100: [0, 0.69444, 0, 0, 0.63889],
    101: [0, 0.44444, 0, 0, 0.52708],
    102: [0, 0.69444, 0.10903, 0, 0.35139],
    103: [0.19444, 0.44444, 0.01597, 0, 0.575],
    104: [0, 0.69444, 0, 0, 0.63889],
    105: [0, 0.69444, 0, 0, 0.31944],
    106: [0.19444, 0.69444, 0, 0, 0.35139],
    107: [0, 0.69444, 0, 0, 0.60694],
    108: [0, 0.69444, 0, 0, 0.31944],
    109: [0, 0.44444, 0, 0, 0.95833],
    110: [0, 0.44444, 0, 0, 0.63889],
    111: [0, 0.44444, 0, 0, 0.575],
    112: [0.19444, 0.44444, 0, 0, 0.63889],
    113: [0.19444, 0.44444, 0, 0, 0.60694],
    114: [0, 0.44444, 0, 0, 0.47361],
    115: [0, 0.44444, 0, 0, 0.45361],
    116: [0, 0.63492, 0, 0, 0.44722],
    117: [0, 0.44444, 0, 0, 0.63889],
    118: [0, 0.44444, 0.01597, 0, 0.60694],
    119: [0, 0.44444, 0.01597, 0, 0.83055],
    120: [0, 0.44444, 0, 0, 0.60694],
    121: [0.19444, 0.44444, 0.01597, 0, 0.60694],
    122: [0, 0.44444, 0, 0, 0.51111],
    123: [0.25, 0.75, 0, 0, 0.575],
    124: [0.25, 0.75, 0, 0, 0.31944],
    125: [0.25, 0.75, 0, 0, 0.575],
    126: [0.35, 0.34444, 0, 0, 0.575],
    160: [0, 0, 0, 0, 0.25],
    163: [0, 0.69444, 0, 0, 0.86853],
    168: [0, 0.69444, 0, 0, 0.575],
    172: [0, 0.44444, 0, 0, 0.76666],
    176: [0, 0.69444, 0, 0, 0.86944],
    177: [0.13333, 0.63333, 0, 0, 0.89444],
    184: [0.17014, 0, 0, 0, 0.51111],
    198: [0, 0.68611, 0, 0, 1.04166],
    215: [0.13333, 0.63333, 0, 0, 0.89444],
    216: [0.04861, 0.73472, 0, 0, 0.89444],
    223: [0, 0.69444, 0, 0, 0.59722],
    230: [0, 0.44444, 0, 0, 0.83055],
    247: [0.13333, 0.63333, 0, 0, 0.89444],
    248: [0.09722, 0.54167, 0, 0, 0.575],
    305: [0, 0.44444, 0, 0, 0.31944],
    338: [0, 0.68611, 0, 0, 1.16944],
    339: [0, 0.44444, 0, 0, 0.89444],
    567: [0.19444, 0.44444, 0, 0, 0.35139],
    710: [0, 0.69444, 0, 0, 0.575],
    711: [0, 0.63194, 0, 0, 0.575],
    713: [0, 0.59611, 0, 0, 0.575],
    714: [0, 0.69444, 0, 0, 0.575],
    715: [0, 0.69444, 0, 0, 0.575],
    728: [0, 0.69444, 0, 0, 0.575],
    729: [0, 0.69444, 0, 0, 0.31944],
    730: [0, 0.69444, 0, 0, 0.86944],
    732: [0, 0.69444, 0, 0, 0.575],
    733: [0, 0.69444, 0, 0, 0.575],
    915: [0, 0.68611, 0, 0, 0.69166],
    916: [0, 0.68611, 0, 0, 0.95833],
    920: [0, 0.68611, 0, 0, 0.89444],
    923: [0, 0.68611, 0, 0, 0.80555],
    926: [0, 0.68611, 0, 0, 0.76666],
    928: [0, 0.68611, 0, 0, 0.9],
    931: [0, 0.68611, 0, 0, 0.83055],
    933: [0, 0.68611, 0, 0, 0.89444],
    934: [0, 0.68611, 0, 0, 0.83055],
    936: [0, 0.68611, 0, 0, 0.89444],
    937: [0, 0.68611, 0, 0, 0.83055],
    8211: [0, 0.44444, 0.03194, 0, 0.575],
    8212: [0, 0.44444, 0.03194, 0, 1.14999],
    8216: [0, 0.69444, 0, 0, 0.31944],
    8217: [0, 0.69444, 0, 0, 0.31944],
    8220: [0, 0.69444, 0, 0, 0.60278],
    8221: [0, 0.69444, 0, 0, 0.60278],
    8224: [0.19444, 0.69444, 0, 0, 0.51111],
    8225: [0.19444, 0.69444, 0, 0, 0.51111],
    8242: [0, 0.55556, 0, 0, 0.34444],
    8407: [0, 0.72444, 0.15486, 0, 0.575],
    8463: [0, 0.69444, 0, 0, 0.66759],
    8465: [0, 0.69444, 0, 0, 0.83055],
    8467: [0, 0.69444, 0, 0, 0.47361],
    8472: [0.19444, 0.44444, 0, 0, 0.74027],
    8476: [0, 0.69444, 0, 0, 0.83055],
    8501: [0, 0.69444, 0, 0, 0.70277],
    8592: [-0.10889, 0.39111, 0, 0, 1.14999],
    8593: [0.19444, 0.69444, 0, 0, 0.575],
    8594: [-0.10889, 0.39111, 0, 0, 1.14999],
    8595: [0.19444, 0.69444, 0, 0, 0.575],
    8596: [-0.10889, 0.39111, 0, 0, 1.14999],
    8597: [0.25, 0.75, 0, 0, 0.575],
    8598: [0.19444, 0.69444, 0, 0, 1.14999],
    8599: [0.19444, 0.69444, 0, 0, 1.14999],
    8600: [0.19444, 0.69444, 0, 0, 1.14999],
    8601: [0.19444, 0.69444, 0, 0, 1.14999],
    8636: [-0.10889, 0.39111, 0, 0, 1.14999],
    8637: [-0.10889, 0.39111, 0, 0, 1.14999],
    8640: [-0.10889, 0.39111, 0, 0, 1.14999],
    8641: [-0.10889, 0.39111, 0, 0, 1.14999],
    8656: [-0.10889, 0.39111, 0, 0, 1.14999],
    8657: [0.19444, 0.69444, 0, 0, 0.70277],
    8658: [-0.10889, 0.39111, 0, 0, 1.14999],
    8659: [0.19444, 0.69444, 0, 0, 0.70277],
    8660: [-0.10889, 0.39111, 0, 0, 1.14999],
    8661: [0.25, 0.75, 0, 0, 0.70277],
    8704: [0, 0.69444, 0, 0, 0.63889],
    8706: [0, 0.69444, 0.06389, 0, 0.62847],
    8707: [0, 0.69444, 0, 0, 0.63889],
    8709: [0.05556, 0.75, 0, 0, 0.575],
    8711: [0, 0.68611, 0, 0, 0.95833],
    8712: [0.08556, 0.58556, 0, 0, 0.76666],
    8715: [0.08556, 0.58556, 0, 0, 0.76666],
    8722: [0.13333, 0.63333, 0, 0, 0.89444],
    8723: [0.13333, 0.63333, 0, 0, 0.89444],
    8725: [0.25, 0.75, 0, 0, 0.575],
    8726: [0.25, 0.75, 0, 0, 0.575],
    8727: [-0.02778, 0.47222, 0, 0, 0.575],
    8728: [-0.02639, 0.47361, 0, 0, 0.575],
    8729: [-0.02639, 0.47361, 0, 0, 0.575],
    8730: [0.18, 0.82, 0, 0, 0.95833],
    8733: [0, 0.44444, 0, 0, 0.89444],
    8734: [0, 0.44444, 0, 0, 1.14999],
    8736: [0, 0.69224, 0, 0, 0.72222],
    8739: [0.25, 0.75, 0, 0, 0.31944],
    8741: [0.25, 0.75, 0, 0, 0.575],
    8743: [0, 0.55556, 0, 0, 0.76666],
    8744: [0, 0.55556, 0, 0, 0.76666],
    8745: [0, 0.55556, 0, 0, 0.76666],
    8746: [0, 0.55556, 0, 0, 0.76666],
    8747: [0.19444, 0.69444, 0.12778, 0, 0.56875],
    8764: [-0.10889, 0.39111, 0, 0, 0.89444],
    8768: [0.19444, 0.69444, 0, 0, 0.31944],
    8771: [222e-5, 0.50222, 0, 0, 0.89444],
    8773: [0.027, 0.638, 0, 0, 0.894],
    8776: [0.02444, 0.52444, 0, 0, 0.89444],
    8781: [222e-5, 0.50222, 0, 0, 0.89444],
    8801: [222e-5, 0.50222, 0, 0, 0.89444],
    8804: [0.19667, 0.69667, 0, 0, 0.89444],
    8805: [0.19667, 0.69667, 0, 0, 0.89444],
    8810: [0.08556, 0.58556, 0, 0, 1.14999],
    8811: [0.08556, 0.58556, 0, 0, 1.14999],
    8826: [0.08556, 0.58556, 0, 0, 0.89444],
    8827: [0.08556, 0.58556, 0, 0, 0.89444],
    8834: [0.08556, 0.58556, 0, 0, 0.89444],
    8835: [0.08556, 0.58556, 0, 0, 0.89444],
    8838: [0.19667, 0.69667, 0, 0, 0.89444],
    8839: [0.19667, 0.69667, 0, 0, 0.89444],
    8846: [0, 0.55556, 0, 0, 0.76666],
    8849: [0.19667, 0.69667, 0, 0, 0.89444],
    8850: [0.19667, 0.69667, 0, 0, 0.89444],
    8851: [0, 0.55556, 0, 0, 0.76666],
    8852: [0, 0.55556, 0, 0, 0.76666],
    8853: [0.13333, 0.63333, 0, 0, 0.89444],
    8854: [0.13333, 0.63333, 0, 0, 0.89444],
    8855: [0.13333, 0.63333, 0, 0, 0.89444],
    8856: [0.13333, 0.63333, 0, 0, 0.89444],
    8857: [0.13333, 0.63333, 0, 0, 0.89444],
    8866: [0, 0.69444, 0, 0, 0.70277],
    8867: [0, 0.69444, 0, 0, 0.70277],
    8868: [0, 0.69444, 0, 0, 0.89444],
    8869: [0, 0.69444, 0, 0, 0.89444],
    8900: [-0.02639, 0.47361, 0, 0, 0.575],
    8901: [-0.02639, 0.47361, 0, 0, 0.31944],
    8902: [-0.02778, 0.47222, 0, 0, 0.575],
    8968: [0.25, 0.75, 0, 0, 0.51111],
    8969: [0.25, 0.75, 0, 0, 0.51111],
    8970: [0.25, 0.75, 0, 0, 0.51111],
    8971: [0.25, 0.75, 0, 0, 0.51111],
    8994: [-0.13889, 0.36111, 0, 0, 1.14999],
    8995: [-0.13889, 0.36111, 0, 0, 1.14999],
    9651: [0.19444, 0.69444, 0, 0, 1.02222],
    9657: [-0.02778, 0.47222, 0, 0, 0.575],
    9661: [0.19444, 0.69444, 0, 0, 1.02222],
    9667: [-0.02778, 0.47222, 0, 0, 0.575],
    9711: [0.19444, 0.69444, 0, 0, 1.14999],
    9824: [0.12963, 0.69444, 0, 0, 0.89444],
    9825: [0.12963, 0.69444, 0, 0, 0.89444],
    9826: [0.12963, 0.69444, 0, 0, 0.89444],
    9827: [0.12963, 0.69444, 0, 0, 0.89444],
    9837: [0, 0.75, 0, 0, 0.44722],
    9838: [0.19444, 0.69444, 0, 0, 0.44722],
    9839: [0.19444, 0.69444, 0, 0, 0.44722],
    10216: [0.25, 0.75, 0, 0, 0.44722],
    10217: [0.25, 0.75, 0, 0, 0.44722],
    10815: [0, 0.68611, 0, 0, 0.9],
    10927: [0.19667, 0.69667, 0, 0, 0.89444],
    10928: [0.19667, 0.69667, 0, 0, 0.89444],
    57376: [0.19444, 0.69444, 0, 0, 0]
  },
  "Main-BoldItalic": {
    32: [0, 0, 0, 0, 0.25],
    33: [0, 0.69444, 0.11417, 0, 0.38611],
    34: [0, 0.69444, 0.07939, 0, 0.62055],
    35: [0.19444, 0.69444, 0.06833, 0, 0.94444],
    37: [0.05556, 0.75, 0.12861, 0, 0.94444],
    38: [0, 0.69444, 0.08528, 0, 0.88555],
    39: [0, 0.69444, 0.12945, 0, 0.35555],
    40: [0.25, 0.75, 0.15806, 0, 0.47333],
    41: [0.25, 0.75, 0.03306, 0, 0.47333],
    42: [0, 0.75, 0.14333, 0, 0.59111],
    43: [0.10333, 0.60333, 0.03306, 0, 0.88555],
    44: [0.19444, 0.14722, 0, 0, 0.35555],
    45: [0, 0.44444, 0.02611, 0, 0.41444],
    46: [0, 0.14722, 0, 0, 0.35555],
    47: [0.25, 0.75, 0.15806, 0, 0.59111],
    48: [0, 0.64444, 0.13167, 0, 0.59111],
    49: [0, 0.64444, 0.13167, 0, 0.59111],
    50: [0, 0.64444, 0.13167, 0, 0.59111],
    51: [0, 0.64444, 0.13167, 0, 0.59111],
    52: [0.19444, 0.64444, 0.13167, 0, 0.59111],
    53: [0, 0.64444, 0.13167, 0, 0.59111],
    54: [0, 0.64444, 0.13167, 0, 0.59111],
    55: [0.19444, 0.64444, 0.13167, 0, 0.59111],
    56: [0, 0.64444, 0.13167, 0, 0.59111],
    57: [0, 0.64444, 0.13167, 0, 0.59111],
    58: [0, 0.44444, 0.06695, 0, 0.35555],
    59: [0.19444, 0.44444, 0.06695, 0, 0.35555],
    61: [-0.10889, 0.39111, 0.06833, 0, 0.88555],
    63: [0, 0.69444, 0.11472, 0, 0.59111],
    64: [0, 0.69444, 0.09208, 0, 0.88555],
    65: [0, 0.68611, 0, 0, 0.86555],
    66: [0, 0.68611, 0.0992, 0, 0.81666],
    67: [0, 0.68611, 0.14208, 0, 0.82666],
    68: [0, 0.68611, 0.09062, 0, 0.87555],
    69: [0, 0.68611, 0.11431, 0, 0.75666],
    70: [0, 0.68611, 0.12903, 0, 0.72722],
    71: [0, 0.68611, 0.07347, 0, 0.89527],
    72: [0, 0.68611, 0.17208, 0, 0.8961],
    73: [0, 0.68611, 0.15681, 0, 0.47166],
    74: [0, 0.68611, 0.145, 0, 0.61055],
    75: [0, 0.68611, 0.14208, 0, 0.89499],
    76: [0, 0.68611, 0, 0, 0.69777],
    77: [0, 0.68611, 0.17208, 0, 1.07277],
    78: [0, 0.68611, 0.17208, 0, 0.8961],
    79: [0, 0.68611, 0.09062, 0, 0.85499],
    80: [0, 0.68611, 0.0992, 0, 0.78721],
    81: [0.19444, 0.68611, 0.09062, 0, 0.85499],
    82: [0, 0.68611, 0.02559, 0, 0.85944],
    83: [0, 0.68611, 0.11264, 0, 0.64999],
    84: [0, 0.68611, 0.12903, 0, 0.7961],
    85: [0, 0.68611, 0.17208, 0, 0.88083],
    86: [0, 0.68611, 0.18625, 0, 0.86555],
    87: [0, 0.68611, 0.18625, 0, 1.15999],
    88: [0, 0.68611, 0.15681, 0, 0.86555],
    89: [0, 0.68611, 0.19803, 0, 0.86555],
    90: [0, 0.68611, 0.14208, 0, 0.70888],
    91: [0.25, 0.75, 0.1875, 0, 0.35611],
    93: [0.25, 0.75, 0.09972, 0, 0.35611],
    94: [0, 0.69444, 0.06709, 0, 0.59111],
    95: [0.31, 0.13444, 0.09811, 0, 0.59111],
    97: [0, 0.44444, 0.09426, 0, 0.59111],
    98: [0, 0.69444, 0.07861, 0, 0.53222],
    99: [0, 0.44444, 0.05222, 0, 0.53222],
    100: [0, 0.69444, 0.10861, 0, 0.59111],
    101: [0, 0.44444, 0.085, 0, 0.53222],
    102: [0.19444, 0.69444, 0.21778, 0, 0.4],
    103: [0.19444, 0.44444, 0.105, 0, 0.53222],
    104: [0, 0.69444, 0.09426, 0, 0.59111],
    105: [0, 0.69326, 0.11387, 0, 0.35555],
    106: [0.19444, 0.69326, 0.1672, 0, 0.35555],
    107: [0, 0.69444, 0.11111, 0, 0.53222],
    108: [0, 0.69444, 0.10861, 0, 0.29666],
    109: [0, 0.44444, 0.09426, 0, 0.94444],
    110: [0, 0.44444, 0.09426, 0, 0.64999],
    111: [0, 0.44444, 0.07861, 0, 0.59111],
    112: [0.19444, 0.44444, 0.07861, 0, 0.59111],
    113: [0.19444, 0.44444, 0.105, 0, 0.53222],
    114: [0, 0.44444, 0.11111, 0, 0.50167],
    115: [0, 0.44444, 0.08167, 0, 0.48694],
    116: [0, 0.63492, 0.09639, 0, 0.385],
    117: [0, 0.44444, 0.09426, 0, 0.62055],
    118: [0, 0.44444, 0.11111, 0, 0.53222],
    119: [0, 0.44444, 0.11111, 0, 0.76777],
    120: [0, 0.44444, 0.12583, 0, 0.56055],
    121: [0.19444, 0.44444, 0.105, 0, 0.56166],
    122: [0, 0.44444, 0.13889, 0, 0.49055],
    126: [0.35, 0.34444, 0.11472, 0, 0.59111],
    160: [0, 0, 0, 0, 0.25],
    168: [0, 0.69444, 0.11473, 0, 0.59111],
    176: [0, 0.69444, 0, 0, 0.94888],
    184: [0.17014, 0, 0, 0, 0.53222],
    198: [0, 0.68611, 0.11431, 0, 1.02277],
    216: [0.04861, 0.73472, 0.09062, 0, 0.88555],
    223: [0.19444, 0.69444, 0.09736, 0, 0.665],
    230: [0, 0.44444, 0.085, 0, 0.82666],
    248: [0.09722, 0.54167, 0.09458, 0, 0.59111],
    305: [0, 0.44444, 0.09426, 0, 0.35555],
    338: [0, 0.68611, 0.11431, 0, 1.14054],
    339: [0, 0.44444, 0.085, 0, 0.82666],
    567: [0.19444, 0.44444, 0.04611, 0, 0.385],
    710: [0, 0.69444, 0.06709, 0, 0.59111],
    711: [0, 0.63194, 0.08271, 0, 0.59111],
    713: [0, 0.59444, 0.10444, 0, 0.59111],
    714: [0, 0.69444, 0.08528, 0, 0.59111],
    715: [0, 0.69444, 0, 0, 0.59111],
    728: [0, 0.69444, 0.10333, 0, 0.59111],
    729: [0, 0.69444, 0.12945, 0, 0.35555],
    730: [0, 0.69444, 0, 0, 0.94888],
    732: [0, 0.69444, 0.11472, 0, 0.59111],
    733: [0, 0.69444, 0.11472, 0, 0.59111],
    915: [0, 0.68611, 0.12903, 0, 0.69777],
    916: [0, 0.68611, 0, 0, 0.94444],
    920: [0, 0.68611, 0.09062, 0, 0.88555],
    923: [0, 0.68611, 0, 0, 0.80666],
    926: [0, 0.68611, 0.15092, 0, 0.76777],
    928: [0, 0.68611, 0.17208, 0, 0.8961],
    931: [0, 0.68611, 0.11431, 0, 0.82666],
    933: [0, 0.68611, 0.10778, 0, 0.88555],
    934: [0, 0.68611, 0.05632, 0, 0.82666],
    936: [0, 0.68611, 0.10778, 0, 0.88555],
    937: [0, 0.68611, 0.0992, 0, 0.82666],
    8211: [0, 0.44444, 0.09811, 0, 0.59111],
    8212: [0, 0.44444, 0.09811, 0, 1.18221],
    8216: [0, 0.69444, 0.12945, 0, 0.35555],
    8217: [0, 0.69444, 0.12945, 0, 0.35555],
    8220: [0, 0.69444, 0.16772, 0, 0.62055],
    8221: [0, 0.69444, 0.07939, 0, 0.62055]
  },
  "Main-Italic": {
    32: [0, 0, 0, 0, 0.25],
    33: [0, 0.69444, 0.12417, 0, 0.30667],
    34: [0, 0.69444, 0.06961, 0, 0.51444],
    35: [0.19444, 0.69444, 0.06616, 0, 0.81777],
    37: [0.05556, 0.75, 0.13639, 0, 0.81777],
    38: [0, 0.69444, 0.09694, 0, 0.76666],
    39: [0, 0.69444, 0.12417, 0, 0.30667],
    40: [0.25, 0.75, 0.16194, 0, 0.40889],
    41: [0.25, 0.75, 0.03694, 0, 0.40889],
    42: [0, 0.75, 0.14917, 0, 0.51111],
    43: [0.05667, 0.56167, 0.03694, 0, 0.76666],
    44: [0.19444, 0.10556, 0, 0, 0.30667],
    45: [0, 0.43056, 0.02826, 0, 0.35778],
    46: [0, 0.10556, 0, 0, 0.30667],
    47: [0.25, 0.75, 0.16194, 0, 0.51111],
    48: [0, 0.64444, 0.13556, 0, 0.51111],
    49: [0, 0.64444, 0.13556, 0, 0.51111],
    50: [0, 0.64444, 0.13556, 0, 0.51111],
    51: [0, 0.64444, 0.13556, 0, 0.51111],
    52: [0.19444, 0.64444, 0.13556, 0, 0.51111],
    53: [0, 0.64444, 0.13556, 0, 0.51111],
    54: [0, 0.64444, 0.13556, 0, 0.51111],
    55: [0.19444, 0.64444, 0.13556, 0, 0.51111],
    56: [0, 0.64444, 0.13556, 0, 0.51111],
    57: [0, 0.64444, 0.13556, 0, 0.51111],
    58: [0, 0.43056, 0.0582, 0, 0.30667],
    59: [0.19444, 0.43056, 0.0582, 0, 0.30667],
    61: [-0.13313, 0.36687, 0.06616, 0, 0.76666],
    63: [0, 0.69444, 0.1225, 0, 0.51111],
    64: [0, 0.69444, 0.09597, 0, 0.76666],
    65: [0, 0.68333, 0, 0, 0.74333],
    66: [0, 0.68333, 0.10257, 0, 0.70389],
    67: [0, 0.68333, 0.14528, 0, 0.71555],
    68: [0, 0.68333, 0.09403, 0, 0.755],
    69: [0, 0.68333, 0.12028, 0, 0.67833],
    70: [0, 0.68333, 0.13305, 0, 0.65277],
    71: [0, 0.68333, 0.08722, 0, 0.77361],
    72: [0, 0.68333, 0.16389, 0, 0.74333],
    73: [0, 0.68333, 0.15806, 0, 0.38555],
    74: [0, 0.68333, 0.14028, 0, 0.525],
    75: [0, 0.68333, 0.14528, 0, 0.76888],
    76: [0, 0.68333, 0, 0, 0.62722],
    77: [0, 0.68333, 0.16389, 0, 0.89666],
    78: [0, 0.68333, 0.16389, 0, 0.74333],
    79: [0, 0.68333, 0.09403, 0, 0.76666],
    80: [0, 0.68333, 0.10257, 0, 0.67833],
    81: [0.19444, 0.68333, 0.09403, 0, 0.76666],
    82: [0, 0.68333, 0.03868, 0, 0.72944],
    83: [0, 0.68333, 0.11972, 0, 0.56222],
    84: [0, 0.68333, 0.13305, 0, 0.71555],
    85: [0, 0.68333, 0.16389, 0, 0.74333],
    86: [0, 0.68333, 0.18361, 0, 0.74333],
    87: [0, 0.68333, 0.18361, 0, 0.99888],
    88: [0, 0.68333, 0.15806, 0, 0.74333],
    89: [0, 0.68333, 0.19383, 0, 0.74333],
    90: [0, 0.68333, 0.14528, 0, 0.61333],
    91: [0.25, 0.75, 0.1875, 0, 0.30667],
    93: [0.25, 0.75, 0.10528, 0, 0.30667],
    94: [0, 0.69444, 0.06646, 0, 0.51111],
    95: [0.31, 0.12056, 0.09208, 0, 0.51111],
    97: [0, 0.43056, 0.07671, 0, 0.51111],
    98: [0, 0.69444, 0.06312, 0, 0.46],
    99: [0, 0.43056, 0.05653, 0, 0.46],
    100: [0, 0.69444, 0.10333, 0, 0.51111],
    101: [0, 0.43056, 0.07514, 0, 0.46],
    102: [0.19444, 0.69444, 0.21194, 0, 0.30667],
    103: [0.19444, 0.43056, 0.08847, 0, 0.46],
    104: [0, 0.69444, 0.07671, 0, 0.51111],
    105: [0, 0.65536, 0.1019, 0, 0.30667],
    106: [0.19444, 0.65536, 0.14467, 0, 0.30667],
    107: [0, 0.69444, 0.10764, 0, 0.46],
    108: [0, 0.69444, 0.10333, 0, 0.25555],
    109: [0, 0.43056, 0.07671, 0, 0.81777],
    110: [0, 0.43056, 0.07671, 0, 0.56222],
    111: [0, 0.43056, 0.06312, 0, 0.51111],
    112: [0.19444, 0.43056, 0.06312, 0, 0.51111],
    113: [0.19444, 0.43056, 0.08847, 0, 0.46],
    114: [0, 0.43056, 0.10764, 0, 0.42166],
    115: [0, 0.43056, 0.08208, 0, 0.40889],
    116: [0, 0.61508, 0.09486, 0, 0.33222],
    117: [0, 0.43056, 0.07671, 0, 0.53666],
    118: [0, 0.43056, 0.10764, 0, 0.46],
    119: [0, 0.43056, 0.10764, 0, 0.66444],
    120: [0, 0.43056, 0.12042, 0, 0.46389],
    121: [0.19444, 0.43056, 0.08847, 0, 0.48555],
    122: [0, 0.43056, 0.12292, 0, 0.40889],
    126: [0.35, 0.31786, 0.11585, 0, 0.51111],
    160: [0, 0, 0, 0, 0.25],
    168: [0, 0.66786, 0.10474, 0, 0.51111],
    176: [0, 0.69444, 0, 0, 0.83129],
    184: [0.17014, 0, 0, 0, 0.46],
    198: [0, 0.68333, 0.12028, 0, 0.88277],
    216: [0.04861, 0.73194, 0.09403, 0, 0.76666],
    223: [0.19444, 0.69444, 0.10514, 0, 0.53666],
    230: [0, 0.43056, 0.07514, 0, 0.71555],
    248: [0.09722, 0.52778, 0.09194, 0, 0.51111],
    338: [0, 0.68333, 0.12028, 0, 0.98499],
    339: [0, 0.43056, 0.07514, 0, 0.71555],
    710: [0, 0.69444, 0.06646, 0, 0.51111],
    711: [0, 0.62847, 0.08295, 0, 0.51111],
    713: [0, 0.56167, 0.10333, 0, 0.51111],
    714: [0, 0.69444, 0.09694, 0, 0.51111],
    715: [0, 0.69444, 0, 0, 0.51111],
    728: [0, 0.69444, 0.10806, 0, 0.51111],
    729: [0, 0.66786, 0.11752, 0, 0.30667],
    730: [0, 0.69444, 0, 0, 0.83129],
    732: [0, 0.66786, 0.11585, 0, 0.51111],
    733: [0, 0.69444, 0.1225, 0, 0.51111],
    915: [0, 0.68333, 0.13305, 0, 0.62722],
    916: [0, 0.68333, 0, 0, 0.81777],
    920: [0, 0.68333, 0.09403, 0, 0.76666],
    923: [0, 0.68333, 0, 0, 0.69222],
    926: [0, 0.68333, 0.15294, 0, 0.66444],
    928: [0, 0.68333, 0.16389, 0, 0.74333],
    931: [0, 0.68333, 0.12028, 0, 0.71555],
    933: [0, 0.68333, 0.11111, 0, 0.76666],
    934: [0, 0.68333, 0.05986, 0, 0.71555],
    936: [0, 0.68333, 0.11111, 0, 0.76666],
    937: [0, 0.68333, 0.10257, 0, 0.71555],
    8211: [0, 0.43056, 0.09208, 0, 0.51111],
    8212: [0, 0.43056, 0.09208, 0, 1.02222],
    8216: [0, 0.69444, 0.12417, 0, 0.30667],
    8217: [0, 0.69444, 0.12417, 0, 0.30667],
    8220: [0, 0.69444, 0.1685, 0, 0.51444],
    8221: [0, 0.69444, 0.06961, 0, 0.51444],
    8463: [0, 0.68889, 0, 0, 0.54028]
  },
  "Main-Regular": {
    32: [0, 0, 0, 0, 0.25],
    33: [0, 0.69444, 0, 0, 0.27778],
    34: [0, 0.69444, 0, 0, 0.5],
    35: [0.19444, 0.69444, 0, 0, 0.83334],
    36: [0.05556, 0.75, 0, 0, 0.5],
    37: [0.05556, 0.75, 0, 0, 0.83334],
    38: [0, 0.69444, 0, 0, 0.77778],
    39: [0, 0.69444, 0, 0, 0.27778],
    40: [0.25, 0.75, 0, 0, 0.38889],
    41: [0.25, 0.75, 0, 0, 0.38889],
    42: [0, 0.75, 0, 0, 0.5],
    43: [0.08333, 0.58333, 0, 0, 0.77778],
    44: [0.19444, 0.10556, 0, 0, 0.27778],
    45: [0, 0.43056, 0, 0, 0.33333],
    46: [0, 0.10556, 0, 0, 0.27778],
    47: [0.25, 0.75, 0, 0, 0.5],
    48: [0, 0.64444, 0, 0, 0.5],
    49: [0, 0.64444, 0, 0, 0.5],
    50: [0, 0.64444, 0, 0, 0.5],
    51: [0, 0.64444, 0, 0, 0.5],
    52: [0, 0.64444, 0, 0, 0.5],
    53: [0, 0.64444, 0, 0, 0.5],
    54: [0, 0.64444, 0, 0, 0.5],
    55: [0, 0.64444, 0, 0, 0.5],
    56: [0, 0.64444, 0, 0, 0.5],
    57: [0, 0.64444, 0, 0, 0.5],
    58: [0, 0.43056, 0, 0, 0.27778],
    59: [0.19444, 0.43056, 0, 0, 0.27778],
    60: [0.0391, 0.5391, 0, 0, 0.77778],
    61: [-0.13313, 0.36687, 0, 0, 0.77778],
    62: [0.0391, 0.5391, 0, 0, 0.77778],
    63: [0, 0.69444, 0, 0, 0.47222],
    64: [0, 0.69444, 0, 0, 0.77778],
    65: [0, 0.68333, 0, 0, 0.75],
    66: [0, 0.68333, 0, 0, 0.70834],
    67: [0, 0.68333, 0, 0, 0.72222],
    68: [0, 0.68333, 0, 0, 0.76389],
    69: [0, 0.68333, 0, 0, 0.68056],
    70: [0, 0.68333, 0, 0, 0.65278],
    71: [0, 0.68333, 0, 0, 0.78472],
    72: [0, 0.68333, 0, 0, 0.75],
    73: [0, 0.68333, 0, 0, 0.36111],
    74: [0, 0.68333, 0, 0, 0.51389],
    75: [0, 0.68333, 0, 0, 0.77778],
    76: [0, 0.68333, 0, 0, 0.625],
    77: [0, 0.68333, 0, 0, 0.91667],
    78: [0, 0.68333, 0, 0, 0.75],
    79: [0, 0.68333, 0, 0, 0.77778],
    80: [0, 0.68333, 0, 0, 0.68056],
    81: [0.19444, 0.68333, 0, 0, 0.77778],
    82: [0, 0.68333, 0, 0, 0.73611],
    83: [0, 0.68333, 0, 0, 0.55556],
    84: [0, 0.68333, 0, 0, 0.72222],
    85: [0, 0.68333, 0, 0, 0.75],
    86: [0, 0.68333, 0.01389, 0, 0.75],
    87: [0, 0.68333, 0.01389, 0, 1.02778],
    88: [0, 0.68333, 0, 0, 0.75],
    89: [0, 0.68333, 0.025, 0, 0.75],
    90: [0, 0.68333, 0, 0, 0.61111],
    91: [0.25, 0.75, 0, 0, 0.27778],
    92: [0.25, 0.75, 0, 0, 0.5],
    93: [0.25, 0.75, 0, 0, 0.27778],
    94: [0, 0.69444, 0, 0, 0.5],
    95: [0.31, 0.12056, 0.02778, 0, 0.5],
    97: [0, 0.43056, 0, 0, 0.5],
    98: [0, 0.69444, 0, 0, 0.55556],
    99: [0, 0.43056, 0, 0, 0.44445],
    100: [0, 0.69444, 0, 0, 0.55556],
    101: [0, 0.43056, 0, 0, 0.44445],
    102: [0, 0.69444, 0.07778, 0, 0.30556],
    103: [0.19444, 0.43056, 0.01389, 0, 0.5],
    104: [0, 0.69444, 0, 0, 0.55556],
    105: [0, 0.66786, 0, 0, 0.27778],
    106: [0.19444, 0.66786, 0, 0, 0.30556],
    107: [0, 0.69444, 0, 0, 0.52778],
    108: [0, 0.69444, 0, 0, 0.27778],
    109: [0, 0.43056, 0, 0, 0.83334],
    110: [0, 0.43056, 0, 0, 0.55556],
    111: [0, 0.43056, 0, 0, 0.5],
    112: [0.19444, 0.43056, 0, 0, 0.55556],
    113: [0.19444, 0.43056, 0, 0, 0.52778],
    114: [0, 0.43056, 0, 0, 0.39167],
    115: [0, 0.43056, 0, 0, 0.39445],
    116: [0, 0.61508, 0, 0, 0.38889],
    117: [0, 0.43056, 0, 0, 0.55556],
    118: [0, 0.43056, 0.01389, 0, 0.52778],
    119: [0, 0.43056, 0.01389, 0, 0.72222],
    120: [0, 0.43056, 0, 0, 0.52778],
    121: [0.19444, 0.43056, 0.01389, 0, 0.52778],
    122: [0, 0.43056, 0, 0, 0.44445],
    123: [0.25, 0.75, 0, 0, 0.5],
    124: [0.25, 0.75, 0, 0, 0.27778],
    125: [0.25, 0.75, 0, 0, 0.5],
    126: [0.35, 0.31786, 0, 0, 0.5],
    160: [0, 0, 0, 0, 0.25],
    163: [0, 0.69444, 0, 0, 0.76909],
    167: [0.19444, 0.69444, 0, 0, 0.44445],
    168: [0, 0.66786, 0, 0, 0.5],
    172: [0, 0.43056, 0, 0, 0.66667],
    176: [0, 0.69444, 0, 0, 0.75],
    177: [0.08333, 0.58333, 0, 0, 0.77778],
    182: [0.19444, 0.69444, 0, 0, 0.61111],
    184: [0.17014, 0, 0, 0, 0.44445],
    198: [0, 0.68333, 0, 0, 0.90278],
    215: [0.08333, 0.58333, 0, 0, 0.77778],
    216: [0.04861, 0.73194, 0, 0, 0.77778],
    223: [0, 0.69444, 0, 0, 0.5],
    230: [0, 0.43056, 0, 0, 0.72222],
    247: [0.08333, 0.58333, 0, 0, 0.77778],
    248: [0.09722, 0.52778, 0, 0, 0.5],
    305: [0, 0.43056, 0, 0, 0.27778],
    338: [0, 0.68333, 0, 0, 1.01389],
    339: [0, 0.43056, 0, 0, 0.77778],
    567: [0.19444, 0.43056, 0, 0, 0.30556],
    710: [0, 0.69444, 0, 0, 0.5],
    711: [0, 0.62847, 0, 0, 0.5],
    713: [0, 0.56778, 0, 0, 0.5],
    714: [0, 0.69444, 0, 0, 0.5],
    715: [0, 0.69444, 0, 0, 0.5],
    728: [0, 0.69444, 0, 0, 0.5],
    729: [0, 0.66786, 0, 0, 0.27778],
    730: [0, 0.69444, 0, 0, 0.75],
    732: [0, 0.66786, 0, 0, 0.5],
    733: [0, 0.69444, 0, 0, 0.5],
    915: [0, 0.68333, 0, 0, 0.625],
    916: [0, 0.68333, 0, 0, 0.83334],
    920: [0, 0.68333, 0, 0, 0.77778],
    923: [0, 0.68333, 0, 0, 0.69445],
    926: [0, 0.68333, 0, 0, 0.66667],
    928: [0, 0.68333, 0, 0, 0.75],
    931: [0, 0.68333, 0, 0, 0.72222],
    933: [0, 0.68333, 0, 0, 0.77778],
    934: [0, 0.68333, 0, 0, 0.72222],
    936: [0, 0.68333, 0, 0, 0.77778],
    937: [0, 0.68333, 0, 0, 0.72222],
    8211: [0, 0.43056, 0.02778, 0, 0.5],
    8212: [0, 0.43056, 0.02778, 0, 1],
    8216: [0, 0.69444, 0, 0, 0.27778],
    8217: [0, 0.69444, 0, 0, 0.27778],
    8220: [0, 0.69444, 0, 0, 0.5],
    8221: [0, 0.69444, 0, 0, 0.5],
    8224: [0.19444, 0.69444, 0, 0, 0.44445],
    8225: [0.19444, 0.69444, 0, 0, 0.44445],
    8230: [0, 0.123, 0, 0, 1.172],
    8242: [0, 0.55556, 0, 0, 0.275],
    8407: [0, 0.71444, 0.15382, 0, 0.5],
    8463: [0, 0.68889, 0, 0, 0.54028],
    8465: [0, 0.69444, 0, 0, 0.72222],
    8467: [0, 0.69444, 0, 0.11111, 0.41667],
    8472: [0.19444, 0.43056, 0, 0.11111, 0.63646],
    8476: [0, 0.69444, 0, 0, 0.72222],
    8501: [0, 0.69444, 0, 0, 0.61111],
    8592: [-0.13313, 0.36687, 0, 0, 1],
    8593: [0.19444, 0.69444, 0, 0, 0.5],
    8594: [-0.13313, 0.36687, 0, 0, 1],
    8595: [0.19444, 0.69444, 0, 0, 0.5],
    8596: [-0.13313, 0.36687, 0, 0, 1],
    8597: [0.25, 0.75, 0, 0, 0.5],
    8598: [0.19444, 0.69444, 0, 0, 1],
    8599: [0.19444, 0.69444, 0, 0, 1],
    8600: [0.19444, 0.69444, 0, 0, 1],
    8601: [0.19444, 0.69444, 0, 0, 1],
    8614: [0.011, 0.511, 0, 0, 1],
    8617: [0.011, 0.511, 0, 0, 1.126],
    8618: [0.011, 0.511, 0, 0, 1.126],
    8636: [-0.13313, 0.36687, 0, 0, 1],
    8637: [-0.13313, 0.36687, 0, 0, 1],
    8640: [-0.13313, 0.36687, 0, 0, 1],
    8641: [-0.13313, 0.36687, 0, 0, 1],
    8652: [0.011, 0.671, 0, 0, 1],
    8656: [-0.13313, 0.36687, 0, 0, 1],
    8657: [0.19444, 0.69444, 0, 0, 0.61111],
    8658: [-0.13313, 0.36687, 0, 0, 1],
    8659: [0.19444, 0.69444, 0, 0, 0.61111],
    8660: [-0.13313, 0.36687, 0, 0, 1],
    8661: [0.25, 0.75, 0, 0, 0.61111],
    8704: [0, 0.69444, 0, 0, 0.55556],
    8706: [0, 0.69444, 0.05556, 0.08334, 0.5309],
    8707: [0, 0.69444, 0, 0, 0.55556],
    8709: [0.05556, 0.75, 0, 0, 0.5],
    8711: [0, 0.68333, 0, 0, 0.83334],
    8712: [0.0391, 0.5391, 0, 0, 0.66667],
    8715: [0.0391, 0.5391, 0, 0, 0.66667],
    8722: [0.08333, 0.58333, 0, 0, 0.77778],
    8723: [0.08333, 0.58333, 0, 0, 0.77778],
    8725: [0.25, 0.75, 0, 0, 0.5],
    8726: [0.25, 0.75, 0, 0, 0.5],
    8727: [-0.03472, 0.46528, 0, 0, 0.5],
    8728: [-0.05555, 0.44445, 0, 0, 0.5],
    8729: [-0.05555, 0.44445, 0, 0, 0.5],
    8730: [0.2, 0.8, 0, 0, 0.83334],
    8733: [0, 0.43056, 0, 0, 0.77778],
    8734: [0, 0.43056, 0, 0, 1],
    8736: [0, 0.69224, 0, 0, 0.72222],
    8739: [0.25, 0.75, 0, 0, 0.27778],
    8741: [0.25, 0.75, 0, 0, 0.5],
    8743: [0, 0.55556, 0, 0, 0.66667],
    8744: [0, 0.55556, 0, 0, 0.66667],
    8745: [0, 0.55556, 0, 0, 0.66667],
    8746: [0, 0.55556, 0, 0, 0.66667],
    8747: [0.19444, 0.69444, 0.11111, 0, 0.41667],
    8764: [-0.13313, 0.36687, 0, 0, 0.77778],
    8768: [0.19444, 0.69444, 0, 0, 0.27778],
    8771: [-0.03625, 0.46375, 0, 0, 0.77778],
    8773: [-0.022, 0.589, 0, 0, 0.778],
    8776: [-0.01688, 0.48312, 0, 0, 0.77778],
    8781: [-0.03625, 0.46375, 0, 0, 0.77778],
    8784: [-0.133, 0.673, 0, 0, 0.778],
    8801: [-0.03625, 0.46375, 0, 0, 0.77778],
    8804: [0.13597, 0.63597, 0, 0, 0.77778],
    8805: [0.13597, 0.63597, 0, 0, 0.77778],
    8810: [0.0391, 0.5391, 0, 0, 1],
    8811: [0.0391, 0.5391, 0, 0, 1],
    8826: [0.0391, 0.5391, 0, 0, 0.77778],
    8827: [0.0391, 0.5391, 0, 0, 0.77778],
    8834: [0.0391, 0.5391, 0, 0, 0.77778],
    8835: [0.0391, 0.5391, 0, 0, 0.77778],
    8838: [0.13597, 0.63597, 0, 0, 0.77778],
    8839: [0.13597, 0.63597, 0, 0, 0.77778],
    8846: [0, 0.55556, 0, 0, 0.66667],
    8849: [0.13597, 0.63597, 0, 0, 0.77778],
    8850: [0.13597, 0.63597, 0, 0, 0.77778],
    8851: [0, 0.55556, 0, 0, 0.66667],
    8852: [0, 0.55556, 0, 0, 0.66667],
    8853: [0.08333, 0.58333, 0, 0, 0.77778],
    8854: [0.08333, 0.58333, 0, 0, 0.77778],
    8855: [0.08333, 0.58333, 0, 0, 0.77778],
    8856: [0.08333, 0.58333, 0, 0, 0.77778],
    8857: [0.08333, 0.58333, 0, 0, 0.77778],
    8866: [0, 0.69444, 0, 0, 0.61111],
    8867: [0, 0.69444, 0, 0, 0.61111],
    8868: [0, 0.69444, 0, 0, 0.77778],
    8869: [0, 0.69444, 0, 0, 0.77778],
    8872: [0.249, 0.75, 0, 0, 0.867],
    8900: [-0.05555, 0.44445, 0, 0, 0.5],
    8901: [-0.05555, 0.44445, 0, 0, 0.27778],
    8902: [-0.03472, 0.46528, 0, 0, 0.5],
    8904: [5e-3, 0.505, 0, 0, 0.9],
    8942: [0.03, 0.903, 0, 0, 0.278],
    8943: [-0.19, 0.313, 0, 0, 1.172],
    8945: [-0.1, 0.823, 0, 0, 1.282],
    8968: [0.25, 0.75, 0, 0, 0.44445],
    8969: [0.25, 0.75, 0, 0, 0.44445],
    8970: [0.25, 0.75, 0, 0, 0.44445],
    8971: [0.25, 0.75, 0, 0, 0.44445],
    8994: [-0.14236, 0.35764, 0, 0, 1],
    8995: [-0.14236, 0.35764, 0, 0, 1],
    9136: [0.244, 0.744, 0, 0, 0.412],
    9137: [0.244, 0.745, 0, 0, 0.412],
    9651: [0.19444, 0.69444, 0, 0, 0.88889],
    9657: [-0.03472, 0.46528, 0, 0, 0.5],
    9661: [0.19444, 0.69444, 0, 0, 0.88889],
    9667: [-0.03472, 0.46528, 0, 0, 0.5],
    9711: [0.19444, 0.69444, 0, 0, 1],
    9824: [0.12963, 0.69444, 0, 0, 0.77778],
    9825: [0.12963, 0.69444, 0, 0, 0.77778],
    9826: [0.12963, 0.69444, 0, 0, 0.77778],
    9827: [0.12963, 0.69444, 0, 0, 0.77778],
    9837: [0, 0.75, 0, 0, 0.38889],
    9838: [0.19444, 0.69444, 0, 0, 0.38889],
    9839: [0.19444, 0.69444, 0, 0, 0.38889],
    10216: [0.25, 0.75, 0, 0, 0.38889],
    10217: [0.25, 0.75, 0, 0, 0.38889],
    10222: [0.244, 0.744, 0, 0, 0.412],
    10223: [0.244, 0.745, 0, 0, 0.412],
    10229: [0.011, 0.511, 0, 0, 1.609],
    10230: [0.011, 0.511, 0, 0, 1.638],
    10231: [0.011, 0.511, 0, 0, 1.859],
    10232: [0.024, 0.525, 0, 0, 1.609],
    10233: [0.024, 0.525, 0, 0, 1.638],
    10234: [0.024, 0.525, 0, 0, 1.858],
    10236: [0.011, 0.511, 0, 0, 1.638],
    10815: [0, 0.68333, 0, 0, 0.75],
    10927: [0.13597, 0.63597, 0, 0, 0.77778],
    10928: [0.13597, 0.63597, 0, 0, 0.77778],
    57376: [0.19444, 0.69444, 0, 0, 0]
  },
  "Math-BoldItalic": {
    32: [0, 0, 0, 0, 0.25],
    48: [0, 0.44444, 0, 0, 0.575],
    49: [0, 0.44444, 0, 0, 0.575],
    50: [0, 0.44444, 0, 0, 0.575],
    51: [0.19444, 0.44444, 0, 0, 0.575],
    52: [0.19444, 0.44444, 0, 0, 0.575],
    53: [0.19444, 0.44444, 0, 0, 0.575],
    54: [0, 0.64444, 0, 0, 0.575],
    55: [0.19444, 0.44444, 0, 0, 0.575],
    56: [0, 0.64444, 0, 0, 0.575],
    57: [0.19444, 0.44444, 0, 0, 0.575],
    65: [0, 0.68611, 0, 0, 0.86944],
    66: [0, 0.68611, 0.04835, 0, 0.8664],
    67: [0, 0.68611, 0.06979, 0, 0.81694],
    68: [0, 0.68611, 0.03194, 0, 0.93812],
    69: [0, 0.68611, 0.05451, 0, 0.81007],
    70: [0, 0.68611, 0.15972, 0, 0.68889],
    71: [0, 0.68611, 0, 0, 0.88673],
    72: [0, 0.68611, 0.08229, 0, 0.98229],
    73: [0, 0.68611, 0.07778, 0, 0.51111],
    74: [0, 0.68611, 0.10069, 0, 0.63125],
    75: [0, 0.68611, 0.06979, 0, 0.97118],
    76: [0, 0.68611, 0, 0, 0.75555],
    77: [0, 0.68611, 0.11424, 0, 1.14201],
    78: [0, 0.68611, 0.11424, 0, 0.95034],
    79: [0, 0.68611, 0.03194, 0, 0.83666],
    80: [0, 0.68611, 0.15972, 0, 0.72309],
    81: [0.19444, 0.68611, 0, 0, 0.86861],
    82: [0, 0.68611, 421e-5, 0, 0.87235],
    83: [0, 0.68611, 0.05382, 0, 0.69271],
    84: [0, 0.68611, 0.15972, 0, 0.63663],
    85: [0, 0.68611, 0.11424, 0, 0.80027],
    86: [0, 0.68611, 0.25555, 0, 0.67778],
    87: [0, 0.68611, 0.15972, 0, 1.09305],
    88: [0, 0.68611, 0.07778, 0, 0.94722],
    89: [0, 0.68611, 0.25555, 0, 0.67458],
    90: [0, 0.68611, 0.06979, 0, 0.77257],
    97: [0, 0.44444, 0, 0, 0.63287],
    98: [0, 0.69444, 0, 0, 0.52083],
    99: [0, 0.44444, 0, 0, 0.51342],
    100: [0, 0.69444, 0, 0, 0.60972],
    101: [0, 0.44444, 0, 0, 0.55361],
    102: [0.19444, 0.69444, 0.11042, 0, 0.56806],
    103: [0.19444, 0.44444, 0.03704, 0, 0.5449],
    104: [0, 0.69444, 0, 0, 0.66759],
    105: [0, 0.69326, 0, 0, 0.4048],
    106: [0.19444, 0.69326, 0.0622, 0, 0.47083],
    107: [0, 0.69444, 0.01852, 0, 0.6037],
    108: [0, 0.69444, 88e-4, 0, 0.34815],
    109: [0, 0.44444, 0, 0, 1.0324],
    110: [0, 0.44444, 0, 0, 0.71296],
    111: [0, 0.44444, 0, 0, 0.58472],
    112: [0.19444, 0.44444, 0, 0, 0.60092],
    113: [0.19444, 0.44444, 0.03704, 0, 0.54213],
    114: [0, 0.44444, 0.03194, 0, 0.5287],
    115: [0, 0.44444, 0, 0, 0.53125],
    116: [0, 0.63492, 0, 0, 0.41528],
    117: [0, 0.44444, 0, 0, 0.68102],
    118: [0, 0.44444, 0.03704, 0, 0.56666],
    119: [0, 0.44444, 0.02778, 0, 0.83148],
    120: [0, 0.44444, 0, 0, 0.65903],
    121: [0.19444, 0.44444, 0.03704, 0, 0.59028],
    122: [0, 0.44444, 0.04213, 0, 0.55509],
    160: [0, 0, 0, 0, 0.25],
    915: [0, 0.68611, 0.15972, 0, 0.65694],
    916: [0, 0.68611, 0, 0, 0.95833],
    920: [0, 0.68611, 0.03194, 0, 0.86722],
    923: [0, 0.68611, 0, 0, 0.80555],
    926: [0, 0.68611, 0.07458, 0, 0.84125],
    928: [0, 0.68611, 0.08229, 0, 0.98229],
    931: [0, 0.68611, 0.05451, 0, 0.88507],
    933: [0, 0.68611, 0.15972, 0, 0.67083],
    934: [0, 0.68611, 0, 0, 0.76666],
    936: [0, 0.68611, 0.11653, 0, 0.71402],
    937: [0, 0.68611, 0.04835, 0, 0.8789],
    945: [0, 0.44444, 0, 0, 0.76064],
    946: [0.19444, 0.69444, 0.03403, 0, 0.65972],
    947: [0.19444, 0.44444, 0.06389, 0, 0.59003],
    948: [0, 0.69444, 0.03819, 0, 0.52222],
    949: [0, 0.44444, 0, 0, 0.52882],
    950: [0.19444, 0.69444, 0.06215, 0, 0.50833],
    951: [0.19444, 0.44444, 0.03704, 0, 0.6],
    952: [0, 0.69444, 0.03194, 0, 0.5618],
    953: [0, 0.44444, 0, 0, 0.41204],
    954: [0, 0.44444, 0, 0, 0.66759],
    955: [0, 0.69444, 0, 0, 0.67083],
    956: [0.19444, 0.44444, 0, 0, 0.70787],
    957: [0, 0.44444, 0.06898, 0, 0.57685],
    958: [0.19444, 0.69444, 0.03021, 0, 0.50833],
    959: [0, 0.44444, 0, 0, 0.58472],
    960: [0, 0.44444, 0.03704, 0, 0.68241],
    961: [0.19444, 0.44444, 0, 0, 0.6118],
    962: [0.09722, 0.44444, 0.07917, 0, 0.42361],
    963: [0, 0.44444, 0.03704, 0, 0.68588],
    964: [0, 0.44444, 0.13472, 0, 0.52083],
    965: [0, 0.44444, 0.03704, 0, 0.63055],
    966: [0.19444, 0.44444, 0, 0, 0.74722],
    967: [0.19444, 0.44444, 0, 0, 0.71805],
    968: [0.19444, 0.69444, 0.03704, 0, 0.75833],
    969: [0, 0.44444, 0.03704, 0, 0.71782],
    977: [0, 0.69444, 0, 0, 0.69155],
    981: [0.19444, 0.69444, 0, 0, 0.7125],
    982: [0, 0.44444, 0.03194, 0, 0.975],
    1009: [0.19444, 0.44444, 0, 0, 0.6118],
    1013: [0, 0.44444, 0, 0, 0.48333],
    57649: [0, 0.44444, 0, 0, 0.39352],
    57911: [0.19444, 0.44444, 0, 0, 0.43889]
  },
  "Math-Italic": {
    32: [0, 0, 0, 0, 0.25],
    48: [0, 0.43056, 0, 0, 0.5],
    49: [0, 0.43056, 0, 0, 0.5],
    50: [0, 0.43056, 0, 0, 0.5],
    51: [0.19444, 0.43056, 0, 0, 0.5],
    52: [0.19444, 0.43056, 0, 0, 0.5],
    53: [0.19444, 0.43056, 0, 0, 0.5],
    54: [0, 0.64444, 0, 0, 0.5],
    55: [0.19444, 0.43056, 0, 0, 0.5],
    56: [0, 0.64444, 0, 0, 0.5],
    57: [0.19444, 0.43056, 0, 0, 0.5],
    65: [0, 0.68333, 0, 0.13889, 0.75],
    66: [0, 0.68333, 0.05017, 0.08334, 0.75851],
    67: [0, 0.68333, 0.07153, 0.08334, 0.71472],
    68: [0, 0.68333, 0.02778, 0.05556, 0.82792],
    69: [0, 0.68333, 0.05764, 0.08334, 0.7382],
    70: [0, 0.68333, 0.13889, 0.08334, 0.64306],
    71: [0, 0.68333, 0, 0.08334, 0.78625],
    72: [0, 0.68333, 0.08125, 0.05556, 0.83125],
    73: [0, 0.68333, 0.07847, 0.11111, 0.43958],
    74: [0, 0.68333, 0.09618, 0.16667, 0.55451],
    75: [0, 0.68333, 0.07153, 0.05556, 0.84931],
    76: [0, 0.68333, 0, 0.02778, 0.68056],
    77: [0, 0.68333, 0.10903, 0.08334, 0.97014],
    78: [0, 0.68333, 0.10903, 0.08334, 0.80347],
    79: [0, 0.68333, 0.02778, 0.08334, 0.76278],
    80: [0, 0.68333, 0.13889, 0.08334, 0.64201],
    81: [0.19444, 0.68333, 0, 0.08334, 0.79056],
    82: [0, 0.68333, 773e-5, 0.08334, 0.75929],
    83: [0, 0.68333, 0.05764, 0.08334, 0.6132],
    84: [0, 0.68333, 0.13889, 0.08334, 0.58438],
    85: [0, 0.68333, 0.10903, 0.02778, 0.68278],
    86: [0, 0.68333, 0.22222, 0, 0.58333],
    87: [0, 0.68333, 0.13889, 0, 0.94445],
    88: [0, 0.68333, 0.07847, 0.08334, 0.82847],
    89: [0, 0.68333, 0.22222, 0, 0.58056],
    90: [0, 0.68333, 0.07153, 0.08334, 0.68264],
    97: [0, 0.43056, 0, 0, 0.52859],
    98: [0, 0.69444, 0, 0, 0.42917],
    99: [0, 0.43056, 0, 0.05556, 0.43276],
    100: [0, 0.69444, 0, 0.16667, 0.52049],
    101: [0, 0.43056, 0, 0.05556, 0.46563],
    102: [0.19444, 0.69444, 0.10764, 0.16667, 0.48959],
    103: [0.19444, 0.43056, 0.03588, 0.02778, 0.47697],
    104: [0, 0.69444, 0, 0, 0.57616],
    105: [0, 0.65952, 0, 0, 0.34451],
    106: [0.19444, 0.65952, 0.05724, 0, 0.41181],
    107: [0, 0.69444, 0.03148, 0, 0.5206],
    108: [0, 0.69444, 0.01968, 0.08334, 0.29838],
    109: [0, 0.43056, 0, 0, 0.87801],
    110: [0, 0.43056, 0, 0, 0.60023],
    111: [0, 0.43056, 0, 0.05556, 0.48472],
    112: [0.19444, 0.43056, 0, 0.08334, 0.50313],
    113: [0.19444, 0.43056, 0.03588, 0.08334, 0.44641],
    114: [0, 0.43056, 0.02778, 0.05556, 0.45116],
    115: [0, 0.43056, 0, 0.05556, 0.46875],
    116: [0, 0.61508, 0, 0.08334, 0.36111],
    117: [0, 0.43056, 0, 0.02778, 0.57246],
    118: [0, 0.43056, 0.03588, 0.02778, 0.48472],
    119: [0, 0.43056, 0.02691, 0.08334, 0.71592],
    120: [0, 0.43056, 0, 0.02778, 0.57153],
    121: [0.19444, 0.43056, 0.03588, 0.05556, 0.49028],
    122: [0, 0.43056, 0.04398, 0.05556, 0.46505],
    160: [0, 0, 0, 0, 0.25],
    915: [0, 0.68333, 0.13889, 0.08334, 0.61528],
    916: [0, 0.68333, 0, 0.16667, 0.83334],
    920: [0, 0.68333, 0.02778, 0.08334, 0.76278],
    923: [0, 0.68333, 0, 0.16667, 0.69445],
    926: [0, 0.68333, 0.07569, 0.08334, 0.74236],
    928: [0, 0.68333, 0.08125, 0.05556, 0.83125],
    931: [0, 0.68333, 0.05764, 0.08334, 0.77986],
    933: [0, 0.68333, 0.13889, 0.05556, 0.58333],
    934: [0, 0.68333, 0, 0.08334, 0.66667],
    936: [0, 0.68333, 0.11, 0.05556, 0.61222],
    937: [0, 0.68333, 0.05017, 0.08334, 0.7724],
    945: [0, 0.43056, 37e-4, 0.02778, 0.6397],
    946: [0.19444, 0.69444, 0.05278, 0.08334, 0.56563],
    947: [0.19444, 0.43056, 0.05556, 0, 0.51773],
    948: [0, 0.69444, 0.03785, 0.05556, 0.44444],
    949: [0, 0.43056, 0, 0.08334, 0.46632],
    950: [0.19444, 0.69444, 0.07378, 0.08334, 0.4375],
    951: [0.19444, 0.43056, 0.03588, 0.05556, 0.49653],
    952: [0, 0.69444, 0.02778, 0.08334, 0.46944],
    953: [0, 0.43056, 0, 0.05556, 0.35394],
    954: [0, 0.43056, 0, 0, 0.57616],
    955: [0, 0.69444, 0, 0, 0.58334],
    956: [0.19444, 0.43056, 0, 0.02778, 0.60255],
    957: [0, 0.43056, 0.06366, 0.02778, 0.49398],
    958: [0.19444, 0.69444, 0.04601, 0.11111, 0.4375],
    959: [0, 0.43056, 0, 0.05556, 0.48472],
    960: [0, 0.43056, 0.03588, 0, 0.57003],
    961: [0.19444, 0.43056, 0, 0.08334, 0.51702],
    962: [0.09722, 0.43056, 0.07986, 0.08334, 0.36285],
    963: [0, 0.43056, 0.03588, 0, 0.57141],
    964: [0, 0.43056, 0.1132, 0.02778, 0.43715],
    965: [0, 0.43056, 0.03588, 0.02778, 0.54028],
    966: [0.19444, 0.43056, 0, 0.08334, 0.65417],
    967: [0.19444, 0.43056, 0, 0.05556, 0.62569],
    968: [0.19444, 0.69444, 0.03588, 0.11111, 0.65139],
    969: [0, 0.43056, 0.03588, 0, 0.62245],
    977: [0, 0.69444, 0, 0.08334, 0.59144],
    981: [0.19444, 0.69444, 0, 0.08334, 0.59583],
    982: [0, 0.43056, 0.02778, 0, 0.82813],
    1009: [0.19444, 0.43056, 0, 0.08334, 0.51702],
    1013: [0, 0.43056, 0, 0.05556, 0.4059],
    57649: [0, 0.43056, 0, 0.02778, 0.32246],
    57911: [0.19444, 0.43056, 0, 0.08334, 0.38403]
  },
  "SansSerif-Bold": {
    32: [0, 0, 0, 0, 0.25],
    33: [0, 0.69444, 0, 0, 0.36667],
    34: [0, 0.69444, 0, 0, 0.55834],
    35: [0.19444, 0.69444, 0, 0, 0.91667],
    36: [0.05556, 0.75, 0, 0, 0.55],
    37: [0.05556, 0.75, 0, 0, 1.02912],
    38: [0, 0.69444, 0, 0, 0.83056],
    39: [0, 0.69444, 0, 0, 0.30556],
    40: [0.25, 0.75, 0, 0, 0.42778],
    41: [0.25, 0.75, 0, 0, 0.42778],
    42: [0, 0.75, 0, 0, 0.55],
    43: [0.11667, 0.61667, 0, 0, 0.85556],
    44: [0.10556, 0.13056, 0, 0, 0.30556],
    45: [0, 0.45833, 0, 0, 0.36667],
    46: [0, 0.13056, 0, 0, 0.30556],
    47: [0.25, 0.75, 0, 0, 0.55],
    48: [0, 0.69444, 0, 0, 0.55],
    49: [0, 0.69444, 0, 0, 0.55],
    50: [0, 0.69444, 0, 0, 0.55],
    51: [0, 0.69444, 0, 0, 0.55],
    52: [0, 0.69444, 0, 0, 0.55],
    53: [0, 0.69444, 0, 0, 0.55],
    54: [0, 0.69444, 0, 0, 0.55],
    55: [0, 0.69444, 0, 0, 0.55],
    56: [0, 0.69444, 0, 0, 0.55],
    57: [0, 0.69444, 0, 0, 0.55],
    58: [0, 0.45833, 0, 0, 0.30556],
    59: [0.10556, 0.45833, 0, 0, 0.30556],
    61: [-0.09375, 0.40625, 0, 0, 0.85556],
    63: [0, 0.69444, 0, 0, 0.51945],
    64: [0, 0.69444, 0, 0, 0.73334],
    65: [0, 0.69444, 0, 0, 0.73334],
    66: [0, 0.69444, 0, 0, 0.73334],
    67: [0, 0.69444, 0, 0, 0.70278],
    68: [0, 0.69444, 0, 0, 0.79445],
    69: [0, 0.69444, 0, 0, 0.64167],
    70: [0, 0.69444, 0, 0, 0.61111],
    71: [0, 0.69444, 0, 0, 0.73334],
    72: [0, 0.69444, 0, 0, 0.79445],
    73: [0, 0.69444, 0, 0, 0.33056],
    74: [0, 0.69444, 0, 0, 0.51945],
    75: [0, 0.69444, 0, 0, 0.76389],
    76: [0, 0.69444, 0, 0, 0.58056],
    77: [0, 0.69444, 0, 0, 0.97778],
    78: [0, 0.69444, 0, 0, 0.79445],
    79: [0, 0.69444, 0, 0, 0.79445],
    80: [0, 0.69444, 0, 0, 0.70278],
    81: [0.10556, 0.69444, 0, 0, 0.79445],
    82: [0, 0.69444, 0, 0, 0.70278],
    83: [0, 0.69444, 0, 0, 0.61111],
    84: [0, 0.69444, 0, 0, 0.73334],
    85: [0, 0.69444, 0, 0, 0.76389],
    86: [0, 0.69444, 0.01528, 0, 0.73334],
    87: [0, 0.69444, 0.01528, 0, 1.03889],
    88: [0, 0.69444, 0, 0, 0.73334],
    89: [0, 0.69444, 0.0275, 0, 0.73334],
    90: [0, 0.69444, 0, 0, 0.67223],
    91: [0.25, 0.75, 0, 0, 0.34306],
    93: [0.25, 0.75, 0, 0, 0.34306],
    94: [0, 0.69444, 0, 0, 0.55],
    95: [0.35, 0.10833, 0.03056, 0, 0.55],
    97: [0, 0.45833, 0, 0, 0.525],
    98: [0, 0.69444, 0, 0, 0.56111],
    99: [0, 0.45833, 0, 0, 0.48889],
    100: [0, 0.69444, 0, 0, 0.56111],
    101: [0, 0.45833, 0, 0, 0.51111],
    102: [0, 0.69444, 0.07639, 0, 0.33611],
    103: [0.19444, 0.45833, 0.01528, 0, 0.55],
    104: [0, 0.69444, 0, 0, 0.56111],
    105: [0, 0.69444, 0, 0, 0.25556],
    106: [0.19444, 0.69444, 0, 0, 0.28611],
    107: [0, 0.69444, 0, 0, 0.53056],
    108: [0, 0.69444, 0, 0, 0.25556],
    109: [0, 0.45833, 0, 0, 0.86667],
    110: [0, 0.45833, 0, 0, 0.56111],
    111: [0, 0.45833, 0, 0, 0.55],
    112: [0.19444, 0.45833, 0, 0, 0.56111],
    113: [0.19444, 0.45833, 0, 0, 0.56111],
    114: [0, 0.45833, 0.01528, 0, 0.37222],
    115: [0, 0.45833, 0, 0, 0.42167],
    116: [0, 0.58929, 0, 0, 0.40417],
    117: [0, 0.45833, 0, 0, 0.56111],
    118: [0, 0.45833, 0.01528, 0, 0.5],
    119: [0, 0.45833, 0.01528, 0, 0.74445],
    120: [0, 0.45833, 0, 0, 0.5],
    121: [0.19444, 0.45833, 0.01528, 0, 0.5],
    122: [0, 0.45833, 0, 0, 0.47639],
    126: [0.35, 0.34444, 0, 0, 0.55],
    160: [0, 0, 0, 0, 0.25],
    168: [0, 0.69444, 0, 0, 0.55],
    176: [0, 0.69444, 0, 0, 0.73334],
    180: [0, 0.69444, 0, 0, 0.55],
    184: [0.17014, 0, 0, 0, 0.48889],
    305: [0, 0.45833, 0, 0, 0.25556],
    567: [0.19444, 0.45833, 0, 0, 0.28611],
    710: [0, 0.69444, 0, 0, 0.55],
    711: [0, 0.63542, 0, 0, 0.55],
    713: [0, 0.63778, 0, 0, 0.55],
    728: [0, 0.69444, 0, 0, 0.55],
    729: [0, 0.69444, 0, 0, 0.30556],
    730: [0, 0.69444, 0, 0, 0.73334],
    732: [0, 0.69444, 0, 0, 0.55],
    733: [0, 0.69444, 0, 0, 0.55],
    915: [0, 0.69444, 0, 0, 0.58056],
    916: [0, 0.69444, 0, 0, 0.91667],
    920: [0, 0.69444, 0, 0, 0.85556],
    923: [0, 0.69444, 0, 0, 0.67223],
    926: [0, 0.69444, 0, 0, 0.73334],
    928: [0, 0.69444, 0, 0, 0.79445],
    931: [0, 0.69444, 0, 0, 0.79445],
    933: [0, 0.69444, 0, 0, 0.85556],
    934: [0, 0.69444, 0, 0, 0.79445],
    936: [0, 0.69444, 0, 0, 0.85556],
    937: [0, 0.69444, 0, 0, 0.79445],
    8211: [0, 0.45833, 0.03056, 0, 0.55],
    8212: [0, 0.45833, 0.03056, 0, 1.10001],
    8216: [0, 0.69444, 0, 0, 0.30556],
    8217: [0, 0.69444, 0, 0, 0.30556],
    8220: [0, 0.69444, 0, 0, 0.55834],
    8221: [0, 0.69444, 0, 0, 0.55834]
  },
  "SansSerif-Italic": {
    32: [0, 0, 0, 0, 0.25],
    33: [0, 0.69444, 0.05733, 0, 0.31945],
    34: [0, 0.69444, 316e-5, 0, 0.5],
    35: [0.19444, 0.69444, 0.05087, 0, 0.83334],
    36: [0.05556, 0.75, 0.11156, 0, 0.5],
    37: [0.05556, 0.75, 0.03126, 0, 0.83334],
    38: [0, 0.69444, 0.03058, 0, 0.75834],
    39: [0, 0.69444, 0.07816, 0, 0.27778],
    40: [0.25, 0.75, 0.13164, 0, 0.38889],
    41: [0.25, 0.75, 0.02536, 0, 0.38889],
    42: [0, 0.75, 0.11775, 0, 0.5],
    43: [0.08333, 0.58333, 0.02536, 0, 0.77778],
    44: [0.125, 0.08333, 0, 0, 0.27778],
    45: [0, 0.44444, 0.01946, 0, 0.33333],
    46: [0, 0.08333, 0, 0, 0.27778],
    47: [0.25, 0.75, 0.13164, 0, 0.5],
    48: [0, 0.65556, 0.11156, 0, 0.5],
    49: [0, 0.65556, 0.11156, 0, 0.5],
    50: [0, 0.65556, 0.11156, 0, 0.5],
    51: [0, 0.65556, 0.11156, 0, 0.5],
    52: [0, 0.65556, 0.11156, 0, 0.5],
    53: [0, 0.65556, 0.11156, 0, 0.5],
    54: [0, 0.65556, 0.11156, 0, 0.5],
    55: [0, 0.65556, 0.11156, 0, 0.5],
    56: [0, 0.65556, 0.11156, 0, 0.5],
    57: [0, 0.65556, 0.11156, 0, 0.5],
    58: [0, 0.44444, 0.02502, 0, 0.27778],
    59: [0.125, 0.44444, 0.02502, 0, 0.27778],
    61: [-0.13, 0.37, 0.05087, 0, 0.77778],
    63: [0, 0.69444, 0.11809, 0, 0.47222],
    64: [0, 0.69444, 0.07555, 0, 0.66667],
    65: [0, 0.69444, 0, 0, 0.66667],
    66: [0, 0.69444, 0.08293, 0, 0.66667],
    67: [0, 0.69444, 0.11983, 0, 0.63889],
    68: [0, 0.69444, 0.07555, 0, 0.72223],
    69: [0, 0.69444, 0.11983, 0, 0.59722],
    70: [0, 0.69444, 0.13372, 0, 0.56945],
    71: [0, 0.69444, 0.11983, 0, 0.66667],
    72: [0, 0.69444, 0.08094, 0, 0.70834],
    73: [0, 0.69444, 0.13372, 0, 0.27778],
    74: [0, 0.69444, 0.08094, 0, 0.47222],
    75: [0, 0.69444, 0.11983, 0, 0.69445],
    76: [0, 0.69444, 0, 0, 0.54167],
    77: [0, 0.69444, 0.08094, 0, 0.875],
    78: [0, 0.69444, 0.08094, 0, 0.70834],
    79: [0, 0.69444, 0.07555, 0, 0.73611],
    80: [0, 0.69444, 0.08293, 0, 0.63889],
    81: [0.125, 0.69444, 0.07555, 0, 0.73611],
    82: [0, 0.69444, 0.08293, 0, 0.64584],
    83: [0, 0.69444, 0.09205, 0, 0.55556],
    84: [0, 0.69444, 0.13372, 0, 0.68056],
    85: [0, 0.69444, 0.08094, 0, 0.6875],
    86: [0, 0.69444, 0.1615, 0, 0.66667],
    87: [0, 0.69444, 0.1615, 0, 0.94445],
    88: [0, 0.69444, 0.13372, 0, 0.66667],
    89: [0, 0.69444, 0.17261, 0, 0.66667],
    90: [0, 0.69444, 0.11983, 0, 0.61111],
    91: [0.25, 0.75, 0.15942, 0, 0.28889],
    93: [0.25, 0.75, 0.08719, 0, 0.28889],
    94: [0, 0.69444, 0.0799, 0, 0.5],
    95: [0.35, 0.09444, 0.08616, 0, 0.5],
    97: [0, 0.44444, 981e-5, 0, 0.48056],
    98: [0, 0.69444, 0.03057, 0, 0.51667],
    99: [0, 0.44444, 0.08336, 0, 0.44445],
    100: [0, 0.69444, 0.09483, 0, 0.51667],
    101: [0, 0.44444, 0.06778, 0, 0.44445],
    102: [0, 0.69444, 0.21705, 0, 0.30556],
    103: [0.19444, 0.44444, 0.10836, 0, 0.5],
    104: [0, 0.69444, 0.01778, 0, 0.51667],
    105: [0, 0.67937, 0.09718, 0, 0.23889],
    106: [0.19444, 0.67937, 0.09162, 0, 0.26667],
    107: [0, 0.69444, 0.08336, 0, 0.48889],
    108: [0, 0.69444, 0.09483, 0, 0.23889],
    109: [0, 0.44444, 0.01778, 0, 0.79445],
    110: [0, 0.44444, 0.01778, 0, 0.51667],
    111: [0, 0.44444, 0.06613, 0, 0.5],
    112: [0.19444, 0.44444, 0.0389, 0, 0.51667],
    113: [0.19444, 0.44444, 0.04169, 0, 0.51667],
    114: [0, 0.44444, 0.10836, 0, 0.34167],
    115: [0, 0.44444, 0.0778, 0, 0.38333],
    116: [0, 0.57143, 0.07225, 0, 0.36111],
    117: [0, 0.44444, 0.04169, 0, 0.51667],
    118: [0, 0.44444, 0.10836, 0, 0.46111],
    119: [0, 0.44444, 0.10836, 0, 0.68334],
    120: [0, 0.44444, 0.09169, 0, 0.46111],
    121: [0.19444, 0.44444, 0.10836, 0, 0.46111],
    122: [0, 0.44444, 0.08752, 0, 0.43472],
    126: [0.35, 0.32659, 0.08826, 0, 0.5],
    160: [0, 0, 0, 0, 0.25],
    168: [0, 0.67937, 0.06385, 0, 0.5],
    176: [0, 0.69444, 0, 0, 0.73752],
    184: [0.17014, 0, 0, 0, 0.44445],
    305: [0, 0.44444, 0.04169, 0, 0.23889],
    567: [0.19444, 0.44444, 0.04169, 0, 0.26667],
    710: [0, 0.69444, 0.0799, 0, 0.5],
    711: [0, 0.63194, 0.08432, 0, 0.5],
    713: [0, 0.60889, 0.08776, 0, 0.5],
    714: [0, 0.69444, 0.09205, 0, 0.5],
    715: [0, 0.69444, 0, 0, 0.5],
    728: [0, 0.69444, 0.09483, 0, 0.5],
    729: [0, 0.67937, 0.07774, 0, 0.27778],
    730: [0, 0.69444, 0, 0, 0.73752],
    732: [0, 0.67659, 0.08826, 0, 0.5],
    733: [0, 0.69444, 0.09205, 0, 0.5],
    915: [0, 0.69444, 0.13372, 0, 0.54167],
    916: [0, 0.69444, 0, 0, 0.83334],
    920: [0, 0.69444, 0.07555, 0, 0.77778],
    923: [0, 0.69444, 0, 0, 0.61111],
    926: [0, 0.69444, 0.12816, 0, 0.66667],
    928: [0, 0.69444, 0.08094, 0, 0.70834],
    931: [0, 0.69444, 0.11983, 0, 0.72222],
    933: [0, 0.69444, 0.09031, 0, 0.77778],
    934: [0, 0.69444, 0.04603, 0, 0.72222],
    936: [0, 0.69444, 0.09031, 0, 0.77778],
    937: [0, 0.69444, 0.08293, 0, 0.72222],
    8211: [0, 0.44444, 0.08616, 0, 0.5],
    8212: [0, 0.44444, 0.08616, 0, 1],
    8216: [0, 0.69444, 0.07816, 0, 0.27778],
    8217: [0, 0.69444, 0.07816, 0, 0.27778],
    8220: [0, 0.69444, 0.14205, 0, 0.5],
    8221: [0, 0.69444, 316e-5, 0, 0.5]
  },
  "SansSerif-Regular": {
    32: [0, 0, 0, 0, 0.25],
    33: [0, 0.69444, 0, 0, 0.31945],
    34: [0, 0.69444, 0, 0, 0.5],
    35: [0.19444, 0.69444, 0, 0, 0.83334],
    36: [0.05556, 0.75, 0, 0, 0.5],
    37: [0.05556, 0.75, 0, 0, 0.83334],
    38: [0, 0.69444, 0, 0, 0.75834],
    39: [0, 0.69444, 0, 0, 0.27778],
    40: [0.25, 0.75, 0, 0, 0.38889],
    41: [0.25, 0.75, 0, 0, 0.38889],
    42: [0, 0.75, 0, 0, 0.5],
    43: [0.08333, 0.58333, 0, 0, 0.77778],
    44: [0.125, 0.08333, 0, 0, 0.27778],
    45: [0, 0.44444, 0, 0, 0.33333],
    46: [0, 0.08333, 0, 0, 0.27778],
    47: [0.25, 0.75, 0, 0, 0.5],
    48: [0, 0.65556, 0, 0, 0.5],
    49: [0, 0.65556, 0, 0, 0.5],
    50: [0, 0.65556, 0, 0, 0.5],
    51: [0, 0.65556, 0, 0, 0.5],
    52: [0, 0.65556, 0, 0, 0.5],
    53: [0, 0.65556, 0, 0, 0.5],
    54: [0, 0.65556, 0, 0, 0.5],
    55: [0, 0.65556, 0, 0, 0.5],
    56: [0, 0.65556, 0, 0, 0.5],
    57: [0, 0.65556, 0, 0, 0.5],
    58: [0, 0.44444, 0, 0, 0.27778],
    59: [0.125, 0.44444, 0, 0, 0.27778],
    61: [-0.13, 0.37, 0, 0, 0.77778],
    63: [0, 0.69444, 0, 0, 0.47222],
    64: [0, 0.69444, 0, 0, 0.66667],
    65: [0, 0.69444, 0, 0, 0.66667],
    66: [0, 0.69444, 0, 0, 0.66667],
    67: [0, 0.69444, 0, 0, 0.63889],
    68: [0, 0.69444, 0, 0, 0.72223],
    69: [0, 0.69444, 0, 0, 0.59722],
    70: [0, 0.69444, 0, 0, 0.56945],
    71: [0, 0.69444, 0, 0, 0.66667],
    72: [0, 0.69444, 0, 0, 0.70834],
    73: [0, 0.69444, 0, 0, 0.27778],
    74: [0, 0.69444, 0, 0, 0.47222],
    75: [0, 0.69444, 0, 0, 0.69445],
    76: [0, 0.69444, 0, 0, 0.54167],
    77: [0, 0.69444, 0, 0, 0.875],
    78: [0, 0.69444, 0, 0, 0.70834],
    79: [0, 0.69444, 0, 0, 0.73611],
    80: [0, 0.69444, 0, 0, 0.63889],
    81: [0.125, 0.69444, 0, 0, 0.73611],
    82: [0, 0.69444, 0, 0, 0.64584],
    83: [0, 0.69444, 0, 0, 0.55556],
    84: [0, 0.69444, 0, 0, 0.68056],
    85: [0, 0.69444, 0, 0, 0.6875],
    86: [0, 0.69444, 0.01389, 0, 0.66667],
    87: [0, 0.69444, 0.01389, 0, 0.94445],
    88: [0, 0.69444, 0, 0, 0.66667],
    89: [0, 0.69444, 0.025, 0, 0.66667],
    90: [0, 0.69444, 0, 0, 0.61111],
    91: [0.25, 0.75, 0, 0, 0.28889],
    93: [0.25, 0.75, 0, 0, 0.28889],
    94: [0, 0.69444, 0, 0, 0.5],
    95: [0.35, 0.09444, 0.02778, 0, 0.5],
    97: [0, 0.44444, 0, 0, 0.48056],
    98: [0, 0.69444, 0, 0, 0.51667],
    99: [0, 0.44444, 0, 0, 0.44445],
    100: [0, 0.69444, 0, 0, 0.51667],
    101: [0, 0.44444, 0, 0, 0.44445],
    102: [0, 0.69444, 0.06944, 0, 0.30556],
    103: [0.19444, 0.44444, 0.01389, 0, 0.5],
    104: [0, 0.69444, 0, 0, 0.51667],
    105: [0, 0.67937, 0, 0, 0.23889],
    106: [0.19444, 0.67937, 0, 0, 0.26667],
    107: [0, 0.69444, 0, 0, 0.48889],
    108: [0, 0.69444, 0, 0, 0.23889],
    109: [0, 0.44444, 0, 0, 0.79445],
    110: [0, 0.44444, 0, 0, 0.51667],
    111: [0, 0.44444, 0, 0, 0.5],
    112: [0.19444, 0.44444, 0, 0, 0.51667],
    113: [0.19444, 0.44444, 0, 0, 0.51667],
    114: [0, 0.44444, 0.01389, 0, 0.34167],
    115: [0, 0.44444, 0, 0, 0.38333],
    116: [0, 0.57143, 0, 0, 0.36111],
    117: [0, 0.44444, 0, 0, 0.51667],
    118: [0, 0.44444, 0.01389, 0, 0.46111],
    119: [0, 0.44444, 0.01389, 0, 0.68334],
    120: [0, 0.44444, 0, 0, 0.46111],
    121: [0.19444, 0.44444, 0.01389, 0, 0.46111],
    122: [0, 0.44444, 0, 0, 0.43472],
    126: [0.35, 0.32659, 0, 0, 0.5],
    160: [0, 0, 0, 0, 0.25],
    168: [0, 0.67937, 0, 0, 0.5],
    176: [0, 0.69444, 0, 0, 0.66667],
    184: [0.17014, 0, 0, 0, 0.44445],
    305: [0, 0.44444, 0, 0, 0.23889],
    567: [0.19444, 0.44444, 0, 0, 0.26667],
    710: [0, 0.69444, 0, 0, 0.5],
    711: [0, 0.63194, 0, 0, 0.5],
    713: [0, 0.60889, 0, 0, 0.5],
    714: [0, 0.69444, 0, 0, 0.5],
    715: [0, 0.69444, 0, 0, 0.5],
    728: [0, 0.69444, 0, 0, 0.5],
    729: [0, 0.67937, 0, 0, 0.27778],
    730: [0, 0.69444, 0, 0, 0.66667],
    732: [0, 0.67659, 0, 0, 0.5],
    733: [0, 0.69444, 0, 0, 0.5],
    915: [0, 0.69444, 0, 0, 0.54167],
    916: [0, 0.69444, 0, 0, 0.83334],
    920: [0, 0.69444, 0, 0, 0.77778],
    923: [0, 0.69444, 0, 0, 0.61111],
    926: [0, 0.69444, 0, 0, 0.66667],
    928: [0, 0.69444, 0, 0, 0.70834],
    931: [0, 0.69444, 0, 0, 0.72222],
    933: [0, 0.69444, 0, 0, 0.77778],
    934: [0, 0.69444, 0, 0, 0.72222],
    936: [0, 0.69444, 0, 0, 0.77778],
    937: [0, 0.69444, 0, 0, 0.72222],
    8211: [0, 0.44444, 0.02778, 0, 0.5],
    8212: [0, 0.44444, 0.02778, 0, 1],
    8216: [0, 0.69444, 0, 0, 0.27778],
    8217: [0, 0.69444, 0, 0, 0.27778],
    8220: [0, 0.69444, 0, 0, 0.5],
    8221: [0, 0.69444, 0, 0, 0.5]
  },
  "Script-Regular": {
    32: [0, 0, 0, 0, 0.25],
    65: [0, 0.7, 0.22925, 0, 0.80253],
    66: [0, 0.7, 0.04087, 0, 0.90757],
    67: [0, 0.7, 0.1689, 0, 0.66619],
    68: [0, 0.7, 0.09371, 0, 0.77443],
    69: [0, 0.7, 0.18583, 0, 0.56162],
    70: [0, 0.7, 0.13634, 0, 0.89544],
    71: [0, 0.7, 0.17322, 0, 0.60961],
    72: [0, 0.7, 0.29694, 0, 0.96919],
    73: [0, 0.7, 0.19189, 0, 0.80907],
    74: [0.27778, 0.7, 0.19189, 0, 1.05159],
    75: [0, 0.7, 0.31259, 0, 0.91364],
    76: [0, 0.7, 0.19189, 0, 0.87373],
    77: [0, 0.7, 0.15981, 0, 1.08031],
    78: [0, 0.7, 0.3525, 0, 0.9015],
    79: [0, 0.7, 0.08078, 0, 0.73787],
    80: [0, 0.7, 0.08078, 0, 1.01262],
    81: [0, 0.7, 0.03305, 0, 0.88282],
    82: [0, 0.7, 0.06259, 0, 0.85],
    83: [0, 0.7, 0.19189, 0, 0.86767],
    84: [0, 0.7, 0.29087, 0, 0.74697],
    85: [0, 0.7, 0.25815, 0, 0.79996],
    86: [0, 0.7, 0.27523, 0, 0.62204],
    87: [0, 0.7, 0.27523, 0, 0.80532],
    88: [0, 0.7, 0.26006, 0, 0.94445],
    89: [0, 0.7, 0.2939, 0, 0.70961],
    90: [0, 0.7, 0.24037, 0, 0.8212],
    160: [0, 0, 0, 0, 0.25]
  },
  "Size1-Regular": {
    32: [0, 0, 0, 0, 0.25],
    40: [0.35001, 0.85, 0, 0, 0.45834],
    41: [0.35001, 0.85, 0, 0, 0.45834],
    47: [0.35001, 0.85, 0, 0, 0.57778],
    91: [0.35001, 0.85, 0, 0, 0.41667],
    92: [0.35001, 0.85, 0, 0, 0.57778],
    93: [0.35001, 0.85, 0, 0, 0.41667],
    123: [0.35001, 0.85, 0, 0, 0.58334],
    125: [0.35001, 0.85, 0, 0, 0.58334],
    160: [0, 0, 0, 0, 0.25],
    710: [0, 0.72222, 0, 0, 0.55556],
    732: [0, 0.72222, 0, 0, 0.55556],
    770: [0, 0.72222, 0, 0, 0.55556],
    771: [0, 0.72222, 0, 0, 0.55556],
    8214: [-99e-5, 0.601, 0, 0, 0.77778],
    8593: [1e-5, 0.6, 0, 0, 0.66667],
    8595: [1e-5, 0.6, 0, 0, 0.66667],
    8657: [1e-5, 0.6, 0, 0, 0.77778],
    8659: [1e-5, 0.6, 0, 0, 0.77778],
    8719: [0.25001, 0.75, 0, 0, 0.94445],
    8720: [0.25001, 0.75, 0, 0, 0.94445],
    8721: [0.25001, 0.75, 0, 0, 1.05556],
    8730: [0.35001, 0.85, 0, 0, 1],
    8739: [-599e-5, 0.606, 0, 0, 0.33333],
    8741: [-599e-5, 0.606, 0, 0, 0.55556],
    8747: [0.30612, 0.805, 0.19445, 0, 0.47222],
    8748: [0.306, 0.805, 0.19445, 0, 0.47222],
    8749: [0.306, 0.805, 0.19445, 0, 0.47222],
    8750: [0.30612, 0.805, 0.19445, 0, 0.47222],
    8896: [0.25001, 0.75, 0, 0, 0.83334],
    8897: [0.25001, 0.75, 0, 0, 0.83334],
    8898: [0.25001, 0.75, 0, 0, 0.83334],
    8899: [0.25001, 0.75, 0, 0, 0.83334],
    8968: [0.35001, 0.85, 0, 0, 0.47222],
    8969: [0.35001, 0.85, 0, 0, 0.47222],
    8970: [0.35001, 0.85, 0, 0, 0.47222],
    8971: [0.35001, 0.85, 0, 0, 0.47222],
    9168: [-99e-5, 0.601, 0, 0, 0.66667],
    10216: [0.35001, 0.85, 0, 0, 0.47222],
    10217: [0.35001, 0.85, 0, 0, 0.47222],
    10752: [0.25001, 0.75, 0, 0, 1.11111],
    10753: [0.25001, 0.75, 0, 0, 1.11111],
    10754: [0.25001, 0.75, 0, 0, 1.11111],
    10756: [0.25001, 0.75, 0, 0, 0.83334],
    10758: [0.25001, 0.75, 0, 0, 0.83334]
  },
  "Size2-Regular": {
    32: [0, 0, 0, 0, 0.25],
    40: [0.65002, 1.15, 0, 0, 0.59722],
    41: [0.65002, 1.15, 0, 0, 0.59722],
    47: [0.65002, 1.15, 0, 0, 0.81111],
    91: [0.65002, 1.15, 0, 0, 0.47222],
    92: [0.65002, 1.15, 0, 0, 0.81111],
    93: [0.65002, 1.15, 0, 0, 0.47222],
    123: [0.65002, 1.15, 0, 0, 0.66667],
    125: [0.65002, 1.15, 0, 0, 0.66667],
    160: [0, 0, 0, 0, 0.25],
    710: [0, 0.75, 0, 0, 1],
    732: [0, 0.75, 0, 0, 1],
    770: [0, 0.75, 0, 0, 1],
    771: [0, 0.75, 0, 0, 1],
    8719: [0.55001, 1.05, 0, 0, 1.27778],
    8720: [0.55001, 1.05, 0, 0, 1.27778],
    8721: [0.55001, 1.05, 0, 0, 1.44445],
    8730: [0.65002, 1.15, 0, 0, 1],
    8747: [0.86225, 1.36, 0.44445, 0, 0.55556],
    8748: [0.862, 1.36, 0.44445, 0, 0.55556],
    8749: [0.862, 1.36, 0.44445, 0, 0.55556],
    8750: [0.86225, 1.36, 0.44445, 0, 0.55556],
    8896: [0.55001, 1.05, 0, 0, 1.11111],
    8897: [0.55001, 1.05, 0, 0, 1.11111],
    8898: [0.55001, 1.05, 0, 0, 1.11111],
    8899: [0.55001, 1.05, 0, 0, 1.11111],
    8968: [0.65002, 1.15, 0, 0, 0.52778],
    8969: [0.65002, 1.15, 0, 0, 0.52778],
    8970: [0.65002, 1.15, 0, 0, 0.52778],
    8971: [0.65002, 1.15, 0, 0, 0.52778],
    10216: [0.65002, 1.15, 0, 0, 0.61111],
    10217: [0.65002, 1.15, 0, 0, 0.61111],
    10752: [0.55001, 1.05, 0, 0, 1.51112],
    10753: [0.55001, 1.05, 0, 0, 1.51112],
    10754: [0.55001, 1.05, 0, 0, 1.51112],
    10756: [0.55001, 1.05, 0, 0, 1.11111],
    10758: [0.55001, 1.05, 0, 0, 1.11111]
  },
  "Size3-Regular": {
    32: [0, 0, 0, 0, 0.25],
    40: [0.95003, 1.45, 0, 0, 0.73611],
    41: [0.95003, 1.45, 0, 0, 0.73611],
    47: [0.95003, 1.45, 0, 0, 1.04445],
    91: [0.95003, 1.45, 0, 0, 0.52778],
    92: [0.95003, 1.45, 0, 0, 1.04445],
    93: [0.95003, 1.45, 0, 0, 0.52778],
    123: [0.95003, 1.45, 0, 0, 0.75],
    125: [0.95003, 1.45, 0, 0, 0.75],
    160: [0, 0, 0, 0, 0.25],
    710: [0, 0.75, 0, 0, 1.44445],
    732: [0, 0.75, 0, 0, 1.44445],
    770: [0, 0.75, 0, 0, 1.44445],
    771: [0, 0.75, 0, 0, 1.44445],
    8730: [0.95003, 1.45, 0, 0, 1],
    8968: [0.95003, 1.45, 0, 0, 0.58334],
    8969: [0.95003, 1.45, 0, 0, 0.58334],
    8970: [0.95003, 1.45, 0, 0, 0.58334],
    8971: [0.95003, 1.45, 0, 0, 0.58334],
    10216: [0.95003, 1.45, 0, 0, 0.75],
    10217: [0.95003, 1.45, 0, 0, 0.75]
  },
  "Size4-Regular": {
    32: [0, 0, 0, 0, 0.25],
    40: [1.25003, 1.75, 0, 0, 0.79167],
    41: [1.25003, 1.75, 0, 0, 0.79167],
    47: [1.25003, 1.75, 0, 0, 1.27778],
    91: [1.25003, 1.75, 0, 0, 0.58334],
    92: [1.25003, 1.75, 0, 0, 1.27778],
    93: [1.25003, 1.75, 0, 0, 0.58334],
    123: [1.25003, 1.75, 0, 0, 0.80556],
    125: [1.25003, 1.75, 0, 0, 0.80556],
    160: [0, 0, 0, 0, 0.25],
    710: [0, 0.825, 0, 0, 1.8889],
    732: [0, 0.825, 0, 0, 1.8889],
    770: [0, 0.825, 0, 0, 1.8889],
    771: [0, 0.825, 0, 0, 1.8889],
    8730: [1.25003, 1.75, 0, 0, 1],
    8968: [1.25003, 1.75, 0, 0, 0.63889],
    8969: [1.25003, 1.75, 0, 0, 0.63889],
    8970: [1.25003, 1.75, 0, 0, 0.63889],
    8971: [1.25003, 1.75, 0, 0, 0.63889],
    9115: [0.64502, 1.155, 0, 0, 0.875],
    9116: [1e-5, 0.6, 0, 0, 0.875],
    9117: [0.64502, 1.155, 0, 0, 0.875],
    9118: [0.64502, 1.155, 0, 0, 0.875],
    9119: [1e-5, 0.6, 0, 0, 0.875],
    9120: [0.64502, 1.155, 0, 0, 0.875],
    9121: [0.64502, 1.155, 0, 0, 0.66667],
    9122: [-99e-5, 0.601, 0, 0, 0.66667],
    9123: [0.64502, 1.155, 0, 0, 0.66667],
    9124: [0.64502, 1.155, 0, 0, 0.66667],
    9125: [-99e-5, 0.601, 0, 0, 0.66667],
    9126: [0.64502, 1.155, 0, 0, 0.66667],
    9127: [1e-5, 0.9, 0, 0, 0.88889],
    9128: [0.65002, 1.15, 0, 0, 0.88889],
    9129: [0.90001, 0, 0, 0, 0.88889],
    9130: [0, 0.3, 0, 0, 0.88889],
    9131: [1e-5, 0.9, 0, 0, 0.88889],
    9132: [0.65002, 1.15, 0, 0, 0.88889],
    9133: [0.90001, 0, 0, 0, 0.88889],
    9143: [0.88502, 0.915, 0, 0, 1.05556],
    10216: [1.25003, 1.75, 0, 0, 0.80556],
    10217: [1.25003, 1.75, 0, 0, 0.80556],
    57344: [-499e-5, 0.605, 0, 0, 1.05556],
    57345: [-499e-5, 0.605, 0, 0, 1.05556],
    57680: [0, 0.12, 0, 0, 0.45],
    57681: [0, 0.12, 0, 0, 0.45],
    57682: [0, 0.12, 0, 0, 0.45],
    57683: [0, 0.12, 0, 0, 0.45]
  },
  "Typewriter-Regular": {
    32: [0, 0, 0, 0, 0.525],
    33: [0, 0.61111, 0, 0, 0.525],
    34: [0, 0.61111, 0, 0, 0.525],
    35: [0, 0.61111, 0, 0, 0.525],
    36: [0.08333, 0.69444, 0, 0, 0.525],
    37: [0.08333, 0.69444, 0, 0, 0.525],
    38: [0, 0.61111, 0, 0, 0.525],
    39: [0, 0.61111, 0, 0, 0.525],
    40: [0.08333, 0.69444, 0, 0, 0.525],
    41: [0.08333, 0.69444, 0, 0, 0.525],
    42: [0, 0.52083, 0, 0, 0.525],
    43: [-0.08056, 0.53055, 0, 0, 0.525],
    44: [0.13889, 0.125, 0, 0, 0.525],
    45: [-0.08056, 0.53055, 0, 0, 0.525],
    46: [0, 0.125, 0, 0, 0.525],
    47: [0.08333, 0.69444, 0, 0, 0.525],
    48: [0, 0.61111, 0, 0, 0.525],
    49: [0, 0.61111, 0, 0, 0.525],
    50: [0, 0.61111, 0, 0, 0.525],
    51: [0, 0.61111, 0, 0, 0.525],
    52: [0, 0.61111, 0, 0, 0.525],
    53: [0, 0.61111, 0, 0, 0.525],
    54: [0, 0.61111, 0, 0, 0.525],
    55: [0, 0.61111, 0, 0, 0.525],
    56: [0, 0.61111, 0, 0, 0.525],
    57: [0, 0.61111, 0, 0, 0.525],
    58: [0, 0.43056, 0, 0, 0.525],
    59: [0.13889, 0.43056, 0, 0, 0.525],
    60: [-0.05556, 0.55556, 0, 0, 0.525],
    61: [-0.19549, 0.41562, 0, 0, 0.525],
    62: [-0.05556, 0.55556, 0, 0, 0.525],
    63: [0, 0.61111, 0, 0, 0.525],
    64: [0, 0.61111, 0, 0, 0.525],
    65: [0, 0.61111, 0, 0, 0.525],
    66: [0, 0.61111, 0, 0, 0.525],
    67: [0, 0.61111, 0, 0, 0.525],
    68: [0, 0.61111, 0, 0, 0.525],
    69: [0, 0.61111, 0, 0, 0.525],
    70: [0, 0.61111, 0, 0, 0.525],
    71: [0, 0.61111, 0, 0, 0.525],
    72: [0, 0.61111, 0, 0, 0.525],
    73: [0, 0.61111, 0, 0, 0.525],
    74: [0, 0.61111, 0, 0, 0.525],
    75: [0, 0.61111, 0, 0, 0.525],
    76: [0, 0.61111, 0, 0, 0.525],
    77: [0, 0.61111, 0, 0, 0.525],
    78: [0, 0.61111, 0, 0, 0.525],
    79: [0, 0.61111, 0, 0, 0.525],
    80: [0, 0.61111, 0, 0, 0.525],
    81: [0.13889, 0.61111, 0, 0, 0.525],
    82: [0, 0.61111, 0, 0, 0.525],
    83: [0, 0.61111, 0, 0, 0.525],
    84: [0, 0.61111, 0, 0, 0.525],
    85: [0, 0.61111, 0, 0, 0.525],
    86: [0, 0.61111, 0, 0, 0.525],
    87: [0, 0.61111, 0, 0, 0.525],
    88: [0, 0.61111, 0, 0, 0.525],
    89: [0, 0.61111, 0, 0, 0.525],
    90: [0, 0.61111, 0, 0, 0.525],
    91: [0.08333, 0.69444, 0, 0, 0.525],
    92: [0.08333, 0.69444, 0, 0, 0.525],
    93: [0.08333, 0.69444, 0, 0, 0.525],
    94: [0, 0.61111, 0, 0, 0.525],
    95: [0.09514, 0, 0, 0, 0.525],
    96: [0, 0.61111, 0, 0, 0.525],
    97: [0, 0.43056, 0, 0, 0.525],
    98: [0, 0.61111, 0, 0, 0.525],
    99: [0, 0.43056, 0, 0, 0.525],
    100: [0, 0.61111, 0, 0, 0.525],
    101: [0, 0.43056, 0, 0, 0.525],
    102: [0, 0.61111, 0, 0, 0.525],
    103: [0.22222, 0.43056, 0, 0, 0.525],
    104: [0, 0.61111, 0, 0, 0.525],
    105: [0, 0.61111, 0, 0, 0.525],
    106: [0.22222, 0.61111, 0, 0, 0.525],
    107: [0, 0.61111, 0, 0, 0.525],
    108: [0, 0.61111, 0, 0, 0.525],
    109: [0, 0.43056, 0, 0, 0.525],
    110: [0, 0.43056, 0, 0, 0.525],
    111: [0, 0.43056, 0, 0, 0.525],
    112: [0.22222, 0.43056, 0, 0, 0.525],
    113: [0.22222, 0.43056, 0, 0, 0.525],
    114: [0, 0.43056, 0, 0, 0.525],
    115: [0, 0.43056, 0, 0, 0.525],
    116: [0, 0.55358, 0, 0, 0.525],
    117: [0, 0.43056, 0, 0, 0.525],
    118: [0, 0.43056, 0, 0, 0.525],
    119: [0, 0.43056, 0, 0, 0.525],
    120: [0, 0.43056, 0, 0, 0.525],
    121: [0.22222, 0.43056, 0, 0, 0.525],
    122: [0, 0.43056, 0, 0, 0.525],
    123: [0.08333, 0.69444, 0, 0, 0.525],
    124: [0.08333, 0.69444, 0, 0, 0.525],
    125: [0.08333, 0.69444, 0, 0, 0.525],
    126: [0, 0.61111, 0, 0, 0.525],
    127: [0, 0.61111, 0, 0, 0.525],
    160: [0, 0, 0, 0, 0.525],
    176: [0, 0.61111, 0, 0, 0.525],
    184: [0.19445, 0, 0, 0, 0.525],
    305: [0, 0.43056, 0, 0, 0.525],
    567: [0.22222, 0.43056, 0, 0, 0.525],
    711: [0, 0.56597, 0, 0, 0.525],
    713: [0, 0.56555, 0, 0, 0.525],
    714: [0, 0.61111, 0, 0, 0.525],
    715: [0, 0.61111, 0, 0, 0.525],
    728: [0, 0.61111, 0, 0, 0.525],
    730: [0, 0.61111, 0, 0, 0.525],
    770: [0, 0.61111, 0, 0, 0.525],
    771: [0, 0.61111, 0, 0, 0.525],
    776: [0, 0.61111, 0, 0, 0.525],
    915: [0, 0.61111, 0, 0, 0.525],
    916: [0, 0.61111, 0, 0, 0.525],
    920: [0, 0.61111, 0, 0, 0.525],
    923: [0, 0.61111, 0, 0, 0.525],
    926: [0, 0.61111, 0, 0, 0.525],
    928: [0, 0.61111, 0, 0, 0.525],
    931: [0, 0.61111, 0, 0, 0.525],
    933: [0, 0.61111, 0, 0, 0.525],
    934: [0, 0.61111, 0, 0, 0.525],
    936: [0, 0.61111, 0, 0, 0.525],
    937: [0, 0.61111, 0, 0, 0.525],
    8216: [0, 0.61111, 0, 0, 0.525],
    8217: [0, 0.61111, 0, 0, 0.525],
    8242: [0, 0.61111, 0, 0, 0.525],
    9251: [0.11111, 0.21944, 0, 0, 0.525]
  }
}, gi = {
  slant: [0.25, 0.25, 0.25],
  // sigma1
  space: [0, 0, 0],
  // sigma2
  stretch: [0, 0, 0],
  // sigma3
  shrink: [0, 0, 0],
  // sigma4
  xHeight: [0.431, 0.431, 0.431],
  // sigma5
  quad: [1, 1.171, 1.472],
  // sigma6
  extraSpace: [0, 0, 0],
  // sigma7
  num1: [0.677, 0.732, 0.925],
  // sigma8
  num2: [0.394, 0.384, 0.387],
  // sigma9
  num3: [0.444, 0.471, 0.504],
  // sigma10
  denom1: [0.686, 0.752, 1.025],
  // sigma11
  denom2: [0.345, 0.344, 0.532],
  // sigma12
  sup1: [0.413, 0.503, 0.504],
  // sigma13
  sup2: [0.363, 0.431, 0.404],
  // sigma14
  sup3: [0.289, 0.286, 0.294],
  // sigma15
  sub1: [0.15, 0.143, 0.2],
  // sigma16
  sub2: [0.247, 0.286, 0.4],
  // sigma17
  supDrop: [0.386, 0.353, 0.494],
  // sigma18
  subDrop: [0.05, 0.071, 0.1],
  // sigma19
  delim1: [2.39, 1.7, 1.98],
  // sigma20
  delim2: [1.01, 1.157, 1.42],
  // sigma21
  axisHeight: [0.25, 0.25, 0.25],
  // sigma22
  // These font metrics are extracted from TeX by using tftopl on cmex10.tfm;
  // they correspond to the font parameters of the extension fonts (family 3).
  // See the TeXbook, page 441. In AMSTeX, the extension fonts scale; to
  // match cmex7, we'd use cmex7.tfm values for script and scriptscript
  // values.
  defaultRuleThickness: [0.04, 0.049, 0.049],
  // xi8; cmex7: 0.049
  bigOpSpacing1: [0.111, 0.111, 0.111],
  // xi9
  bigOpSpacing2: [0.166, 0.166, 0.166],
  // xi10
  bigOpSpacing3: [0.2, 0.2, 0.2],
  // xi11
  bigOpSpacing4: [0.6, 0.611, 0.611],
  // xi12; cmex7: 0.611
  bigOpSpacing5: [0.1, 0.143, 0.143],
  // xi13; cmex7: 0.143
  // The \sqrt rule width is taken from the height of the surd character.
  // Since we use the same font at all sizes, this thickness doesn't scale.
  sqrtRuleThickness: [0.04, 0.04, 0.04],
  // This value determines how large a pt is, for metrics which are defined
  // in terms of pts.
  // This value is also used in katex.less; if you change it make sure the
  // values match.
  ptPerEm: [10, 10, 10],
  // The space between adjacent `|` columns in an array definition. From
  // `\showthe\doublerulesep` in LaTeX. Equals 2.0 / ptPerEm.
  doubleRuleSep: [0.2, 0.2, 0.2],
  // The width of separator lines in {array} environments. From
  // `\showthe\arrayrulewidth` in LaTeX. Equals 0.4 / ptPerEm.
  arrayRuleWidth: [0.04, 0.04, 0.04],
  // Two values from LaTeX source2e:
  fboxsep: [0.3, 0.3, 0.3],
  //        3 pt / ptPerEm
  fboxrule: [0.04, 0.04, 0.04]
  // 0.4 pt / ptPerEm
}, Kn = {
  // Latin-1
  Å: "A",
  Ð: "D",
  Þ: "o",
  å: "a",
  ð: "d",
  þ: "o",
  // Cyrillic
  А: "A",
  Б: "B",
  В: "B",
  Г: "F",
  Д: "A",
  Е: "E",
  Ж: "K",
  З: "3",
  И: "N",
  Й: "N",
  К: "K",
  Л: "N",
  М: "M",
  Н: "H",
  О: "O",
  П: "N",
  Р: "P",
  С: "C",
  Т: "T",
  У: "y",
  Ф: "O",
  Х: "X",
  Ц: "U",
  Ч: "h",
  Ш: "W",
  Щ: "W",
  Ъ: "B",
  Ы: "X",
  Ь: "B",
  Э: "3",
  Ю: "X",
  Я: "R",
  а: "a",
  б: "b",
  в: "a",
  г: "r",
  д: "y",
  е: "e",
  ж: "m",
  з: "e",
  и: "n",
  й: "n",
  к: "n",
  л: "n",
  м: "m",
  н: "n",
  о: "o",
  п: "n",
  р: "p",
  с: "c",
  т: "o",
  у: "y",
  ф: "b",
  х: "x",
  ц: "n",
  ч: "n",
  ш: "w",
  щ: "w",
  ъ: "a",
  ы: "m",
  ь: "a",
  э: "e",
  ю: "m",
  я: "r"
};
function js(t, e) {
  gt[t] = e;
}
function bn(t, e, i) {
  if (!gt[e])
    throw new Error("Font metrics not found for font: " + e + ".");
  var n = t.charCodeAt(0), l = gt[e][n];
  if (!l && t[0] in Kn && (n = Kn[t[0]].charCodeAt(0), l = gt[e][n]), !l && i === "text" && Il(n) && (l = gt[e][77]), l)
    return {
      depth: l[0],
      height: l[1],
      italic: l[2],
      skew: l[3],
      width: l[4]
    };
}
var Ui = {};
function Gs(t) {
  var e;
  if (t >= 5 ? e = 0 : t >= 3 ? e = 1 : e = 2, !Ui[e]) {
    var i = Ui[e] = {
      cssEmPerMu: gi.quad[e] / 18
    };
    for (var n in gi)
      gi.hasOwnProperty(n) && (i[n] = gi[n][e]);
  }
  return Ui[e];
}
var Xs = [
  // Each element contains [textsize, scriptsize, scriptscriptsize].
  // The size mappings are taken from TeX with \normalsize=10pt.
  [1, 1, 1],
  // size1: [5, 5, 5]              \tiny
  [2, 1, 1],
  // size2: [6, 5, 5]
  [3, 1, 1],
  // size3: [7, 5, 5]              \scriptsize
  [4, 2, 1],
  // size4: [8, 6, 5]              \footnotesize
  [5, 2, 1],
  // size5: [9, 6, 5]              \small
  [6, 3, 1],
  // size6: [10, 7, 5]             \normalsize
  [7, 4, 2],
  // size7: [12, 8, 6]             \large
  [8, 6, 3],
  // size8: [14.4, 10, 7]          \Large
  [9, 7, 6],
  // size9: [17.28, 12, 10]        \LARGE
  [10, 8, 7],
  // size10: [20.74, 14.4, 12]     \huge
  [11, 10, 9]
  // size11: [24.88, 20.74, 17.28] \HUGE
], Jn = [
  // fontMetrics.js:getGlobalMetrics also uses size indexes, so if
  // you change size indexes, change that function.
  0.5,
  0.6,
  0.7,
  0.8,
  0.9,
  1,
  1.2,
  1.44,
  1.728,
  2.074,
  2.488
], Qn = function(e, i) {
  return i.size < 2 ? e : Xs[e - 1][i.size - 1];
};
class St {
  // A font family applies to a group of fonts (i.e. SansSerif), while a font
  // represents a specific font (i.e. SansSerif Bold).
  // See: https://tex.stackexchange.com/questions/22350/difference-between-textrm-and-mathrm
  /**
   * The base size index.
   */
  constructor(e) {
    this.style = void 0, this.color = void 0, this.size = void 0, this.textSize = void 0, this.phantom = void 0, this.font = void 0, this.fontFamily = void 0, this.fontWeight = void 0, this.fontShape = void 0, this.sizeMultiplier = void 0, this.maxSize = void 0, this.minRuleThickness = void 0, this._fontMetrics = void 0, this.style = e.style, this.color = e.color, this.size = e.size || St.BASESIZE, this.textSize = e.textSize || this.size, this.phantom = !!e.phantom, this.font = e.font || "", this.fontFamily = e.fontFamily || "", this.fontWeight = e.fontWeight || "", this.fontShape = e.fontShape || "", this.sizeMultiplier = Jn[this.size - 1], this.maxSize = e.maxSize, this.minRuleThickness = e.minRuleThickness, this._fontMetrics = void 0;
  }
  /**
   * Returns a new options object with the same properties as "this".  Properties
   * from "extension" will be copied to the new options object.
   */
  extend(e) {
    var i = {
      style: this.style,
      size: this.size,
      textSize: this.textSize,
      color: this.color,
      phantom: this.phantom,
      font: this.font,
      fontFamily: this.fontFamily,
      fontWeight: this.fontWeight,
      fontShape: this.fontShape,
      maxSize: this.maxSize,
      minRuleThickness: this.minRuleThickness
    };
    for (var n in e)
      e.hasOwnProperty(n) && (i[n] = e[n]);
    return new St(i);
  }
  /**
   * Return an options object with the given style. If `this.style === style`,
   * returns `this`.
   */
  havingStyle(e) {
    return this.style === e ? this : this.extend({
      style: e,
      size: Qn(this.textSize, e)
    });
  }
  /**
   * Return an options object with a cramped version of the current style. If
   * the current style is cramped, returns `this`.
   */
  havingCrampedStyle() {
    return this.havingStyle(this.style.cramp());
  }
  /**
   * Return an options object with the given size and in at least `\textstyle`.
   * Returns `this` if appropriate.
   */
  havingSize(e) {
    return this.size === e && this.textSize === e ? this : this.extend({
      style: this.style.text(),
      size: e,
      textSize: e,
      sizeMultiplier: Jn[e - 1]
    });
  }
  /**
   * Like `this.havingSize(BASESIZE).havingStyle(style)`. If `style` is omitted,
   * changes to at least `\textstyle`.
   */
  havingBaseStyle(e) {
    e = e || this.style.text();
    var i = Qn(St.BASESIZE, e);
    return this.size === i && this.textSize === St.BASESIZE && this.style === e ? this : this.extend({
      style: e,
      size: i
    });
  }
  /**
   * Remove the effect of sizing changes such as \Huge.
   * Keep the effect of the current style, such as \scriptstyle.
   */
  havingBaseSizing() {
    var e;
    switch (this.style.id) {
      case 4:
      case 5:
        e = 3;
        break;
      case 6:
      case 7:
        e = 1;
        break;
      default:
        e = 6;
    }
    return this.extend({
      style: this.style.text(),
      size: e
    });
  }
  /**
   * Create a new options object with the given color.
   */
  withColor(e) {
    return this.extend({
      color: e
    });
  }
  /**
   * Create a new options object with "phantom" set to true.
   */
  withPhantom() {
    return this.extend({
      phantom: !0
    });
  }
  /**
   * Creates a new options object with the given math font or old text font.
   * @type {[type]}
   */
  withFont(e) {
    return this.extend({
      font: e
    });
  }
  /**
   * Create a new options objects with the given fontFamily.
   */
  withTextFontFamily(e) {
    return this.extend({
      fontFamily: e,
      font: ""
    });
  }
  /**
   * Creates a new options object with the given font weight
   */
  withTextFontWeight(e) {
    return this.extend({
      fontWeight: e,
      font: ""
    });
  }
  /**
   * Creates a new options object with the given font weight
   */
  withTextFontShape(e) {
    return this.extend({
      fontShape: e,
      font: ""
    });
  }
  /**
   * Return the CSS sizing classes required to switch from enclosing options
   * `oldOptions` to `this`. Returns an array of classes.
   */
  sizingClasses(e) {
    return e.size !== this.size ? ["sizing", "reset-size" + e.size, "size" + this.size] : [];
  }
  /**
   * Return the CSS sizing classes required to switch to the base size. Like
   * `this.havingSize(BASESIZE).sizingClasses(this)`.
   */
  baseSizingClasses() {
    return this.size !== St.BASESIZE ? ["sizing", "reset-size" + this.size, "size" + St.BASESIZE] : [];
  }
  /**
   * Return the font metrics for this size.
   */
  fontMetrics() {
    return this._fontMetrics || (this._fontMetrics = Gs(this.size)), this._fontMetrics;
  }
  /**
   * Gets the CSS color of the current options object
   */
  getColor() {
    return this.phantom ? "transparent" : this.color;
  }
}
St.BASESIZE = 6;
var sn = {
  // https://en.wikibooks.org/wiki/LaTeX/Lengths and
  // https://tex.stackexchange.com/a/8263
  pt: 1,
  // TeX point
  mm: 7227 / 2540,
  // millimeter
  cm: 7227 / 254,
  // centimeter
  in: 72.27,
  // inch
  bp: 803 / 800,
  // big (PostScript) points
  pc: 12,
  // pica
  dd: 1238 / 1157,
  // didot
  cc: 14856 / 1157,
  // cicero (12 didot)
  nd: 685 / 642,
  // new didot
  nc: 1370 / 107,
  // new cicero (12 new didot)
  sp: 1 / 65536,
  // scaled point (TeX's internal smallest unit)
  // https://tex.stackexchange.com/a/41371
  px: 803 / 800
  // \pdfpxdimen defaults to 1 bp in pdfTeX and LuaTeX
}, Ks = {
  ex: !0,
  em: !0,
  mu: !0
}, Ol = function(e) {
  return typeof e != "string" && (e = e.unit), e in sn || e in Ks || e === "ex";
}, Ie = function(e, i) {
  var n;
  if (e.unit in sn)
    n = sn[e.unit] / i.fontMetrics().ptPerEm / i.sizeMultiplier;
  else if (e.unit === "mu")
    n = i.fontMetrics().cssEmPerMu;
  else {
    var l;
    if (i.style.isTight() ? l = i.havingStyle(i.style.text()) : l = i, e.unit === "ex")
      n = l.fontMetrics().xHeight;
    else if (e.unit === "em")
      n = l.fontMetrics().quad;
    else
      throw new ie("Invalid unit: '" + e.unit + "'");
    l !== i && (n *= l.sizeMultiplier / i.sizeMultiplier);
  }
  return Math.min(e.number * n, i.maxSize);
}, re = function(e) {
  return +e.toFixed(4) + "em";
}, Dt = function(e) {
  return e.filter((i) => i).join(" ");
}, Fl = function(e, i, n) {
  if (this.classes = e || [], this.attributes = {}, this.height = 0, this.depth = 0, this.maxFontSize = 0, this.style = n || {}, i) {
    i.style.isTight() && this.classes.push("mtight");
    var l = i.getColor();
    l && (this.style.color = l);
  }
}, Pl = function(e) {
  var i = document.createElement(e);
  i.className = Dt(this.classes);
  for (var n in this.style)
    this.style.hasOwnProperty(n) && (i.style[n] = this.style[n]);
  for (var l in this.attributes)
    this.attributes.hasOwnProperty(l) && i.setAttribute(l, this.attributes[l]);
  for (var r = 0; r < this.children.length; r++)
    i.appendChild(this.children[r].toNode());
  return i;
}, Vl = function(e) {
  var i = "<" + e;
  this.classes.length && (i += ' class="' + pe.escape(Dt(this.classes)) + '"');
  var n = "";
  for (var l in this.style)
    this.style.hasOwnProperty(l) && (n += pe.hyphenate(l) + ":" + this.style[l] + ";");
  n && (i += ' style="' + pe.escape(n) + '"');
  for (var r in this.attributes)
    this.attributes.hasOwnProperty(r) && (i += " " + r + '="' + pe.escape(this.attributes[r]) + '"');
  i += ">";
  for (var u = 0; u < this.children.length; u++)
    i += this.children[u].toMarkup();
  return i += "</" + e + ">", i;
};
class di {
  constructor(e, i, n, l) {
    this.children = void 0, this.attributes = void 0, this.classes = void 0, this.height = void 0, this.depth = void 0, this.width = void 0, this.maxFontSize = void 0, this.style = void 0, Fl.call(this, e, n, l), this.children = i || [];
  }
  /**
   * Sets an arbitrary attribute on the span. Warning: use this wisely. Not
   * all browsers support attributes the same, and having too many custom
   * attributes is probably bad.
   */
  setAttribute(e, i) {
    this.attributes[e] = i;
  }
  hasClass(e) {
    return pe.contains(this.classes, e);
  }
  toNode() {
    return Pl.call(this, "span");
  }
  toMarkup() {
    return Vl.call(this, "span");
  }
}
class yn {
  constructor(e, i, n, l) {
    this.children = void 0, this.attributes = void 0, this.classes = void 0, this.height = void 0, this.depth = void 0, this.maxFontSize = void 0, this.style = void 0, Fl.call(this, i, l), this.children = n || [], this.setAttribute("href", e);
  }
  setAttribute(e, i) {
    this.attributes[e] = i;
  }
  hasClass(e) {
    return pe.contains(this.classes, e);
  }
  toNode() {
    return Pl.call(this, "a");
  }
  toMarkup() {
    return Vl.call(this, "a");
  }
}
class Js {
  constructor(e, i, n) {
    this.src = void 0, this.alt = void 0, this.classes = void 0, this.height = void 0, this.depth = void 0, this.maxFontSize = void 0, this.style = void 0, this.alt = i, this.src = e, this.classes = ["mord"], this.style = n;
  }
  hasClass(e) {
    return pe.contains(this.classes, e);
  }
  toNode() {
    var e = document.createElement("img");
    e.src = this.src, e.alt = this.alt, e.className = "mord";
    for (var i in this.style)
      this.style.hasOwnProperty(i) && (e.style[i] = this.style[i]);
    return e;
  }
  toMarkup() {
    var e = "<img  src='" + this.src + " 'alt='" + this.alt + "' ", i = "";
    for (var n in this.style)
      this.style.hasOwnProperty(n) && (i += pe.hyphenate(n) + ":" + this.style[n] + ";");
    return i && (e += ' style="' + pe.escape(i) + '"'), e += "'/>", e;
  }
}
var Qs = {
  î: "ı̂",
  ï: "ı̈",
  í: "ı́",
  // 'ī': '\u0131\u0304', // enable when we add Extended Latin
  ì: "ı̀"
};
class ct {
  constructor(e, i, n, l, r, u, h, s) {
    this.text = void 0, this.height = void 0, this.depth = void 0, this.italic = void 0, this.skew = void 0, this.width = void 0, this.maxFontSize = void 0, this.classes = void 0, this.style = void 0, this.text = e, this.height = i || 0, this.depth = n || 0, this.italic = l || 0, this.skew = r || 0, this.width = u || 0, this.classes = h || [], this.style = s || {}, this.maxFontSize = 0;
    var m = Is(this.text.charCodeAt(0));
    m && this.classes.push(m + "_fallback"), /[îïíì]/.test(this.text) && (this.text = Qs[this.text]);
  }
  hasClass(e) {
    return pe.contains(this.classes, e);
  }
  /**
   * Creates a text node or span from a symbol node. Note that a span is only
   * created if it is needed.
   */
  toNode() {
    var e = document.createTextNode(this.text), i = null;
    this.italic > 0 && (i = document.createElement("span"), i.style.marginRight = re(this.italic)), this.classes.length > 0 && (i = i || document.createElement("span"), i.className = Dt(this.classes));
    for (var n in this.style)
      this.style.hasOwnProperty(n) && (i = i || document.createElement("span"), i.style[n] = this.style[n]);
    return i ? (i.appendChild(e), i) : e;
  }
  /**
   * Creates markup for a symbol node.
   */
  toMarkup() {
    var e = !1, i = "<span";
    this.classes.length && (e = !0, i += ' class="', i += pe.escape(Dt(this.classes)), i += '"');
    var n = "";
    this.italic > 0 && (n += "margin-right:" + this.italic + "em;");
    for (var l in this.style)
      this.style.hasOwnProperty(l) && (n += pe.hyphenate(l) + ":" + this.style[l] + ";");
    n && (e = !0, i += ' style="' + pe.escape(n) + '"');
    var r = pe.escape(this.text);
    return e ? (i += ">", i += r, i += "</span>", i) : r;
  }
}
class Et {
  constructor(e, i) {
    this.children = void 0, this.attributes = void 0, this.children = e || [], this.attributes = i || {};
  }
  toNode() {
    var e = "http://www.w3.org/2000/svg", i = document.createElementNS(e, "svg");
    for (var n in this.attributes)
      Object.prototype.hasOwnProperty.call(this.attributes, n) && i.setAttribute(n, this.attributes[n]);
    for (var l = 0; l < this.children.length; l++)
      i.appendChild(this.children[l].toNode());
    return i;
  }
  toMarkup() {
    var e = '<svg xmlns="http://www.w3.org/2000/svg"';
    for (var i in this.attributes)
      Object.prototype.hasOwnProperty.call(this.attributes, i) && (e += " " + i + "='" + this.attributes[i] + "'");
    e += ">";
    for (var n = 0; n < this.children.length; n++)
      e += this.children[n].toMarkup();
    return e += "</svg>", e;
  }
}
class Ht {
  constructor(e, i) {
    this.pathName = void 0, this.alternate = void 0, this.pathName = e, this.alternate = i;
  }
  toNode() {
    var e = "http://www.w3.org/2000/svg", i = document.createElementNS(e, "path");
    return this.alternate ? i.setAttribute("d", this.alternate) : i.setAttribute("d", Xn[this.pathName]), i;
  }
  toMarkup() {
    return this.alternate ? "<path d='" + this.alternate + "'/>" : "<path d='" + Xn[this.pathName] + "'/>";
  }
}
class rn {
  constructor(e) {
    this.attributes = void 0, this.attributes = e || {};
  }
  toNode() {
    var e = "http://www.w3.org/2000/svg", i = document.createElementNS(e, "line");
    for (var n in this.attributes)
      Object.prototype.hasOwnProperty.call(this.attributes, n) && i.setAttribute(n, this.attributes[n]);
    return i;
  }
  toMarkup() {
    var e = "<line";
    for (var i in this.attributes)
      Object.prototype.hasOwnProperty.call(this.attributes, i) && (e += " " + i + "='" + this.attributes[i] + "'");
    return e += "/>", e;
  }
}
function el(t) {
  if (t instanceof ct)
    return t;
  throw new Error("Expected symbolNode but got " + String(t) + ".");
}
function er(t) {
  if (t instanceof di)
    return t;
  throw new Error("Expected span<HtmlDomNode> but got " + String(t) + ".");
}
var tr = {
  bin: 1,
  close: 1,
  inner: 1,
  open: 1,
  punct: 1,
  rel: 1
}, ir = {
  "accent-token": 1,
  mathord: 1,
  "op-token": 1,
  spacing: 1,
  textord: 1
}, Ne = {
  math: {},
  text: {}
};
function f(t, e, i, n, l, r) {
  Ne[t][l] = {
    font: e,
    group: i,
    replace: n
  }, r && n && (Ne[t][n] = Ne[t][l]);
}
var y = "math", K = "text", C = "main", B = "ams", De = "accent-token", ue = "bin", Qe = "close", Jt = "inner", he = "mathord", qe = "op-token", st = "open", Bi = "punct", D = "rel", Mt = "spacing", U = "textord";
f(y, C, D, "≡", "\\equiv", !0);
f(y, C, D, "≺", "\\prec", !0);
f(y, C, D, "≻", "\\succ", !0);
f(y, C, D, "∼", "\\sim", !0);
f(y, C, D, "⊥", "\\perp");
f(y, C, D, "⪯", "\\preceq", !0);
f(y, C, D, "⪰", "\\succeq", !0);
f(y, C, D, "≃", "\\simeq", !0);
f(y, C, D, "∣", "\\mid", !0);
f(y, C, D, "≪", "\\ll", !0);
f(y, C, D, "≫", "\\gg", !0);
f(y, C, D, "≍", "\\asymp", !0);
f(y, C, D, "∥", "\\parallel");
f(y, C, D, "⋈", "\\bowtie", !0);
f(y, C, D, "⌣", "\\smile", !0);
f(y, C, D, "⊑", "\\sqsubseteq", !0);
f(y, C, D, "⊒", "\\sqsupseteq", !0);
f(y, C, D, "≐", "\\doteq", !0);
f(y, C, D, "⌢", "\\frown", !0);
f(y, C, D, "∋", "\\ni", !0);
f(y, C, D, "∝", "\\propto", !0);
f(y, C, D, "⊢", "\\vdash", !0);
f(y, C, D, "⊣", "\\dashv", !0);
f(y, C, D, "∋", "\\owns");
f(y, C, Bi, ".", "\\ldotp");
f(y, C, Bi, "⋅", "\\cdotp");
f(y, C, U, "#", "\\#");
f(K, C, U, "#", "\\#");
f(y, C, U, "&", "\\&");
f(K, C, U, "&", "\\&");
f(y, C, U, "ℵ", "\\aleph", !0);
f(y, C, U, "∀", "\\forall", !0);
f(y, C, U, "ℏ", "\\hbar", !0);
f(y, C, U, "∃", "\\exists", !0);
f(y, C, U, "∇", "\\nabla", !0);
f(y, C, U, "♭", "\\flat", !0);
f(y, C, U, "ℓ", "\\ell", !0);
f(y, C, U, "♮", "\\natural", !0);
f(y, C, U, "♣", "\\clubsuit", !0);
f(y, C, U, "℘", "\\wp", !0);
f(y, C, U, "♯", "\\sharp", !0);
f(y, C, U, "♢", "\\diamondsuit", !0);
f(y, C, U, "ℜ", "\\Re", !0);
f(y, C, U, "♡", "\\heartsuit", !0);
f(y, C, U, "ℑ", "\\Im", !0);
f(y, C, U, "♠", "\\spadesuit", !0);
f(y, C, U, "§", "\\S", !0);
f(K, C, U, "§", "\\S");
f(y, C, U, "¶", "\\P", !0);
f(K, C, U, "¶", "\\P");
f(y, C, U, "†", "\\dag");
f(K, C, U, "†", "\\dag");
f(K, C, U, "†", "\\textdagger");
f(y, C, U, "‡", "\\ddag");
f(K, C, U, "‡", "\\ddag");
f(K, C, U, "‡", "\\textdaggerdbl");
f(y, C, Qe, "⎱", "\\rmoustache", !0);
f(y, C, st, "⎰", "\\lmoustache", !0);
f(y, C, Qe, "⟯", "\\rgroup", !0);
f(y, C, st, "⟮", "\\lgroup", !0);
f(y, C, ue, "∓", "\\mp", !0);
f(y, C, ue, "⊖", "\\ominus", !0);
f(y, C, ue, "⊎", "\\uplus", !0);
f(y, C, ue, "⊓", "\\sqcap", !0);
f(y, C, ue, "∗", "\\ast");
f(y, C, ue, "⊔", "\\sqcup", !0);
f(y, C, ue, "◯", "\\bigcirc", !0);
f(y, C, ue, "∙", "\\bullet", !0);
f(y, C, ue, "‡", "\\ddagger");
f(y, C, ue, "≀", "\\wr", !0);
f(y, C, ue, "⨿", "\\amalg");
f(y, C, ue, "&", "\\And");
f(y, C, D, "⟵", "\\longleftarrow", !0);
f(y, C, D, "⇐", "\\Leftarrow", !0);
f(y, C, D, "⟸", "\\Longleftarrow", !0);
f(y, C, D, "⟶", "\\longrightarrow", !0);
f(y, C, D, "⇒", "\\Rightarrow", !0);
f(y, C, D, "⟹", "\\Longrightarrow", !0);
f(y, C, D, "↔", "\\leftrightarrow", !0);
f(y, C, D, "⟷", "\\longleftrightarrow", !0);
f(y, C, D, "⇔", "\\Leftrightarrow", !0);
f(y, C, D, "⟺", "\\Longleftrightarrow", !0);
f(y, C, D, "↦", "\\mapsto", !0);
f(y, C, D, "⟼", "\\longmapsto", !0);
f(y, C, D, "↗", "\\nearrow", !0);
f(y, C, D, "↩", "\\hookleftarrow", !0);
f(y, C, D, "↪", "\\hookrightarrow", !0);
f(y, C, D, "↘", "\\searrow", !0);
f(y, C, D, "↼", "\\leftharpoonup", !0);
f(y, C, D, "⇀", "\\rightharpoonup", !0);
f(y, C, D, "↙", "\\swarrow", !0);
f(y, C, D, "↽", "\\leftharpoondown", !0);
f(y, C, D, "⇁", "\\rightharpoondown", !0);
f(y, C, D, "↖", "\\nwarrow", !0);
f(y, C, D, "⇌", "\\rightleftharpoons", !0);
f(y, B, D, "≮", "\\nless", !0);
f(y, B, D, "", "\\@nleqslant");
f(y, B, D, "", "\\@nleqq");
f(y, B, D, "⪇", "\\lneq", !0);
f(y, B, D, "≨", "\\lneqq", !0);
f(y, B, D, "", "\\@lvertneqq");
f(y, B, D, "⋦", "\\lnsim", !0);
f(y, B, D, "⪉", "\\lnapprox", !0);
f(y, B, D, "⊀", "\\nprec", !0);
f(y, B, D, "⋠", "\\npreceq", !0);
f(y, B, D, "⋨", "\\precnsim", !0);
f(y, B, D, "⪹", "\\precnapprox", !0);
f(y, B, D, "≁", "\\nsim", !0);
f(y, B, D, "", "\\@nshortmid");
f(y, B, D, "∤", "\\nmid", !0);
f(y, B, D, "⊬", "\\nvdash", !0);
f(y, B, D, "⊭", "\\nvDash", !0);
f(y, B, D, "⋪", "\\ntriangleleft");
f(y, B, D, "⋬", "\\ntrianglelefteq", !0);
f(y, B, D, "⊊", "\\subsetneq", !0);
f(y, B, D, "", "\\@varsubsetneq");
f(y, B, D, "⫋", "\\subsetneqq", !0);
f(y, B, D, "", "\\@varsubsetneqq");
f(y, B, D, "≯", "\\ngtr", !0);
f(y, B, D, "", "\\@ngeqslant");
f(y, B, D, "", "\\@ngeqq");
f(y, B, D, "⪈", "\\gneq", !0);
f(y, B, D, "≩", "\\gneqq", !0);
f(y, B, D, "", "\\@gvertneqq");
f(y, B, D, "⋧", "\\gnsim", !0);
f(y, B, D, "⪊", "\\gnapprox", !0);
f(y, B, D, "⊁", "\\nsucc", !0);
f(y, B, D, "⋡", "\\nsucceq", !0);
f(y, B, D, "⋩", "\\succnsim", !0);
f(y, B, D, "⪺", "\\succnapprox", !0);
f(y, B, D, "≆", "\\ncong", !0);
f(y, B, D, "", "\\@nshortparallel");
f(y, B, D, "∦", "\\nparallel", !0);
f(y, B, D, "⊯", "\\nVDash", !0);
f(y, B, D, "⋫", "\\ntriangleright");
f(y, B, D, "⋭", "\\ntrianglerighteq", !0);
f(y, B, D, "", "\\@nsupseteqq");
f(y, B, D, "⊋", "\\supsetneq", !0);
f(y, B, D, "", "\\@varsupsetneq");
f(y, B, D, "⫌", "\\supsetneqq", !0);
f(y, B, D, "", "\\@varsupsetneqq");
f(y, B, D, "⊮", "\\nVdash", !0);
f(y, B, D, "⪵", "\\precneqq", !0);
f(y, B, D, "⪶", "\\succneqq", !0);
f(y, B, D, "", "\\@nsubseteqq");
f(y, B, ue, "⊴", "\\unlhd");
f(y, B, ue, "⊵", "\\unrhd");
f(y, B, D, "↚", "\\nleftarrow", !0);
f(y, B, D, "↛", "\\nrightarrow", !0);
f(y, B, D, "⇍", "\\nLeftarrow", !0);
f(y, B, D, "⇏", "\\nRightarrow", !0);
f(y, B, D, "↮", "\\nleftrightarrow", !0);
f(y, B, D, "⇎", "\\nLeftrightarrow", !0);
f(y, B, D, "△", "\\vartriangle");
f(y, B, U, "ℏ", "\\hslash");
f(y, B, U, "▽", "\\triangledown");
f(y, B, U, "◊", "\\lozenge");
f(y, B, U, "Ⓢ", "\\circledS");
f(y, B, U, "®", "\\circledR");
f(K, B, U, "®", "\\circledR");
f(y, B, U, "∡", "\\measuredangle", !0);
f(y, B, U, "∄", "\\nexists");
f(y, B, U, "℧", "\\mho");
f(y, B, U, "Ⅎ", "\\Finv", !0);
f(y, B, U, "⅁", "\\Game", !0);
f(y, B, U, "‵", "\\backprime");
f(y, B, U, "▲", "\\blacktriangle");
f(y, B, U, "▼", "\\blacktriangledown");
f(y, B, U, "■", "\\blacksquare");
f(y, B, U, "⧫", "\\blacklozenge");
f(y, B, U, "★", "\\bigstar");
f(y, B, U, "∢", "\\sphericalangle", !0);
f(y, B, U, "∁", "\\complement", !0);
f(y, B, U, "ð", "\\eth", !0);
f(K, C, U, "ð", "ð");
f(y, B, U, "╱", "\\diagup");
f(y, B, U, "╲", "\\diagdown");
f(y, B, U, "□", "\\square");
f(y, B, U, "□", "\\Box");
f(y, B, U, "◊", "\\Diamond");
f(y, B, U, "¥", "\\yen", !0);
f(K, B, U, "¥", "\\yen", !0);
f(y, B, U, "✓", "\\checkmark", !0);
f(K, B, U, "✓", "\\checkmark");
f(y, B, U, "ℶ", "\\beth", !0);
f(y, B, U, "ℸ", "\\daleth", !0);
f(y, B, U, "ℷ", "\\gimel", !0);
f(y, B, U, "ϝ", "\\digamma", !0);
f(y, B, U, "ϰ", "\\varkappa");
f(y, B, st, "┌", "\\@ulcorner", !0);
f(y, B, Qe, "┐", "\\@urcorner", !0);
f(y, B, st, "└", "\\@llcorner", !0);
f(y, B, Qe, "┘", "\\@lrcorner", !0);
f(y, B, D, "≦", "\\leqq", !0);
f(y, B, D, "⩽", "\\leqslant", !0);
f(y, B, D, "⪕", "\\eqslantless", !0);
f(y, B, D, "≲", "\\lesssim", !0);
f(y, B, D, "⪅", "\\lessapprox", !0);
f(y, B, D, "≊", "\\approxeq", !0);
f(y, B, ue, "⋖", "\\lessdot");
f(y, B, D, "⋘", "\\lll", !0);
f(y, B, D, "≶", "\\lessgtr", !0);
f(y, B, D, "⋚", "\\lesseqgtr", !0);
f(y, B, D, "⪋", "\\lesseqqgtr", !0);
f(y, B, D, "≑", "\\doteqdot");
f(y, B, D, "≓", "\\risingdotseq", !0);
f(y, B, D, "≒", "\\fallingdotseq", !0);
f(y, B, D, "∽", "\\backsim", !0);
f(y, B, D, "⋍", "\\backsimeq", !0);
f(y, B, D, "⫅", "\\subseteqq", !0);
f(y, B, D, "⋐", "\\Subset", !0);
f(y, B, D, "⊏", "\\sqsubset", !0);
f(y, B, D, "≼", "\\preccurlyeq", !0);
f(y, B, D, "⋞", "\\curlyeqprec", !0);
f(y, B, D, "≾", "\\precsim", !0);
f(y, B, D, "⪷", "\\precapprox", !0);
f(y, B, D, "⊲", "\\vartriangleleft");
f(y, B, D, "⊴", "\\trianglelefteq");
f(y, B, D, "⊨", "\\vDash", !0);
f(y, B, D, "⊪", "\\Vvdash", !0);
f(y, B, D, "⌣", "\\smallsmile");
f(y, B, D, "⌢", "\\smallfrown");
f(y, B, D, "≏", "\\bumpeq", !0);
f(y, B, D, "≎", "\\Bumpeq", !0);
f(y, B, D, "≧", "\\geqq", !0);
f(y, B, D, "⩾", "\\geqslant", !0);
f(y, B, D, "⪖", "\\eqslantgtr", !0);
f(y, B, D, "≳", "\\gtrsim", !0);
f(y, B, D, "⪆", "\\gtrapprox", !0);
f(y, B, ue, "⋗", "\\gtrdot");
f(y, B, D, "⋙", "\\ggg", !0);
f(y, B, D, "≷", "\\gtrless", !0);
f(y, B, D, "⋛", "\\gtreqless", !0);
f(y, B, D, "⪌", "\\gtreqqless", !0);
f(y, B, D, "≖", "\\eqcirc", !0);
f(y, B, D, "≗", "\\circeq", !0);
f(y, B, D, "≜", "\\triangleq", !0);
f(y, B, D, "∼", "\\thicksim");
f(y, B, D, "≈", "\\thickapprox");
f(y, B, D, "⫆", "\\supseteqq", !0);
f(y, B, D, "⋑", "\\Supset", !0);
f(y, B, D, "⊐", "\\sqsupset", !0);
f(y, B, D, "≽", "\\succcurlyeq", !0);
f(y, B, D, "⋟", "\\curlyeqsucc", !0);
f(y, B, D, "≿", "\\succsim", !0);
f(y, B, D, "⪸", "\\succapprox", !0);
f(y, B, D, "⊳", "\\vartriangleright");
f(y, B, D, "⊵", "\\trianglerighteq");
f(y, B, D, "⊩", "\\Vdash", !0);
f(y, B, D, "∣", "\\shortmid");
f(y, B, D, "∥", "\\shortparallel");
f(y, B, D, "≬", "\\between", !0);
f(y, B, D, "⋔", "\\pitchfork", !0);
f(y, B, D, "∝", "\\varpropto");
f(y, B, D, "◀", "\\blacktriangleleft");
f(y, B, D, "∴", "\\therefore", !0);
f(y, B, D, "∍", "\\backepsilon");
f(y, B, D, "▶", "\\blacktriangleright");
f(y, B, D, "∵", "\\because", !0);
f(y, B, D, "⋘", "\\llless");
f(y, B, D, "⋙", "\\gggtr");
f(y, B, ue, "⊲", "\\lhd");
f(y, B, ue, "⊳", "\\rhd");
f(y, B, D, "≂", "\\eqsim", !0);
f(y, C, D, "⋈", "\\Join");
f(y, B, D, "≑", "\\Doteq", !0);
f(y, B, ue, "∔", "\\dotplus", !0);
f(y, B, ue, "∖", "\\smallsetminus");
f(y, B, ue, "⋒", "\\Cap", !0);
f(y, B, ue, "⋓", "\\Cup", !0);
f(y, B, ue, "⩞", "\\doublebarwedge", !0);
f(y, B, ue, "⊟", "\\boxminus", !0);
f(y, B, ue, "⊞", "\\boxplus", !0);
f(y, B, ue, "⋇", "\\divideontimes", !0);
f(y, B, ue, "⋉", "\\ltimes", !0);
f(y, B, ue, "⋊", "\\rtimes", !0);
f(y, B, ue, "⋋", "\\leftthreetimes", !0);
f(y, B, ue, "⋌", "\\rightthreetimes", !0);
f(y, B, ue, "⋏", "\\curlywedge", !0);
f(y, B, ue, "⋎", "\\curlyvee", !0);
f(y, B, ue, "⊝", "\\circleddash", !0);
f(y, B, ue, "⊛", "\\circledast", !0);
f(y, B, ue, "⋅", "\\centerdot");
f(y, B, ue, "⊺", "\\intercal", !0);
f(y, B, ue, "⋒", "\\doublecap");
f(y, B, ue, "⋓", "\\doublecup");
f(y, B, ue, "⊠", "\\boxtimes", !0);
f(y, B, D, "⇢", "\\dashrightarrow", !0);
f(y, B, D, "⇠", "\\dashleftarrow", !0);
f(y, B, D, "⇇", "\\leftleftarrows", !0);
f(y, B, D, "⇆", "\\leftrightarrows", !0);
f(y, B, D, "⇚", "\\Lleftarrow", !0);
f(y, B, D, "↞", "\\twoheadleftarrow", !0);
f(y, B, D, "↢", "\\leftarrowtail", !0);
f(y, B, D, "↫", "\\looparrowleft", !0);
f(y, B, D, "⇋", "\\leftrightharpoons", !0);
f(y, B, D, "↶", "\\curvearrowleft", !0);
f(y, B, D, "↺", "\\circlearrowleft", !0);
f(y, B, D, "↰", "\\Lsh", !0);
f(y, B, D, "⇈", "\\upuparrows", !0);
f(y, B, D, "↿", "\\upharpoonleft", !0);
f(y, B, D, "⇃", "\\downharpoonleft", !0);
f(y, C, D, "⊶", "\\origof", !0);
f(y, C, D, "⊷", "\\imageof", !0);
f(y, B, D, "⊸", "\\multimap", !0);
f(y, B, D, "↭", "\\leftrightsquigarrow", !0);
f(y, B, D, "⇉", "\\rightrightarrows", !0);
f(y, B, D, "⇄", "\\rightleftarrows", !0);
f(y, B, D, "↠", "\\twoheadrightarrow", !0);
f(y, B, D, "↣", "\\rightarrowtail", !0);
f(y, B, D, "↬", "\\looparrowright", !0);
f(y, B, D, "↷", "\\curvearrowright", !0);
f(y, B, D, "↻", "\\circlearrowright", !0);
f(y, B, D, "↱", "\\Rsh", !0);
f(y, B, D, "⇊", "\\downdownarrows", !0);
f(y, B, D, "↾", "\\upharpoonright", !0);
f(y, B, D, "⇂", "\\downharpoonright", !0);
f(y, B, D, "⇝", "\\rightsquigarrow", !0);
f(y, B, D, "⇝", "\\leadsto");
f(y, B, D, "⇛", "\\Rrightarrow", !0);
f(y, B, D, "↾", "\\restriction");
f(y, C, U, "‘", "`");
f(y, C, U, "$", "\\$");
f(K, C, U, "$", "\\$");
f(K, C, U, "$", "\\textdollar");
f(y, C, U, "%", "\\%");
f(K, C, U, "%", "\\%");
f(y, C, U, "_", "\\_");
f(K, C, U, "_", "\\_");
f(K, C, U, "_", "\\textunderscore");
f(y, C, U, "∠", "\\angle", !0);
f(y, C, U, "∞", "\\infty", !0);
f(y, C, U, "′", "\\prime");
f(y, C, U, "△", "\\triangle");
f(y, C, U, "Γ", "\\Gamma", !0);
f(y, C, U, "Δ", "\\Delta", !0);
f(y, C, U, "Θ", "\\Theta", !0);
f(y, C, U, "Λ", "\\Lambda", !0);
f(y, C, U, "Ξ", "\\Xi", !0);
f(y, C, U, "Π", "\\Pi", !0);
f(y, C, U, "Σ", "\\Sigma", !0);
f(y, C, U, "Υ", "\\Upsilon", !0);
f(y, C, U, "Φ", "\\Phi", !0);
f(y, C, U, "Ψ", "\\Psi", !0);
f(y, C, U, "Ω", "\\Omega", !0);
f(y, C, U, "A", "Α");
f(y, C, U, "B", "Β");
f(y, C, U, "E", "Ε");
f(y, C, U, "Z", "Ζ");
f(y, C, U, "H", "Η");
f(y, C, U, "I", "Ι");
f(y, C, U, "K", "Κ");
f(y, C, U, "M", "Μ");
f(y, C, U, "N", "Ν");
f(y, C, U, "O", "Ο");
f(y, C, U, "P", "Ρ");
f(y, C, U, "T", "Τ");
f(y, C, U, "X", "Χ");
f(y, C, U, "¬", "\\neg", !0);
f(y, C, U, "¬", "\\lnot");
f(y, C, U, "⊤", "\\top");
f(y, C, U, "⊥", "\\bot");
f(y, C, U, "∅", "\\emptyset");
f(y, B, U, "∅", "\\varnothing");
f(y, C, he, "α", "\\alpha", !0);
f(y, C, he, "β", "\\beta", !0);
f(y, C, he, "γ", "\\gamma", !0);
f(y, C, he, "δ", "\\delta", !0);
f(y, C, he, "ϵ", "\\epsilon", !0);
f(y, C, he, "ζ", "\\zeta", !0);
f(y, C, he, "η", "\\eta", !0);
f(y, C, he, "θ", "\\theta", !0);
f(y, C, he, "ι", "\\iota", !0);
f(y, C, he, "κ", "\\kappa", !0);
f(y, C, he, "λ", "\\lambda", !0);
f(y, C, he, "μ", "\\mu", !0);
f(y, C, he, "ν", "\\nu", !0);
f(y, C, he, "ξ", "\\xi", !0);
f(y, C, he, "ο", "\\omicron", !0);
f(y, C, he, "π", "\\pi", !0);
f(y, C, he, "ρ", "\\rho", !0);
f(y, C, he, "σ", "\\sigma", !0);
f(y, C, he, "τ", "\\tau", !0);
f(y, C, he, "υ", "\\upsilon", !0);
f(y, C, he, "ϕ", "\\phi", !0);
f(y, C, he, "χ", "\\chi", !0);
f(y, C, he, "ψ", "\\psi", !0);
f(y, C, he, "ω", "\\omega", !0);
f(y, C, he, "ε", "\\varepsilon", !0);
f(y, C, he, "ϑ", "\\vartheta", !0);
f(y, C, he, "ϖ", "\\varpi", !0);
f(y, C, he, "ϱ", "\\varrho", !0);
f(y, C, he, "ς", "\\varsigma", !0);
f(y, C, he, "φ", "\\varphi", !0);
f(y, C, ue, "∗", "*", !0);
f(y, C, ue, "+", "+");
f(y, C, ue, "−", "-", !0);
f(y, C, ue, "⋅", "\\cdot", !0);
f(y, C, ue, "∘", "\\circ", !0);
f(y, C, ue, "÷", "\\div", !0);
f(y, C, ue, "±", "\\pm", !0);
f(y, C, ue, "×", "\\times", !0);
f(y, C, ue, "∩", "\\cap", !0);
f(y, C, ue, "∪", "\\cup", !0);
f(y, C, ue, "∖", "\\setminus", !0);
f(y, C, ue, "∧", "\\land");
f(y, C, ue, "∨", "\\lor");
f(y, C, ue, "∧", "\\wedge", !0);
f(y, C, ue, "∨", "\\vee", !0);
f(y, C, U, "√", "\\surd");
f(y, C, st, "⟨", "\\langle", !0);
f(y, C, st, "∣", "\\lvert");
f(y, C, st, "∥", "\\lVert");
f(y, C, Qe, "?", "?");
f(y, C, Qe, "!", "!");
f(y, C, Qe, "⟩", "\\rangle", !0);
f(y, C, Qe, "∣", "\\rvert");
f(y, C, Qe, "∥", "\\rVert");
f(y, C, D, "=", "=");
f(y, C, D, ":", ":");
f(y, C, D, "≈", "\\approx", !0);
f(y, C, D, "≅", "\\cong", !0);
f(y, C, D, "≥", "\\ge");
f(y, C, D, "≥", "\\geq", !0);
f(y, C, D, "←", "\\gets");
f(y, C, D, ">", "\\gt", !0);
f(y, C, D, "∈", "\\in", !0);
f(y, C, D, "", "\\@not");
f(y, C, D, "⊂", "\\subset", !0);
f(y, C, D, "⊃", "\\supset", !0);
f(y, C, D, "⊆", "\\subseteq", !0);
f(y, C, D, "⊇", "\\supseteq", !0);
f(y, B, D, "⊈", "\\nsubseteq", !0);
f(y, B, D, "⊉", "\\nsupseteq", !0);
f(y, C, D, "⊨", "\\models");
f(y, C, D, "←", "\\leftarrow", !0);
f(y, C, D, "≤", "\\le");
f(y, C, D, "≤", "\\leq", !0);
f(y, C, D, "<", "\\lt", !0);
f(y, C, D, "→", "\\rightarrow", !0);
f(y, C, D, "→", "\\to");
f(y, B, D, "≱", "\\ngeq", !0);
f(y, B, D, "≰", "\\nleq", !0);
f(y, C, Mt, " ", "\\ ");
f(y, C, Mt, " ", "\\space");
f(y, C, Mt, " ", "\\nobreakspace");
f(K, C, Mt, " ", "\\ ");
f(K, C, Mt, " ", " ");
f(K, C, Mt, " ", "\\space");
f(K, C, Mt, " ", "\\nobreakspace");
f(y, C, Mt, null, "\\nobreak");
f(y, C, Mt, null, "\\allowbreak");
f(y, C, Bi, ",", ",");
f(y, C, Bi, ";", ";");
f(y, B, ue, "⊼", "\\barwedge", !0);
f(y, B, ue, "⊻", "\\veebar", !0);
f(y, C, ue, "⊙", "\\odot", !0);
f(y, C, ue, "⊕", "\\oplus", !0);
f(y, C, ue, "⊗", "\\otimes", !0);
f(y, C, U, "∂", "\\partial", !0);
f(y, C, ue, "⊘", "\\oslash", !0);
f(y, B, ue, "⊚", "\\circledcirc", !0);
f(y, B, ue, "⊡", "\\boxdot", !0);
f(y, C, ue, "△", "\\bigtriangleup");
f(y, C, ue, "▽", "\\bigtriangledown");
f(y, C, ue, "†", "\\dagger");
f(y, C, ue, "⋄", "\\diamond");
f(y, C, ue, "⋆", "\\star");
f(y, C, ue, "◃", "\\triangleleft");
f(y, C, ue, "▹", "\\triangleright");
f(y, C, st, "{", "\\{");
f(K, C, U, "{", "\\{");
f(K, C, U, "{", "\\textbraceleft");
f(y, C, Qe, "}", "\\}");
f(K, C, U, "}", "\\}");
f(K, C, U, "}", "\\textbraceright");
f(y, C, st, "{", "\\lbrace");
f(y, C, Qe, "}", "\\rbrace");
f(y, C, st, "[", "\\lbrack", !0);
f(K, C, U, "[", "\\lbrack", !0);
f(y, C, Qe, "]", "\\rbrack", !0);
f(K, C, U, "]", "\\rbrack", !0);
f(y, C, st, "(", "\\lparen", !0);
f(y, C, Qe, ")", "\\rparen", !0);
f(K, C, U, "<", "\\textless", !0);
f(K, C, U, ">", "\\textgreater", !0);
f(y, C, st, "⌊", "\\lfloor", !0);
f(y, C, Qe, "⌋", "\\rfloor", !0);
f(y, C, st, "⌈", "\\lceil", !0);
f(y, C, Qe, "⌉", "\\rceil", !0);
f(y, C, U, "\\", "\\backslash");
f(y, C, U, "∣", "|");
f(y, C, U, "∣", "\\vert");
f(K, C, U, "|", "\\textbar", !0);
f(y, C, U, "∥", "\\|");
f(y, C, U, "∥", "\\Vert");
f(K, C, U, "∥", "\\textbardbl");
f(K, C, U, "~", "\\textasciitilde");
f(K, C, U, "\\", "\\textbackslash");
f(K, C, U, "^", "\\textasciicircum");
f(y, C, D, "↑", "\\uparrow", !0);
f(y, C, D, "⇑", "\\Uparrow", !0);
f(y, C, D, "↓", "\\downarrow", !0);
f(y, C, D, "⇓", "\\Downarrow", !0);
f(y, C, D, "↕", "\\updownarrow", !0);
f(y, C, D, "⇕", "\\Updownarrow", !0);
f(y, C, qe, "∐", "\\coprod");
f(y, C, qe, "⋁", "\\bigvee");
f(y, C, qe, "⋀", "\\bigwedge");
f(y, C, qe, "⨄", "\\biguplus");
f(y, C, qe, "⋂", "\\bigcap");
f(y, C, qe, "⋃", "\\bigcup");
f(y, C, qe, "∫", "\\int");
f(y, C, qe, "∫", "\\intop");
f(y, C, qe, "∬", "\\iint");
f(y, C, qe, "∭", "\\iiint");
f(y, C, qe, "∏", "\\prod");
f(y, C, qe, "∑", "\\sum");
f(y, C, qe, "⨂", "\\bigotimes");
f(y, C, qe, "⨁", "\\bigoplus");
f(y, C, qe, "⨀", "\\bigodot");
f(y, C, qe, "∮", "\\oint");
f(y, C, qe, "∯", "\\oiint");
f(y, C, qe, "∰", "\\oiiint");
f(y, C, qe, "⨆", "\\bigsqcup");
f(y, C, qe, "∫", "\\smallint");
f(K, C, Jt, "…", "\\textellipsis");
f(y, C, Jt, "…", "\\mathellipsis");
f(K, C, Jt, "…", "\\ldots", !0);
f(y, C, Jt, "…", "\\ldots", !0);
f(y, C, Jt, "⋯", "\\@cdots", !0);
f(y, C, Jt, "⋱", "\\ddots", !0);
f(y, C, U, "⋮", "\\varvdots");
f(y, C, De, "ˊ", "\\acute");
f(y, C, De, "ˋ", "\\grave");
f(y, C, De, "¨", "\\ddot");
f(y, C, De, "~", "\\tilde");
f(y, C, De, "ˉ", "\\bar");
f(y, C, De, "˘", "\\breve");
f(y, C, De, "ˇ", "\\check");
f(y, C, De, "^", "\\hat");
f(y, C, De, "⃗", "\\vec");
f(y, C, De, "˙", "\\dot");
f(y, C, De, "˚", "\\mathring");
f(y, C, he, "", "\\@imath");
f(y, C, he, "", "\\@jmath");
f(y, C, U, "ı", "ı");
f(y, C, U, "ȷ", "ȷ");
f(K, C, U, "ı", "\\i", !0);
f(K, C, U, "ȷ", "\\j", !0);
f(K, C, U, "ß", "\\ss", !0);
f(K, C, U, "æ", "\\ae", !0);
f(K, C, U, "œ", "\\oe", !0);
f(K, C, U, "ø", "\\o", !0);
f(K, C, U, "Æ", "\\AE", !0);
f(K, C, U, "Œ", "\\OE", !0);
f(K, C, U, "Ø", "\\O", !0);
f(K, C, De, "ˊ", "\\'");
f(K, C, De, "ˋ", "\\`");
f(K, C, De, "ˆ", "\\^");
f(K, C, De, "˜", "\\~");
f(K, C, De, "ˉ", "\\=");
f(K, C, De, "˘", "\\u");
f(K, C, De, "˙", "\\.");
f(K, C, De, "¸", "\\c");
f(K, C, De, "˚", "\\r");
f(K, C, De, "ˇ", "\\v");
f(K, C, De, "¨", '\\"');
f(K, C, De, "˝", "\\H");
f(K, C, De, "◯", "\\textcircled");
var Ul = {
  "--": !0,
  "---": !0,
  "``": !0,
  "''": !0
};
f(K, C, U, "–", "--", !0);
f(K, C, U, "–", "\\textendash");
f(K, C, U, "—", "---", !0);
f(K, C, U, "—", "\\textemdash");
f(K, C, U, "‘", "`", !0);
f(K, C, U, "‘", "\\textquoteleft");
f(K, C, U, "’", "'", !0);
f(K, C, U, "’", "\\textquoteright");
f(K, C, U, "“", "``", !0);
f(K, C, U, "“", "\\textquotedblleft");
f(K, C, U, "”", "''", !0);
f(K, C, U, "”", "\\textquotedblright");
f(y, C, U, "°", "\\degree", !0);
f(K, C, U, "°", "\\degree");
f(K, C, U, "°", "\\textdegree", !0);
f(y, C, U, "£", "\\pounds");
f(y, C, U, "£", "\\mathsterling", !0);
f(K, C, U, "£", "\\pounds");
f(K, C, U, "£", "\\textsterling", !0);
f(y, B, U, "✠", "\\maltese");
f(K, B, U, "✠", "\\maltese");
var tl = '0123456789/@."';
for (var qi = 0; qi < tl.length; qi++) {
  var il = tl.charAt(qi);
  f(y, C, U, il, il);
}
var nl = '0123456789!@*()-=+";:?/.,';
for (var Wi = 0; Wi < nl.length; Wi++) {
  var ll = nl.charAt(Wi);
  f(K, C, U, ll, ll);
}
var Li = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
for (var Zi = 0; Zi < Li.length; Zi++) {
  var vi = Li.charAt(Zi);
  f(y, C, he, vi, vi), f(K, C, U, vi, vi);
}
f(y, B, U, "C", "ℂ");
f(K, B, U, "C", "ℂ");
f(y, B, U, "H", "ℍ");
f(K, B, U, "H", "ℍ");
f(y, B, U, "N", "ℕ");
f(K, B, U, "N", "ℕ");
f(y, B, U, "P", "ℙ");
f(K, B, U, "P", "ℙ");
f(y, B, U, "Q", "ℚ");
f(K, B, U, "Q", "ℚ");
f(y, B, U, "R", "ℝ");
f(K, B, U, "R", "ℝ");
f(y, B, U, "Z", "ℤ");
f(K, B, U, "Z", "ℤ");
f(y, C, he, "h", "ℎ");
f(K, C, he, "h", "ℎ");
var me = "";
for (var Ke = 0; Ke < Li.length; Ke++) {
  var Fe = Li.charAt(Ke);
  me = String.fromCharCode(55349, 56320 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), me = String.fromCharCode(55349, 56372 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), me = String.fromCharCode(55349, 56424 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), me = String.fromCharCode(55349, 56580 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), me = String.fromCharCode(55349, 56684 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), me = String.fromCharCode(55349, 56736 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), me = String.fromCharCode(55349, 56788 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), me = String.fromCharCode(55349, 56840 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), me = String.fromCharCode(55349, 56944 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), Ke < 26 && (me = String.fromCharCode(55349, 56632 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me), me = String.fromCharCode(55349, 56476 + Ke), f(y, C, he, Fe, me), f(K, C, U, Fe, me));
}
me = String.fromCharCode(55349, 56668);
f(y, C, he, "k", me);
f(K, C, U, "k", me);
for (var Ft = 0; Ft < 10; Ft++) {
  var Bt = Ft.toString();
  me = String.fromCharCode(55349, 57294 + Ft), f(y, C, he, Bt, me), f(K, C, U, Bt, me), me = String.fromCharCode(55349, 57314 + Ft), f(y, C, he, Bt, me), f(K, C, U, Bt, me), me = String.fromCharCode(55349, 57324 + Ft), f(y, C, he, Bt, me), f(K, C, U, Bt, me), me = String.fromCharCode(55349, 57334 + Ft), f(y, C, he, Bt, me), f(K, C, U, Bt, me);
}
var an = "ÐÞþ";
for (var $i = 0; $i < an.length; $i++) {
  var bi = an.charAt($i);
  f(y, C, he, bi, bi), f(K, C, U, bi, bi);
}
var yi = [
  ["mathbf", "textbf", "Main-Bold"],
  // A-Z bold upright
  ["mathbf", "textbf", "Main-Bold"],
  // a-z bold upright
  ["mathnormal", "textit", "Math-Italic"],
  // A-Z italic
  ["mathnormal", "textit", "Math-Italic"],
  // a-z italic
  ["boldsymbol", "boldsymbol", "Main-BoldItalic"],
  // A-Z bold italic
  ["boldsymbol", "boldsymbol", "Main-BoldItalic"],
  // a-z bold italic
  // Map fancy A-Z letters to script, not calligraphic.
  // This aligns with unicode-math and math fonts (except Cambria Math).
  ["mathscr", "textscr", "Script-Regular"],
  // A-Z script
  ["", "", ""],
  // a-z script.  No font
  ["", "", ""],
  // A-Z bold script. No font
  ["", "", ""],
  // a-z bold script. No font
  ["mathfrak", "textfrak", "Fraktur-Regular"],
  // A-Z Fraktur
  ["mathfrak", "textfrak", "Fraktur-Regular"],
  // a-z Fraktur
  ["mathbb", "textbb", "AMS-Regular"],
  // A-Z double-struck
  ["mathbb", "textbb", "AMS-Regular"],
  // k double-struck
  // Note that we are using a bold font, but font metrics for regular Fraktur.
  ["mathboldfrak", "textboldfrak", "Fraktur-Regular"],
  // A-Z bold Fraktur
  ["mathboldfrak", "textboldfrak", "Fraktur-Regular"],
  // a-z bold Fraktur
  ["mathsf", "textsf", "SansSerif-Regular"],
  // A-Z sans-serif
  ["mathsf", "textsf", "SansSerif-Regular"],
  // a-z sans-serif
  ["mathboldsf", "textboldsf", "SansSerif-Bold"],
  // A-Z bold sans-serif
  ["mathboldsf", "textboldsf", "SansSerif-Bold"],
  // a-z bold sans-serif
  ["mathitsf", "textitsf", "SansSerif-Italic"],
  // A-Z italic sans-serif
  ["mathitsf", "textitsf", "SansSerif-Italic"],
  // a-z italic sans-serif
  ["", "", ""],
  // A-Z bold italic sans. No font
  ["", "", ""],
  // a-z bold italic sans. No font
  ["mathtt", "texttt", "Typewriter-Regular"],
  // A-Z monospace
  ["mathtt", "texttt", "Typewriter-Regular"]
  // a-z monospace
], sl = [
  ["mathbf", "textbf", "Main-Bold"],
  // 0-9 bold
  ["", "", ""],
  // 0-9 double-struck. No KaTeX font.
  ["mathsf", "textsf", "SansSerif-Regular"],
  // 0-9 sans-serif
  ["mathboldsf", "textboldsf", "SansSerif-Bold"],
  // 0-9 bold sans-serif
  ["mathtt", "texttt", "Typewriter-Regular"]
  // 0-9 monospace
], nr = function(e, i) {
  var n = e.charCodeAt(0), l = e.charCodeAt(1), r = (n - 55296) * 1024 + (l - 56320) + 65536, u = i === "math" ? 0 : 1;
  if (119808 <= r && r < 120484) {
    var h = Math.floor((r - 119808) / 26);
    return [yi[h][2], yi[h][u]];
  } else if (120782 <= r && r <= 120831) {
    var s = Math.floor((r - 120782) / 10);
    return [sl[s][2], sl[s][u]];
  } else {
    if (r === 120485 || r === 120486)
      return [yi[0][2], yi[0][u]];
    if (120486 < r && r < 120782)
      return ["", ""];
    throw new ie("Unsupported character: " + e);
  }
}, Ni = function(e, i, n) {
  return Ne[n][e] && Ne[n][e].replace && (e = Ne[n][e].replace), {
    value: e,
    metrics: bn(e, i, n)
  };
}, ft = function(e, i, n, l, r) {
  var u = Ni(e, i, n), h = u.metrics;
  e = u.value;
  var s;
  if (h) {
    var m = h.italic;
    (n === "text" || l && l.font === "mathit") && (m = 0), s = new ct(e, h.height, h.depth, m, h.skew, h.width, r);
  } else
    typeof console < "u" && console.warn("No character metrics " + ("for '" + e + "' in style '" + i + "' and mode '" + n + "'")), s = new ct(e, 0, 0, 0, 0, 0, r);
  if (l) {
    s.maxFontSize = l.sizeMultiplier, l.style.isTight() && s.classes.push("mtight");
    var c = l.getColor();
    c && (s.style.color = c);
  }
  return s;
}, lr = function(e, i, n, l) {
  return l === void 0 && (l = []), n.font === "boldsymbol" && Ni(e, "Main-Bold", i).metrics ? ft(e, "Main-Bold", i, n, l.concat(["mathbf"])) : e === "\\" || Ne[i][e].font === "main" ? ft(e, "Main-Regular", i, n, l) : ft(e, "AMS-Regular", i, n, l.concat(["amsrm"]));
}, sr = function(e, i, n, l, r) {
  return r !== "textord" && Ni(e, "Math-BoldItalic", i).metrics ? {
    fontName: "Math-BoldItalic",
    fontClass: "boldsymbol"
  } : {
    fontName: "Main-Bold",
    fontClass: "mathbf"
  };
}, rr = function(e, i, n) {
  var l = e.mode, r = e.text, u = ["mord"], h = l === "math" || l === "text" && i.font, s = h ? i.font : i.fontFamily, m = "", c = "";
  if (r.charCodeAt(0) === 55349 && ([m, c] = nr(r, l)), m.length > 0)
    return ft(r, m, l, i, u.concat(c));
  if (s) {
    var g, x;
    if (s === "boldsymbol") {
      var T = sr(r, l, i, u, n);
      g = T.fontName, x = [T.fontClass];
    } else
      h ? (g = Zl[s].fontName, x = [s]) : (g = _i(s, i.fontWeight, i.fontShape), x = [s, i.fontWeight, i.fontShape]);
    if (Ni(r, g, l).metrics)
      return ft(r, g, l, i, u.concat(x));
    if (Ul.hasOwnProperty(r) && g.slice(0, 10) === "Typewriter") {
      for (var L = [], A = 0; A < r.length; A++)
        L.push(ft(r[A], g, l, i, u.concat(x)));
      return Wl(L);
    }
  }
  if (n === "mathord")
    return ft(r, "Math-Italic", l, i, u.concat(["mathnormal"]));
  if (n === "textord") {
    var a = Ne[l][r] && Ne[l][r].font;
    if (a === "ams") {
      var o = _i("amsrm", i.fontWeight, i.fontShape);
      return ft(r, o, l, i, u.concat("amsrm", i.fontWeight, i.fontShape));
    } else if (a === "main" || !a) {
      var d = _i("textrm", i.fontWeight, i.fontShape);
      return ft(r, d, l, i, u.concat(i.fontWeight, i.fontShape));
    } else {
      var p = _i(a, i.fontWeight, i.fontShape);
      return ft(r, p, l, i, u.concat(p, i.fontWeight, i.fontShape));
    }
  } else
    throw new Error("unexpected type: " + n + " in makeOrd");
}, ar = (t, e) => {
  if (Dt(t.classes) !== Dt(e.classes) || t.skew !== e.skew || t.maxFontSize !== e.maxFontSize)
    return !1;
  if (t.classes.length === 1) {
    var i = t.classes[0];
    if (i === "mbin" || i === "mord")
      return !1;
  }
  for (var n in t.style)
    if (t.style.hasOwnProperty(n) && t.style[n] !== e.style[n])
      return !1;
  for (var l in e.style)
    if (e.style.hasOwnProperty(l) && t.style[l] !== e.style[l])
      return !1;
  return !0;
}, or = (t) => {
  for (var e = 0; e < t.length - 1; e++) {
    var i = t[e], n = t[e + 1];
    i instanceof ct && n instanceof ct && ar(i, n) && (i.text += n.text, i.height = Math.max(i.height, n.height), i.depth = Math.max(i.depth, n.depth), i.italic = n.italic, t.splice(e + 1, 1), e--);
  }
  return t;
}, _n = function(e) {
  for (var i = 0, n = 0, l = 0, r = 0; r < e.children.length; r++) {
    var u = e.children[r];
    u.height > i && (i = u.height), u.depth > n && (n = u.depth), u.maxFontSize > l && (l = u.maxFontSize);
  }
  e.height = i, e.depth = n, e.maxFontSize = l;
}, tt = function(e, i, n, l) {
  var r = new di(e, i, n, l);
  return _n(r), r;
}, ql = (t, e, i, n) => new di(t, e, i, n), ur = function(e, i, n) {
  var l = tt([e], [], i);
  return l.height = Math.max(n || i.fontMetrics().defaultRuleThickness, i.minRuleThickness), l.style.borderBottomWidth = re(l.height), l.maxFontSize = 1, l;
}, cr = function(e, i, n, l) {
  var r = new yn(e, i, n, l);
  return _n(r), r;
}, Wl = function(e) {
  var i = new hi(e);
  return _n(i), i;
}, hr = function(e, i) {
  return e instanceof hi ? tt([], [e], i) : e;
}, dr = function(e) {
  if (e.positionType === "individualShift") {
    for (var i = e.children, n = [i[0]], l = -i[0].shift - i[0].elem.depth, r = l, u = 1; u < i.length; u++) {
      var h = -i[u].shift - r - i[u].elem.depth, s = h - (i[u - 1].elem.height + i[u - 1].elem.depth);
      r = r + h, n.push({
        type: "kern",
        size: s
      }), n.push(i[u]);
    }
    return {
      children: n,
      depth: l
    };
  }
  var m;
  if (e.positionType === "top") {
    for (var c = e.positionData, g = 0; g < e.children.length; g++) {
      var x = e.children[g];
      c -= x.type === "kern" ? x.size : x.elem.height + x.elem.depth;
    }
    m = c;
  } else if (e.positionType === "bottom")
    m = -e.positionData;
  else {
    var T = e.children[0];
    if (T.type !== "elem")
      throw new Error('First child must have type "elem".');
    if (e.positionType === "shift")
      m = -T.elem.depth - e.positionData;
    else if (e.positionType === "firstBaseline")
      m = -T.elem.depth;
    else
      throw new Error("Invalid positionType " + e.positionType + ".");
  }
  return {
    children: e.children,
    depth: m
  };
}, fr = function(e, i) {
  for (var {
    children: n,
    depth: l
  } = dr(e), r = 0, u = 0; u < n.length; u++) {
    var h = n[u];
    if (h.type === "elem") {
      var s = h.elem;
      r = Math.max(r, s.maxFontSize, s.height);
    }
  }
  r += 2;
  var m = tt(["pstrut"], []);
  m.style.height = re(r);
  for (var c = [], g = l, x = l, T = l, L = 0; L < n.length; L++) {
    var A = n[L];
    if (A.type === "kern")
      T += A.size;
    else {
      var a = A.elem, o = A.wrapperClasses || [], d = A.wrapperStyle || {}, p = tt(o, [m, a], void 0, d);
      p.style.top = re(-r - T - a.depth), A.marginLeft && (p.style.marginLeft = A.marginLeft), A.marginRight && (p.style.marginRight = A.marginRight), c.push(p), T += a.height + a.depth;
    }
    g = Math.min(g, T), x = Math.max(x, T);
  }
  var v = tt(["vlist"], c);
  v.style.height = re(x);
  var _;
  if (g < 0) {
    var b = tt([], []), S = tt(["vlist"], [b]);
    S.style.height = re(-g);
    var k = tt(["vlist-s"], [new ct("​")]);
    _ = [tt(["vlist-r"], [v, k]), tt(["vlist-r"], [S])];
  } else
    _ = [tt(["vlist-r"], [v])];
  var w = tt(["vlist-t"], _);
  return _.length === 2 && w.classes.push("vlist-t2"), w.height = x, w.depth = -g, w;
}, mr = (t, e) => {
  var i = tt(["mspace"], [], e), n = Ie(t, e);
  return i.style.marginRight = re(n), i;
}, _i = function(e, i, n) {
  var l = "";
  switch (e) {
    case "amsrm":
      l = "AMS";
      break;
    case "textrm":
      l = "Main";
      break;
    case "textsf":
      l = "SansSerif";
      break;
    case "texttt":
      l = "Typewriter";
      break;
    default:
      l = e;
  }
  var r;
  return i === "textbf" && n === "textit" ? r = "BoldItalic" : i === "textbf" ? r = "Bold" : i === "textit" ? r = "Italic" : r = "Regular", l + "-" + r;
}, Zl = {
  // styles
  mathbf: {
    variant: "bold",
    fontName: "Main-Bold"
  },
  mathrm: {
    variant: "normal",
    fontName: "Main-Regular"
  },
  textit: {
    variant: "italic",
    fontName: "Main-Italic"
  },
  mathit: {
    variant: "italic",
    fontName: "Main-Italic"
  },
  mathnormal: {
    variant: "italic",
    fontName: "Math-Italic"
  },
  // "boldsymbol" is missing because they require the use of multiple fonts:
  // Math-BoldItalic and Main-Bold.  This is handled by a special case in
  // makeOrd which ends up calling boldsymbol.
  // families
  mathbb: {
    variant: "double-struck",
    fontName: "AMS-Regular"
  },
  mathcal: {
    variant: "script",
    fontName: "Caligraphic-Regular"
  },
  mathfrak: {
    variant: "fraktur",
    fontName: "Fraktur-Regular"
  },
  mathscr: {
    variant: "script",
    fontName: "Script-Regular"
  },
  mathsf: {
    variant: "sans-serif",
    fontName: "SansSerif-Regular"
  },
  mathtt: {
    variant: "monospace",
    fontName: "Typewriter-Regular"
  }
}, $l = {
  //   path, width, height
  vec: ["vec", 0.471, 0.714],
  // values from the font glyph
  oiintSize1: ["oiintSize1", 0.957, 0.499],
  // oval to overlay the integrand
  oiintSize2: ["oiintSize2", 1.472, 0.659],
  oiiintSize1: ["oiiintSize1", 1.304, 0.499],
  oiiintSize2: ["oiiintSize2", 1.98, 0.659]
}, pr = function(e, i) {
  var [n, l, r] = $l[e], u = new Ht(n), h = new Et([u], {
    width: re(l),
    height: re(r),
    // Override CSS rule `.katex svg { width: 100% }`
    style: "width:" + re(l),
    viewBox: "0 0 " + 1e3 * l + " " + 1e3 * r,
    preserveAspectRatio: "xMinYMin"
  }), s = ql(["overlay"], [h], i);
  return s.height = r, s.style.height = re(r), s.style.width = re(l), s;
}, G = {
  fontMap: Zl,
  makeSymbol: ft,
  mathsym: lr,
  makeSpan: tt,
  makeSvgSpan: ql,
  makeLineSpan: ur,
  makeAnchor: cr,
  makeFragment: Wl,
  wrapFragment: hr,
  makeVList: fr,
  makeOrd: rr,
  makeGlue: mr,
  staticSvg: pr,
  svgData: $l,
  tryCombineChars: or
}, He = {
  number: 3,
  unit: "mu"
}, Pt = {
  number: 4,
  unit: "mu"
}, Ct = {
  number: 5,
  unit: "mu"
}, gr = {
  mord: {
    mop: He,
    mbin: Pt,
    mrel: Ct,
    minner: He
  },
  mop: {
    mord: He,
    mop: He,
    mrel: Ct,
    minner: He
  },
  mbin: {
    mord: Pt,
    mop: Pt,
    mopen: Pt,
    minner: Pt
  },
  mrel: {
    mord: Ct,
    mop: Ct,
    mopen: Ct,
    minner: Ct
  },
  mopen: {},
  mclose: {
    mop: He,
    mbin: Pt,
    mrel: Ct,
    minner: He
  },
  mpunct: {
    mord: He,
    mop: He,
    mrel: Ct,
    mopen: He,
    mclose: He,
    mpunct: He,
    minner: He
  },
  minner: {
    mord: He,
    mop: He,
    mbin: Pt,
    mrel: Ct,
    mopen: He,
    mpunct: He,
    minner: He
  }
}, vr = {
  mord: {
    mop: He
  },
  mop: {
    mord: He,
    mop: He
  },
  mbin: {},
  mrel: {},
  mopen: {},
  mclose: {
    mop: He
  },
  mpunct: {},
  minner: {
    mop: He
  }
}, Yl = {}, zi = {}, Mi = {};
function oe(t) {
  for (var {
    type: e,
    names: i,
    props: n,
    handler: l,
    htmlBuilder: r,
    mathmlBuilder: u
  } = t, h = {
    type: e,
    numArgs: n.numArgs,
    argTypes: n.argTypes,
    allowedInArgument: !!n.allowedInArgument,
    allowedInText: !!n.allowedInText,
    allowedInMath: n.allowedInMath === void 0 ? !0 : n.allowedInMath,
    numOptionalArgs: n.numOptionalArgs || 0,
    infix: !!n.infix,
    primitive: !!n.primitive,
    handler: l
  }, s = 0; s < i.length; ++s)
    Yl[i[s]] = h;
  e && (r && (zi[e] = r), u && (Mi[e] = u));
}
function Vt(t) {
  var {
    type: e,
    htmlBuilder: i,
    mathmlBuilder: n
  } = t;
  oe({
    type: e,
    names: [],
    props: {
      numArgs: 0
    },
    handler() {
      throw new Error("Should never be called.");
    },
    htmlBuilder: i,
    mathmlBuilder: n
  });
}
var Ai = function(e) {
  return e.type === "ordgroup" && e.body.length === 1 ? e.body[0] : e;
}, Ve = function(e) {
  return e.type === "ordgroup" ? e.body : [e];
}, Lt = G.makeSpan, br = ["leftmost", "mbin", "mopen", "mrel", "mop", "mpunct"], yr = ["rightmost", "mrel", "mclose", "mpunct"], _r = {
  display: de.DISPLAY,
  text: de.TEXT,
  script: de.SCRIPT,
  scriptscript: de.SCRIPTSCRIPT
}, wr = {
  mord: "mord",
  mop: "mop",
  mbin: "mbin",
  mrel: "mrel",
  mopen: "mopen",
  mclose: "mclose",
  mpunct: "mpunct",
  minner: "minner"
}, Ze = function(e, i, n, l) {
  l === void 0 && (l = [null, null]);
  for (var r = [], u = 0; u < e.length; u++) {
    var h = ke(e[u], i);
    if (h instanceof hi) {
      var s = h.children;
      r.push(...s);
    } else
      r.push(h);
  }
  if (G.tryCombineChars(r), !n)
    return r;
  var m = i;
  if (e.length === 1) {
    var c = e[0];
    c.type === "sizing" ? m = i.havingSize(c.size) : c.type === "styling" && (m = i.havingStyle(_r[c.style]));
  }
  var g = Lt([l[0] || "leftmost"], [], i), x = Lt([l[1] || "rightmost"], [], i), T = n === "root";
  return rl(r, (L, A) => {
    var a = A.classes[0], o = L.classes[0];
    a === "mbin" && pe.contains(yr, o) ? A.classes[0] = "mord" : o === "mbin" && pe.contains(br, a) && (L.classes[0] = "mord");
  }, {
    node: g
  }, x, T), rl(r, (L, A) => {
    var a = on(A), o = on(L), d = a && o ? L.hasClass("mtight") ? vr[a][o] : gr[a][o] : null;
    if (d)
      return G.makeGlue(d, m);
  }, {
    node: g
  }, x, T), r;
}, rl = function t(e, i, n, l, r) {
  l && e.push(l);
  for (var u = 0; u < e.length; u++) {
    var h = e[u], s = jl(h);
    if (s) {
      t(s.children, i, n, null, r);
      continue;
    }
    var m = !h.hasClass("mspace");
    if (m) {
      var c = i(h, n.node);
      c && (n.insertAfter ? n.insertAfter(c) : (e.unshift(c), u++));
    }
    m ? n.node = h : r && h.hasClass("newline") && (n.node = Lt(["leftmost"])), n.insertAfter = ((g) => (x) => {
      e.splice(g + 1, 0, x), u++;
    })(u);
  }
  l && e.pop();
}, jl = function(e) {
  return e instanceof hi || e instanceof yn || e instanceof di && e.hasClass("enclosing") ? e : null;
}, xr = function t(e, i) {
  var n = jl(e);
  if (n) {
    var l = n.children;
    if (l.length) {
      if (i === "right")
        return t(l[l.length - 1], "right");
      if (i === "left")
        return t(l[0], "left");
    }
  }
  return e;
}, on = function(e, i) {
  return e ? (i && (e = xr(e, i)), wr[e.classes[0]] || null) : null;
}, ui = function(e, i) {
  var n = ["nulldelimiter"].concat(e.baseSizingClasses());
  return Lt(i.concat(n));
}, ke = function(e, i, n) {
  if (!e)
    return Lt();
  if (zi[e.type]) {
    var l = zi[e.type](e, i);
    if (n && i.size !== n.size) {
      l = Lt(i.sizingClasses(n), [l], i);
      var r = i.sizeMultiplier / n.sizeMultiplier;
      l.height *= r, l.depth *= r;
    }
    return l;
  } else
    throw new ie("Got group of unknown type: '" + e.type + "'");
};
function wi(t, e) {
  var i = Lt(["base"], t, e), n = Lt(["strut"]);
  return n.style.height = re(i.height + i.depth), i.depth && (n.style.verticalAlign = re(-i.depth)), i.children.unshift(n), i;
}
function un(t, e) {
  var i = null;
  t.length === 1 && t[0].type === "tag" && (i = t[0].tag, t = t[0].body);
  var n = Ze(t, e, "root"), l;
  n.length === 2 && n[1].hasClass("tag") && (l = n.pop());
  for (var r = [], u = [], h = 0; h < n.length; h++)
    if (u.push(n[h]), n[h].hasClass("mbin") || n[h].hasClass("mrel") || n[h].hasClass("allowbreak")) {
      for (var s = !1; h < n.length - 1 && n[h + 1].hasClass("mspace") && !n[h + 1].hasClass("newline"); )
        h++, u.push(n[h]), n[h].hasClass("nobreak") && (s = !0);
      s || (r.push(wi(u, e)), u = []);
    } else
      n[h].hasClass("newline") && (u.pop(), u.length > 0 && (r.push(wi(u, e)), u = []), r.push(n[h]));
  u.length > 0 && r.push(wi(u, e));
  var m;
  i ? (m = wi(Ze(i, e, !0)), m.classes = ["tag"], r.push(m)) : l && r.push(l);
  var c = Lt(["katex-html"], r);
  if (c.setAttribute("aria-hidden", "true"), m) {
    var g = m.children[0];
    g.style.height = re(c.height + c.depth), c.depth && (g.style.verticalAlign = re(-c.depth));
  }
  return c;
}
function Gl(t) {
  return new hi(t);
}
class ot {
  constructor(e, i, n) {
    this.type = void 0, this.attributes = void 0, this.children = void 0, this.classes = void 0, this.type = e, this.attributes = {}, this.children = i || [], this.classes = n || [];
  }
  /**
   * Sets an attribute on a MathML node. MathML depends on attributes to convey a
   * semantic content, so this is used heavily.
   */
  setAttribute(e, i) {
    this.attributes[e] = i;
  }
  /**
   * Gets an attribute on a MathML node.
   */
  getAttribute(e) {
    return this.attributes[e];
  }
  /**
   * Converts the math node into a MathML-namespaced DOM element.
   */
  toNode() {
    var e = document.createElementNS("http://www.w3.org/1998/Math/MathML", this.type);
    for (var i in this.attributes)
      Object.prototype.hasOwnProperty.call(this.attributes, i) && e.setAttribute(i, this.attributes[i]);
    this.classes.length > 0 && (e.className = Dt(this.classes));
    for (var n = 0; n < this.children.length; n++)
      e.appendChild(this.children[n].toNode());
    return e;
  }
  /**
   * Converts the math node into an HTML markup string.
   */
  toMarkup() {
    var e = "<" + this.type;
    for (var i in this.attributes)
      Object.prototype.hasOwnProperty.call(this.attributes, i) && (e += " " + i + '="', e += pe.escape(this.attributes[i]), e += '"');
    this.classes.length > 0 && (e += ' class ="' + pe.escape(Dt(this.classes)) + '"'), e += ">";
    for (var n = 0; n < this.children.length; n++)
      e += this.children[n].toMarkup();
    return e += "</" + this.type + ">", e;
  }
  /**
   * Converts the math node into a string, similar to innerText, but escaped.
   */
  toText() {
    return this.children.map((e) => e.toText()).join("");
  }
}
class si {
  constructor(e) {
    this.text = void 0, this.text = e;
  }
  /**
   * Converts the text node into a DOM text node.
   */
  toNode() {
    return document.createTextNode(this.text);
  }
  /**
   * Converts the text node into escaped HTML markup
   * (representing the text itself).
   */
  toMarkup() {
    return pe.escape(this.toText());
  }
  /**
   * Converts the text node into a string
   * (representing the text itself).
   */
  toText() {
    return this.text;
  }
}
class Cr {
  /**
   * Create a Space node with width given in CSS ems.
   */
  constructor(e) {
    this.width = void 0, this.character = void 0, this.width = e, e >= 0.05555 && e <= 0.05556 ? this.character = " " : e >= 0.1666 && e <= 0.1667 ? this.character = " " : e >= 0.2222 && e <= 0.2223 ? this.character = " " : e >= 0.2777 && e <= 0.2778 ? this.character = "  " : e >= -0.05556 && e <= -0.05555 ? this.character = " ⁣" : e >= -0.1667 && e <= -0.1666 ? this.character = " ⁣" : e >= -0.2223 && e <= -0.2222 ? this.character = " ⁣" : e >= -0.2778 && e <= -0.2777 ? this.character = " ⁣" : this.character = null;
  }
  /**
   * Converts the math node into a MathML-namespaced DOM element.
   */
  toNode() {
    if (this.character)
      return document.createTextNode(this.character);
    var e = document.createElementNS("http://www.w3.org/1998/Math/MathML", "mspace");
    return e.setAttribute("width", re(this.width)), e;
  }
  /**
   * Converts the math node into an HTML markup string.
   */
  toMarkup() {
    return this.character ? "<mtext>" + this.character + "</mtext>" : '<mspace width="' + re(this.width) + '"/>';
  }
  /**
   * Converts the math node into a string, similar to innerText.
   */
  toText() {
    return this.character ? this.character : " ";
  }
}
var ee = {
  MathNode: ot,
  TextNode: si,
  SpaceNode: Cr,
  newDocumentFragment: Gl
}, ht = function(e, i, n) {
  return Ne[i][e] && Ne[i][e].replace && e.charCodeAt(0) !== 55349 && !(Ul.hasOwnProperty(e) && n && (n.fontFamily && n.fontFamily.slice(4, 6) === "tt" || n.font && n.font.slice(4, 6) === "tt")) && (e = Ne[i][e].replace), new ee.TextNode(e);
}, wn = function(e) {
  return e.length === 1 ? e[0] : new ee.MathNode("mrow", e);
}, xn = function(e, i) {
  if (i.fontFamily === "texttt")
    return "monospace";
  if (i.fontFamily === "textsf")
    return i.fontShape === "textit" && i.fontWeight === "textbf" ? "sans-serif-bold-italic" : i.fontShape === "textit" ? "sans-serif-italic" : i.fontWeight === "textbf" ? "bold-sans-serif" : "sans-serif";
  if (i.fontShape === "textit" && i.fontWeight === "textbf")
    return "bold-italic";
  if (i.fontShape === "textit")
    return "italic";
  if (i.fontWeight === "textbf")
    return "bold";
  var n = i.font;
  if (!n || n === "mathnormal")
    return null;
  var l = e.mode;
  if (n === "mathit")
    return "italic";
  if (n === "boldsymbol")
    return e.type === "textord" ? "bold" : "bold-italic";
  if (n === "mathbf")
    return "bold";
  if (n === "mathbb")
    return "double-struck";
  if (n === "mathfrak")
    return "fraktur";
  if (n === "mathscr" || n === "mathcal")
    return "script";
  if (n === "mathsf")
    return "sans-serif";
  if (n === "mathtt")
    return "monospace";
  var r = e.text;
  if (pe.contains(["\\imath", "\\jmath"], r))
    return null;
  Ne[l][r] && Ne[l][r].replace && (r = Ne[l][r].replace);
  var u = G.fontMap[n].fontName;
  return bn(r, u, l) ? G.fontMap[n].variant : null;
}, it = function(e, i, n) {
  if (e.length === 1) {
    var l = ze(e[0], i);
    return n && l instanceof ot && l.type === "mo" && (l.setAttribute("lspace", "0em"), l.setAttribute("rspace", "0em")), [l];
  }
  for (var r = [], u, h = 0; h < e.length; h++) {
    var s = ze(e[h], i);
    if (s instanceof ot && u instanceof ot) {
      if (s.type === "mtext" && u.type === "mtext" && s.getAttribute("mathvariant") === u.getAttribute("mathvariant")) {
        u.children.push(...s.children);
        continue;
      } else if (s.type === "mn" && u.type === "mn") {
        u.children.push(...s.children);
        continue;
      } else if (s.type === "mi" && s.children.length === 1 && u.type === "mn") {
        var m = s.children[0];
        if (m instanceof si && m.text === ".") {
          u.children.push(...s.children);
          continue;
        }
      } else if (u.type === "mi" && u.children.length === 1) {
        var c = u.children[0];
        if (c instanceof si && c.text === "̸" && (s.type === "mo" || s.type === "mi" || s.type === "mn")) {
          var g = s.children[0];
          g instanceof si && g.text.length > 0 && (g.text = g.text.slice(0, 1) + "̸" + g.text.slice(1), r.pop());
        }
      }
    }
    r.push(s), u = s;
  }
  return r;
}, It = function(e, i, n) {
  return wn(it(e, i, n));
}, ze = function(e, i) {
  if (!e)
    return new ee.MathNode("mrow");
  if (Mi[e.type]) {
    var n = Mi[e.type](e, i);
    return n;
  } else
    throw new ie("Got group of unknown type: '" + e.type + "'");
};
function al(t, e, i, n, l) {
  var r = it(t, i), u;
  r.length === 1 && r[0] instanceof ot && pe.contains(["mrow", "mtable"], r[0].type) ? u = r[0] : u = new ee.MathNode("mrow", r);
  var h = new ee.MathNode("annotation", [new ee.TextNode(e)]);
  h.setAttribute("encoding", "application/x-tex");
  var s = new ee.MathNode("semantics", [u, h]), m = new ee.MathNode("math", [s]);
  m.setAttribute("xmlns", "http://www.w3.org/1998/Math/MathML"), n && m.setAttribute("display", "block");
  var c = l ? "katex" : "katex-mathml";
  return G.makeSpan([c], [m]);
}
var Xl = function(e) {
  return new St({
    style: e.displayMode ? de.DISPLAY : de.TEXT,
    maxSize: e.maxSize,
    minRuleThickness: e.minRuleThickness
  });
}, Kl = function(e, i) {
  if (i.displayMode) {
    var n = ["katex-display"];
    i.leqno && n.push("leqno"), i.fleqn && n.push("fleqn"), e = G.makeSpan(n, [e]);
  }
  return e;
}, Sr = function(e, i, n) {
  var l = Xl(n), r;
  if (n.output === "mathml")
    return al(e, i, l, n.displayMode, !0);
  if (n.output === "html") {
    var u = un(e, l);
    r = G.makeSpan(["katex"], [u]);
  } else {
    var h = al(e, i, l, n.displayMode, !1), s = un(e, l);
    r = G.makeSpan(["katex"], [h, s]);
  }
  return Kl(r, n);
}, kr = function(e, i, n) {
  var l = Xl(n), r = un(e, l), u = G.makeSpan(["katex"], [r]);
  return Kl(u, n);
}, Tr = {
  widehat: "^",
  widecheck: "ˇ",
  widetilde: "~",
  utilde: "~",
  overleftarrow: "←",
  underleftarrow: "←",
  xleftarrow: "←",
  overrightarrow: "→",
  underrightarrow: "→",
  xrightarrow: "→",
  underbrace: "⏟",
  overbrace: "⏞",
  overgroup: "⏠",
  undergroup: "⏡",
  overleftrightarrow: "↔",
  underleftrightarrow: "↔",
  xleftrightarrow: "↔",
  Overrightarrow: "⇒",
  xRightarrow: "⇒",
  overleftharpoon: "↼",
  xleftharpoonup: "↼",
  overrightharpoon: "⇀",
  xrightharpoonup: "⇀",
  xLeftarrow: "⇐",
  xLeftrightarrow: "⇔",
  xhookleftarrow: "↩",
  xhookrightarrow: "↪",
  xmapsto: "↦",
  xrightharpoondown: "⇁",
  xleftharpoondown: "↽",
  xrightleftharpoons: "⇌",
  xleftrightharpoons: "⇋",
  xtwoheadleftarrow: "↞",
  xtwoheadrightarrow: "↠",
  xlongequal: "=",
  xtofrom: "⇄",
  xrightleftarrows: "⇄",
  xrightequilibrium: "⇌",
  // Not a perfect match.
  xleftequilibrium: "⇋",
  // None better available.
  "\\cdrightarrow": "→",
  "\\cdleftarrow": "←",
  "\\cdlongequal": "="
}, Er = function(e) {
  var i = new ee.MathNode("mo", [new ee.TextNode(Tr[e.replace(/^\\/, "")])]);
  return i.setAttribute("stretchy", "true"), i;
}, Lr = {
  //   path(s), minWidth, height, align
  overrightarrow: [["rightarrow"], 0.888, 522, "xMaxYMin"],
  overleftarrow: [["leftarrow"], 0.888, 522, "xMinYMin"],
  underrightarrow: [["rightarrow"], 0.888, 522, "xMaxYMin"],
  underleftarrow: [["leftarrow"], 0.888, 522, "xMinYMin"],
  xrightarrow: [["rightarrow"], 1.469, 522, "xMaxYMin"],
  "\\cdrightarrow": [["rightarrow"], 3, 522, "xMaxYMin"],
  // CD minwwidth2.5pc
  xleftarrow: [["leftarrow"], 1.469, 522, "xMinYMin"],
  "\\cdleftarrow": [["leftarrow"], 3, 522, "xMinYMin"],
  Overrightarrow: [["doublerightarrow"], 0.888, 560, "xMaxYMin"],
  xRightarrow: [["doublerightarrow"], 1.526, 560, "xMaxYMin"],
  xLeftarrow: [["doubleleftarrow"], 1.526, 560, "xMinYMin"],
  overleftharpoon: [["leftharpoon"], 0.888, 522, "xMinYMin"],
  xleftharpoonup: [["leftharpoon"], 0.888, 522, "xMinYMin"],
  xleftharpoondown: [["leftharpoondown"], 0.888, 522, "xMinYMin"],
  overrightharpoon: [["rightharpoon"], 0.888, 522, "xMaxYMin"],
  xrightharpoonup: [["rightharpoon"], 0.888, 522, "xMaxYMin"],
  xrightharpoondown: [["rightharpoondown"], 0.888, 522, "xMaxYMin"],
  xlongequal: [["longequal"], 0.888, 334, "xMinYMin"],
  "\\cdlongequal": [["longequal"], 3, 334, "xMinYMin"],
  xtwoheadleftarrow: [["twoheadleftarrow"], 0.888, 334, "xMinYMin"],
  xtwoheadrightarrow: [["twoheadrightarrow"], 0.888, 334, "xMaxYMin"],
  overleftrightarrow: [["leftarrow", "rightarrow"], 0.888, 522],
  overbrace: [["leftbrace", "midbrace", "rightbrace"], 1.6, 548],
  underbrace: [["leftbraceunder", "midbraceunder", "rightbraceunder"], 1.6, 548],
  underleftrightarrow: [["leftarrow", "rightarrow"], 0.888, 522],
  xleftrightarrow: [["leftarrow", "rightarrow"], 1.75, 522],
  xLeftrightarrow: [["doubleleftarrow", "doublerightarrow"], 1.75, 560],
  xrightleftharpoons: [["leftharpoondownplus", "rightharpoonplus"], 1.75, 716],
  xleftrightharpoons: [["leftharpoonplus", "rightharpoondownplus"], 1.75, 716],
  xhookleftarrow: [["leftarrow", "righthook"], 1.08, 522],
  xhookrightarrow: [["lefthook", "rightarrow"], 1.08, 522],
  overlinesegment: [["leftlinesegment", "rightlinesegment"], 0.888, 522],
  underlinesegment: [["leftlinesegment", "rightlinesegment"], 0.888, 522],
  overgroup: [["leftgroup", "rightgroup"], 0.888, 342],
  undergroup: [["leftgroupunder", "rightgroupunder"], 0.888, 342],
  xmapsto: [["leftmapsto", "rightarrow"], 1.5, 522],
  xtofrom: [["leftToFrom", "rightToFrom"], 1.75, 528],
  // The next three arrows are from the mhchem package.
  // In mhchem.sty, min-length is 2.0em. But these arrows might appear in the
  // document as \xrightarrow or \xrightleftharpoons. Those have
  // min-length = 1.75em, so we set min-length on these next three to match.
  xrightleftarrows: [["baraboveleftarrow", "rightarrowabovebar"], 1.75, 901],
  xrightequilibrium: [["baraboveshortleftharpoon", "rightharpoonaboveshortbar"], 1.75, 716],
  xleftequilibrium: [["shortbaraboveleftharpoon", "shortrightharpoonabovebar"], 1.75, 716]
}, zr = function(e) {
  return e.type === "ordgroup" ? e.body.length : 1;
}, Mr = function(e, i) {
  function n() {
    var h = 4e5, s = e.label.slice(1);
    if (pe.contains(["widehat", "widecheck", "widetilde", "utilde"], s)) {
      var m = e, c = zr(m.base), g, x, T;
      if (c > 5)
        s === "widehat" || s === "widecheck" ? (g = 420, h = 2364, T = 0.42, x = s + "4") : (g = 312, h = 2340, T = 0.34, x = "tilde4");
      else {
        var L = [1, 1, 2, 2, 3, 3][c];
        s === "widehat" || s === "widecheck" ? (h = [0, 1062, 2364, 2364, 2364][L], g = [0, 239, 300, 360, 420][L], T = [0, 0.24, 0.3, 0.3, 0.36, 0.42][L], x = s + L) : (h = [0, 600, 1033, 2339, 2340][L], g = [0, 260, 286, 306, 312][L], T = [0, 0.26, 0.286, 0.3, 0.306, 0.34][L], x = "tilde" + L);
      }
      var A = new Ht(x), a = new Et([A], {
        width: "100%",
        height: re(T),
        viewBox: "0 0 " + h + " " + g,
        preserveAspectRatio: "none"
      });
      return {
        span: G.makeSvgSpan([], [a], i),
        minWidth: 0,
        height: T
      };
    } else {
      var o = [], d = Lr[s], [p, v, _] = d, b = _ / 1e3, S = p.length, k, w;
      if (S === 1) {
        var z = d[3];
        k = ["hide-tail"], w = [z];
      } else if (S === 2)
        k = ["halfarrow-left", "halfarrow-right"], w = ["xMinYMin", "xMaxYMin"];
      else if (S === 3)
        k = ["brace-left", "brace-center", "brace-right"], w = ["xMinYMin", "xMidYMin", "xMaxYMin"];
      else
        throw new Error(`Correct katexImagesData or update code here to support
                    ` + S + " children.");
      for (var M = 0; M < S; M++) {
        var N = new Ht(p[M]), O = new Et([N], {
          width: "400em",
          height: re(b),
          viewBox: "0 0 " + h + " " + _,
          preserveAspectRatio: w[M] + " slice"
        }), I = G.makeSvgSpan([k[M]], [O], i);
        if (S === 1)
          return {
            span: I,
            minWidth: v,
            height: b
          };
        I.style.height = re(b), o.push(I);
      }
      return {
        span: G.makeSpan(["stretchy"], o, i),
        minWidth: v,
        height: b
      };
    }
  }
  var {
    span: l,
    minWidth: r,
    height: u
  } = n();
  return l.height = u, l.style.height = re(u), r > 0 && (l.style.minWidth = re(r)), l;
}, Ar = function(e, i, n, l, r) {
  var u, h = e.height + e.depth + n + l;
  if (/fbox|color|angl/.test(i)) {
    if (u = G.makeSpan(["stretchy", i], [], r), i === "fbox") {
      var s = r.color && r.getColor();
      s && (u.style.borderColor = s);
    }
  } else {
    var m = [];
    /^[bx]cancel$/.test(i) && m.push(new rn({
      x1: "0",
      y1: "0",
      x2: "100%",
      y2: "100%",
      "stroke-width": "0.046em"
    })), /^x?cancel$/.test(i) && m.push(new rn({
      x1: "0",
      y1: "100%",
      x2: "100%",
      y2: "0",
      "stroke-width": "0.046em"
    }));
    var c = new Et(m, {
      width: "100%",
      height: re(h)
    });
    u = G.makeSvgSpan([], [c], r);
  }
  return u.height = h, u.style.height = re(h), u;
}, zt = {
  encloseSpan: Ar,
  mathMLnode: Er,
  svgSpan: Mr
};
function ye(t, e) {
  if (!t || t.type !== e)
    throw new Error("Expected node of type " + e + ", but got " + (t ? "node of type " + t.type : String(t)));
  return t;
}
function Cn(t) {
  var e = Ri(t);
  if (!e)
    throw new Error("Expected node of symbol group type, but got " + (t ? "node of type " + t.type : String(t)));
  return e;
}
function Ri(t) {
  return t && (t.type === "atom" || ir.hasOwnProperty(t.type)) ? t : null;
}
var Sn = (t, e) => {
  var i, n, l;
  t && t.type === "supsub" ? (n = ye(t.base, "accent"), i = n.base, t.base = i, l = er(ke(t, e)), t.base = n) : (n = ye(t, "accent"), i = n.base);
  var r = ke(i, e.havingCrampedStyle()), u = n.isShifty && pe.isCharacterBox(i), h = 0;
  if (u) {
    var s = pe.getBaseElem(i), m = ke(s, e.havingCrampedStyle());
    h = el(m).skew;
  }
  var c = n.label === "\\c", g = c ? r.height + r.depth : Math.min(r.height, e.fontMetrics().xHeight), x;
  if (n.isStretchy)
    x = zt.svgSpan(n, e), x = G.makeVList({
      positionType: "firstBaseline",
      children: [{
        type: "elem",
        elem: r
      }, {
        type: "elem",
        elem: x,
        wrapperClasses: ["svg-align"],
        wrapperStyle: h > 0 ? {
          width: "calc(100% - " + re(2 * h) + ")",
          marginLeft: re(2 * h)
        } : void 0
      }]
    }, e);
  else {
    var T, L;
    n.label === "\\vec" ? (T = G.staticSvg("vec", e), L = G.svgData.vec[1]) : (T = G.makeOrd({
      mode: n.mode,
      text: n.label
    }, e, "textord"), T = el(T), T.italic = 0, L = T.width, c && (g += T.depth)), x = G.makeSpan(["accent-body"], [T]);
    var A = n.label === "\\textcircled";
    A && (x.classes.push("accent-full"), g = r.height);
    var a = h;
    A || (a -= L / 2), x.style.left = re(a), n.label === "\\textcircled" && (x.style.top = ".2em"), x = G.makeVList({
      positionType: "firstBaseline",
      children: [{
        type: "elem",
        elem: r
      }, {
        type: "kern",
        size: -g
      }, {
        type: "elem",
        elem: x
      }]
    }, e);
  }
  var o = G.makeSpan(["mord", "accent"], [x], e);
  return l ? (l.children[0] = o, l.height = Math.max(o.height, l.height), l.classes[0] = "mord", l) : o;
}, Jl = (t, e) => {
  var i = t.isStretchy ? zt.mathMLnode(t.label) : new ee.MathNode("mo", [ht(t.label, t.mode)]), n = new ee.MathNode("mover", [ze(t.base, e), i]);
  return n.setAttribute("accent", "true"), n;
}, Br = new RegExp(["\\acute", "\\grave", "\\ddot", "\\tilde", "\\bar", "\\breve", "\\check", "\\hat", "\\vec", "\\dot", "\\mathring"].map((t) => "\\" + t).join("|"));
oe({
  type: "accent",
  names: ["\\acute", "\\grave", "\\ddot", "\\tilde", "\\bar", "\\breve", "\\check", "\\hat", "\\vec", "\\dot", "\\mathring", "\\widecheck", "\\widehat", "\\widetilde", "\\overrightarrow", "\\overleftarrow", "\\Overrightarrow", "\\overleftrightarrow", "\\overgroup", "\\overlinesegment", "\\overleftharpoon", "\\overrightharpoon"],
  props: {
    numArgs: 1
  },
  handler: (t, e) => {
    var i = Ai(e[0]), n = !Br.test(t.funcName), l = !n || t.funcName === "\\widehat" || t.funcName === "\\widetilde" || t.funcName === "\\widecheck";
    return {
      type: "accent",
      mode: t.parser.mode,
      label: t.funcName,
      isStretchy: n,
      isShifty: l,
      base: i
    };
  },
  htmlBuilder: Sn,
  mathmlBuilder: Jl
});
oe({
  type: "accent",
  names: ["\\'", "\\`", "\\^", "\\~", "\\=", "\\u", "\\.", '\\"', "\\c", "\\r", "\\H", "\\v", "\\textcircled"],
  props: {
    numArgs: 1,
    allowedInText: !0,
    allowedInMath: !0,
    // unless in strict mode
    argTypes: ["primitive"]
  },
  handler: (t, e) => {
    var i = e[0], n = t.parser.mode;
    return n === "math" && (t.parser.settings.reportNonstrict("mathVsTextAccents", "LaTeX's accent " + t.funcName + " works only in text mode"), n = "text"), {
      type: "accent",
      mode: n,
      label: t.funcName,
      isStretchy: !1,
      isShifty: !0,
      base: i
    };
  },
  htmlBuilder: Sn,
  mathmlBuilder: Jl
});
oe({
  type: "accentUnder",
  names: ["\\underleftarrow", "\\underrightarrow", "\\underleftrightarrow", "\\undergroup", "\\underlinesegment", "\\utilde"],
  props: {
    numArgs: 1
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0];
    return {
      type: "accentUnder",
      mode: i.mode,
      label: n,
      base: l
    };
  },
  htmlBuilder: (t, e) => {
    var i = ke(t.base, e), n = zt.svgSpan(t, e), l = t.label === "\\utilde" ? 0.12 : 0, r = G.makeVList({
      positionType: "top",
      positionData: i.height,
      children: [{
        type: "elem",
        elem: n,
        wrapperClasses: ["svg-align"]
      }, {
        type: "kern",
        size: l
      }, {
        type: "elem",
        elem: i
      }]
    }, e);
    return G.makeSpan(["mord", "accentunder"], [r], e);
  },
  mathmlBuilder: (t, e) => {
    var i = zt.mathMLnode(t.label), n = new ee.MathNode("munder", [ze(t.base, e), i]);
    return n.setAttribute("accentunder", "true"), n;
  }
});
var xi = (t) => {
  var e = new ee.MathNode("mpadded", t ? [t] : []);
  return e.setAttribute("width", "+0.6em"), e.setAttribute("lspace", "0.3em"), e;
};
oe({
  type: "xArrow",
  names: [
    "\\xleftarrow",
    "\\xrightarrow",
    "\\xLeftarrow",
    "\\xRightarrow",
    "\\xleftrightarrow",
    "\\xLeftrightarrow",
    "\\xhookleftarrow",
    "\\xhookrightarrow",
    "\\xmapsto",
    "\\xrightharpoondown",
    "\\xrightharpoonup",
    "\\xleftharpoondown",
    "\\xleftharpoonup",
    "\\xrightleftharpoons",
    "\\xleftrightharpoons",
    "\\xlongequal",
    "\\xtwoheadrightarrow",
    "\\xtwoheadleftarrow",
    "\\xtofrom",
    // The next 3 functions are here to support the mhchem extension.
    // Direct use of these functions is discouraged and may break someday.
    "\\xrightleftarrows",
    "\\xrightequilibrium",
    "\\xleftequilibrium",
    // The next 3 functions are here only to support the {CD} environment.
    "\\\\cdrightarrow",
    "\\\\cdleftarrow",
    "\\\\cdlongequal"
  ],
  props: {
    numArgs: 1,
    numOptionalArgs: 1
  },
  handler(t, e, i) {
    var {
      parser: n,
      funcName: l
    } = t;
    return {
      type: "xArrow",
      mode: n.mode,
      label: l,
      body: e[0],
      below: i[0]
    };
  },
  // Flow is unable to correctly infer the type of `group`, even though it's
  // unambiguously determined from the passed-in `type` above.
  htmlBuilder(t, e) {
    var i = e.style, n = e.havingStyle(i.sup()), l = G.wrapFragment(ke(t.body, n, e), e), r = t.label.slice(0, 2) === "\\x" ? "x" : "cd";
    l.classes.push(r + "-arrow-pad");
    var u;
    t.below && (n = e.havingStyle(i.sub()), u = G.wrapFragment(ke(t.below, n, e), e), u.classes.push(r + "-arrow-pad"));
    var h = zt.svgSpan(t, e), s = -e.fontMetrics().axisHeight + 0.5 * h.height, m = -e.fontMetrics().axisHeight - 0.5 * h.height - 0.111;
    (l.depth > 0.25 || t.label === "\\xleftequilibrium") && (m -= l.depth);
    var c;
    if (u) {
      var g = -e.fontMetrics().axisHeight + u.height + 0.5 * h.height + 0.111;
      c = G.makeVList({
        positionType: "individualShift",
        children: [{
          type: "elem",
          elem: l,
          shift: m
        }, {
          type: "elem",
          elem: h,
          shift: s
        }, {
          type: "elem",
          elem: u,
          shift: g
        }]
      }, e);
    } else
      c = G.makeVList({
        positionType: "individualShift",
        children: [{
          type: "elem",
          elem: l,
          shift: m
        }, {
          type: "elem",
          elem: h,
          shift: s
        }]
      }, e);
    return c.children[0].children[0].children[1].classes.push("svg-align"), G.makeSpan(["mrel", "x-arrow"], [c], e);
  },
  mathmlBuilder(t, e) {
    var i = zt.mathMLnode(t.label);
    i.setAttribute("minsize", t.label.charAt(0) === "x" ? "1.75em" : "3.0em");
    var n;
    if (t.body) {
      var l = xi(ze(t.body, e));
      if (t.below) {
        var r = xi(ze(t.below, e));
        n = new ee.MathNode("munderover", [i, r, l]);
      } else
        n = new ee.MathNode("mover", [i, l]);
    } else if (t.below) {
      var u = xi(ze(t.below, e));
      n = new ee.MathNode("munder", [i, u]);
    } else
      n = xi(), n = new ee.MathNode("mover", [i, n]);
    return n;
  }
});
var Nr = G.makeSpan;
function Ql(t, e) {
  var i = Ze(t.body, e, !0);
  return Nr([t.mclass], i, e);
}
function e0(t, e) {
  var i, n = it(t.body, e);
  return t.mclass === "minner" ? i = new ee.MathNode("mpadded", n) : t.mclass === "mord" ? t.isCharacterBox ? (i = n[0], i.type = "mi") : i = new ee.MathNode("mi", n) : (t.isCharacterBox ? (i = n[0], i.type = "mo") : i = new ee.MathNode("mo", n), t.mclass === "mbin" ? (i.attributes.lspace = "0.22em", i.attributes.rspace = "0.22em") : t.mclass === "mpunct" ? (i.attributes.lspace = "0em", i.attributes.rspace = "0.17em") : t.mclass === "mopen" || t.mclass === "mclose" ? (i.attributes.lspace = "0em", i.attributes.rspace = "0em") : t.mclass === "minner" && (i.attributes.lspace = "0.0556em", i.attributes.width = "+0.1111em")), i;
}
oe({
  type: "mclass",
  names: ["\\mathord", "\\mathbin", "\\mathrel", "\\mathopen", "\\mathclose", "\\mathpunct", "\\mathinner"],
  props: {
    numArgs: 1,
    primitive: !0
  },
  handler(t, e) {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0];
    return {
      type: "mclass",
      mode: i.mode,
      mclass: "m" + n.slice(5),
      // TODO(kevinb): don't prefix with 'm'
      body: Ve(l),
      isCharacterBox: pe.isCharacterBox(l)
    };
  },
  htmlBuilder: Ql,
  mathmlBuilder: e0
});
var Di = (t) => {
  var e = t.type === "ordgroup" && t.body.length ? t.body[0] : t;
  return e.type === "atom" && (e.family === "bin" || e.family === "rel") ? "m" + e.family : "mord";
};
oe({
  type: "mclass",
  names: ["\\@binrel"],
  props: {
    numArgs: 2
  },
  handler(t, e) {
    var {
      parser: i
    } = t;
    return {
      type: "mclass",
      mode: i.mode,
      mclass: Di(e[0]),
      body: Ve(e[1]),
      isCharacterBox: pe.isCharacterBox(e[1])
    };
  }
});
oe({
  type: "mclass",
  names: ["\\stackrel", "\\overset", "\\underset"],
  props: {
    numArgs: 2
  },
  handler(t, e) {
    var {
      parser: i,
      funcName: n
    } = t, l = e[1], r = e[0], u;
    n !== "\\stackrel" ? u = Di(l) : u = "mrel";
    var h = {
      type: "op",
      mode: l.mode,
      limits: !0,
      alwaysHandleSupSub: !0,
      parentIsSupSub: !1,
      symbol: !1,
      suppressBaseShift: n !== "\\stackrel",
      body: Ve(l)
    }, s = {
      type: "supsub",
      mode: r.mode,
      base: h,
      sup: n === "\\underset" ? null : r,
      sub: n === "\\underset" ? r : null
    };
    return {
      type: "mclass",
      mode: i.mode,
      mclass: u,
      body: [s],
      isCharacterBox: pe.isCharacterBox(s)
    };
  },
  htmlBuilder: Ql,
  mathmlBuilder: e0
});
oe({
  type: "pmb",
  names: ["\\pmb"],
  props: {
    numArgs: 1,
    allowedInText: !0
  },
  handler(t, e) {
    var {
      parser: i
    } = t;
    return {
      type: "pmb",
      mode: i.mode,
      mclass: Di(e[0]),
      body: Ve(e[0])
    };
  },
  htmlBuilder(t, e) {
    var i = Ze(t.body, e, !0), n = G.makeSpan([t.mclass], i, e);
    return n.style.textShadow = "0.02em 0.01em 0.04px", n;
  },
  mathmlBuilder(t, e) {
    var i = it(t.body, e), n = new ee.MathNode("mstyle", i);
    return n.setAttribute("style", "text-shadow: 0.02em 0.01em 0.04px"), n;
  }
});
var Rr = {
  ">": "\\\\cdrightarrow",
  "<": "\\\\cdleftarrow",
  "=": "\\\\cdlongequal",
  A: "\\uparrow",
  V: "\\downarrow",
  "|": "\\Vert",
  ".": "no arrow"
}, ol = () => ({
  type: "styling",
  body: [],
  mode: "math",
  style: "display"
}), ul = (t) => t.type === "textord" && t.text === "@", Dr = (t, e) => (t.type === "mathord" || t.type === "atom") && t.text === e;
function Hr(t, e, i) {
  var n = Rr[t];
  switch (n) {
    case "\\\\cdrightarrow":
    case "\\\\cdleftarrow":
      return i.callFunction(n, [e[0]], [e[1]]);
    case "\\uparrow":
    case "\\downarrow": {
      var l = i.callFunction("\\\\cdleft", [e[0]], []), r = {
        type: "atom",
        text: n,
        mode: "math",
        family: "rel"
      }, u = i.callFunction("\\Big", [r], []), h = i.callFunction("\\\\cdright", [e[1]], []), s = {
        type: "ordgroup",
        mode: "math",
        body: [l, u, h]
      };
      return i.callFunction("\\\\cdparent", [s], []);
    }
    case "\\\\cdlongequal":
      return i.callFunction("\\\\cdlongequal", [], []);
    case "\\Vert": {
      var m = {
        type: "textord",
        text: "\\Vert",
        mode: "math"
      };
      return i.callFunction("\\Big", [m], []);
    }
    default:
      return {
        type: "textord",
        text: " ",
        mode: "math"
      };
  }
}
function Ir(t) {
  var e = [];
  for (t.gullet.beginGroup(), t.gullet.macros.set("\\cr", "\\\\\\relax"), t.gullet.beginGroup(); ; ) {
    e.push(t.parseExpression(!1, "\\\\")), t.gullet.endGroup(), t.gullet.beginGroup();
    var i = t.fetch().text;
    if (i === "&" || i === "\\\\")
      t.consume();
    else if (i === "\\end") {
      e[e.length - 1].length === 0 && e.pop();
      break;
    } else
      throw new ie("Expected \\\\ or \\cr or \\end", t.nextToken);
  }
  for (var n = [], l = [n], r = 0; r < e.length; r++) {
    for (var u = e[r], h = ol(), s = 0; s < u.length; s++)
      if (!ul(u[s]))
        h.body.push(u[s]);
      else {
        n.push(h), s += 1;
        var m = Cn(u[s]).text, c = new Array(2);
        if (c[0] = {
          type: "ordgroup",
          mode: "math",
          body: []
        }, c[1] = {
          type: "ordgroup",
          mode: "math",
          body: []
        }, !("=|.".indexOf(m) > -1))
          if ("<>AV".indexOf(m) > -1)
            for (var g = 0; g < 2; g++) {
              for (var x = !0, T = s + 1; T < u.length; T++) {
                if (Dr(u[T], m)) {
                  x = !1, s = T;
                  break;
                }
                if (ul(u[T]))
                  throw new ie("Missing a " + m + " character to complete a CD arrow.", u[T]);
                c[g].body.push(u[T]);
              }
              if (x)
                throw new ie("Missing a " + m + " character to complete a CD arrow.", u[s]);
            }
          else
            throw new ie('Expected one of "<>AV=|." after @', u[s]);
        var L = Hr(m, c, t), A = {
          type: "styling",
          body: [L],
          mode: "math",
          style: "display"
          // CD is always displaystyle.
        };
        n.push(A), h = ol();
      }
    r % 2 === 0 ? n.push(h) : n.shift(), n = [], l.push(n);
  }
  t.gullet.endGroup(), t.gullet.endGroup();
  var a = new Array(l[0].length).fill({
    type: "align",
    align: "c",
    pregap: 0.25,
    // CD package sets \enskip between columns.
    postgap: 0.25
    // So pre and post each get half an \enskip, i.e. 0.25em.
  });
  return {
    type: "array",
    mode: "math",
    body: l,
    arraystretch: 1,
    addJot: !0,
    rowGaps: [null],
    cols: a,
    colSeparationType: "CD",
    hLinesBeforeRow: new Array(l.length + 1).fill([])
  };
}
oe({
  type: "cdlabel",
  names: ["\\\\cdleft", "\\\\cdright"],
  props: {
    numArgs: 1
  },
  handler(t, e) {
    var {
      parser: i,
      funcName: n
    } = t;
    return {
      type: "cdlabel",
      mode: i.mode,
      side: n.slice(4),
      label: e[0]
    };
  },
  htmlBuilder(t, e) {
    var i = e.havingStyle(e.style.sup()), n = G.wrapFragment(ke(t.label, i, e), e);
    return n.classes.push("cd-label-" + t.side), n.style.bottom = re(0.8 - n.depth), n.height = 0, n.depth = 0, n;
  },
  mathmlBuilder(t, e) {
    var i = new ee.MathNode("mrow", [ze(t.label, e)]);
    return i = new ee.MathNode("mpadded", [i]), i.setAttribute("width", "0"), t.side === "left" && i.setAttribute("lspace", "-1width"), i.setAttribute("voffset", "0.7em"), i = new ee.MathNode("mstyle", [i]), i.setAttribute("displaystyle", "false"), i.setAttribute("scriptlevel", "1"), i;
  }
});
oe({
  type: "cdlabelparent",
  names: ["\\\\cdparent"],
  props: {
    numArgs: 1
  },
  handler(t, e) {
    var {
      parser: i
    } = t;
    return {
      type: "cdlabelparent",
      mode: i.mode,
      fragment: e[0]
    };
  },
  htmlBuilder(t, e) {
    var i = G.wrapFragment(ke(t.fragment, e), e);
    return i.classes.push("cd-vert-arrow"), i;
  },
  mathmlBuilder(t, e) {
    return new ee.MathNode("mrow", [ze(t.fragment, e)]);
  }
});
oe({
  type: "textord",
  names: ["\\@char"],
  props: {
    numArgs: 1,
    allowedInText: !0
  },
  handler(t, e) {
    for (var {
      parser: i
    } = t, n = ye(e[0], "ordgroup"), l = n.body, r = "", u = 0; u < l.length; u++) {
      var h = ye(l[u], "textord");
      r += h.text;
    }
    var s = parseInt(r), m;
    if (isNaN(s))
      throw new ie("\\@char has non-numeric argument " + r);
    if (s < 0 || s >= 1114111)
      throw new ie("\\@char with invalid code point " + r);
    return s <= 65535 ? m = String.fromCharCode(s) : (s -= 65536, m = String.fromCharCode((s >> 10) + 55296, (s & 1023) + 56320)), {
      type: "textord",
      mode: i.mode,
      text: m
    };
  }
});
var t0 = (t, e) => {
  var i = Ze(t.body, e.withColor(t.color), !1);
  return G.makeFragment(i);
}, i0 = (t, e) => {
  var i = it(t.body, e.withColor(t.color)), n = new ee.MathNode("mstyle", i);
  return n.setAttribute("mathcolor", t.color), n;
};
oe({
  type: "color",
  names: ["\\textcolor"],
  props: {
    numArgs: 2,
    allowedInText: !0,
    argTypes: ["color", "original"]
  },
  handler(t, e) {
    var {
      parser: i
    } = t, n = ye(e[0], "color-token").color, l = e[1];
    return {
      type: "color",
      mode: i.mode,
      color: n,
      body: Ve(l)
    };
  },
  htmlBuilder: t0,
  mathmlBuilder: i0
});
oe({
  type: "color",
  names: ["\\color"],
  props: {
    numArgs: 1,
    allowedInText: !0,
    argTypes: ["color"]
  },
  handler(t, e) {
    var {
      parser: i,
      breakOnTokenText: n
    } = t, l = ye(e[0], "color-token").color;
    i.gullet.macros.set("\\current@color", l);
    var r = i.parseExpression(!0, n);
    return {
      type: "color",
      mode: i.mode,
      color: l,
      body: r
    };
  },
  htmlBuilder: t0,
  mathmlBuilder: i0
});
oe({
  type: "cr",
  names: ["\\\\"],
  props: {
    numArgs: 0,
    numOptionalArgs: 0,
    allowedInText: !0
  },
  handler(t, e, i) {
    var {
      parser: n
    } = t, l = n.gullet.future().text === "[" ? n.parseSizeGroup(!0) : null, r = !n.settings.displayMode || !n.settings.useStrictBehavior("newLineInDisplayMode", "In LaTeX, \\\\ or \\newline does nothing in display mode");
    return {
      type: "cr",
      mode: n.mode,
      newLine: r,
      size: l && ye(l, "size").value
    };
  },
  // The following builders are called only at the top level,
  // not within tabular/array environments.
  htmlBuilder(t, e) {
    var i = G.makeSpan(["mspace"], [], e);
    return t.newLine && (i.classes.push("newline"), t.size && (i.style.marginTop = re(Ie(t.size, e)))), i;
  },
  mathmlBuilder(t, e) {
    var i = new ee.MathNode("mspace");
    return t.newLine && (i.setAttribute("linebreak", "newline"), t.size && i.setAttribute("height", re(Ie(t.size, e)))), i;
  }
});
var cn = {
  "\\global": "\\global",
  "\\long": "\\\\globallong",
  "\\\\globallong": "\\\\globallong",
  "\\def": "\\gdef",
  "\\gdef": "\\gdef",
  "\\edef": "\\xdef",
  "\\xdef": "\\xdef",
  "\\let": "\\\\globallet",
  "\\futurelet": "\\\\globalfuture"
}, n0 = (t) => {
  var e = t.text;
  if (/^(?:[\\{}$&#^_]|EOF)$/.test(e))
    throw new ie("Expected a control sequence", t);
  return e;
}, Or = (t) => {
  var e = t.gullet.popToken();
  return e.text === "=" && (e = t.gullet.popToken(), e.text === " " && (e = t.gullet.popToken())), e;
}, l0 = (t, e, i, n) => {
  var l = t.gullet.macros.get(i.text);
  l == null && (i.noexpand = !0, l = {
    tokens: [i],
    numArgs: 0,
    // reproduce the same behavior in expansion
    unexpandable: !t.gullet.isExpandable(i.text)
  }), t.gullet.macros.set(e, l, n);
};
oe({
  type: "internal",
  names: [
    "\\global",
    "\\long",
    "\\\\globallong"
    // can’t be entered directly
  ],
  props: {
    numArgs: 0,
    allowedInText: !0
  },
  handler(t) {
    var {
      parser: e,
      funcName: i
    } = t;
    e.consumeSpaces();
    var n = e.fetch();
    if (cn[n.text])
      return (i === "\\global" || i === "\\\\globallong") && (n.text = cn[n.text]), ye(e.parseFunction(), "internal");
    throw new ie("Invalid token after macro prefix", n);
  }
});
oe({
  type: "internal",
  names: ["\\def", "\\gdef", "\\edef", "\\xdef"],
  props: {
    numArgs: 0,
    allowedInText: !0,
    primitive: !0
  },
  handler(t) {
    var {
      parser: e,
      funcName: i
    } = t, n = e.gullet.popToken(), l = n.text;
    if (/^(?:[\\{}$&#^_]|EOF)$/.test(l))
      throw new ie("Expected a control sequence", n);
    for (var r = 0, u, h = [[]]; e.gullet.future().text !== "{"; )
      if (n = e.gullet.popToken(), n.text === "#") {
        if (e.gullet.future().text === "{") {
          u = e.gullet.future(), h[r].push("{");
          break;
        }
        if (n = e.gullet.popToken(), !/^[1-9]$/.test(n.text))
          throw new ie('Invalid argument number "' + n.text + '"');
        if (parseInt(n.text) !== r + 1)
          throw new ie('Argument number "' + n.text + '" out of order');
        r++, h.push([]);
      } else {
        if (n.text === "EOF")
          throw new ie("Expected a macro definition");
        h[r].push(n.text);
      }
    var {
      tokens: s
    } = e.gullet.consumeArg();
    return u && s.unshift(u), (i === "\\edef" || i === "\\xdef") && (s = e.gullet.expandTokens(s), s.reverse()), e.gullet.macros.set(l, {
      tokens: s,
      numArgs: r,
      delimiters: h
    }, i === cn[i]), {
      type: "internal",
      mode: e.mode
    };
  }
});
oe({
  type: "internal",
  names: [
    "\\let",
    "\\\\globallet"
    // can’t be entered directly
  ],
  props: {
    numArgs: 0,
    allowedInText: !0,
    primitive: !0
  },
  handler(t) {
    var {
      parser: e,
      funcName: i
    } = t, n = n0(e.gullet.popToken());
    e.gullet.consumeSpaces();
    var l = Or(e);
    return l0(e, n, l, i === "\\\\globallet"), {
      type: "internal",
      mode: e.mode
    };
  }
});
oe({
  type: "internal",
  names: [
    "\\futurelet",
    "\\\\globalfuture"
    // can’t be entered directly
  ],
  props: {
    numArgs: 0,
    allowedInText: !0,
    primitive: !0
  },
  handler(t) {
    var {
      parser: e,
      funcName: i
    } = t, n = n0(e.gullet.popToken()), l = e.gullet.popToken(), r = e.gullet.popToken();
    return l0(e, n, r, i === "\\\\globalfuture"), e.gullet.pushToken(r), e.gullet.pushToken(l), {
      type: "internal",
      mode: e.mode
    };
  }
});
var li = function(e, i, n) {
  var l = Ne.math[e] && Ne.math[e].replace, r = bn(l || e, i, n);
  if (!r)
    throw new Error("Unsupported symbol " + e + " and font size " + i + ".");
  return r;
}, kn = function(e, i, n, l) {
  var r = n.havingBaseStyle(i), u = G.makeSpan(l.concat(r.sizingClasses(n)), [e], n), h = r.sizeMultiplier / n.sizeMultiplier;
  return u.height *= h, u.depth *= h, u.maxFontSize = r.sizeMultiplier, u;
}, s0 = function(e, i, n) {
  var l = i.havingBaseStyle(n), r = (1 - i.sizeMultiplier / l.sizeMultiplier) * i.fontMetrics().axisHeight;
  e.classes.push("delimcenter"), e.style.top = re(r), e.height -= r, e.depth += r;
}, Fr = function(e, i, n, l, r, u) {
  var h = G.makeSymbol(e, "Main-Regular", r, l), s = kn(h, i, l, u);
  return n && s0(s, l, i), s;
}, Pr = function(e, i, n, l) {
  return G.makeSymbol(e, "Size" + i + "-Regular", n, l);
}, r0 = function(e, i, n, l, r, u) {
  var h = Pr(e, i, r, l), s = kn(G.makeSpan(["delimsizing", "size" + i], [h], l), de.TEXT, l, u);
  return n && s0(s, l, de.TEXT), s;
}, Yi = function(e, i, n) {
  var l;
  i === "Size1-Regular" ? l = "delim-size1" : l = "delim-size4";
  var r = G.makeSpan(["delimsizinginner", l], [G.makeSpan([], [G.makeSymbol(e, i, n)])]);
  return {
    type: "elem",
    elem: r
  };
}, ji = function(e, i, n) {
  var l = gt["Size4-Regular"][e.charCodeAt(0)] ? gt["Size4-Regular"][e.charCodeAt(0)][4] : gt["Size1-Regular"][e.charCodeAt(0)][4], r = new Ht("inner", $s(e, Math.round(1e3 * i))), u = new Et([r], {
    width: re(l),
    height: re(i),
    // Override CSS rule `.katex svg { width: 100% }`
    style: "width:" + re(l),
    viewBox: "0 0 " + 1e3 * l + " " + Math.round(1e3 * i),
    preserveAspectRatio: "xMinYMin"
  }), h = G.makeSvgSpan([], [u], n);
  return h.height = i, h.style.height = re(i), h.style.width = re(l), {
    type: "elem",
    elem: h
  };
}, hn = 8e-3, Ci = {
  type: "kern",
  size: -1 * hn
}, Vr = ["|", "\\lvert", "\\rvert", "\\vert"], Ur = ["\\|", "\\lVert", "\\rVert", "\\Vert"], a0 = function(e, i, n, l, r, u) {
  var h, s, m, c, g = "", x = 0;
  h = m = c = e, s = null;
  var T = "Size1-Regular";
  e === "\\uparrow" ? m = c = "⏐" : e === "\\Uparrow" ? m = c = "‖" : e === "\\downarrow" ? h = m = "⏐" : e === "\\Downarrow" ? h = m = "‖" : e === "\\updownarrow" ? (h = "\\uparrow", m = "⏐", c = "\\downarrow") : e === "\\Updownarrow" ? (h = "\\Uparrow", m = "‖", c = "\\Downarrow") : pe.contains(Vr, e) ? (m = "∣", g = "vert", x = 333) : pe.contains(Ur, e) ? (m = "∥", g = "doublevert", x = 556) : e === "[" || e === "\\lbrack" ? (h = "⎡", m = "⎢", c = "⎣", T = "Size4-Regular", g = "lbrack", x = 667) : e === "]" || e === "\\rbrack" ? (h = "⎤", m = "⎥", c = "⎦", T = "Size4-Regular", g = "rbrack", x = 667) : e === "\\lfloor" || e === "⌊" ? (m = h = "⎢", c = "⎣", T = "Size4-Regular", g = "lfloor", x = 667) : e === "\\lceil" || e === "⌈" ? (h = "⎡", m = c = "⎢", T = "Size4-Regular", g = "lceil", x = 667) : e === "\\rfloor" || e === "⌋" ? (m = h = "⎥", c = "⎦", T = "Size4-Regular", g = "rfloor", x = 667) : e === "\\rceil" || e === "⌉" ? (h = "⎤", m = c = "⎥", T = "Size4-Regular", g = "rceil", x = 667) : e === "(" || e === "\\lparen" ? (h = "⎛", m = "⎜", c = "⎝", T = "Size4-Regular", g = "lparen", x = 875) : e === ")" || e === "\\rparen" ? (h = "⎞", m = "⎟", c = "⎠", T = "Size4-Regular", g = "rparen", x = 875) : e === "\\{" || e === "\\lbrace" ? (h = "⎧", s = "⎨", c = "⎩", m = "⎪", T = "Size4-Regular") : e === "\\}" || e === "\\rbrace" ? (h = "⎫", s = "⎬", c = "⎭", m = "⎪", T = "Size4-Regular") : e === "\\lgroup" || e === "⟮" ? (h = "⎧", c = "⎩", m = "⎪", T = "Size4-Regular") : e === "\\rgroup" || e === "⟯" ? (h = "⎫", c = "⎭", m = "⎪", T = "Size4-Regular") : e === "\\lmoustache" || e === "⎰" ? (h = "⎧", c = "⎭", m = "⎪", T = "Size4-Regular") : (e === "\\rmoustache" || e === "⎱") && (h = "⎫", c = "⎩", m = "⎪", T = "Size4-Regular");
  var L = li(h, T, r), A = L.height + L.depth, a = li(m, T, r), o = a.height + a.depth, d = li(c, T, r), p = d.height + d.depth, v = 0, _ = 1;
  if (s !== null) {
    var b = li(s, T, r);
    v = b.height + b.depth, _ = 2;
  }
  var S = A + p + v, k = Math.max(0, Math.ceil((i - S) / (_ * o))), w = S + k * _ * o, z = l.fontMetrics().axisHeight;
  n && (z *= l.sizeMultiplier);
  var M = w / 2 - z, N = [];
  if (g.length > 0) {
    var O = w - A - p, I = Math.round(w * 1e3), $ = Ys(g, Math.round(O * 1e3)), Y = new Ht(g, $), j = (x / 1e3).toFixed(3) + "em", R = (I / 1e3).toFixed(3) + "em", Z = new Et([Y], {
      width: j,
      height: R,
      viewBox: "0 0 " + x + " " + I
    }), W = G.makeSvgSpan([], [Z], l);
    W.height = I / 1e3, W.style.width = j, W.style.height = R, N.push({
      type: "elem",
      elem: W
    });
  } else {
    if (N.push(Yi(c, T, r)), N.push(Ci), s === null) {
      var H = w - A - p + 2 * hn;
      N.push(ji(m, H, l));
    } else {
      var q = (w - A - p - v) / 2 + 2 * hn;
      N.push(ji(m, q, l)), N.push(Ci), N.push(Yi(s, T, r)), N.push(Ci), N.push(ji(m, q, l));
    }
    N.push(Ci), N.push(Yi(h, T, r));
  }
  var P = l.havingBaseStyle(de.TEXT), V = G.makeVList({
    positionType: "bottom",
    positionData: M,
    children: N
  }, P);
  return kn(G.makeSpan(["delimsizing", "mult"], [V], P), de.TEXT, l, u);
}, Gi = 80, Xi = 0.08, Ki = function(e, i, n, l, r) {
  var u = Zs(e, l, n), h = new Ht(e, u), s = new Et([h], {
    // Note: 1000:1 ratio of viewBox to document em width.
    width: "400em",
    height: re(i),
    viewBox: "0 0 400000 " + n,
    preserveAspectRatio: "xMinYMin slice"
  });
  return G.makeSvgSpan(["hide-tail"], [s], r);
}, qr = function(e, i) {
  var n = i.havingBaseSizing(), l = h0("\\surd", e * n.sizeMultiplier, c0, n), r = n.sizeMultiplier, u = Math.max(0, i.minRuleThickness - i.fontMetrics().sqrtRuleThickness), h, s = 0, m = 0, c = 0, g;
  return l.type === "small" ? (c = 1e3 + 1e3 * u + Gi, e < 1 ? r = 1 : e < 1.4 && (r = 0.7), s = (1 + u + Xi) / r, m = (1 + u) / r, h = Ki("sqrtMain", s, c, u, i), h.style.minWidth = "0.853em", g = 0.833 / r) : l.type === "large" ? (c = (1e3 + Gi) * ri[l.size], m = (ri[l.size] + u) / r, s = (ri[l.size] + u + Xi) / r, h = Ki("sqrtSize" + l.size, s, c, u, i), h.style.minWidth = "1.02em", g = 1 / r) : (s = e + u + Xi, m = e + u, c = Math.floor(1e3 * e + u) + Gi, h = Ki("sqrtTall", s, c, u, i), h.style.minWidth = "0.742em", g = 1.056), h.height = m, h.style.height = re(s), {
    span: h,
    advanceWidth: g,
    // Calculate the actual line width.
    // This actually should depend on the chosen font -- e.g. \boldmath
    // should use the thicker surd symbols from e.g. KaTeX_Main-Bold, and
    // have thicker rules.
    ruleWidth: (i.fontMetrics().sqrtRuleThickness + u) * r
  };
}, o0 = ["(", "\\lparen", ")", "\\rparen", "[", "\\lbrack", "]", "\\rbrack", "\\{", "\\lbrace", "\\}", "\\rbrace", "\\lfloor", "\\rfloor", "⌊", "⌋", "\\lceil", "\\rceil", "⌈", "⌉", "\\surd"], Wr = ["\\uparrow", "\\downarrow", "\\updownarrow", "\\Uparrow", "\\Downarrow", "\\Updownarrow", "|", "\\|", "\\vert", "\\Vert", "\\lvert", "\\rvert", "\\lVert", "\\rVert", "\\lgroup", "\\rgroup", "⟮", "⟯", "\\lmoustache", "\\rmoustache", "⎰", "⎱"], u0 = ["<", ">", "\\langle", "\\rangle", "/", "\\backslash", "\\lt", "\\gt"], ri = [0, 1.2, 1.8, 2.4, 3], Zr = function(e, i, n, l, r) {
  if (e === "<" || e === "\\lt" || e === "⟨" ? e = "\\langle" : (e === ">" || e === "\\gt" || e === "⟩") && (e = "\\rangle"), pe.contains(o0, e) || pe.contains(u0, e))
    return r0(e, i, !1, n, l, r);
  if (pe.contains(Wr, e))
    return a0(e, ri[i], !1, n, l, r);
  throw new ie("Illegal delimiter: '" + e + "'");
}, $r = [{
  type: "small",
  style: de.SCRIPTSCRIPT
}, {
  type: "small",
  style: de.SCRIPT
}, {
  type: "small",
  style: de.TEXT
}, {
  type: "large",
  size: 1
}, {
  type: "large",
  size: 2
}, {
  type: "large",
  size: 3
}, {
  type: "large",
  size: 4
}], Yr = [{
  type: "small",
  style: de.SCRIPTSCRIPT
}, {
  type: "small",
  style: de.SCRIPT
}, {
  type: "small",
  style: de.TEXT
}, {
  type: "stack"
}], c0 = [{
  type: "small",
  style: de.SCRIPTSCRIPT
}, {
  type: "small",
  style: de.SCRIPT
}, {
  type: "small",
  style: de.TEXT
}, {
  type: "large",
  size: 1
}, {
  type: "large",
  size: 2
}, {
  type: "large",
  size: 3
}, {
  type: "large",
  size: 4
}, {
  type: "stack"
}], jr = function(e) {
  if (e.type === "small")
    return "Main-Regular";
  if (e.type === "large")
    return "Size" + e.size + "-Regular";
  if (e.type === "stack")
    return "Size4-Regular";
  throw new Error("Add support for delim type '" + e.type + "' here.");
}, h0 = function(e, i, n, l) {
  for (var r = Math.min(2, 3 - l.style.size), u = r; u < n.length && n[u].type !== "stack"; u++) {
    var h = li(e, jr(n[u]), "math"), s = h.height + h.depth;
    if (n[u].type === "small") {
      var m = l.havingBaseStyle(n[u].style);
      s *= m.sizeMultiplier;
    }
    if (s > i)
      return n[u];
  }
  return n[n.length - 1];
}, d0 = function(e, i, n, l, r, u) {
  e === "<" || e === "\\lt" || e === "⟨" ? e = "\\langle" : (e === ">" || e === "\\gt" || e === "⟩") && (e = "\\rangle");
  var h;
  pe.contains(u0, e) ? h = $r : pe.contains(o0, e) ? h = c0 : h = Yr;
  var s = h0(e, i, h, l);
  return s.type === "small" ? Fr(e, s.style, n, l, r, u) : s.type === "large" ? r0(e, s.size, n, l, r, u) : a0(e, i, n, l, r, u);
}, Gr = function(e, i, n, l, r, u) {
  var h = l.fontMetrics().axisHeight * l.sizeMultiplier, s = 901, m = 5 / l.fontMetrics().ptPerEm, c = Math.max(i - h, n + h), g = Math.max(
    // In real TeX, calculations are done using integral values which are
    // 65536 per pt, or 655360 per em. So, the division here truncates in
    // TeX but doesn't here, producing different results. If we wanted to
    // exactly match TeX's calculation, we could do
    //   Math.floor(655360 * maxDistFromAxis / 500) *
    //    delimiterFactor / 655360
    // (To see the difference, compare
    //    x^{x^{\left(\rule{0.1em}{0.68em}\right)}}
    // in TeX and KaTeX)
    c / 500 * s,
    2 * c - m
  );
  return d0(e, g, !0, l, r, u);
}, Tt = {
  sqrtImage: qr,
  sizedDelim: Zr,
  sizeToMaxHeight: ri,
  customSizedDelim: d0,
  leftRightDelim: Gr
}, cl = {
  "\\bigl": {
    mclass: "mopen",
    size: 1
  },
  "\\Bigl": {
    mclass: "mopen",
    size: 2
  },
  "\\biggl": {
    mclass: "mopen",
    size: 3
  },
  "\\Biggl": {
    mclass: "mopen",
    size: 4
  },
  "\\bigr": {
    mclass: "mclose",
    size: 1
  },
  "\\Bigr": {
    mclass: "mclose",
    size: 2
  },
  "\\biggr": {
    mclass: "mclose",
    size: 3
  },
  "\\Biggr": {
    mclass: "mclose",
    size: 4
  },
  "\\bigm": {
    mclass: "mrel",
    size: 1
  },
  "\\Bigm": {
    mclass: "mrel",
    size: 2
  },
  "\\biggm": {
    mclass: "mrel",
    size: 3
  },
  "\\Biggm": {
    mclass: "mrel",
    size: 4
  },
  "\\big": {
    mclass: "mord",
    size: 1
  },
  "\\Big": {
    mclass: "mord",
    size: 2
  },
  "\\bigg": {
    mclass: "mord",
    size: 3
  },
  "\\Bigg": {
    mclass: "mord",
    size: 4
  }
}, Xr = ["(", "\\lparen", ")", "\\rparen", "[", "\\lbrack", "]", "\\rbrack", "\\{", "\\lbrace", "\\}", "\\rbrace", "\\lfloor", "\\rfloor", "⌊", "⌋", "\\lceil", "\\rceil", "⌈", "⌉", "<", ">", "\\langle", "⟨", "\\rangle", "⟩", "\\lt", "\\gt", "\\lvert", "\\rvert", "\\lVert", "\\rVert", "\\lgroup", "\\rgroup", "⟮", "⟯", "\\lmoustache", "\\rmoustache", "⎰", "⎱", "/", "\\backslash", "|", "\\vert", "\\|", "\\Vert", "\\uparrow", "\\Uparrow", "\\downarrow", "\\Downarrow", "\\updownarrow", "\\Updownarrow", "."];
function Hi(t, e) {
  var i = Ri(t);
  if (i && pe.contains(Xr, i.text))
    return i;
  throw i ? new ie("Invalid delimiter '" + i.text + "' after '" + e.funcName + "'", t) : new ie("Invalid delimiter type '" + t.type + "'", t);
}
oe({
  type: "delimsizing",
  names: ["\\bigl", "\\Bigl", "\\biggl", "\\Biggl", "\\bigr", "\\Bigr", "\\biggr", "\\Biggr", "\\bigm", "\\Bigm", "\\biggm", "\\Biggm", "\\big", "\\Big", "\\bigg", "\\Bigg"],
  props: {
    numArgs: 1,
    argTypes: ["primitive"]
  },
  handler: (t, e) => {
    var i = Hi(e[0], t);
    return {
      type: "delimsizing",
      mode: t.parser.mode,
      size: cl[t.funcName].size,
      mclass: cl[t.funcName].mclass,
      delim: i.text
    };
  },
  htmlBuilder: (t, e) => t.delim === "." ? G.makeSpan([t.mclass]) : Tt.sizedDelim(t.delim, t.size, e, t.mode, [t.mclass]),
  mathmlBuilder: (t) => {
    var e = [];
    t.delim !== "." && e.push(ht(t.delim, t.mode));
    var i = new ee.MathNode("mo", e);
    t.mclass === "mopen" || t.mclass === "mclose" ? i.setAttribute("fence", "true") : i.setAttribute("fence", "false"), i.setAttribute("stretchy", "true");
    var n = re(Tt.sizeToMaxHeight[t.size]);
    return i.setAttribute("minsize", n), i.setAttribute("maxsize", n), i;
  }
});
function hl(t) {
  if (!t.body)
    throw new Error("Bug: The leftright ParseNode wasn't fully parsed.");
}
oe({
  type: "leftright-right",
  names: ["\\right"],
  props: {
    numArgs: 1,
    primitive: !0
  },
  handler: (t, e) => {
    var i = t.parser.gullet.macros.get("\\current@color");
    if (i && typeof i != "string")
      throw new ie("\\current@color set to non-string in \\right");
    return {
      type: "leftright-right",
      mode: t.parser.mode,
      delim: Hi(e[0], t).text,
      color: i
      // undefined if not set via \color
    };
  }
});
oe({
  type: "leftright",
  names: ["\\left"],
  props: {
    numArgs: 1,
    primitive: !0
  },
  handler: (t, e) => {
    var i = Hi(e[0], t), n = t.parser;
    ++n.leftrightDepth;
    var l = n.parseExpression(!1);
    --n.leftrightDepth, n.expect("\\right", !1);
    var r = ye(n.parseFunction(), "leftright-right");
    return {
      type: "leftright",
      mode: n.mode,
      body: l,
      left: i.text,
      right: r.delim,
      rightColor: r.color
    };
  },
  htmlBuilder: (t, e) => {
    hl(t);
    for (var i = Ze(t.body, e, !0, ["mopen", "mclose"]), n = 0, l = 0, r = !1, u = 0; u < i.length; u++)
      i[u].isMiddle ? r = !0 : (n = Math.max(i[u].height, n), l = Math.max(i[u].depth, l));
    n *= e.sizeMultiplier, l *= e.sizeMultiplier;
    var h;
    if (t.left === "." ? h = ui(e, ["mopen"]) : h = Tt.leftRightDelim(t.left, n, l, e, t.mode, ["mopen"]), i.unshift(h), r)
      for (var s = 1; s < i.length; s++) {
        var m = i[s], c = m.isMiddle;
        c && (i[s] = Tt.leftRightDelim(c.delim, n, l, c.options, t.mode, []));
      }
    var g;
    if (t.right === ".")
      g = ui(e, ["mclose"]);
    else {
      var x = t.rightColor ? e.withColor(t.rightColor) : e;
      g = Tt.leftRightDelim(t.right, n, l, x, t.mode, ["mclose"]);
    }
    return i.push(g), G.makeSpan(["minner"], i, e);
  },
  mathmlBuilder: (t, e) => {
    hl(t);
    var i = it(t.body, e);
    if (t.left !== ".") {
      var n = new ee.MathNode("mo", [ht(t.left, t.mode)]);
      n.setAttribute("fence", "true"), i.unshift(n);
    }
    if (t.right !== ".") {
      var l = new ee.MathNode("mo", [ht(t.right, t.mode)]);
      l.setAttribute("fence", "true"), t.rightColor && l.setAttribute("mathcolor", t.rightColor), i.push(l);
    }
    return wn(i);
  }
});
oe({
  type: "middle",
  names: ["\\middle"],
  props: {
    numArgs: 1,
    primitive: !0
  },
  handler: (t, e) => {
    var i = Hi(e[0], t);
    if (!t.parser.leftrightDepth)
      throw new ie("\\middle without preceding \\left", i);
    return {
      type: "middle",
      mode: t.parser.mode,
      delim: i.text
    };
  },
  htmlBuilder: (t, e) => {
    var i;
    if (t.delim === ".")
      i = ui(e, []);
    else {
      i = Tt.sizedDelim(t.delim, 1, e, t.mode, []);
      var n = {
        delim: t.delim,
        options: e
      };
      i.isMiddle = n;
    }
    return i;
  },
  mathmlBuilder: (t, e) => {
    var i = t.delim === "\\vert" || t.delim === "|" ? ht("|", "text") : ht(t.delim, t.mode), n = new ee.MathNode("mo", [i]);
    return n.setAttribute("fence", "true"), n.setAttribute("lspace", "0.05em"), n.setAttribute("rspace", "0.05em"), n;
  }
});
var Tn = (t, e) => {
  var i = G.wrapFragment(ke(t.body, e), e), n = t.label.slice(1), l = e.sizeMultiplier, r, u = 0, h = pe.isCharacterBox(t.body);
  if (n === "sout")
    r = G.makeSpan(["stretchy", "sout"]), r.height = e.fontMetrics().defaultRuleThickness / l, u = -0.5 * e.fontMetrics().xHeight;
  else if (n === "phase") {
    var s = Ie({
      number: 0.6,
      unit: "pt"
    }, e), m = Ie({
      number: 0.35,
      unit: "ex"
    }, e), c = e.havingBaseSizing();
    l = l / c.sizeMultiplier;
    var g = i.height + i.depth + s + m;
    i.style.paddingLeft = re(g / 2 + s);
    var x = Math.floor(1e3 * g * l), T = qs(x), L = new Et([new Ht("phase", T)], {
      width: "400em",
      height: re(x / 1e3),
      viewBox: "0 0 400000 " + x,
      preserveAspectRatio: "xMinYMin slice"
    });
    r = G.makeSvgSpan(["hide-tail"], [L], e), r.style.height = re(g), u = i.depth + s + m;
  } else {
    /cancel/.test(n) ? h || i.classes.push("cancel-pad") : n === "angl" ? i.classes.push("anglpad") : i.classes.push("boxpad");
    var A = 0, a = 0, o = 0;
    /box/.test(n) ? (o = Math.max(
      e.fontMetrics().fboxrule,
      // default
      e.minRuleThickness
      // User override.
    ), A = e.fontMetrics().fboxsep + (n === "colorbox" ? 0 : o), a = A) : n === "angl" ? (o = Math.max(e.fontMetrics().defaultRuleThickness, e.minRuleThickness), A = 4 * o, a = Math.max(0, 0.25 - i.depth)) : (A = h ? 0.2 : 0, a = A), r = zt.encloseSpan(i, n, A, a, e), /fbox|boxed|fcolorbox/.test(n) ? (r.style.borderStyle = "solid", r.style.borderWidth = re(o)) : n === "angl" && o !== 0.049 && (r.style.borderTopWidth = re(o), r.style.borderRightWidth = re(o)), u = i.depth + a, t.backgroundColor && (r.style.backgroundColor = t.backgroundColor, t.borderColor && (r.style.borderColor = t.borderColor));
  }
  var d;
  if (t.backgroundColor)
    d = G.makeVList({
      positionType: "individualShift",
      children: [
        // Put the color background behind inner;
        {
          type: "elem",
          elem: r,
          shift: u
        },
        {
          type: "elem",
          elem: i,
          shift: 0
        }
      ]
    }, e);
  else {
    var p = /cancel|phase/.test(n) ? ["svg-align"] : [];
    d = G.makeVList({
      positionType: "individualShift",
      children: [
        // Write the \cancel stroke on top of inner.
        {
          type: "elem",
          elem: i,
          shift: 0
        },
        {
          type: "elem",
          elem: r,
          shift: u,
          wrapperClasses: p
        }
      ]
    }, e);
  }
  return /cancel/.test(n) && (d.height = i.height, d.depth = i.depth), /cancel/.test(n) && !h ? G.makeSpan(["mord", "cancel-lap"], [d], e) : G.makeSpan(["mord"], [d], e);
}, En = (t, e) => {
  var i = 0, n = new ee.MathNode(t.label.indexOf("colorbox") > -1 ? "mpadded" : "menclose", [ze(t.body, e)]);
  switch (t.label) {
    case "\\cancel":
      n.setAttribute("notation", "updiagonalstrike");
      break;
    case "\\bcancel":
      n.setAttribute("notation", "downdiagonalstrike");
      break;
    case "\\phase":
      n.setAttribute("notation", "phasorangle");
      break;
    case "\\sout":
      n.setAttribute("notation", "horizontalstrike");
      break;
    case "\\fbox":
      n.setAttribute("notation", "box");
      break;
    case "\\angl":
      n.setAttribute("notation", "actuarial");
      break;
    case "\\fcolorbox":
    case "\\colorbox":
      if (i = e.fontMetrics().fboxsep * e.fontMetrics().ptPerEm, n.setAttribute("width", "+" + 2 * i + "pt"), n.setAttribute("height", "+" + 2 * i + "pt"), n.setAttribute("lspace", i + "pt"), n.setAttribute("voffset", i + "pt"), t.label === "\\fcolorbox") {
        var l = Math.max(
          e.fontMetrics().fboxrule,
          // default
          e.minRuleThickness
          // user override
        );
        n.setAttribute("style", "border: " + l + "em solid " + String(t.borderColor));
      }
      break;
    case "\\xcancel":
      n.setAttribute("notation", "updiagonalstrike downdiagonalstrike");
      break;
  }
  return t.backgroundColor && n.setAttribute("mathbackground", t.backgroundColor), n;
};
oe({
  type: "enclose",
  names: ["\\colorbox"],
  props: {
    numArgs: 2,
    allowedInText: !0,
    argTypes: ["color", "text"]
  },
  handler(t, e, i) {
    var {
      parser: n,
      funcName: l
    } = t, r = ye(e[0], "color-token").color, u = e[1];
    return {
      type: "enclose",
      mode: n.mode,
      label: l,
      backgroundColor: r,
      body: u
    };
  },
  htmlBuilder: Tn,
  mathmlBuilder: En
});
oe({
  type: "enclose",
  names: ["\\fcolorbox"],
  props: {
    numArgs: 3,
    allowedInText: !0,
    argTypes: ["color", "color", "text"]
  },
  handler(t, e, i) {
    var {
      parser: n,
      funcName: l
    } = t, r = ye(e[0], "color-token").color, u = ye(e[1], "color-token").color, h = e[2];
    return {
      type: "enclose",
      mode: n.mode,
      label: l,
      backgroundColor: u,
      borderColor: r,
      body: h
    };
  },
  htmlBuilder: Tn,
  mathmlBuilder: En
});
oe({
  type: "enclose",
  names: ["\\fbox"],
  props: {
    numArgs: 1,
    argTypes: ["hbox"],
    allowedInText: !0
  },
  handler(t, e) {
    var {
      parser: i
    } = t;
    return {
      type: "enclose",
      mode: i.mode,
      label: "\\fbox",
      body: e[0]
    };
  }
});
oe({
  type: "enclose",
  names: ["\\cancel", "\\bcancel", "\\xcancel", "\\sout", "\\phase"],
  props: {
    numArgs: 1
  },
  handler(t, e) {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0];
    return {
      type: "enclose",
      mode: i.mode,
      label: n,
      body: l
    };
  },
  htmlBuilder: Tn,
  mathmlBuilder: En
});
oe({
  type: "enclose",
  names: ["\\angl"],
  props: {
    numArgs: 1,
    argTypes: ["hbox"],
    allowedInText: !1
  },
  handler(t, e) {
    var {
      parser: i
    } = t;
    return {
      type: "enclose",
      mode: i.mode,
      label: "\\angl",
      body: e[0]
    };
  }
});
var f0 = {};
function bt(t) {
  for (var {
    type: e,
    names: i,
    props: n,
    handler: l,
    htmlBuilder: r,
    mathmlBuilder: u
  } = t, h = {
    type: e,
    numArgs: n.numArgs || 0,
    allowedInText: !1,
    numOptionalArgs: 0,
    handler: l
  }, s = 0; s < i.length; ++s)
    f0[i[s]] = h;
  r && (zi[e] = r), u && (Mi[e] = u);
}
var m0 = {};
function E(t, e) {
  m0[t] = e;
}
function dl(t) {
  var e = [];
  t.consumeSpaces();
  var i = t.fetch().text;
  for (i === "\\relax" && (t.consume(), t.consumeSpaces(), i = t.fetch().text); i === "\\hline" || i === "\\hdashline"; )
    t.consume(), e.push(i === "\\hdashline"), t.consumeSpaces(), i = t.fetch().text;
  return e;
}
var Ii = (t) => {
  var e = t.parser.settings;
  if (!e.displayMode)
    throw new ie("{" + t.envName + "} can be used only in display mode.");
};
function Ln(t) {
  if (t.indexOf("ed") === -1)
    return t.indexOf("*") === -1;
}
function Ot(t, e, i) {
  var {
    hskipBeforeAndAfter: n,
    addJot: l,
    cols: r,
    arraystretch: u,
    colSeparationType: h,
    autoTag: s,
    singleRow: m,
    emptySingleRow: c,
    maxNumCols: g,
    leqno: x
  } = e;
  if (t.gullet.beginGroup(), m || t.gullet.macros.set("\\cr", "\\\\\\relax"), !u) {
    var T = t.gullet.expandMacroAsText("\\arraystretch");
    if (T == null)
      u = 1;
    else if (u = parseFloat(T), !u || u < 0)
      throw new ie("Invalid \\arraystretch: " + T);
  }
  t.gullet.beginGroup();
  var L = [], A = [L], a = [], o = [], d = s != null ? [] : void 0;
  function p() {
    s && t.gullet.macros.set("\\@eqnsw", "1", !0);
  }
  function v() {
    d && (t.gullet.macros.get("\\df@tag") ? (d.push(t.subparse([new vt("\\df@tag")])), t.gullet.macros.set("\\df@tag", void 0, !0)) : d.push(!!s && t.gullet.macros.get("\\@eqnsw") === "1"));
  }
  for (p(), o.push(dl(t)); ; ) {
    var _ = t.parseExpression(!1, m ? "\\end" : "\\\\");
    t.gullet.endGroup(), t.gullet.beginGroup(), _ = {
      type: "ordgroup",
      mode: t.mode,
      body: _
    }, i && (_ = {
      type: "styling",
      mode: t.mode,
      style: i,
      body: [_]
    }), L.push(_);
    var b = t.fetch().text;
    if (b === "&") {
      if (g && L.length === g) {
        if (m || h)
          throw new ie("Too many tab characters: &", t.nextToken);
        t.settings.reportNonstrict("textEnv", "Too few columns specified in the {array} column argument.");
      }
      t.consume();
    } else if (b === "\\end") {
      v(), L.length === 1 && _.type === "styling" && _.body[0].body.length === 0 && (A.length > 1 || !c) && A.pop(), o.length < A.length + 1 && o.push([]);
      break;
    } else if (b === "\\\\") {
      t.consume();
      var S = void 0;
      t.gullet.future().text !== " " && (S = t.parseSizeGroup(!0)), a.push(S ? S.value : null), v(), o.push(dl(t)), L = [], A.push(L), p();
    } else
      throw new ie("Expected & or \\\\ or \\cr or \\end", t.nextToken);
  }
  return t.gullet.endGroup(), t.gullet.endGroup(), {
    type: "array",
    mode: t.mode,
    addJot: l,
    arraystretch: u,
    body: A,
    cols: r,
    rowGaps: a,
    hskipBeforeAndAfter: n,
    hLinesBeforeRow: o,
    colSeparationType: h,
    tags: d,
    leqno: x
  };
}
function zn(t) {
  return t.slice(0, 1) === "d" ? "display" : "text";
}
var yt = function(e, i) {
  var n, l, r = e.body.length, u = e.hLinesBeforeRow, h = 0, s = new Array(r), m = [], c = Math.max(
    // From LaTeX \showthe\arrayrulewidth. Equals 0.04 em.
    i.fontMetrics().arrayRuleWidth,
    i.minRuleThickness
    // User override.
  ), g = 1 / i.fontMetrics().ptPerEm, x = 5 * g;
  if (e.colSeparationType && e.colSeparationType === "small") {
    var T = i.havingStyle(de.SCRIPT).sizeMultiplier;
    x = 0.2778 * (T / i.sizeMultiplier);
  }
  var L = e.colSeparationType === "CD" ? Ie({
    number: 3,
    unit: "ex"
  }, i) : 12 * g, A = 3 * g, a = e.arraystretch * L, o = 0.7 * a, d = 0.3 * a, p = 0;
  function v(xe) {
    for (var Ae = 0; Ae < xe.length; ++Ae)
      Ae > 0 && (p += 0.25), m.push({
        pos: p,
        isDashed: xe[Ae]
      });
  }
  for (v(u[0]), n = 0; n < e.body.length; ++n) {
    var _ = e.body[n], b = o, S = d;
    h < _.length && (h = _.length);
    var k = new Array(_.length);
    for (l = 0; l < _.length; ++l) {
      var w = ke(_[l], i);
      S < w.depth && (S = w.depth), b < w.height && (b = w.height), k[l] = w;
    }
    var z = e.rowGaps[n], M = 0;
    z && (M = Ie(z, i), M > 0 && (M += d, S < M && (S = M), M = 0)), e.addJot && (S += A), k.height = b, k.depth = S, p += b, k.pos = p, p += S + M, s[n] = k, v(u[n + 1]);
  }
  var N = p / 2 + i.fontMetrics().axisHeight, O = e.cols || [], I = [], $, Y, j = [];
  if (e.tags && e.tags.some((xe) => xe))
    for (n = 0; n < r; ++n) {
      var R = s[n], Z = R.pos - N, W = e.tags[n], H = void 0;
      W === !0 ? H = G.makeSpan(["eqn-num"], [], i) : W === !1 ? H = G.makeSpan([], [], i) : H = G.makeSpan([], Ze(W, i, !0), i), H.depth = R.depth, H.height = R.height, j.push({
        type: "elem",
        elem: H,
        shift: Z
      });
    }
  for (
    l = 0, Y = 0;
    // Continue while either there are more columns or more column
    // descriptions, so trailing separators don't get lost.
    l < h || Y < O.length;
    ++l, ++Y
  ) {
    for (var q = O[Y] || {}, P = !0; q.type === "separator"; ) {
      if (P || ($ = G.makeSpan(["arraycolsep"], []), $.style.width = re(i.fontMetrics().doubleRuleSep), I.push($)), q.separator === "|" || q.separator === ":") {
        var V = q.separator === "|" ? "solid" : "dashed", X = G.makeSpan(["vertical-separator"], [], i);
        X.style.height = re(p), X.style.borderRightWidth = re(c), X.style.borderRightStyle = V, X.style.margin = "0 " + re(-c / 2);
        var le = p - N;
        le && (X.style.verticalAlign = re(-le)), I.push(X);
      } else
        throw new ie("Invalid separator type: " + q.separator);
      Y++, q = O[Y] || {}, P = !1;
    }
    if (!(l >= h)) {
      var te = void 0;
      (l > 0 || e.hskipBeforeAndAfter) && (te = pe.deflt(q.pregap, x), te !== 0 && ($ = G.makeSpan(["arraycolsep"], []), $.style.width = re(te), I.push($)));
      var se = [];
      for (n = 0; n < r; ++n) {
        var ne = s[n], J = ne[l];
        if (J) {
          var ce = ne.pos - N;
          J.depth = ne.depth, J.height = ne.height, se.push({
            type: "elem",
            elem: J,
            shift: ce
          });
        }
      }
      se = G.makeVList({
        positionType: "individualShift",
        children: se
      }, i), se = G.makeSpan(["col-align-" + (q.align || "c")], [se]), I.push(se), (l < h - 1 || e.hskipBeforeAndAfter) && (te = pe.deflt(q.postgap, x), te !== 0 && ($ = G.makeSpan(["arraycolsep"], []), $.style.width = re(te), I.push($)));
    }
  }
  if (s = G.makeSpan(["mtable"], I), m.length > 0) {
    for (var fe = G.makeLineSpan("hline", i, c), we = G.makeLineSpan("hdashline", i, c), ve = [{
      type: "elem",
      elem: s,
      shift: 0
    }]; m.length > 0; ) {
      var _e = m.pop(), Me = _e.pos - N;
      _e.isDashed ? ve.push({
        type: "elem",
        elem: we,
        shift: Me
      }) : ve.push({
        type: "elem",
        elem: fe,
        shift: Me
      });
    }
    s = G.makeVList({
      positionType: "individualShift",
      children: ve
    }, i);
  }
  if (j.length === 0)
    return G.makeSpan(["mord"], [s], i);
  var $e = G.makeVList({
    positionType: "individualShift",
    children: j
  }, i);
  return $e = G.makeSpan(["tag"], [$e], i), G.makeFragment([s, $e]);
}, Kr = {
  c: "center ",
  l: "left ",
  r: "right "
}, _t = function(e, i) {
  for (var n = [], l = new ee.MathNode("mtd", [], ["mtr-glue"]), r = new ee.MathNode("mtd", [], ["mml-eqn-num"]), u = 0; u < e.body.length; u++) {
    for (var h = e.body[u], s = [], m = 0; m < h.length; m++)
      s.push(new ee.MathNode("mtd", [ze(h[m], i)]));
    e.tags && e.tags[u] && (s.unshift(l), s.push(l), e.leqno ? s.unshift(r) : s.push(r)), n.push(new ee.MathNode("mtr", s));
  }
  var c = new ee.MathNode("mtable", n), g = e.arraystretch === 0.5 ? 0.1 : 0.16 + e.arraystretch - 1 + (e.addJot ? 0.09 : 0);
  c.setAttribute("rowspacing", re(g));
  var x = "", T = "";
  if (e.cols && e.cols.length > 0) {
    var L = e.cols, A = "", a = !1, o = 0, d = L.length;
    L[0].type === "separator" && (x += "top ", o = 1), L[L.length - 1].type === "separator" && (x += "bottom ", d -= 1);
    for (var p = o; p < d; p++)
      L[p].type === "align" ? (T += Kr[L[p].align], a && (A += "none "), a = !0) : L[p].type === "separator" && a && (A += L[p].separator === "|" ? "solid " : "dashed ", a = !1);
    c.setAttribute("columnalign", T.trim()), /[sd]/.test(A) && c.setAttribute("columnlines", A.trim());
  }
  if (e.colSeparationType === "align") {
    for (var v = e.cols || [], _ = "", b = 1; b < v.length; b++)
      _ += b % 2 ? "0em " : "1em ";
    c.setAttribute("columnspacing", _.trim());
  } else
    e.colSeparationType === "alignat" || e.colSeparationType === "gather" ? c.setAttribute("columnspacing", "0em") : e.colSeparationType === "small" ? c.setAttribute("columnspacing", "0.2778em") : e.colSeparationType === "CD" ? c.setAttribute("columnspacing", "0.5em") : c.setAttribute("columnspacing", "1em");
  var S = "", k = e.hLinesBeforeRow;
  x += k[0].length > 0 ? "left " : "", x += k[k.length - 1].length > 0 ? "right " : "";
  for (var w = 1; w < k.length - 1; w++)
    S += k[w].length === 0 ? "none " : k[w][0] ? "dashed " : "solid ";
  return /[sd]/.test(S) && c.setAttribute("rowlines", S.trim()), x !== "" && (c = new ee.MathNode("menclose", [c]), c.setAttribute("notation", x.trim())), e.arraystretch && e.arraystretch < 1 && (c = new ee.MathNode("mstyle", [c]), c.setAttribute("scriptlevel", "1")), c;
}, p0 = function(e, i) {
  e.envName.indexOf("ed") === -1 && Ii(e);
  var n = [], l = e.envName.indexOf("at") > -1 ? "alignat" : "align", r = e.envName === "split", u = Ot(e.parser, {
    cols: n,
    addJot: !0,
    autoTag: r ? void 0 : Ln(e.envName),
    emptySingleRow: !0,
    colSeparationType: l,
    maxNumCols: r ? 2 : void 0,
    leqno: e.parser.settings.leqno
  }, "display"), h, s = 0, m = {
    type: "ordgroup",
    mode: e.mode,
    body: []
  };
  if (i[0] && i[0].type === "ordgroup") {
    for (var c = "", g = 0; g < i[0].body.length; g++) {
      var x = ye(i[0].body[g], "textord");
      c += x.text;
    }
    h = Number(c), s = h * 2;
  }
  var T = !s;
  u.body.forEach(function(o) {
    for (var d = 1; d < o.length; d += 2) {
      var p = ye(o[d], "styling"), v = ye(p.body[0], "ordgroup");
      v.body.unshift(m);
    }
    if (T)
      s < o.length && (s = o.length);
    else {
      var _ = o.length / 2;
      if (h < _)
        throw new ie("Too many math in a row: " + ("expected " + h + ", but got " + _), o[0]);
    }
  });
  for (var L = 0; L < s; ++L) {
    var A = "r", a = 0;
    L % 2 === 1 ? A = "l" : L > 0 && T && (a = 1), n[L] = {
      type: "align",
      align: A,
      pregap: a,
      postgap: 0
    };
  }
  return u.colSeparationType = T ? "align" : "alignat", u;
};
bt({
  type: "array",
  names: ["array", "darray"],
  props: {
    numArgs: 1
  },
  handler(t, e) {
    var i = Ri(e[0]), n = i ? [e[0]] : ye(e[0], "ordgroup").body, l = n.map(function(u) {
      var h = Cn(u), s = h.text;
      if ("lcr".indexOf(s) !== -1)
        return {
          type: "align",
          align: s
        };
      if (s === "|")
        return {
          type: "separator",
          separator: "|"
        };
      if (s === ":")
        return {
          type: "separator",
          separator: ":"
        };
      throw new ie("Unknown column alignment: " + s, u);
    }), r = {
      cols: l,
      hskipBeforeAndAfter: !0,
      // \@preamble in lttab.dtx
      maxNumCols: l.length
    };
    return Ot(t.parser, r, zn(t.envName));
  },
  htmlBuilder: yt,
  mathmlBuilder: _t
});
bt({
  type: "array",
  names: ["matrix", "pmatrix", "bmatrix", "Bmatrix", "vmatrix", "Vmatrix", "matrix*", "pmatrix*", "bmatrix*", "Bmatrix*", "vmatrix*", "Vmatrix*"],
  props: {
    numArgs: 0
  },
  handler(t) {
    var e = {
      matrix: null,
      pmatrix: ["(", ")"],
      bmatrix: ["[", "]"],
      Bmatrix: ["\\{", "\\}"],
      vmatrix: ["|", "|"],
      Vmatrix: ["\\Vert", "\\Vert"]
    }[t.envName.replace("*", "")], i = "c", n = {
      hskipBeforeAndAfter: !1,
      cols: [{
        type: "align",
        align: i
      }]
    };
    if (t.envName.charAt(t.envName.length - 1) === "*") {
      var l = t.parser;
      if (l.consumeSpaces(), l.fetch().text === "[") {
        if (l.consume(), l.consumeSpaces(), i = l.fetch().text, "lcr".indexOf(i) === -1)
          throw new ie("Expected l or c or r", l.nextToken);
        l.consume(), l.consumeSpaces(), l.expect("]"), l.consume(), n.cols = [{
          type: "align",
          align: i
        }];
      }
    }
    var r = Ot(t.parser, n, zn(t.envName)), u = Math.max(0, ...r.body.map((h) => h.length));
    return r.cols = new Array(u).fill({
      type: "align",
      align: i
    }), e ? {
      type: "leftright",
      mode: t.mode,
      body: [r],
      left: e[0],
      right: e[1],
      rightColor: void 0
      // \right uninfluenced by \color in array
    } : r;
  },
  htmlBuilder: yt,
  mathmlBuilder: _t
});
bt({
  type: "array",
  names: ["smallmatrix"],
  props: {
    numArgs: 0
  },
  handler(t) {
    var e = {
      arraystretch: 0.5
    }, i = Ot(t.parser, e, "script");
    return i.colSeparationType = "small", i;
  },
  htmlBuilder: yt,
  mathmlBuilder: _t
});
bt({
  type: "array",
  names: ["subarray"],
  props: {
    numArgs: 1
  },
  handler(t, e) {
    var i = Ri(e[0]), n = i ? [e[0]] : ye(e[0], "ordgroup").body, l = n.map(function(u) {
      var h = Cn(u), s = h.text;
      if ("lc".indexOf(s) !== -1)
        return {
          type: "align",
          align: s
        };
      throw new ie("Unknown column alignment: " + s, u);
    });
    if (l.length > 1)
      throw new ie("{subarray} can contain only one column");
    var r = {
      cols: l,
      hskipBeforeAndAfter: !1,
      arraystretch: 0.5
    };
    if (r = Ot(t.parser, r, "script"), r.body.length > 0 && r.body[0].length > 1)
      throw new ie("{subarray} can contain only one column");
    return r;
  },
  htmlBuilder: yt,
  mathmlBuilder: _t
});
bt({
  type: "array",
  names: ["cases", "dcases", "rcases", "drcases"],
  props: {
    numArgs: 0
  },
  handler(t) {
    var e = {
      arraystretch: 1.2,
      cols: [{
        type: "align",
        align: "l",
        pregap: 0,
        // TODO(kevinb) get the current style.
        // For now we use the metrics for TEXT style which is what we were
        // doing before.  Before attempting to get the current style we
        // should look at TeX's behavior especially for \over and matrices.
        postgap: 1
        /* 1em quad */
      }, {
        type: "align",
        align: "l",
        pregap: 0,
        postgap: 0
      }]
    }, i = Ot(t.parser, e, zn(t.envName));
    return {
      type: "leftright",
      mode: t.mode,
      body: [i],
      left: t.envName.indexOf("r") > -1 ? "." : "\\{",
      right: t.envName.indexOf("r") > -1 ? "\\}" : ".",
      rightColor: void 0
    };
  },
  htmlBuilder: yt,
  mathmlBuilder: _t
});
bt({
  type: "array",
  names: ["align", "align*", "aligned", "split"],
  props: {
    numArgs: 0
  },
  handler: p0,
  htmlBuilder: yt,
  mathmlBuilder: _t
});
bt({
  type: "array",
  names: ["gathered", "gather", "gather*"],
  props: {
    numArgs: 0
  },
  handler(t) {
    pe.contains(["gather", "gather*"], t.envName) && Ii(t);
    var e = {
      cols: [{
        type: "align",
        align: "c"
      }],
      addJot: !0,
      colSeparationType: "gather",
      autoTag: Ln(t.envName),
      emptySingleRow: !0,
      leqno: t.parser.settings.leqno
    };
    return Ot(t.parser, e, "display");
  },
  htmlBuilder: yt,
  mathmlBuilder: _t
});
bt({
  type: "array",
  names: ["alignat", "alignat*", "alignedat"],
  props: {
    numArgs: 1
  },
  handler: p0,
  htmlBuilder: yt,
  mathmlBuilder: _t
});
bt({
  type: "array",
  names: ["equation", "equation*"],
  props: {
    numArgs: 0
  },
  handler(t) {
    Ii(t);
    var e = {
      autoTag: Ln(t.envName),
      emptySingleRow: !0,
      singleRow: !0,
      maxNumCols: 1,
      leqno: t.parser.settings.leqno
    };
    return Ot(t.parser, e, "display");
  },
  htmlBuilder: yt,
  mathmlBuilder: _t
});
bt({
  type: "array",
  names: ["CD"],
  props: {
    numArgs: 0
  },
  handler(t) {
    return Ii(t), Ir(t.parser);
  },
  htmlBuilder: yt,
  mathmlBuilder: _t
});
E("\\nonumber", "\\gdef\\@eqnsw{0}");
E("\\notag", "\\nonumber");
oe({
  type: "text",
  // Doesn't matter what this is.
  names: ["\\hline", "\\hdashline"],
  props: {
    numArgs: 0,
    allowedInText: !0,
    allowedInMath: !0
  },
  handler(t, e) {
    throw new ie(t.funcName + " valid only within array environment");
  }
});
var fl = f0;
oe({
  type: "environment",
  names: ["\\begin", "\\end"],
  props: {
    numArgs: 1,
    argTypes: ["text"]
  },
  handler(t, e) {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0];
    if (l.type !== "ordgroup")
      throw new ie("Invalid environment name", l);
    for (var r = "", u = 0; u < l.body.length; ++u)
      r += ye(l.body[u], "textord").text;
    if (n === "\\begin") {
      if (!fl.hasOwnProperty(r))
        throw new ie("No such environment: " + r, l);
      var h = fl[r], {
        args: s,
        optArgs: m
      } = i.parseArguments("\\begin{" + r + "}", h), c = {
        mode: i.mode,
        envName: r,
        parser: i
      }, g = h.handler(c, s, m);
      i.expect("\\end", !1);
      var x = i.nextToken, T = ye(i.parseFunction(), "environment");
      if (T.name !== r)
        throw new ie("Mismatch: \\begin{" + r + "} matched by \\end{" + T.name + "}", x);
      return g;
    }
    return {
      type: "environment",
      mode: i.mode,
      name: r,
      nameGroup: l
    };
  }
});
var g0 = (t, e) => {
  var i = t.font, n = e.withFont(i);
  return ke(t.body, n);
}, v0 = (t, e) => {
  var i = t.font, n = e.withFont(i);
  return ze(t.body, n);
}, ml = {
  "\\Bbb": "\\mathbb",
  "\\bold": "\\mathbf",
  "\\frak": "\\mathfrak",
  "\\bm": "\\boldsymbol"
};
oe({
  type: "font",
  names: [
    // styles, except \boldsymbol defined below
    "\\mathrm",
    "\\mathit",
    "\\mathbf",
    "\\mathnormal",
    // families
    "\\mathbb",
    "\\mathcal",
    "\\mathfrak",
    "\\mathscr",
    "\\mathsf",
    "\\mathtt",
    // aliases, except \bm defined below
    "\\Bbb",
    "\\bold",
    "\\frak"
  ],
  props: {
    numArgs: 1,
    allowedInArgument: !0
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n
    } = t, l = Ai(e[0]), r = n;
    return r in ml && (r = ml[r]), {
      type: "font",
      mode: i.mode,
      font: r.slice(1),
      body: l
    };
  },
  htmlBuilder: g0,
  mathmlBuilder: v0
});
oe({
  type: "mclass",
  names: ["\\boldsymbol", "\\bm"],
  props: {
    numArgs: 1
  },
  handler: (t, e) => {
    var {
      parser: i
    } = t, n = e[0], l = pe.isCharacterBox(n);
    return {
      type: "mclass",
      mode: i.mode,
      mclass: Di(n),
      body: [{
        type: "font",
        mode: i.mode,
        font: "boldsymbol",
        body: n
      }],
      isCharacterBox: l
    };
  }
});
oe({
  type: "font",
  names: ["\\rm", "\\sf", "\\tt", "\\bf", "\\it", "\\cal"],
  props: {
    numArgs: 0,
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n,
      breakOnTokenText: l
    } = t, {
      mode: r
    } = i, u = i.parseExpression(!0, l), h = "math" + n.slice(1);
    return {
      type: "font",
      mode: r,
      font: h,
      body: {
        type: "ordgroup",
        mode: i.mode,
        body: u
      }
    };
  },
  htmlBuilder: g0,
  mathmlBuilder: v0
});
var b0 = (t, e) => {
  var i = e;
  return t === "display" ? i = i.id >= de.SCRIPT.id ? i.text() : de.DISPLAY : t === "text" && i.size === de.DISPLAY.size ? i = de.TEXT : t === "script" ? i = de.SCRIPT : t === "scriptscript" && (i = de.SCRIPTSCRIPT), i;
}, Mn = (t, e) => {
  var i = b0(t.size, e.style), n = i.fracNum(), l = i.fracDen(), r;
  r = e.havingStyle(n);
  var u = ke(t.numer, r, e);
  if (t.continued) {
    var h = 8.5 / e.fontMetrics().ptPerEm, s = 3.5 / e.fontMetrics().ptPerEm;
    u.height = u.height < h ? h : u.height, u.depth = u.depth < s ? s : u.depth;
  }
  r = e.havingStyle(l);
  var m = ke(t.denom, r, e), c, g, x;
  t.hasBarLine ? (t.barSize ? (g = Ie(t.barSize, e), c = G.makeLineSpan("frac-line", e, g)) : c = G.makeLineSpan("frac-line", e), g = c.height, x = c.height) : (c = null, g = 0, x = e.fontMetrics().defaultRuleThickness);
  var T, L, A;
  i.size === de.DISPLAY.size || t.size === "display" ? (T = e.fontMetrics().num1, g > 0 ? L = 3 * x : L = 7 * x, A = e.fontMetrics().denom1) : (g > 0 ? (T = e.fontMetrics().num2, L = x) : (T = e.fontMetrics().num3, L = 3 * x), A = e.fontMetrics().denom2);
  var a;
  if (c) {
    var d = e.fontMetrics().axisHeight;
    T - u.depth - (d + 0.5 * g) < L && (T += L - (T - u.depth - (d + 0.5 * g))), d - 0.5 * g - (m.height - A) < L && (A += L - (d - 0.5 * g - (m.height - A)));
    var p = -(d - 0.5 * g);
    a = G.makeVList({
      positionType: "individualShift",
      children: [{
        type: "elem",
        elem: m,
        shift: A
      }, {
        type: "elem",
        elem: c,
        shift: p
      }, {
        type: "elem",
        elem: u,
        shift: -T
      }]
    }, e);
  } else {
    var o = T - u.depth - (m.height - A);
    o < L && (T += 0.5 * (L - o), A += 0.5 * (L - o)), a = G.makeVList({
      positionType: "individualShift",
      children: [{
        type: "elem",
        elem: m,
        shift: A
      }, {
        type: "elem",
        elem: u,
        shift: -T
      }]
    }, e);
  }
  r = e.havingStyle(i), a.height *= r.sizeMultiplier / e.sizeMultiplier, a.depth *= r.sizeMultiplier / e.sizeMultiplier;
  var v;
  i.size === de.DISPLAY.size ? v = e.fontMetrics().delim1 : i.size === de.SCRIPTSCRIPT.size ? v = e.havingStyle(de.SCRIPT).fontMetrics().delim2 : v = e.fontMetrics().delim2;
  var _, b;
  return t.leftDelim == null ? _ = ui(e, ["mopen"]) : _ = Tt.customSizedDelim(t.leftDelim, v, !0, e.havingStyle(i), t.mode, ["mopen"]), t.continued ? b = G.makeSpan([]) : t.rightDelim == null ? b = ui(e, ["mclose"]) : b = Tt.customSizedDelim(t.rightDelim, v, !0, e.havingStyle(i), t.mode, ["mclose"]), G.makeSpan(["mord"].concat(r.sizingClasses(e)), [_, G.makeSpan(["mfrac"], [a]), b], e);
}, An = (t, e) => {
  var i = new ee.MathNode("mfrac", [ze(t.numer, e), ze(t.denom, e)]);
  if (!t.hasBarLine)
    i.setAttribute("linethickness", "0px");
  else if (t.barSize) {
    var n = Ie(t.barSize, e);
    i.setAttribute("linethickness", re(n));
  }
  var l = b0(t.size, e.style);
  if (l.size !== e.style.size) {
    i = new ee.MathNode("mstyle", [i]);
    var r = l.size === de.DISPLAY.size ? "true" : "false";
    i.setAttribute("displaystyle", r), i.setAttribute("scriptlevel", "0");
  }
  if (t.leftDelim != null || t.rightDelim != null) {
    var u = [];
    if (t.leftDelim != null) {
      var h = new ee.MathNode("mo", [new ee.TextNode(t.leftDelim.replace("\\", ""))]);
      h.setAttribute("fence", "true"), u.push(h);
    }
    if (u.push(i), t.rightDelim != null) {
      var s = new ee.MathNode("mo", [new ee.TextNode(t.rightDelim.replace("\\", ""))]);
      s.setAttribute("fence", "true"), u.push(s);
    }
    return wn(u);
  }
  return i;
};
oe({
  type: "genfrac",
  names: [
    "\\dfrac",
    "\\frac",
    "\\tfrac",
    "\\dbinom",
    "\\binom",
    "\\tbinom",
    "\\\\atopfrac",
    // can’t be entered directly
    "\\\\bracefrac",
    "\\\\brackfrac"
    // ditto
  ],
  props: {
    numArgs: 2,
    allowedInArgument: !0
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0], r = e[1], u, h = null, s = null, m = "auto";
    switch (n) {
      case "\\dfrac":
      case "\\frac":
      case "\\tfrac":
        u = !0;
        break;
      case "\\\\atopfrac":
        u = !1;
        break;
      case "\\dbinom":
      case "\\binom":
      case "\\tbinom":
        u = !1, h = "(", s = ")";
        break;
      case "\\\\bracefrac":
        u = !1, h = "\\{", s = "\\}";
        break;
      case "\\\\brackfrac":
        u = !1, h = "[", s = "]";
        break;
      default:
        throw new Error("Unrecognized genfrac command");
    }
    switch (n) {
      case "\\dfrac":
      case "\\dbinom":
        m = "display";
        break;
      case "\\tfrac":
      case "\\tbinom":
        m = "text";
        break;
    }
    return {
      type: "genfrac",
      mode: i.mode,
      continued: !1,
      numer: l,
      denom: r,
      hasBarLine: u,
      leftDelim: h,
      rightDelim: s,
      size: m,
      barSize: null
    };
  },
  htmlBuilder: Mn,
  mathmlBuilder: An
});
oe({
  type: "genfrac",
  names: ["\\cfrac"],
  props: {
    numArgs: 2
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0], r = e[1];
    return {
      type: "genfrac",
      mode: i.mode,
      continued: !0,
      numer: l,
      denom: r,
      hasBarLine: !0,
      leftDelim: null,
      rightDelim: null,
      size: "display",
      barSize: null
    };
  }
});
oe({
  type: "infix",
  names: ["\\over", "\\choose", "\\atop", "\\brace", "\\brack"],
  props: {
    numArgs: 0,
    infix: !0
  },
  handler(t) {
    var {
      parser: e,
      funcName: i,
      token: n
    } = t, l;
    switch (i) {
      case "\\over":
        l = "\\frac";
        break;
      case "\\choose":
        l = "\\binom";
        break;
      case "\\atop":
        l = "\\\\atopfrac";
        break;
      case "\\brace":
        l = "\\\\bracefrac";
        break;
      case "\\brack":
        l = "\\\\brackfrac";
        break;
      default:
        throw new Error("Unrecognized infix genfrac command");
    }
    return {
      type: "infix",
      mode: e.mode,
      replaceWith: l,
      token: n
    };
  }
});
var pl = ["display", "text", "script", "scriptscript"], gl = function(e) {
  var i = null;
  return e.length > 0 && (i = e, i = i === "." ? null : i), i;
};
oe({
  type: "genfrac",
  names: ["\\genfrac"],
  props: {
    numArgs: 6,
    allowedInArgument: !0,
    argTypes: ["math", "math", "size", "text", "math", "math"]
  },
  handler(t, e) {
    var {
      parser: i
    } = t, n = e[4], l = e[5], r = Ai(e[0]), u = r.type === "atom" && r.family === "open" ? gl(r.text) : null, h = Ai(e[1]), s = h.type === "atom" && h.family === "close" ? gl(h.text) : null, m = ye(e[2], "size"), c, g = null;
    m.isBlank ? c = !0 : (g = m.value, c = g.number > 0);
    var x = "auto", T = e[3];
    if (T.type === "ordgroup") {
      if (T.body.length > 0) {
        var L = ye(T.body[0], "textord");
        x = pl[Number(L.text)];
      }
    } else
      T = ye(T, "textord"), x = pl[Number(T.text)];
    return {
      type: "genfrac",
      mode: i.mode,
      numer: n,
      denom: l,
      continued: !1,
      hasBarLine: c,
      barSize: g,
      leftDelim: u,
      rightDelim: s,
      size: x
    };
  },
  htmlBuilder: Mn,
  mathmlBuilder: An
});
oe({
  type: "infix",
  names: ["\\above"],
  props: {
    numArgs: 1,
    argTypes: ["size"],
    infix: !0
  },
  handler(t, e) {
    var {
      parser: i,
      funcName: n,
      token: l
    } = t;
    return {
      type: "infix",
      mode: i.mode,
      replaceWith: "\\\\abovefrac",
      size: ye(e[0], "size").value,
      token: l
    };
  }
});
oe({
  type: "genfrac",
  names: ["\\\\abovefrac"],
  props: {
    numArgs: 3,
    argTypes: ["math", "size", "math"]
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0], r = Ls(ye(e[1], "infix").size), u = e[2], h = r.number > 0;
    return {
      type: "genfrac",
      mode: i.mode,
      numer: l,
      denom: u,
      continued: !1,
      hasBarLine: h,
      barSize: r,
      leftDelim: null,
      rightDelim: null,
      size: "auto"
    };
  },
  htmlBuilder: Mn,
  mathmlBuilder: An
});
var y0 = (t, e) => {
  var i = e.style, n, l;
  t.type === "supsub" ? (n = t.sup ? ke(t.sup, e.havingStyle(i.sup()), e) : ke(t.sub, e.havingStyle(i.sub()), e), l = ye(t.base, "horizBrace")) : l = ye(t, "horizBrace");
  var r = ke(l.base, e.havingBaseStyle(de.DISPLAY)), u = zt.svgSpan(l, e), h;
  if (l.isOver ? (h = G.makeVList({
    positionType: "firstBaseline",
    children: [{
      type: "elem",
      elem: r
    }, {
      type: "kern",
      size: 0.1
    }, {
      type: "elem",
      elem: u
    }]
  }, e), h.children[0].children[0].children[1].classes.push("svg-align")) : (h = G.makeVList({
    positionType: "bottom",
    positionData: r.depth + 0.1 + u.height,
    children: [{
      type: "elem",
      elem: u
    }, {
      type: "kern",
      size: 0.1
    }, {
      type: "elem",
      elem: r
    }]
  }, e), h.children[0].children[0].children[0].classes.push("svg-align")), n) {
    var s = G.makeSpan(["mord", l.isOver ? "mover" : "munder"], [h], e);
    l.isOver ? h = G.makeVList({
      positionType: "firstBaseline",
      children: [{
        type: "elem",
        elem: s
      }, {
        type: "kern",
        size: 0.2
      }, {
        type: "elem",
        elem: n
      }]
    }, e) : h = G.makeVList({
      positionType: "bottom",
      positionData: s.depth + 0.2 + n.height + n.depth,
      children: [{
        type: "elem",
        elem: n
      }, {
        type: "kern",
        size: 0.2
      }, {
        type: "elem",
        elem: s
      }]
    }, e);
  }
  return G.makeSpan(["mord", l.isOver ? "mover" : "munder"], [h], e);
}, Jr = (t, e) => {
  var i = zt.mathMLnode(t.label);
  return new ee.MathNode(t.isOver ? "mover" : "munder", [ze(t.base, e), i]);
};
oe({
  type: "horizBrace",
  names: ["\\overbrace", "\\underbrace"],
  props: {
    numArgs: 1
  },
  handler(t, e) {
    var {
      parser: i,
      funcName: n
    } = t;
    return {
      type: "horizBrace",
      mode: i.mode,
      label: n,
      isOver: /^\\over/.test(n),
      base: e[0]
    };
  },
  htmlBuilder: y0,
  mathmlBuilder: Jr
});
oe({
  type: "href",
  names: ["\\href"],
  props: {
    numArgs: 2,
    argTypes: ["url", "original"],
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      parser: i
    } = t, n = e[1], l = ye(e[0], "url").url;
    return i.settings.isTrusted({
      command: "\\href",
      url: l
    }) ? {
      type: "href",
      mode: i.mode,
      href: l,
      body: Ve(n)
    } : i.formatUnsupportedCmd("\\href");
  },
  htmlBuilder: (t, e) => {
    var i = Ze(t.body, e, !1);
    return G.makeAnchor(t.href, [], i, e);
  },
  mathmlBuilder: (t, e) => {
    var i = It(t.body, e);
    return i instanceof ot || (i = new ot("mrow", [i])), i.setAttribute("href", t.href), i;
  }
});
oe({
  type: "href",
  names: ["\\url"],
  props: {
    numArgs: 1,
    argTypes: ["url"],
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      parser: i
    } = t, n = ye(e[0], "url").url;
    if (!i.settings.isTrusted({
      command: "\\url",
      url: n
    }))
      return i.formatUnsupportedCmd("\\url");
    for (var l = [], r = 0; r < n.length; r++) {
      var u = n[r];
      u === "~" && (u = "\\textasciitilde"), l.push({
        type: "textord",
        mode: "text",
        text: u
      });
    }
    var h = {
      type: "text",
      mode: i.mode,
      font: "\\texttt",
      body: l
    };
    return {
      type: "href",
      mode: i.mode,
      href: n,
      body: Ve(h)
    };
  }
});
oe({
  type: "hbox",
  names: ["\\hbox"],
  props: {
    numArgs: 1,
    argTypes: ["text"],
    allowedInText: !0,
    primitive: !0
  },
  handler(t, e) {
    var {
      parser: i
    } = t;
    return {
      type: "hbox",
      mode: i.mode,
      body: Ve(e[0])
    };
  },
  htmlBuilder(t, e) {
    var i = Ze(t.body, e, !1);
    return G.makeFragment(i);
  },
  mathmlBuilder(t, e) {
    return new ee.MathNode("mrow", it(t.body, e));
  }
});
oe({
  type: "html",
  names: ["\\htmlClass", "\\htmlId", "\\htmlStyle", "\\htmlData"],
  props: {
    numArgs: 2,
    argTypes: ["raw", "original"],
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n,
      token: l
    } = t, r = ye(e[0], "raw").string, u = e[1];
    i.settings.strict && i.settings.reportNonstrict("htmlExtension", "HTML extension is disabled on strict mode");
    var h, s = {};
    switch (n) {
      case "\\htmlClass":
        s.class = r, h = {
          command: "\\htmlClass",
          class: r
        };
        break;
      case "\\htmlId":
        s.id = r, h = {
          command: "\\htmlId",
          id: r
        };
        break;
      case "\\htmlStyle":
        s.style = r, h = {
          command: "\\htmlStyle",
          style: r
        };
        break;
      case "\\htmlData": {
        for (var m = r.split(","), c = 0; c < m.length; c++) {
          var g = m[c].split("=");
          if (g.length !== 2)
            throw new ie("Error parsing key-value for \\htmlData");
          s["data-" + g[0].trim()] = g[1].trim();
        }
        h = {
          command: "\\htmlData",
          attributes: s
        };
        break;
      }
      default:
        throw new Error("Unrecognized html command");
    }
    return i.settings.isTrusted(h) ? {
      type: "html",
      mode: i.mode,
      attributes: s,
      body: Ve(u)
    } : i.formatUnsupportedCmd(n);
  },
  htmlBuilder: (t, e) => {
    var i = Ze(t.body, e, !1), n = ["enclosing"];
    t.attributes.class && n.push(...t.attributes.class.trim().split(/\s+/));
    var l = G.makeSpan(n, i, e);
    for (var r in t.attributes)
      r !== "class" && t.attributes.hasOwnProperty(r) && l.setAttribute(r, t.attributes[r]);
    return l;
  },
  mathmlBuilder: (t, e) => It(t.body, e)
});
oe({
  type: "htmlmathml",
  names: ["\\html@mathml"],
  props: {
    numArgs: 2,
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      parser: i
    } = t;
    return {
      type: "htmlmathml",
      mode: i.mode,
      html: Ve(e[0]),
      mathml: Ve(e[1])
    };
  },
  htmlBuilder: (t, e) => {
    var i = Ze(t.html, e, !1);
    return G.makeFragment(i);
  },
  mathmlBuilder: (t, e) => It(t.mathml, e)
});
var Ji = function(e) {
  if (/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))
    return {
      number: +e,
      unit: "bp"
    };
  var i = /([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);
  if (!i)
    throw new ie("Invalid size: '" + e + "' in \\includegraphics");
  var n = {
    number: +(i[1] + i[2]),
    // sign + magnitude, cast to number
    unit: i[3]
  };
  if (!Ol(n))
    throw new ie("Invalid unit: '" + n.unit + "' in \\includegraphics.");
  return n;
};
oe({
  type: "includegraphics",
  names: ["\\includegraphics"],
  props: {
    numArgs: 1,
    numOptionalArgs: 1,
    argTypes: ["raw", "url"],
    allowedInText: !1
  },
  handler: (t, e, i) => {
    var {
      parser: n
    } = t, l = {
      number: 0,
      unit: "em"
    }, r = {
      number: 0.9,
      unit: "em"
    }, u = {
      number: 0,
      unit: "em"
    }, h = "";
    if (i[0])
      for (var s = ye(i[0], "raw").string, m = s.split(","), c = 0; c < m.length; c++) {
        var g = m[c].split("=");
        if (g.length === 2) {
          var x = g[1].trim();
          switch (g[0].trim()) {
            case "alt":
              h = x;
              break;
            case "width":
              l = Ji(x);
              break;
            case "height":
              r = Ji(x);
              break;
            case "totalheight":
              u = Ji(x);
              break;
            default:
              throw new ie("Invalid key: '" + g[0] + "' in \\includegraphics.");
          }
        }
      }
    var T = ye(e[0], "url").url;
    return h === "" && (h = T, h = h.replace(/^.*[\\/]/, ""), h = h.substring(0, h.lastIndexOf("."))), n.settings.isTrusted({
      command: "\\includegraphics",
      url: T
    }) ? {
      type: "includegraphics",
      mode: n.mode,
      alt: h,
      width: l,
      height: r,
      totalheight: u,
      src: T
    } : n.formatUnsupportedCmd("\\includegraphics");
  },
  htmlBuilder: (t, e) => {
    var i = Ie(t.height, e), n = 0;
    t.totalheight.number > 0 && (n = Ie(t.totalheight, e) - i);
    var l = 0;
    t.width.number > 0 && (l = Ie(t.width, e));
    var r = {
      height: re(i + n)
    };
    l > 0 && (r.width = re(l)), n > 0 && (r.verticalAlign = re(-n));
    var u = new Js(t.src, t.alt, r);
    return u.height = i, u.depth = n, u;
  },
  mathmlBuilder: (t, e) => {
    var i = new ee.MathNode("mglyph", []);
    i.setAttribute("alt", t.alt);
    var n = Ie(t.height, e), l = 0;
    if (t.totalheight.number > 0 && (l = Ie(t.totalheight, e) - n, i.setAttribute("valign", re(-l))), i.setAttribute("height", re(n + l)), t.width.number > 0) {
      var r = Ie(t.width, e);
      i.setAttribute("width", re(r));
    }
    return i.setAttribute("src", t.src), i;
  }
});
oe({
  type: "kern",
  names: ["\\kern", "\\mkern", "\\hskip", "\\mskip"],
  props: {
    numArgs: 1,
    argTypes: ["size"],
    primitive: !0,
    allowedInText: !0
  },
  handler(t, e) {
    var {
      parser: i,
      funcName: n
    } = t, l = ye(e[0], "size");
    if (i.settings.strict) {
      var r = n[1] === "m", u = l.value.unit === "mu";
      r ? (u || i.settings.reportNonstrict("mathVsTextUnits", "LaTeX's " + n + " supports only mu units, " + ("not " + l.value.unit + " units")), i.mode !== "math" && i.settings.reportNonstrict("mathVsTextUnits", "LaTeX's " + n + " works only in math mode")) : u && i.settings.reportNonstrict("mathVsTextUnits", "LaTeX's " + n + " doesn't support mu units");
    }
    return {
      type: "kern",
      mode: i.mode,
      dimension: l.value
    };
  },
  htmlBuilder(t, e) {
    return G.makeGlue(t.dimension, e);
  },
  mathmlBuilder(t, e) {
    var i = Ie(t.dimension, e);
    return new ee.SpaceNode(i);
  }
});
oe({
  type: "lap",
  names: ["\\mathllap", "\\mathrlap", "\\mathclap"],
  props: {
    numArgs: 1,
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0];
    return {
      type: "lap",
      mode: i.mode,
      alignment: n.slice(5),
      body: l
    };
  },
  htmlBuilder: (t, e) => {
    var i;
    t.alignment === "clap" ? (i = G.makeSpan([], [ke(t.body, e)]), i = G.makeSpan(["inner"], [i], e)) : i = G.makeSpan(["inner"], [ke(t.body, e)]);
    var n = G.makeSpan(["fix"], []), l = G.makeSpan([t.alignment], [i, n], e), r = G.makeSpan(["strut"]);
    return r.style.height = re(l.height + l.depth), l.depth && (r.style.verticalAlign = re(-l.depth)), l.children.unshift(r), l = G.makeSpan(["thinbox"], [l], e), G.makeSpan(["mord", "vbox"], [l], e);
  },
  mathmlBuilder: (t, e) => {
    var i = new ee.MathNode("mpadded", [ze(t.body, e)]);
    if (t.alignment !== "rlap") {
      var n = t.alignment === "llap" ? "-1" : "-0.5";
      i.setAttribute("lspace", n + "width");
    }
    return i.setAttribute("width", "0px"), i;
  }
});
oe({
  type: "styling",
  names: ["\\(", "$"],
  props: {
    numArgs: 0,
    allowedInText: !0,
    allowedInMath: !1
  },
  handler(t, e) {
    var {
      funcName: i,
      parser: n
    } = t, l = n.mode;
    n.switchMode("math");
    var r = i === "\\(" ? "\\)" : "$", u = n.parseExpression(!1, r);
    return n.expect(r), n.switchMode(l), {
      type: "styling",
      mode: n.mode,
      style: "text",
      body: u
    };
  }
});
oe({
  type: "text",
  // Doesn't matter what this is.
  names: ["\\)", "\\]"],
  props: {
    numArgs: 0,
    allowedInText: !0,
    allowedInMath: !1
  },
  handler(t, e) {
    throw new ie("Mismatched " + t.funcName);
  }
});
var vl = (t, e) => {
  switch (e.style.size) {
    case de.DISPLAY.size:
      return t.display;
    case de.TEXT.size:
      return t.text;
    case de.SCRIPT.size:
      return t.script;
    case de.SCRIPTSCRIPT.size:
      return t.scriptscript;
    default:
      return t.text;
  }
};
oe({
  type: "mathchoice",
  names: ["\\mathchoice"],
  props: {
    numArgs: 4,
    primitive: !0
  },
  handler: (t, e) => {
    var {
      parser: i
    } = t;
    return {
      type: "mathchoice",
      mode: i.mode,
      display: Ve(e[0]),
      text: Ve(e[1]),
      script: Ve(e[2]),
      scriptscript: Ve(e[3])
    };
  },
  htmlBuilder: (t, e) => {
    var i = vl(t, e), n = Ze(i, e, !1);
    return G.makeFragment(n);
  },
  mathmlBuilder: (t, e) => {
    var i = vl(t, e);
    return It(i, e);
  }
});
var _0 = (t, e, i, n, l, r, u) => {
  t = G.makeSpan([], [t]);
  var h = i && pe.isCharacterBox(i), s, m;
  if (e) {
    var c = ke(e, n.havingStyle(l.sup()), n);
    m = {
      elem: c,
      kern: Math.max(n.fontMetrics().bigOpSpacing1, n.fontMetrics().bigOpSpacing3 - c.depth)
    };
  }
  if (i) {
    var g = ke(i, n.havingStyle(l.sub()), n);
    s = {
      elem: g,
      kern: Math.max(n.fontMetrics().bigOpSpacing2, n.fontMetrics().bigOpSpacing4 - g.height)
    };
  }
  var x;
  if (m && s) {
    var T = n.fontMetrics().bigOpSpacing5 + s.elem.height + s.elem.depth + s.kern + t.depth + u;
    x = G.makeVList({
      positionType: "bottom",
      positionData: T,
      children: [{
        type: "kern",
        size: n.fontMetrics().bigOpSpacing5
      }, {
        type: "elem",
        elem: s.elem,
        marginLeft: re(-r)
      }, {
        type: "kern",
        size: s.kern
      }, {
        type: "elem",
        elem: t
      }, {
        type: "kern",
        size: m.kern
      }, {
        type: "elem",
        elem: m.elem,
        marginLeft: re(r)
      }, {
        type: "kern",
        size: n.fontMetrics().bigOpSpacing5
      }]
    }, n);
  } else if (s) {
    var L = t.height - u;
    x = G.makeVList({
      positionType: "top",
      positionData: L,
      children: [{
        type: "kern",
        size: n.fontMetrics().bigOpSpacing5
      }, {
        type: "elem",
        elem: s.elem,
        marginLeft: re(-r)
      }, {
        type: "kern",
        size: s.kern
      }, {
        type: "elem",
        elem: t
      }]
    }, n);
  } else if (m) {
    var A = t.depth + u;
    x = G.makeVList({
      positionType: "bottom",
      positionData: A,
      children: [{
        type: "elem",
        elem: t
      }, {
        type: "kern",
        size: m.kern
      }, {
        type: "elem",
        elem: m.elem,
        marginLeft: re(r)
      }, {
        type: "kern",
        size: n.fontMetrics().bigOpSpacing5
      }]
    }, n);
  } else
    return t;
  var a = [x];
  if (s && r !== 0 && !h) {
    var o = G.makeSpan(["mspace"], [], n);
    o.style.marginRight = re(r), a.unshift(o);
  }
  return G.makeSpan(["mop", "op-limits"], a, n);
}, w0 = ["\\smallint"], Qt = (t, e) => {
  var i, n, l = !1, r;
  t.type === "supsub" ? (i = t.sup, n = t.sub, r = ye(t.base, "op"), l = !0) : r = ye(t, "op");
  var u = e.style, h = !1;
  u.size === de.DISPLAY.size && r.symbol && !pe.contains(w0, r.name) && (h = !0);
  var s;
  if (r.symbol) {
    var m = h ? "Size2-Regular" : "Size1-Regular", c = "";
    if ((r.name === "\\oiint" || r.name === "\\oiiint") && (c = r.name.slice(1), r.name = c === "oiint" ? "\\iint" : "\\iiint"), s = G.makeSymbol(r.name, m, "math", e, ["mop", "op-symbol", h ? "large-op" : "small-op"]), c.length > 0) {
      var g = s.italic, x = G.staticSvg(c + "Size" + (h ? "2" : "1"), e);
      s = G.makeVList({
        positionType: "individualShift",
        children: [{
          type: "elem",
          elem: s,
          shift: 0
        }, {
          type: "elem",
          elem: x,
          shift: h ? 0.08 : 0
        }]
      }, e), r.name = "\\" + c, s.classes.unshift("mop"), s.italic = g;
    }
  } else if (r.body) {
    var T = Ze(r.body, e, !0);
    T.length === 1 && T[0] instanceof ct ? (s = T[0], s.classes[0] = "mop") : s = G.makeSpan(["mop"], T, e);
  } else {
    for (var L = [], A = 1; A < r.name.length; A++)
      L.push(G.mathsym(r.name[A], r.mode, e));
    s = G.makeSpan(["mop"], L, e);
  }
  var a = 0, o = 0;
  return (s instanceof ct || r.name === "\\oiint" || r.name === "\\oiiint") && !r.suppressBaseShift && (a = (s.height - s.depth) / 2 - e.fontMetrics().axisHeight, o = s.italic), l ? _0(s, i, n, e, u, o, a) : (a && (s.style.position = "relative", s.style.top = re(a)), s);
}, fi = (t, e) => {
  var i;
  if (t.symbol)
    i = new ot("mo", [ht(t.name, t.mode)]), pe.contains(w0, t.name) && i.setAttribute("largeop", "false");
  else if (t.body)
    i = new ot("mo", it(t.body, e));
  else {
    i = new ot("mi", [new si(t.name.slice(1))]);
    var n = new ot("mo", [ht("⁡", "text")]);
    t.parentIsSupSub ? i = new ot("mrow", [i, n]) : i = Gl([i, n]);
  }
  return i;
}, Qr = {
  "∏": "\\prod",
  "∐": "\\coprod",
  "∑": "\\sum",
  "⋀": "\\bigwedge",
  "⋁": "\\bigvee",
  "⋂": "\\bigcap",
  "⋃": "\\bigcup",
  "⨀": "\\bigodot",
  "⨁": "\\bigoplus",
  "⨂": "\\bigotimes",
  "⨄": "\\biguplus",
  "⨆": "\\bigsqcup"
};
oe({
  type: "op",
  names: ["\\coprod", "\\bigvee", "\\bigwedge", "\\biguplus", "\\bigcap", "\\bigcup", "\\intop", "\\prod", "\\sum", "\\bigotimes", "\\bigoplus", "\\bigodot", "\\bigsqcup", "\\smallint", "∏", "∐", "∑", "⋀", "⋁", "⋂", "⋃", "⨀", "⨁", "⨂", "⨄", "⨆"],
  props: {
    numArgs: 0
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n
    } = t, l = n;
    return l.length === 1 && (l = Qr[l]), {
      type: "op",
      mode: i.mode,
      limits: !0,
      parentIsSupSub: !1,
      symbol: !0,
      name: l
    };
  },
  htmlBuilder: Qt,
  mathmlBuilder: fi
});
oe({
  type: "op",
  names: ["\\mathop"],
  props: {
    numArgs: 1,
    primitive: !0
  },
  handler: (t, e) => {
    var {
      parser: i
    } = t, n = e[0];
    return {
      type: "op",
      mode: i.mode,
      limits: !1,
      parentIsSupSub: !1,
      symbol: !1,
      body: Ve(n)
    };
  },
  htmlBuilder: Qt,
  mathmlBuilder: fi
});
var ea = {
  "∫": "\\int",
  "∬": "\\iint",
  "∭": "\\iiint",
  "∮": "\\oint",
  "∯": "\\oiint",
  "∰": "\\oiiint"
};
oe({
  type: "op",
  names: ["\\arcsin", "\\arccos", "\\arctan", "\\arctg", "\\arcctg", "\\arg", "\\ch", "\\cos", "\\cosec", "\\cosh", "\\cot", "\\cotg", "\\coth", "\\csc", "\\ctg", "\\cth", "\\deg", "\\dim", "\\exp", "\\hom", "\\ker", "\\lg", "\\ln", "\\log", "\\sec", "\\sin", "\\sinh", "\\sh", "\\tan", "\\tanh", "\\tg", "\\th"],
  props: {
    numArgs: 0
  },
  handler(t) {
    var {
      parser: e,
      funcName: i
    } = t;
    return {
      type: "op",
      mode: e.mode,
      limits: !1,
      parentIsSupSub: !1,
      symbol: !1,
      name: i
    };
  },
  htmlBuilder: Qt,
  mathmlBuilder: fi
});
oe({
  type: "op",
  names: ["\\det", "\\gcd", "\\inf", "\\lim", "\\max", "\\min", "\\Pr", "\\sup"],
  props: {
    numArgs: 0
  },
  handler(t) {
    var {
      parser: e,
      funcName: i
    } = t;
    return {
      type: "op",
      mode: e.mode,
      limits: !0,
      parentIsSupSub: !1,
      symbol: !1,
      name: i
    };
  },
  htmlBuilder: Qt,
  mathmlBuilder: fi
});
oe({
  type: "op",
  names: ["\\int", "\\iint", "\\iiint", "\\oint", "\\oiint", "\\oiiint", "∫", "∬", "∭", "∮", "∯", "∰"],
  props: {
    numArgs: 0
  },
  handler(t) {
    var {
      parser: e,
      funcName: i
    } = t, n = i;
    return n.length === 1 && (n = ea[n]), {
      type: "op",
      mode: e.mode,
      limits: !1,
      parentIsSupSub: !1,
      symbol: !0,
      name: n
    };
  },
  htmlBuilder: Qt,
  mathmlBuilder: fi
});
var x0 = (t, e) => {
  var i, n, l = !1, r;
  t.type === "supsub" ? (i = t.sup, n = t.sub, r = ye(t.base, "operatorname"), l = !0) : r = ye(t, "operatorname");
  var u;
  if (r.body.length > 0) {
    for (var h = r.body.map((g) => {
      var x = g.text;
      return typeof x == "string" ? {
        type: "textord",
        mode: g.mode,
        text: x
      } : g;
    }), s = Ze(h, e.withFont("mathrm"), !0), m = 0; m < s.length; m++) {
      var c = s[m];
      c instanceof ct && (c.text = c.text.replace(/\u2212/, "-").replace(/\u2217/, "*"));
    }
    u = G.makeSpan(["mop"], s, e);
  } else
    u = G.makeSpan(["mop"], [], e);
  return l ? _0(u, i, n, e, e.style, 0, 0) : u;
}, ta = (t, e) => {
  for (var i = it(t.body, e.withFont("mathrm")), n = !0, l = 0; l < i.length; l++) {
    var r = i[l];
    if (!(r instanceof ee.SpaceNode))
      if (r instanceof ee.MathNode)
        switch (r.type) {
          case "mi":
          case "mn":
          case "ms":
          case "mspace":
          case "mtext":
            break;
          case "mo": {
            var u = r.children[0];
            r.children.length === 1 && u instanceof ee.TextNode ? u.text = u.text.replace(/\u2212/, "-").replace(/\u2217/, "*") : n = !1;
            break;
          }
          default:
            n = !1;
        }
      else
        n = !1;
  }
  if (n) {
    var h = i.map((c) => c.toText()).join("");
    i = [new ee.TextNode(h)];
  }
  var s = new ee.MathNode("mi", i);
  s.setAttribute("mathvariant", "normal");
  var m = new ee.MathNode("mo", [ht("⁡", "text")]);
  return t.parentIsSupSub ? new ee.MathNode("mrow", [s, m]) : ee.newDocumentFragment([s, m]);
};
oe({
  type: "operatorname",
  names: ["\\operatorname@", "\\operatornamewithlimits"],
  props: {
    numArgs: 1
  },
  handler: (t, e) => {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0];
    return {
      type: "operatorname",
      mode: i.mode,
      body: Ve(l),
      alwaysHandleSupSub: n === "\\operatornamewithlimits",
      limits: !1,
      parentIsSupSub: !1
    };
  },
  htmlBuilder: x0,
  mathmlBuilder: ta
});
E("\\operatorname", "\\@ifstar\\operatornamewithlimits\\operatorname@");
Vt({
  type: "ordgroup",
  htmlBuilder(t, e) {
    return t.semisimple ? G.makeFragment(Ze(t.body, e, !1)) : G.makeSpan(["mord"], Ze(t.body, e, !0), e);
  },
  mathmlBuilder(t, e) {
    return It(t.body, e, !0);
  }
});
oe({
  type: "overline",
  names: ["\\overline"],
  props: {
    numArgs: 1
  },
  handler(t, e) {
    var {
      parser: i
    } = t, n = e[0];
    return {
      type: "overline",
      mode: i.mode,
      body: n
    };
  },
  htmlBuilder(t, e) {
    var i = ke(t.body, e.havingCrampedStyle()), n = G.makeLineSpan("overline-line", e), l = e.fontMetrics().defaultRuleThickness, r = G.makeVList({
      positionType: "firstBaseline",
      children: [{
        type: "elem",
        elem: i
      }, {
        type: "kern",
        size: 3 * l
      }, {
        type: "elem",
        elem: n
      }, {
        type: "kern",
        size: l
      }]
    }, e);
    return G.makeSpan(["mord", "overline"], [r], e);
  },
  mathmlBuilder(t, e) {
    var i = new ee.MathNode("mo", [new ee.TextNode("‾")]);
    i.setAttribute("stretchy", "true");
    var n = new ee.MathNode("mover", [ze(t.body, e), i]);
    return n.setAttribute("accent", "true"), n;
  }
});
oe({
  type: "phantom",
  names: ["\\phantom"],
  props: {
    numArgs: 1,
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      parser: i
    } = t, n = e[0];
    return {
      type: "phantom",
      mode: i.mode,
      body: Ve(n)
    };
  },
  htmlBuilder: (t, e) => {
    var i = Ze(t.body, e.withPhantom(), !1);
    return G.makeFragment(i);
  },
  mathmlBuilder: (t, e) => {
    var i = it(t.body, e);
    return new ee.MathNode("mphantom", i);
  }
});
oe({
  type: "hphantom",
  names: ["\\hphantom"],
  props: {
    numArgs: 1,
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      parser: i
    } = t, n = e[0];
    return {
      type: "hphantom",
      mode: i.mode,
      body: n
    };
  },
  htmlBuilder: (t, e) => {
    var i = G.makeSpan([], [ke(t.body, e.withPhantom())]);
    if (i.height = 0, i.depth = 0, i.children)
      for (var n = 0; n < i.children.length; n++)
        i.children[n].height = 0, i.children[n].depth = 0;
    return i = G.makeVList({
      positionType: "firstBaseline",
      children: [{
        type: "elem",
        elem: i
      }]
    }, e), G.makeSpan(["mord"], [i], e);
  },
  mathmlBuilder: (t, e) => {
    var i = it(Ve(t.body), e), n = new ee.MathNode("mphantom", i), l = new ee.MathNode("mpadded", [n]);
    return l.setAttribute("height", "0px"), l.setAttribute("depth", "0px"), l;
  }
});
oe({
  type: "vphantom",
  names: ["\\vphantom"],
  props: {
    numArgs: 1,
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      parser: i
    } = t, n = e[0];
    return {
      type: "vphantom",
      mode: i.mode,
      body: n
    };
  },
  htmlBuilder: (t, e) => {
    var i = G.makeSpan(["inner"], [ke(t.body, e.withPhantom())]), n = G.makeSpan(["fix"], []);
    return G.makeSpan(["mord", "rlap"], [i, n], e);
  },
  mathmlBuilder: (t, e) => {
    var i = it(Ve(t.body), e), n = new ee.MathNode("mphantom", i), l = new ee.MathNode("mpadded", [n]);
    return l.setAttribute("width", "0px"), l;
  }
});
oe({
  type: "raisebox",
  names: ["\\raisebox"],
  props: {
    numArgs: 2,
    argTypes: ["size", "hbox"],
    allowedInText: !0
  },
  handler(t, e) {
    var {
      parser: i
    } = t, n = ye(e[0], "size").value, l = e[1];
    return {
      type: "raisebox",
      mode: i.mode,
      dy: n,
      body: l
    };
  },
  htmlBuilder(t, e) {
    var i = ke(t.body, e), n = Ie(t.dy, e);
    return G.makeVList({
      positionType: "shift",
      positionData: -n,
      children: [{
        type: "elem",
        elem: i
      }]
    }, e);
  },
  mathmlBuilder(t, e) {
    var i = new ee.MathNode("mpadded", [ze(t.body, e)]), n = t.dy.number + t.dy.unit;
    return i.setAttribute("voffset", n), i;
  }
});
oe({
  type: "internal",
  names: ["\\relax"],
  props: {
    numArgs: 0,
    allowedInText: !0
  },
  handler(t) {
    var {
      parser: e
    } = t;
    return {
      type: "internal",
      mode: e.mode
    };
  }
});
oe({
  type: "rule",
  names: ["\\rule"],
  props: {
    numArgs: 2,
    numOptionalArgs: 1,
    argTypes: ["size", "size", "size"]
  },
  handler(t, e, i) {
    var {
      parser: n
    } = t, l = i[0], r = ye(e[0], "size"), u = ye(e[1], "size");
    return {
      type: "rule",
      mode: n.mode,
      shift: l && ye(l, "size").value,
      width: r.value,
      height: u.value
    };
  },
  htmlBuilder(t, e) {
    var i = G.makeSpan(["mord", "rule"], [], e), n = Ie(t.width, e), l = Ie(t.height, e), r = t.shift ? Ie(t.shift, e) : 0;
    return i.style.borderRightWidth = re(n), i.style.borderTopWidth = re(l), i.style.bottom = re(r), i.width = n, i.height = l + r, i.depth = -r, i.maxFontSize = l * 1.125 * e.sizeMultiplier, i;
  },
  mathmlBuilder(t, e) {
    var i = Ie(t.width, e), n = Ie(t.height, e), l = t.shift ? Ie(t.shift, e) : 0, r = e.color && e.getColor() || "black", u = new ee.MathNode("mspace");
    u.setAttribute("mathbackground", r), u.setAttribute("width", re(i)), u.setAttribute("height", re(n));
    var h = new ee.MathNode("mpadded", [u]);
    return l >= 0 ? h.setAttribute("height", re(l)) : (h.setAttribute("height", re(l)), h.setAttribute("depth", re(-l))), h.setAttribute("voffset", re(l)), h;
  }
});
function C0(t, e, i) {
  for (var n = Ze(t, e, !1), l = e.sizeMultiplier / i.sizeMultiplier, r = 0; r < n.length; r++) {
    var u = n[r].classes.indexOf("sizing");
    u < 0 ? Array.prototype.push.apply(n[r].classes, e.sizingClasses(i)) : n[r].classes[u + 1] === "reset-size" + e.size && (n[r].classes[u + 1] = "reset-size" + i.size), n[r].height *= l, n[r].depth *= l;
  }
  return G.makeFragment(n);
}
var bl = ["\\tiny", "\\sixptsize", "\\scriptsize", "\\footnotesize", "\\small", "\\normalsize", "\\large", "\\Large", "\\LARGE", "\\huge", "\\Huge"], ia = (t, e) => {
  var i = e.havingSize(t.size);
  return C0(t.body, i, e);
};
oe({
  type: "sizing",
  names: bl,
  props: {
    numArgs: 0,
    allowedInText: !0
  },
  handler: (t, e) => {
    var {
      breakOnTokenText: i,
      funcName: n,
      parser: l
    } = t, r = l.parseExpression(!1, i);
    return {
      type: "sizing",
      mode: l.mode,
      // Figure out what size to use based on the list of functions above
      size: bl.indexOf(n) + 1,
      body: r
    };
  },
  htmlBuilder: ia,
  mathmlBuilder: (t, e) => {
    var i = e.havingSize(t.size), n = it(t.body, i), l = new ee.MathNode("mstyle", n);
    return l.setAttribute("mathsize", re(i.sizeMultiplier)), l;
  }
});
oe({
  type: "smash",
  names: ["\\smash"],
  props: {
    numArgs: 1,
    numOptionalArgs: 1,
    allowedInText: !0
  },
  handler: (t, e, i) => {
    var {
      parser: n
    } = t, l = !1, r = !1, u = i[0] && ye(i[0], "ordgroup");
    if (u)
      for (var h = "", s = 0; s < u.body.length; ++s) {
        var m = u.body[s];
        if (h = m.text, h === "t")
          l = !0;
        else if (h === "b")
          r = !0;
        else {
          l = !1, r = !1;
          break;
        }
      }
    else
      l = !0, r = !0;
    var c = e[0];
    return {
      type: "smash",
      mode: n.mode,
      body: c,
      smashHeight: l,
      smashDepth: r
    };
  },
  htmlBuilder: (t, e) => {
    var i = G.makeSpan([], [ke(t.body, e)]);
    if (!t.smashHeight && !t.smashDepth)
      return i;
    if (t.smashHeight && (i.height = 0, i.children))
      for (var n = 0; n < i.children.length; n++)
        i.children[n].height = 0;
    if (t.smashDepth && (i.depth = 0, i.children))
      for (var l = 0; l < i.children.length; l++)
        i.children[l].depth = 0;
    var r = G.makeVList({
      positionType: "firstBaseline",
      children: [{
        type: "elem",
        elem: i
      }]
    }, e);
    return G.makeSpan(["mord"], [r], e);
  },
  mathmlBuilder: (t, e) => {
    var i = new ee.MathNode("mpadded", [ze(t.body, e)]);
    return t.smashHeight && i.setAttribute("height", "0px"), t.smashDepth && i.setAttribute("depth", "0px"), i;
  }
});
oe({
  type: "sqrt",
  names: ["\\sqrt"],
  props: {
    numArgs: 1,
    numOptionalArgs: 1
  },
  handler(t, e, i) {
    var {
      parser: n
    } = t, l = i[0], r = e[0];
    return {
      type: "sqrt",
      mode: n.mode,
      body: r,
      index: l
    };
  },
  htmlBuilder(t, e) {
    var i = ke(t.body, e.havingCrampedStyle());
    i.height === 0 && (i.height = e.fontMetrics().xHeight), i = G.wrapFragment(i, e);
    var n = e.fontMetrics(), l = n.defaultRuleThickness, r = l;
    e.style.id < de.TEXT.id && (r = e.fontMetrics().xHeight);
    var u = l + r / 4, h = i.height + i.depth + u + l, {
      span: s,
      ruleWidth: m,
      advanceWidth: c
    } = Tt.sqrtImage(h, e), g = s.height - m;
    g > i.height + i.depth + u && (u = (u + g - i.height - i.depth) / 2);
    var x = s.height - i.height - u - m;
    i.style.paddingLeft = re(c);
    var T = G.makeVList({
      positionType: "firstBaseline",
      children: [{
        type: "elem",
        elem: i,
        wrapperClasses: ["svg-align"]
      }, {
        type: "kern",
        size: -(i.height + x)
      }, {
        type: "elem",
        elem: s
      }, {
        type: "kern",
        size: m
      }]
    }, e);
    if (t.index) {
      var L = e.havingStyle(de.SCRIPTSCRIPT), A = ke(t.index, L, e), a = 0.6 * (T.height - T.depth), o = G.makeVList({
        positionType: "shift",
        positionData: -a,
        children: [{
          type: "elem",
          elem: A
        }]
      }, e), d = G.makeSpan(["root"], [o]);
      return G.makeSpan(["mord", "sqrt"], [d, T], e);
    } else
      return G.makeSpan(["mord", "sqrt"], [T], e);
  },
  mathmlBuilder(t, e) {
    var {
      body: i,
      index: n
    } = t;
    return n ? new ee.MathNode("mroot", [ze(i, e), ze(n, e)]) : new ee.MathNode("msqrt", [ze(i, e)]);
  }
});
var yl = {
  display: de.DISPLAY,
  text: de.TEXT,
  script: de.SCRIPT,
  scriptscript: de.SCRIPTSCRIPT
};
oe({
  type: "styling",
  names: ["\\displaystyle", "\\textstyle", "\\scriptstyle", "\\scriptscriptstyle"],
  props: {
    numArgs: 0,
    allowedInText: !0,
    primitive: !0
  },
  handler(t, e) {
    var {
      breakOnTokenText: i,
      funcName: n,
      parser: l
    } = t, r = l.parseExpression(!0, i), u = n.slice(1, n.length - 5);
    return {
      type: "styling",
      mode: l.mode,
      // Figure out what style to use by pulling out the style from
      // the function name
      style: u,
      body: r
    };
  },
  htmlBuilder(t, e) {
    var i = yl[t.style], n = e.havingStyle(i).withFont("");
    return C0(t.body, n, e);
  },
  mathmlBuilder(t, e) {
    var i = yl[t.style], n = e.havingStyle(i), l = it(t.body, n), r = new ee.MathNode("mstyle", l), u = {
      display: ["0", "true"],
      text: ["0", "false"],
      script: ["1", "false"],
      scriptscript: ["2", "false"]
    }, h = u[t.style];
    return r.setAttribute("scriptlevel", h[0]), r.setAttribute("displaystyle", h[1]), r;
  }
});
var na = function(e, i) {
  var n = e.base;
  if (n)
    if (n.type === "op") {
      var l = n.limits && (i.style.size === de.DISPLAY.size || n.alwaysHandleSupSub);
      return l ? Qt : null;
    } else if (n.type === "operatorname") {
      var r = n.alwaysHandleSupSub && (i.style.size === de.DISPLAY.size || n.limits);
      return r ? x0 : null;
    } else {
      if (n.type === "accent")
        return pe.isCharacterBox(n.base) ? Sn : null;
      if (n.type === "horizBrace") {
        var u = !e.sub;
        return u === n.isOver ? y0 : null;
      } else
        return null;
    }
  else
    return null;
};
Vt({
  type: "supsub",
  htmlBuilder(t, e) {
    var i = na(t, e);
    if (i)
      return i(t, e);
    var {
      base: n,
      sup: l,
      sub: r
    } = t, u = ke(n, e), h, s, m = e.fontMetrics(), c = 0, g = 0, x = n && pe.isCharacterBox(n);
    if (l) {
      var T = e.havingStyle(e.style.sup());
      h = ke(l, T, e), x || (c = u.height - T.fontMetrics().supDrop * T.sizeMultiplier / e.sizeMultiplier);
    }
    if (r) {
      var L = e.havingStyle(e.style.sub());
      s = ke(r, L, e), x || (g = u.depth + L.fontMetrics().subDrop * L.sizeMultiplier / e.sizeMultiplier);
    }
    var A;
    e.style === de.DISPLAY ? A = m.sup1 : e.style.cramped ? A = m.sup3 : A = m.sup2;
    var a = e.sizeMultiplier, o = re(0.5 / m.ptPerEm / a), d = null;
    if (s) {
      var p = t.base && t.base.type === "op" && t.base.name && (t.base.name === "\\oiint" || t.base.name === "\\oiiint");
      (u instanceof ct || p) && (d = re(-u.italic));
    }
    var v;
    if (h && s) {
      c = Math.max(c, A, h.depth + 0.25 * m.xHeight), g = Math.max(g, m.sub2);
      var _ = m.defaultRuleThickness, b = 4 * _;
      if (c - h.depth - (s.height - g) < b) {
        g = b - (c - h.depth) + s.height;
        var S = 0.8 * m.xHeight - (c - h.depth);
        S > 0 && (c += S, g -= S);
      }
      var k = [{
        type: "elem",
        elem: s,
        shift: g,
        marginRight: o,
        marginLeft: d
      }, {
        type: "elem",
        elem: h,
        shift: -c,
        marginRight: o
      }];
      v = G.makeVList({
        positionType: "individualShift",
        children: k
      }, e);
    } else if (s) {
      g = Math.max(g, m.sub1, s.height - 0.8 * m.xHeight);
      var w = [{
        type: "elem",
        elem: s,
        marginLeft: d,
        marginRight: o
      }];
      v = G.makeVList({
        positionType: "shift",
        positionData: g,
        children: w
      }, e);
    } else if (h)
      c = Math.max(c, A, h.depth + 0.25 * m.xHeight), v = G.makeVList({
        positionType: "shift",
        positionData: -c,
        children: [{
          type: "elem",
          elem: h,
          marginRight: o
        }]
      }, e);
    else
      throw new Error("supsub must have either sup or sub.");
    var z = on(u, "right") || "mord";
    return G.makeSpan([z], [u, G.makeSpan(["msupsub"], [v])], e);
  },
  mathmlBuilder(t, e) {
    var i = !1, n, l;
    t.base && t.base.type === "horizBrace" && (l = !!t.sup, l === t.base.isOver && (i = !0, n = t.base.isOver)), t.base && (t.base.type === "op" || t.base.type === "operatorname") && (t.base.parentIsSupSub = !0);
    var r = [ze(t.base, e)];
    t.sub && r.push(ze(t.sub, e)), t.sup && r.push(ze(t.sup, e));
    var u;
    if (i)
      u = n ? "mover" : "munder";
    else if (t.sub)
      if (t.sup) {
        var m = t.base;
        m && m.type === "op" && m.limits && e.style === de.DISPLAY || m && m.type === "operatorname" && m.alwaysHandleSupSub && (e.style === de.DISPLAY || m.limits) ? u = "munderover" : u = "msubsup";
      } else {
        var s = t.base;
        s && s.type === "op" && s.limits && (e.style === de.DISPLAY || s.alwaysHandleSupSub) || s && s.type === "operatorname" && s.alwaysHandleSupSub && (s.limits || e.style === de.DISPLAY) ? u = "munder" : u = "msub";
      }
    else {
      var h = t.base;
      h && h.type === "op" && h.limits && (e.style === de.DISPLAY || h.alwaysHandleSupSub) || h && h.type === "operatorname" && h.alwaysHandleSupSub && (h.limits || e.style === de.DISPLAY) ? u = "mover" : u = "msup";
    }
    return new ee.MathNode(u, r);
  }
});
Vt({
  type: "atom",
  htmlBuilder(t, e) {
    return G.mathsym(t.text, t.mode, e, ["m" + t.family]);
  },
  mathmlBuilder(t, e) {
    var i = new ee.MathNode("mo", [ht(t.text, t.mode)]);
    if (t.family === "bin") {
      var n = xn(t, e);
      n === "bold-italic" && i.setAttribute("mathvariant", n);
    } else
      t.family === "punct" ? i.setAttribute("separator", "true") : (t.family === "open" || t.family === "close") && i.setAttribute("stretchy", "false");
    return i;
  }
});
var S0 = {
  mi: "italic",
  mn: "normal",
  mtext: "normal"
};
Vt({
  type: "mathord",
  htmlBuilder(t, e) {
    return G.makeOrd(t, e, "mathord");
  },
  mathmlBuilder(t, e) {
    var i = new ee.MathNode("mi", [ht(t.text, t.mode, e)]), n = xn(t, e) || "italic";
    return n !== S0[i.type] && i.setAttribute("mathvariant", n), i;
  }
});
Vt({
  type: "textord",
  htmlBuilder(t, e) {
    return G.makeOrd(t, e, "textord");
  },
  mathmlBuilder(t, e) {
    var i = ht(t.text, t.mode, e), n = xn(t, e) || "normal", l;
    return t.mode === "text" ? l = new ee.MathNode("mtext", [i]) : /[0-9]/.test(t.text) ? l = new ee.MathNode("mn", [i]) : t.text === "\\prime" ? l = new ee.MathNode("mo", [i]) : l = new ee.MathNode("mi", [i]), n !== S0[l.type] && l.setAttribute("mathvariant", n), l;
  }
});
var Qi = {
  "\\nobreak": "nobreak",
  "\\allowbreak": "allowbreak"
}, en = {
  " ": {},
  "\\ ": {},
  "~": {
    className: "nobreak"
  },
  "\\space": {},
  "\\nobreakspace": {
    className: "nobreak"
  }
};
Vt({
  type: "spacing",
  htmlBuilder(t, e) {
    if (en.hasOwnProperty(t.text)) {
      var i = en[t.text].className || "";
      if (t.mode === "text") {
        var n = G.makeOrd(t, e, "textord");
        return n.classes.push(i), n;
      } else
        return G.makeSpan(["mspace", i], [G.mathsym(t.text, t.mode, e)], e);
    } else {
      if (Qi.hasOwnProperty(t.text))
        return G.makeSpan(["mspace", Qi[t.text]], [], e);
      throw new ie('Unknown type of space "' + t.text + '"');
    }
  },
  mathmlBuilder(t, e) {
    var i;
    if (en.hasOwnProperty(t.text))
      i = new ee.MathNode("mtext", [new ee.TextNode(" ")]);
    else {
      if (Qi.hasOwnProperty(t.text))
        return new ee.MathNode("mspace");
      throw new ie('Unknown type of space "' + t.text + '"');
    }
    return i;
  }
});
var _l = () => {
  var t = new ee.MathNode("mtd", []);
  return t.setAttribute("width", "50%"), t;
};
Vt({
  type: "tag",
  mathmlBuilder(t, e) {
    var i = new ee.MathNode("mtable", [new ee.MathNode("mtr", [_l(), new ee.MathNode("mtd", [It(t.body, e)]), _l(), new ee.MathNode("mtd", [It(t.tag, e)])])]);
    return i.setAttribute("width", "100%"), i;
  }
});
var wl = {
  "\\text": void 0,
  "\\textrm": "textrm",
  "\\textsf": "textsf",
  "\\texttt": "texttt",
  "\\textnormal": "textrm"
}, xl = {
  "\\textbf": "textbf",
  "\\textmd": "textmd"
}, la = {
  "\\textit": "textit",
  "\\textup": "textup"
}, Cl = (t, e) => {
  var i = t.font;
  return i ? wl[i] ? e.withTextFontFamily(wl[i]) : xl[i] ? e.withTextFontWeight(xl[i]) : e.withTextFontShape(la[i]) : e;
};
oe({
  type: "text",
  names: [
    // Font families
    "\\text",
    "\\textrm",
    "\\textsf",
    "\\texttt",
    "\\textnormal",
    // Font weights
    "\\textbf",
    "\\textmd",
    // Font Shapes
    "\\textit",
    "\\textup"
  ],
  props: {
    numArgs: 1,
    argTypes: ["text"],
    allowedInArgument: !0,
    allowedInText: !0
  },
  handler(t, e) {
    var {
      parser: i,
      funcName: n
    } = t, l = e[0];
    return {
      type: "text",
      mode: i.mode,
      body: Ve(l),
      font: n
    };
  },
  htmlBuilder(t, e) {
    var i = Cl(t, e), n = Ze(t.body, i, !0);
    return G.makeSpan(["mord", "text"], n, i);
  },
  mathmlBuilder(t, e) {
    var i = Cl(t, e);
    return It(t.body, i);
  }
});
oe({
  type: "underline",
  names: ["\\underline"],
  props: {
    numArgs: 1,
    allowedInText: !0
  },
  handler(t, e) {
    var {
      parser: i
    } = t;
    return {
      type: "underline",
      mode: i.mode,
      body: e[0]
    };
  },
  htmlBuilder(t, e) {
    var i = ke(t.body, e), n = G.makeLineSpan("underline-line", e), l = e.fontMetrics().defaultRuleThickness, r = G.makeVList({
      positionType: "top",
      positionData: i.height,
      children: [{
        type: "kern",
        size: l
      }, {
        type: "elem",
        elem: n
      }, {
        type: "kern",
        size: 3 * l
      }, {
        type: "elem",
        elem: i
      }]
    }, e);
    return G.makeSpan(["mord", "underline"], [r], e);
  },
  mathmlBuilder(t, e) {
    var i = new ee.MathNode("mo", [new ee.TextNode("‾")]);
    i.setAttribute("stretchy", "true");
    var n = new ee.MathNode("munder", [ze(t.body, e), i]);
    return n.setAttribute("accentunder", "true"), n;
  }
});
oe({
  type: "vcenter",
  names: ["\\vcenter"],
  props: {
    numArgs: 1,
    argTypes: ["original"],
    // In LaTeX, \vcenter can act only on a box.
    allowedInText: !1
  },
  handler(t, e) {
    var {
      parser: i
    } = t;
    return {
      type: "vcenter",
      mode: i.mode,
      body: e[0]
    };
  },
  htmlBuilder(t, e) {
    var i = ke(t.body, e), n = e.fontMetrics().axisHeight, l = 0.5 * (i.height - n - (i.depth + n));
    return G.makeVList({
      positionType: "shift",
      positionData: l,
      children: [{
        type: "elem",
        elem: i
      }]
    }, e);
  },
  mathmlBuilder(t, e) {
    return new ee.MathNode("mpadded", [ze(t.body, e)], ["vcenter"]);
  }
});
oe({
  type: "verb",
  names: ["\\verb"],
  props: {
    numArgs: 0,
    allowedInText: !0
  },
  handler(t, e, i) {
    throw new ie("\\verb ended by end of line instead of matching delimiter");
  },
  htmlBuilder(t, e) {
    for (var i = Sl(t), n = [], l = e.havingStyle(e.style.text()), r = 0; r < i.length; r++) {
      var u = i[r];
      u === "~" && (u = "\\textasciitilde"), n.push(G.makeSymbol(u, "Typewriter-Regular", t.mode, l, ["mord", "texttt"]));
    }
    return G.makeSpan(["mord", "text"].concat(l.sizingClasses(e)), G.tryCombineChars(n), l);
  },
  mathmlBuilder(t, e) {
    var i = new ee.TextNode(Sl(t)), n = new ee.MathNode("mtext", [i]);
    return n.setAttribute("mathvariant", "monospace"), n;
  }
});
var Sl = (t) => t.body.replace(/ /g, t.star ? "␣" : " "), Nt = Yl, k0 = `[ \r
	]`, sa = "\\\\[a-zA-Z@]+", ra = "\\\\[^\uD800-\uDFFF]", aa = "(" + sa + ")" + k0 + "*", oa = `\\\\(
|[ \r	]+
?)[ \r	]*`, dn = "[̀-ͯ]", ua = new RegExp(dn + "+$"), ca = "(" + k0 + "+)|" + // whitespace
(oa + "|") + // \whitespace
"([!-\\[\\]-‧‪-퟿豈-￿]" + // single codepoint
(dn + "*") + // ...plus accents
"|[\uD800-\uDBFF][\uDC00-\uDFFF]" + // surrogate pair
(dn + "*") + // ...plus accents
"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5" + // \verb unstarred
("|" + aa) + // \macroName + spaces
("|" + ra + ")");
class kl {
  // Category codes. The lexer only supports comment characters (14) for now.
  // MacroExpander additionally distinguishes active (13).
  constructor(e, i) {
    this.input = void 0, this.settings = void 0, this.tokenRegex = void 0, this.catcodes = void 0, this.input = e, this.settings = i, this.tokenRegex = new RegExp(ca, "g"), this.catcodes = {
      "%": 14,
      // comment character
      "~": 13
      // active character
    };
  }
  setCatcode(e, i) {
    this.catcodes[e] = i;
  }
  /**
   * This function lexes a single token.
   */
  lex() {
    var e = this.input, i = this.tokenRegex.lastIndex;
    if (i === e.length)
      return new vt("EOF", new lt(this, i, i));
    var n = this.tokenRegex.exec(e);
    if (n === null || n.index !== i)
      throw new ie("Unexpected character: '" + e[i] + "'", new vt(e[i], new lt(this, i, i + 1)));
    var l = n[6] || n[3] || (n[2] ? "\\ " : " ");
    if (this.catcodes[l] === 14) {
      var r = e.indexOf(`
`, this.tokenRegex.lastIndex);
      return r === -1 ? (this.tokenRegex.lastIndex = e.length, this.settings.reportNonstrict("commentAtEnd", "% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")) : this.tokenRegex.lastIndex = r + 1, this.lex();
    }
    return new vt(l, new lt(this, i, this.tokenRegex.lastIndex));
  }
}
class ha {
  /**
   * Both arguments are optional.  The first argument is an object of
   * built-in mappings which never change.  The second argument is an object
   * of initial (global-level) mappings, which will constantly change
   * according to any global/top-level `set`s done.
   */
  constructor(e, i) {
    e === void 0 && (e = {}), i === void 0 && (i = {}), this.current = void 0, this.builtins = void 0, this.undefStack = void 0, this.current = i, this.builtins = e, this.undefStack = [];
  }
  /**
   * Start a new nested group, affecting future local `set`s.
   */
  beginGroup() {
    this.undefStack.push({});
  }
  /**
   * End current nested group, restoring values before the group began.
   */
  endGroup() {
    if (this.undefStack.length === 0)
      throw new ie("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");
    var e = this.undefStack.pop();
    for (var i in e)
      e.hasOwnProperty(i) && (e[i] == null ? delete this.current[i] : this.current[i] = e[i]);
  }
  /**
   * Ends all currently nested groups (if any), restoring values before the
   * groups began.  Useful in case of an error in the middle of parsing.
   */
  endGroups() {
    for (; this.undefStack.length > 0; )
      this.endGroup();
  }
  /**
   * Detect whether `name` has a definition.  Equivalent to
   * `get(name) != null`.
   */
  has(e) {
    return this.current.hasOwnProperty(e) || this.builtins.hasOwnProperty(e);
  }
  /**
   * Get the current value of a name, or `undefined` if there is no value.
   *
   * Note: Do not use `if (namespace.get(...))` to detect whether a macro
   * is defined, as the definition may be the empty string which evaluates
   * to `false` in JavaScript.  Use `if (namespace.get(...) != null)` or
   * `if (namespace.has(...))`.
   */
  get(e) {
    return this.current.hasOwnProperty(e) ? this.current[e] : this.builtins[e];
  }
  /**
   * Set the current value of a name, and optionally set it globally too.
   * Local set() sets the current value and (when appropriate) adds an undo
   * operation to the undo stack.  Global set() may change the undo
   * operation at every level, so takes time linear in their number.
   * A value of undefined means to delete existing definitions.
   */
  set(e, i, n) {
    if (n === void 0 && (n = !1), n) {
      for (var l = 0; l < this.undefStack.length; l++)
        delete this.undefStack[l][e];
      this.undefStack.length > 0 && (this.undefStack[this.undefStack.length - 1][e] = i);
    } else {
      var r = this.undefStack[this.undefStack.length - 1];
      r && !r.hasOwnProperty(e) && (r[e] = this.current[e]);
    }
    i == null ? delete this.current[e] : this.current[e] = i;
  }
}
var da = m0;
E("\\noexpand", function(t) {
  var e = t.popToken();
  return t.isExpandable(e.text) && (e.noexpand = !0, e.treatAsRelax = !0), {
    tokens: [e],
    numArgs: 0
  };
});
E("\\expandafter", function(t) {
  var e = t.popToken();
  return t.expandOnce(!0), {
    tokens: [e],
    numArgs: 0
  };
});
E("\\@firstoftwo", function(t) {
  var e = t.consumeArgs(2);
  return {
    tokens: e[0],
    numArgs: 0
  };
});
E("\\@secondoftwo", function(t) {
  var e = t.consumeArgs(2);
  return {
    tokens: e[1],
    numArgs: 0
  };
});
E("\\@ifnextchar", function(t) {
  var e = t.consumeArgs(3);
  t.consumeSpaces();
  var i = t.future();
  return e[0].length === 1 && e[0][0].text === i.text ? {
    tokens: e[1],
    numArgs: 0
  } : {
    tokens: e[2],
    numArgs: 0
  };
});
E("\\@ifstar", "\\@ifnextchar *{\\@firstoftwo{#1}}");
E("\\TextOrMath", function(t) {
  var e = t.consumeArgs(2);
  return t.mode === "text" ? {
    tokens: e[0],
    numArgs: 0
  } : {
    tokens: e[1],
    numArgs: 0
  };
});
var Tl = {
  0: 0,
  1: 1,
  2: 2,
  3: 3,
  4: 4,
  5: 5,
  6: 6,
  7: 7,
  8: 8,
  9: 9,
  a: 10,
  A: 10,
  b: 11,
  B: 11,
  c: 12,
  C: 12,
  d: 13,
  D: 13,
  e: 14,
  E: 14,
  f: 15,
  F: 15
};
E("\\char", function(t) {
  var e = t.popToken(), i, n = "";
  if (e.text === "'")
    i = 8, e = t.popToken();
  else if (e.text === '"')
    i = 16, e = t.popToken();
  else if (e.text === "`")
    if (e = t.popToken(), e.text[0] === "\\")
      n = e.text.charCodeAt(1);
    else {
      if (e.text === "EOF")
        throw new ie("\\char` missing argument");
      n = e.text.charCodeAt(0);
    }
  else
    i = 10;
  if (i) {
    if (n = Tl[e.text], n == null || n >= i)
      throw new ie("Invalid base-" + i + " digit " + e.text);
    for (var l; (l = Tl[t.future().text]) != null && l < i; )
      n *= i, n += l, t.popToken();
  }
  return "\\@char{" + n + "}";
});
var Bn = (t, e, i) => {
  var n = t.consumeArg().tokens;
  if (n.length !== 1)
    throw new ie("\\newcommand's first argument must be a macro name");
  var l = n[0].text, r = t.isDefined(l);
  if (r && !e)
    throw new ie("\\newcommand{" + l + "} attempting to redefine " + (l + "; use \\renewcommand"));
  if (!r && !i)
    throw new ie("\\renewcommand{" + l + "} when command " + l + " does not yet exist; use \\newcommand");
  var u = 0;
  if (n = t.consumeArg().tokens, n.length === 1 && n[0].text === "[") {
    for (var h = "", s = t.expandNextToken(); s.text !== "]" && s.text !== "EOF"; )
      h += s.text, s = t.expandNextToken();
    if (!h.match(/^\s*[0-9]+\s*$/))
      throw new ie("Invalid number of arguments: " + h);
    u = parseInt(h), n = t.consumeArg().tokens;
  }
  return t.macros.set(l, {
    tokens: n,
    numArgs: u
  }), "";
};
E("\\newcommand", (t) => Bn(t, !1, !0));
E("\\renewcommand", (t) => Bn(t, !0, !1));
E("\\providecommand", (t) => Bn(t, !0, !0));
E("\\message", (t) => {
  var e = t.consumeArgs(1)[0];
  return console.log(e.reverse().map((i) => i.text).join("")), "";
});
E("\\errmessage", (t) => {
  var e = t.consumeArgs(1)[0];
  return console.error(e.reverse().map((i) => i.text).join("")), "";
});
E("\\show", (t) => {
  var e = t.popToken(), i = e.text;
  return console.log(e, t.macros.get(i), Nt[i], Ne.math[i], Ne.text[i]), "";
});
E("\\bgroup", "{");
E("\\egroup", "}");
E("~", "\\nobreakspace");
E("\\lq", "`");
E("\\rq", "'");
E("\\aa", "\\r a");
E("\\AA", "\\r A");
E("\\textcopyright", "\\html@mathml{\\textcircled{c}}{\\char`©}");
E("\\copyright", "\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");
E("\\textregistered", "\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}");
E("ℬ", "\\mathscr{B}");
E("ℰ", "\\mathscr{E}");
E("ℱ", "\\mathscr{F}");
E("ℋ", "\\mathscr{H}");
E("ℐ", "\\mathscr{I}");
E("ℒ", "\\mathscr{L}");
E("ℳ", "\\mathscr{M}");
E("ℛ", "\\mathscr{R}");
E("ℭ", "\\mathfrak{C}");
E("ℌ", "\\mathfrak{H}");
E("ℨ", "\\mathfrak{Z}");
E("\\Bbbk", "\\Bbb{k}");
E("·", "\\cdotp");
E("\\llap", "\\mathllap{\\textrm{#1}}");
E("\\rlap", "\\mathrlap{\\textrm{#1}}");
E("\\clap", "\\mathclap{\\textrm{#1}}");
E("\\mathstrut", "\\vphantom{(}");
E("\\underbar", "\\underline{\\text{#1}}");
E("\\not", '\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');
E("\\neq", "\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}");
E("\\ne", "\\neq");
E("≠", "\\neq");
E("\\notin", "\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}");
E("∉", "\\notin");
E("≘", "\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}");
E("≙", "\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}");
E("≚", "\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}");
E("≛", "\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}");
E("≝", "\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}");
E("≞", "\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}");
E("≟", "\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}");
E("⟂", "\\perp");
E("‼", "\\mathclose{!\\mkern-0.8mu!}");
E("∌", "\\notni");
E("⌜", "\\ulcorner");
E("⌝", "\\urcorner");
E("⌞", "\\llcorner");
E("⌟", "\\lrcorner");
E("©", "\\copyright");
E("®", "\\textregistered");
E("️", "\\textregistered");
E("\\ulcorner", '\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');
E("\\urcorner", '\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');
E("\\llcorner", '\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');
E("\\lrcorner", '\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');
E("\\vdots", "\\mathord{\\varvdots\\rule{0pt}{15pt}}");
E("⋮", "\\vdots");
E("\\varGamma", "\\mathit{\\Gamma}");
E("\\varDelta", "\\mathit{\\Delta}");
E("\\varTheta", "\\mathit{\\Theta}");
E("\\varLambda", "\\mathit{\\Lambda}");
E("\\varXi", "\\mathit{\\Xi}");
E("\\varPi", "\\mathit{\\Pi}");
E("\\varSigma", "\\mathit{\\Sigma}");
E("\\varUpsilon", "\\mathit{\\Upsilon}");
E("\\varPhi", "\\mathit{\\Phi}");
E("\\varPsi", "\\mathit{\\Psi}");
E("\\varOmega", "\\mathit{\\Omega}");
E("\\substack", "\\begin{subarray}{c}#1\\end{subarray}");
E("\\colon", "\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");
E("\\boxed", "\\fbox{$\\displaystyle{#1}$}");
E("\\iff", "\\DOTSB\\;\\Longleftrightarrow\\;");
E("\\implies", "\\DOTSB\\;\\Longrightarrow\\;");
E("\\impliedby", "\\DOTSB\\;\\Longleftarrow\\;");
var El = {
  ",": "\\dotsc",
  "\\not": "\\dotsb",
  // \keybin@ checks for the following:
  "+": "\\dotsb",
  "=": "\\dotsb",
  "<": "\\dotsb",
  ">": "\\dotsb",
  "-": "\\dotsb",
  "*": "\\dotsb",
  ":": "\\dotsb",
  // Symbols whose definition starts with \DOTSB:
  "\\DOTSB": "\\dotsb",
  "\\coprod": "\\dotsb",
  "\\bigvee": "\\dotsb",
  "\\bigwedge": "\\dotsb",
  "\\biguplus": "\\dotsb",
  "\\bigcap": "\\dotsb",
  "\\bigcup": "\\dotsb",
  "\\prod": "\\dotsb",
  "\\sum": "\\dotsb",
  "\\bigotimes": "\\dotsb",
  "\\bigoplus": "\\dotsb",
  "\\bigodot": "\\dotsb",
  "\\bigsqcup": "\\dotsb",
  "\\And": "\\dotsb",
  "\\longrightarrow": "\\dotsb",
  "\\Longrightarrow": "\\dotsb",
  "\\longleftarrow": "\\dotsb",
  "\\Longleftarrow": "\\dotsb",
  "\\longleftrightarrow": "\\dotsb",
  "\\Longleftrightarrow": "\\dotsb",
  "\\mapsto": "\\dotsb",
  "\\longmapsto": "\\dotsb",
  "\\hookrightarrow": "\\dotsb",
  "\\doteq": "\\dotsb",
  // Symbols whose definition starts with \mathbin:
  "\\mathbin": "\\dotsb",
  // Symbols whose definition starts with \mathrel:
  "\\mathrel": "\\dotsb",
  "\\relbar": "\\dotsb",
  "\\Relbar": "\\dotsb",
  "\\xrightarrow": "\\dotsb",
  "\\xleftarrow": "\\dotsb",
  // Symbols whose definition starts with \DOTSI:
  "\\DOTSI": "\\dotsi",
  "\\int": "\\dotsi",
  "\\oint": "\\dotsi",
  "\\iint": "\\dotsi",
  "\\iiint": "\\dotsi",
  "\\iiiint": "\\dotsi",
  "\\idotsint": "\\dotsi",
  // Symbols whose definition starts with \DOTSX:
  "\\DOTSX": "\\dotsx"
};
E("\\dots", function(t) {
  var e = "\\dotso", i = t.expandAfterFuture().text;
  return i in El ? e = El[i] : (i.slice(0, 4) === "\\not" || i in Ne.math && pe.contains(["bin", "rel"], Ne.math[i].group)) && (e = "\\dotsb"), e;
});
var Nn = {
  // \rightdelim@ checks for the following:
  ")": !0,
  "]": !0,
  "\\rbrack": !0,
  "\\}": !0,
  "\\rbrace": !0,
  "\\rangle": !0,
  "\\rceil": !0,
  "\\rfloor": !0,
  "\\rgroup": !0,
  "\\rmoustache": !0,
  "\\right": !0,
  "\\bigr": !0,
  "\\biggr": !0,
  "\\Bigr": !0,
  "\\Biggr": !0,
  // \extra@ also tests for the following:
  $: !0,
  // \extrap@ checks for the following:
  ";": !0,
  ".": !0,
  ",": !0
};
E("\\dotso", function(t) {
  var e = t.future().text;
  return e in Nn ? "\\ldots\\," : "\\ldots";
});
E("\\dotsc", function(t) {
  var e = t.future().text;
  return e in Nn && e !== "," ? "\\ldots\\," : "\\ldots";
});
E("\\cdots", function(t) {
  var e = t.future().text;
  return e in Nn ? "\\@cdots\\," : "\\@cdots";
});
E("\\dotsb", "\\cdots");
E("\\dotsm", "\\cdots");
E("\\dotsi", "\\!\\cdots");
E("\\dotsx", "\\ldots\\,");
E("\\DOTSI", "\\relax");
E("\\DOTSB", "\\relax");
E("\\DOTSX", "\\relax");
E("\\tmspace", "\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");
E("\\,", "\\tmspace+{3mu}{.1667em}");
E("\\thinspace", "\\,");
E("\\>", "\\mskip{4mu}");
E("\\:", "\\tmspace+{4mu}{.2222em}");
E("\\medspace", "\\:");
E("\\;", "\\tmspace+{5mu}{.2777em}");
E("\\thickspace", "\\;");
E("\\!", "\\tmspace-{3mu}{.1667em}");
E("\\negthinspace", "\\!");
E("\\negmedspace", "\\tmspace-{4mu}{.2222em}");
E("\\negthickspace", "\\tmspace-{5mu}{.277em}");
E("\\enspace", "\\kern.5em ");
E("\\enskip", "\\hskip.5em\\relax");
E("\\quad", "\\hskip1em\\relax");
E("\\qquad", "\\hskip2em\\relax");
E("\\tag", "\\@ifstar\\tag@literal\\tag@paren");
E("\\tag@paren", "\\tag@literal{({#1})}");
E("\\tag@literal", (t) => {
  if (t.macros.get("\\df@tag"))
    throw new ie("Multiple \\tag");
  return "\\gdef\\df@tag{\\text{#1}}";
});
E("\\bmod", "\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");
E("\\pod", "\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");
E("\\pmod", "\\pod{{\\rm mod}\\mkern6mu#1}");
E("\\mod", "\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");
E("\\newline", "\\\\\\relax");
E("\\TeX", "\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");
var T0 = re(gt["Main-Regular"]["T".charCodeAt(0)][1] - 0.7 * gt["Main-Regular"]["A".charCodeAt(0)][1]);
E("\\LaTeX", "\\textrm{\\html@mathml{" + ("L\\kern-.36em\\raisebox{" + T0 + "}{\\scriptstyle A}") + "\\kern-.15em\\TeX}{LaTeX}}");
E("\\KaTeX", "\\textrm{\\html@mathml{" + ("K\\kern-.17em\\raisebox{" + T0 + "}{\\scriptstyle A}") + "\\kern-.15em\\TeX}{KaTeX}}");
E("\\hspace", "\\@ifstar\\@hspacer\\@hspace");
E("\\@hspace", "\\hskip #1\\relax");
E("\\@hspacer", "\\rule{0pt}{0pt}\\hskip #1\\relax");
E("\\ordinarycolon", ":");
E("\\vcentcolon", "\\mathrel{\\mathop\\ordinarycolon}");
E("\\dblcolon", '\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');
E("\\coloneqq", '\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');
E("\\Coloneqq", '\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');
E("\\coloneq", '\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');
E("\\Coloneq", '\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');
E("\\eqqcolon", '\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');
E("\\Eqqcolon", '\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');
E("\\eqcolon", '\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');
E("\\Eqcolon", '\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');
E("\\colonapprox", '\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');
E("\\Colonapprox", '\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');
E("\\colonsim", '\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');
E("\\Colonsim", '\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');
E("∷", "\\dblcolon");
E("∹", "\\eqcolon");
E("≔", "\\coloneqq");
E("≕", "\\eqqcolon");
E("⩴", "\\Coloneqq");
E("\\ratio", "\\vcentcolon");
E("\\coloncolon", "\\dblcolon");
E("\\colonequals", "\\coloneqq");
E("\\coloncolonequals", "\\Coloneqq");
E("\\equalscolon", "\\eqqcolon");
E("\\equalscoloncolon", "\\Eqqcolon");
E("\\colonminus", "\\coloneq");
E("\\coloncolonminus", "\\Coloneq");
E("\\minuscolon", "\\eqcolon");
E("\\minuscoloncolon", "\\Eqcolon");
E("\\coloncolonapprox", "\\Colonapprox");
E("\\coloncolonsim", "\\Colonsim");
E("\\simcolon", "\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");
E("\\simcoloncolon", "\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");
E("\\approxcolon", "\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");
E("\\approxcoloncolon", "\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");
E("\\notni", "\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}");
E("\\limsup", "\\DOTSB\\operatorname*{lim\\,sup}");
E("\\liminf", "\\DOTSB\\operatorname*{lim\\,inf}");
E("\\injlim", "\\DOTSB\\operatorname*{inj\\,lim}");
E("\\projlim", "\\DOTSB\\operatorname*{proj\\,lim}");
E("\\varlimsup", "\\DOTSB\\operatorname*{\\overline{lim}}");
E("\\varliminf", "\\DOTSB\\operatorname*{\\underline{lim}}");
E("\\varinjlim", "\\DOTSB\\operatorname*{\\underrightarrow{lim}}");
E("\\varprojlim", "\\DOTSB\\operatorname*{\\underleftarrow{lim}}");
E("\\gvertneqq", "\\html@mathml{\\@gvertneqq}{≩}");
E("\\lvertneqq", "\\html@mathml{\\@lvertneqq}{≨}");
E("\\ngeqq", "\\html@mathml{\\@ngeqq}{≱}");
E("\\ngeqslant", "\\html@mathml{\\@ngeqslant}{≱}");
E("\\nleqq", "\\html@mathml{\\@nleqq}{≰}");
E("\\nleqslant", "\\html@mathml{\\@nleqslant}{≰}");
E("\\nshortmid", "\\html@mathml{\\@nshortmid}{∤}");
E("\\nshortparallel", "\\html@mathml{\\@nshortparallel}{∦}");
E("\\nsubseteqq", "\\html@mathml{\\@nsubseteqq}{⊈}");
E("\\nsupseteqq", "\\html@mathml{\\@nsupseteqq}{⊉}");
E("\\varsubsetneq", "\\html@mathml{\\@varsubsetneq}{⊊}");
E("\\varsubsetneqq", "\\html@mathml{\\@varsubsetneqq}{⫋}");
E("\\varsupsetneq", "\\html@mathml{\\@varsupsetneq}{⊋}");
E("\\varsupsetneqq", "\\html@mathml{\\@varsupsetneqq}{⫌}");
E("\\imath", "\\html@mathml{\\@imath}{ı}");
E("\\jmath", "\\html@mathml{\\@jmath}{ȷ}");
E("\\llbracket", "\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}");
E("\\rrbracket", "\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}");
E("⟦", "\\llbracket");
E("⟧", "\\rrbracket");
E("\\lBrace", "\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}");
E("\\rBrace", "\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}");
E("⦃", "\\lBrace");
E("⦄", "\\rBrace");
E("\\minuso", "\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}");
E("⦵", "\\minuso");
E("\\darr", "\\downarrow");
E("\\dArr", "\\Downarrow");
E("\\Darr", "\\Downarrow");
E("\\lang", "\\langle");
E("\\rang", "\\rangle");
E("\\uarr", "\\uparrow");
E("\\uArr", "\\Uparrow");
E("\\Uarr", "\\Uparrow");
E("\\N", "\\mathbb{N}");
E("\\R", "\\mathbb{R}");
E("\\Z", "\\mathbb{Z}");
E("\\alef", "\\aleph");
E("\\alefsym", "\\aleph");
E("\\Alpha", "\\mathrm{A}");
E("\\Beta", "\\mathrm{B}");
E("\\bull", "\\bullet");
E("\\Chi", "\\mathrm{X}");
E("\\clubs", "\\clubsuit");
E("\\cnums", "\\mathbb{C}");
E("\\Complex", "\\mathbb{C}");
E("\\Dagger", "\\ddagger");
E("\\diamonds", "\\diamondsuit");
E("\\empty", "\\emptyset");
E("\\Epsilon", "\\mathrm{E}");
E("\\Eta", "\\mathrm{H}");
E("\\exist", "\\exists");
E("\\harr", "\\leftrightarrow");
E("\\hArr", "\\Leftrightarrow");
E("\\Harr", "\\Leftrightarrow");
E("\\hearts", "\\heartsuit");
E("\\image", "\\Im");
E("\\infin", "\\infty");
E("\\Iota", "\\mathrm{I}");
E("\\isin", "\\in");
E("\\Kappa", "\\mathrm{K}");
E("\\larr", "\\leftarrow");
E("\\lArr", "\\Leftarrow");
E("\\Larr", "\\Leftarrow");
E("\\lrarr", "\\leftrightarrow");
E("\\lrArr", "\\Leftrightarrow");
E("\\Lrarr", "\\Leftrightarrow");
E("\\Mu", "\\mathrm{M}");
E("\\natnums", "\\mathbb{N}");
E("\\Nu", "\\mathrm{N}");
E("\\Omicron", "\\mathrm{O}");
E("\\plusmn", "\\pm");
E("\\rarr", "\\rightarrow");
E("\\rArr", "\\Rightarrow");
E("\\Rarr", "\\Rightarrow");
E("\\real", "\\Re");
E("\\reals", "\\mathbb{R}");
E("\\Reals", "\\mathbb{R}");
E("\\Rho", "\\mathrm{P}");
E("\\sdot", "\\cdot");
E("\\sect", "\\S");
E("\\spades", "\\spadesuit");
E("\\sub", "\\subset");
E("\\sube", "\\subseteq");
E("\\supe", "\\supseteq");
E("\\Tau", "\\mathrm{T}");
E("\\thetasym", "\\vartheta");
E("\\weierp", "\\wp");
E("\\Zeta", "\\mathrm{Z}");
E("\\argmin", "\\DOTSB\\operatorname*{arg\\,min}");
E("\\argmax", "\\DOTSB\\operatorname*{arg\\,max}");
E("\\plim", "\\DOTSB\\mathop{\\operatorname{plim}}\\limits");
E("\\bra", "\\mathinner{\\langle{#1}|}");
E("\\ket", "\\mathinner{|{#1}\\rangle}");
E("\\braket", "\\mathinner{\\langle{#1}\\rangle}");
E("\\Bra", "\\left\\langle#1\\right|");
E("\\Ket", "\\left|#1\\right\\rangle");
var E0 = (t) => (e) => {
  var i = e.consumeArg().tokens, n = e.consumeArg().tokens, l = e.consumeArg().tokens, r = e.consumeArg().tokens, u = e.macros.get("|"), h = e.macros.get("\\|");
  e.macros.beginGroup();
  var s = (g) => (x) => {
    t && (x.macros.set("|", u), l.length && x.macros.set("\\|", h));
    var T = g;
    if (!g && l.length) {
      var L = x.future();
      L.text === "|" && (x.popToken(), T = !0);
    }
    return {
      tokens: T ? l : n,
      numArgs: 0
    };
  };
  e.macros.set("|", s(!1)), l.length && e.macros.set("\\|", s(!0));
  var m = e.consumeArg().tokens, c = e.expandTokens([
    ...r,
    ...m,
    ...i
    // reversed
  ]);
  return e.macros.endGroup(), {
    tokens: c.reverse(),
    numArgs: 0
  };
};
E("\\bra@ket", E0(!1));
E("\\bra@set", E0(!0));
E("\\Braket", "\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");
E("\\Set", "\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");
E("\\set", "\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");
E("\\angln", "{\\angl n}");
E("\\blue", "\\textcolor{##6495ed}{#1}");
E("\\orange", "\\textcolor{##ffa500}{#1}");
E("\\pink", "\\textcolor{##ff00af}{#1}");
E("\\red", "\\textcolor{##df0030}{#1}");
E("\\green", "\\textcolor{##28ae7b}{#1}");
E("\\gray", "\\textcolor{gray}{#1}");
E("\\purple", "\\textcolor{##9d38bd}{#1}");
E("\\blueA", "\\textcolor{##ccfaff}{#1}");
E("\\blueB", "\\textcolor{##80f6ff}{#1}");
E("\\blueC", "\\textcolor{##63d9ea}{#1}");
E("\\blueD", "\\textcolor{##11accd}{#1}");
E("\\blueE", "\\textcolor{##0c7f99}{#1}");
E("\\tealA", "\\textcolor{##94fff5}{#1}");
E("\\tealB", "\\textcolor{##26edd5}{#1}");
E("\\tealC", "\\textcolor{##01d1c1}{#1}");
E("\\tealD", "\\textcolor{##01a995}{#1}");
E("\\tealE", "\\textcolor{##208170}{#1}");
E("\\greenA", "\\textcolor{##b6ffb0}{#1}");
E("\\greenB", "\\textcolor{##8af281}{#1}");
E("\\greenC", "\\textcolor{##74cf70}{#1}");
E("\\greenD", "\\textcolor{##1fab54}{#1}");
E("\\greenE", "\\textcolor{##0d923f}{#1}");
E("\\goldA", "\\textcolor{##ffd0a9}{#1}");
E("\\goldB", "\\textcolor{##ffbb71}{#1}");
E("\\goldC", "\\textcolor{##ff9c39}{#1}");
E("\\goldD", "\\textcolor{##e07d10}{#1}");
E("\\goldE", "\\textcolor{##a75a05}{#1}");
E("\\redA", "\\textcolor{##fca9a9}{#1}");
E("\\redB", "\\textcolor{##ff8482}{#1}");
E("\\redC", "\\textcolor{##f9685d}{#1}");
E("\\redD", "\\textcolor{##e84d39}{#1}");
E("\\redE", "\\textcolor{##bc2612}{#1}");
E("\\maroonA", "\\textcolor{##ffbde0}{#1}");
E("\\maroonB", "\\textcolor{##ff92c6}{#1}");
E("\\maroonC", "\\textcolor{##ed5fa6}{#1}");
E("\\maroonD", "\\textcolor{##ca337c}{#1}");
E("\\maroonE", "\\textcolor{##9e034e}{#1}");
E("\\purpleA", "\\textcolor{##ddd7ff}{#1}");
E("\\purpleB", "\\textcolor{##c6b9fc}{#1}");
E("\\purpleC", "\\textcolor{##aa87ff}{#1}");
E("\\purpleD", "\\textcolor{##7854ab}{#1}");
E("\\purpleE", "\\textcolor{##543b78}{#1}");
E("\\mintA", "\\textcolor{##f5f9e8}{#1}");
E("\\mintB", "\\textcolor{##edf2df}{#1}");
E("\\mintC", "\\textcolor{##e0e5cc}{#1}");
E("\\grayA", "\\textcolor{##f6f7f7}{#1}");
E("\\grayB", "\\textcolor{##f0f1f2}{#1}");
E("\\grayC", "\\textcolor{##e3e5e6}{#1}");
E("\\grayD", "\\textcolor{##d6d8da}{#1}");
E("\\grayE", "\\textcolor{##babec2}{#1}");
E("\\grayF", "\\textcolor{##888d93}{#1}");
E("\\grayG", "\\textcolor{##626569}{#1}");
E("\\grayH", "\\textcolor{##3b3e40}{#1}");
E("\\grayI", "\\textcolor{##21242c}{#1}");
E("\\kaBlue", "\\textcolor{##314453}{#1}");
E("\\kaGreen", "\\textcolor{##71B307}{#1}");
var L0 = {
  "^": !0,
  // Parser.js
  _: !0,
  // Parser.js
  "\\limits": !0,
  // Parser.js
  "\\nolimits": !0
  // Parser.js
};
class fa {
  constructor(e, i, n) {
    this.settings = void 0, this.expansionCount = void 0, this.lexer = void 0, this.macros = void 0, this.stack = void 0, this.mode = void 0, this.settings = i, this.expansionCount = 0, this.feed(e), this.macros = new ha(da, i.macros), this.mode = n, this.stack = [];
  }
  /**
   * Feed a new input string to the same MacroExpander
   * (with existing macros etc.).
   */
  feed(e) {
    this.lexer = new kl(e, this.settings);
  }
  /**
   * Switches between "text" and "math" modes.
   */
  switchMode(e) {
    this.mode = e;
  }
  /**
   * Start a new group nesting within all namespaces.
   */
  beginGroup() {
    this.macros.beginGroup();
  }
  /**
   * End current group nesting within all namespaces.
   */
  endGroup() {
    this.macros.endGroup();
  }
  /**
   * Ends all currently nested groups (if any), restoring values before the
   * groups began.  Useful in case of an error in the middle of parsing.
   */
  endGroups() {
    this.macros.endGroups();
  }
  /**
   * Returns the topmost token on the stack, without expanding it.
   * Similar in behavior to TeX's `\futurelet`.
   */
  future() {
    return this.stack.length === 0 && this.pushToken(this.lexer.lex()), this.stack[this.stack.length - 1];
  }
  /**
   * Remove and return the next unexpanded token.
   */
  popToken() {
    return this.future(), this.stack.pop();
  }
  /**
   * Add a given token to the token stack.  In particular, this get be used
   * to put back a token returned from one of the other methods.
   */
  pushToken(e) {
    this.stack.push(e);
  }
  /**
   * Append an array of tokens to the token stack.
   */
  pushTokens(e) {
    this.stack.push(...e);
  }
  /**
   * Find an macro argument without expanding tokens and append the array of
   * tokens to the token stack. Uses Token as a container for the result.
   */
  scanArgument(e) {
    var i, n, l;
    if (e) {
      if (this.consumeSpaces(), this.future().text !== "[")
        return null;
      i = this.popToken(), {
        tokens: l,
        end: n
      } = this.consumeArg(["]"]);
    } else
      ({
        tokens: l,
        start: i,
        end: n
      } = this.consumeArg());
    return this.pushToken(new vt("EOF", n.loc)), this.pushTokens(l), i.range(n, "");
  }
  /**
   * Consume all following space tokens, without expansion.
   */
  consumeSpaces() {
    for (; ; ) {
      var e = this.future();
      if (e.text === " ")
        this.stack.pop();
      else
        break;
    }
  }
  /**
   * Consume an argument from the token stream, and return the resulting array
   * of tokens and start/end token.
   */
  consumeArg(e) {
    var i = [], n = e && e.length > 0;
    n || this.consumeSpaces();
    var l = this.future(), r, u = 0, h = 0;
    do {
      if (r = this.popToken(), i.push(r), r.text === "{")
        ++u;
      else if (r.text === "}") {
        if (--u, u === -1)
          throw new ie("Extra }", r);
      } else if (r.text === "EOF")
        throw new ie("Unexpected end of input in a macro argument, expected '" + (e && n ? e[h] : "}") + "'", r);
      if (e && n)
        if ((u === 0 || u === 1 && e[h] === "{") && r.text === e[h]) {
          if (++h, h === e.length) {
            i.splice(-h, h);
            break;
          }
        } else
          h = 0;
    } while (u !== 0 || n);
    return l.text === "{" && i[i.length - 1].text === "}" && (i.pop(), i.shift()), i.reverse(), {
      tokens: i,
      start: l,
      end: r
    };
  }
  /**
   * Consume the specified number of (delimited) arguments from the token
   * stream and return the resulting array of arguments.
   */
  consumeArgs(e, i) {
    if (i) {
      if (i.length !== e + 1)
        throw new ie("The length of delimiters doesn't match the number of args!");
      for (var n = i[0], l = 0; l < n.length; l++) {
        var r = this.popToken();
        if (n[l] !== r.text)
          throw new ie("Use of the macro doesn't match its definition", r);
      }
    }
    for (var u = [], h = 0; h < e; h++)
      u.push(this.consumeArg(i && i[h + 1]).tokens);
    return u;
  }
  /**
   * Expand the next token only once if possible.
   *
   * If the token is expanded, the resulting tokens will be pushed onto
   * the stack in reverse order, and the number of such tokens will be
   * returned.  This number might be zero or positive.
   *
   * If not, the return value is `false`, and the next token remains at the
   * top of the stack.
   *
   * In either case, the next token will be on the top of the stack,
   * or the stack will be empty (in case of empty expansion
   * and no other tokens).
   *
   * Used to implement `expandAfterFuture` and `expandNextToken`.
   *
   * If expandableOnly, only expandable tokens are expanded and
   * an undefined control sequence results in an error.
   */
  expandOnce(e) {
    var i = this.popToken(), n = i.text, l = i.noexpand ? null : this._getExpansion(n);
    if (l == null || e && l.unexpandable) {
      if (e && l == null && n[0] === "\\" && !this.isDefined(n))
        throw new ie("Undefined control sequence: " + n);
      return this.pushToken(i), !1;
    }
    if (this.expansionCount++, this.expansionCount > this.settings.maxExpand)
      throw new ie("Too many expansions: infinite loop or need to increase maxExpand setting");
    var r = l.tokens, u = this.consumeArgs(l.numArgs, l.delimiters);
    if (l.numArgs) {
      r = r.slice();
      for (var h = r.length - 1; h >= 0; --h) {
        var s = r[h];
        if (s.text === "#") {
          if (h === 0)
            throw new ie("Incomplete placeholder at end of macro body", s);
          if (s = r[--h], s.text === "#")
            r.splice(h + 1, 1);
          else if (/^[1-9]$/.test(s.text))
            r.splice(h, 2, ...u[+s.text - 1]);
          else
            throw new ie("Not a valid argument number", s);
        }
      }
    }
    return this.pushTokens(r), r.length;
  }
  /**
   * Expand the next token only once (if possible), and return the resulting
   * top token on the stack (without removing anything from the stack).
   * Similar in behavior to TeX's `\expandafter\futurelet`.
   * Equivalent to expandOnce() followed by future().
   */
  expandAfterFuture() {
    return this.expandOnce(), this.future();
  }
  /**
   * Recursively expand first token, then return first non-expandable token.
   */
  expandNextToken() {
    for (; ; )
      if (this.expandOnce() === !1) {
        var e = this.stack.pop();
        return e.treatAsRelax && (e.text = "\\relax"), e;
      }
    throw new Error();
  }
  /**
   * Fully expand the given macro name and return the resulting list of
   * tokens, or return `undefined` if no such macro is defined.
   */
  expandMacro(e) {
    return this.macros.has(e) ? this.expandTokens([new vt(e)]) : void 0;
  }
  /**
   * Fully expand the given token stream and return the resulting list of
   * tokens.  Note that the input tokens are in reverse order, but the
   * output tokens are in forward order.
   */
  expandTokens(e) {
    var i = [], n = this.stack.length;
    for (this.pushTokens(e); this.stack.length > n; )
      if (this.expandOnce(!0) === !1) {
        var l = this.stack.pop();
        l.treatAsRelax && (l.noexpand = !1, l.treatAsRelax = !1), i.push(l);
      }
    return i;
  }
  /**
   * Fully expand the given macro name and return the result as a string,
   * or return `undefined` if no such macro is defined.
   */
  expandMacroAsText(e) {
    var i = this.expandMacro(e);
    return i && i.map((n) => n.text).join("");
  }
  /**
   * Returns the expanded macro as a reversed array of tokens and a macro
   * argument count.  Or returns `null` if no such macro.
   */
  _getExpansion(e) {
    var i = this.macros.get(e);
    if (i == null)
      return i;
    if (e.length === 1) {
      var n = this.lexer.catcodes[e];
      if (n != null && n !== 13)
        return;
    }
    var l = typeof i == "function" ? i(this) : i;
    if (typeof l == "string") {
      var r = 0;
      if (l.indexOf("#") !== -1)
        for (var u = l.replace(/##/g, ""); u.indexOf("#" + (r + 1)) !== -1; )
          ++r;
      for (var h = new kl(l, this.settings), s = [], m = h.lex(); m.text !== "EOF"; )
        s.push(m), m = h.lex();
      s.reverse();
      var c = {
        tokens: s,
        numArgs: r
      };
      return c;
    }
    return l;
  }
  /**
   * Determine whether a command is currently "defined" (has some
   * functionality), meaning that it's a macro (in the current group),
   * a function, a symbol, or one of the special commands listed in
   * `implicitCommands`.
   */
  isDefined(e) {
    return this.macros.has(e) || Nt.hasOwnProperty(e) || Ne.math.hasOwnProperty(e) || Ne.text.hasOwnProperty(e) || L0.hasOwnProperty(e);
  }
  /**
   * Determine whether a command is expandable.
   */
  isExpandable(e) {
    var i = this.macros.get(e);
    return i != null ? typeof i == "string" || typeof i == "function" || !i.unexpandable : Nt.hasOwnProperty(e) && !Nt[e].primitive;
  }
}
var Ll = /^[₊₋₌₍₎₀₁₂₃₄₅₆₇₈₉ₐₑₕᵢⱼₖₗₘₙₒₚᵣₛₜᵤᵥₓᵦᵧᵨᵩᵪ]/, Si = Object.freeze({
  "₊": "+",
  "₋": "-",
  "₌": "=",
  "₍": "(",
  "₎": ")",
  "₀": "0",
  "₁": "1",
  "₂": "2",
  "₃": "3",
  "₄": "4",
  "₅": "5",
  "₆": "6",
  "₇": "7",
  "₈": "8",
  "₉": "9",
  "ₐ": "a",
  "ₑ": "e",
  "ₕ": "h",
  "ᵢ": "i",
  "ⱼ": "j",
  "ₖ": "k",
  "ₗ": "l",
  "ₘ": "m",
  "ₙ": "n",
  "ₒ": "o",
  "ₚ": "p",
  "ᵣ": "r",
  "ₛ": "s",
  "ₜ": "t",
  "ᵤ": "u",
  "ᵥ": "v",
  "ₓ": "x",
  "ᵦ": "β",
  "ᵧ": "γ",
  "ᵨ": "ρ",
  "ᵩ": "ϕ",
  "ᵪ": "χ",
  "⁺": "+",
  "⁻": "-",
  "⁼": "=",
  "⁽": "(",
  "⁾": ")",
  "⁰": "0",
  "¹": "1",
  "²": "2",
  "³": "3",
  "⁴": "4",
  "⁵": "5",
  "⁶": "6",
  "⁷": "7",
  "⁸": "8",
  "⁹": "9",
  "ᴬ": "A",
  "ᴮ": "B",
  "ᴰ": "D",
  "ᴱ": "E",
  "ᴳ": "G",
  "ᴴ": "H",
  "ᴵ": "I",
  "ᴶ": "J",
  "ᴷ": "K",
  "ᴸ": "L",
  "ᴹ": "M",
  "ᴺ": "N",
  "ᴼ": "O",
  "ᴾ": "P",
  "ᴿ": "R",
  "ᵀ": "T",
  "ᵁ": "U",
  "ⱽ": "V",
  "ᵂ": "W",
  "ᵃ": "a",
  "ᵇ": "b",
  "ᶜ": "c",
  "ᵈ": "d",
  "ᵉ": "e",
  "ᶠ": "f",
  "ᵍ": "g",
  ʰ: "h",
  "ⁱ": "i",
  ʲ: "j",
  "ᵏ": "k",
  ˡ: "l",
  "ᵐ": "m",
  ⁿ: "n",
  "ᵒ": "o",
  "ᵖ": "p",
  ʳ: "r",
  ˢ: "s",
  "ᵗ": "t",
  "ᵘ": "u",
  "ᵛ": "v",
  ʷ: "w",
  ˣ: "x",
  ʸ: "y",
  "ᶻ": "z",
  "ᵝ": "β",
  "ᵞ": "γ",
  "ᵟ": "δ",
  "ᵠ": "ϕ",
  "ᵡ": "χ",
  "ᶿ": "θ"
}), tn = {
  "́": {
    text: "\\'",
    math: "\\acute"
  },
  "̀": {
    text: "\\`",
    math: "\\grave"
  },
  "̈": {
    text: '\\"',
    math: "\\ddot"
  },
  "̃": {
    text: "\\~",
    math: "\\tilde"
  },
  "̄": {
    text: "\\=",
    math: "\\bar"
  },
  "̆": {
    text: "\\u",
    math: "\\breve"
  },
  "̌": {
    text: "\\v",
    math: "\\check"
  },
  "̂": {
    text: "\\^",
    math: "\\hat"
  },
  "̇": {
    text: "\\.",
    math: "\\dot"
  },
  "̊": {
    text: "\\r",
    math: "\\mathring"
  },
  "̋": {
    text: "\\H"
  },
  "̧": {
    text: "\\c"
  }
}, zl = {
  á: "á",
  à: "à",
  ä: "ä",
  ǟ: "ǟ",
  ã: "ã",
  ā: "ā",
  ă: "ă",
  ắ: "ắ",
  ằ: "ằ",
  ẵ: "ẵ",
  ǎ: "ǎ",
  â: "â",
  ấ: "ấ",
  ầ: "ầ",
  ẫ: "ẫ",
  ȧ: "ȧ",
  ǡ: "ǡ",
  å: "å",
  ǻ: "ǻ",
  ḃ: "ḃ",
  ć: "ć",
  ḉ: "ḉ",
  č: "č",
  ĉ: "ĉ",
  ċ: "ċ",
  ç: "ç",
  ď: "ď",
  ḋ: "ḋ",
  ḑ: "ḑ",
  é: "é",
  è: "è",
  ë: "ë",
  ẽ: "ẽ",
  ē: "ē",
  ḗ: "ḗ",
  ḕ: "ḕ",
  ĕ: "ĕ",
  ḝ: "ḝ",
  ě: "ě",
  ê: "ê",
  ế: "ế",
  ề: "ề",
  ễ: "ễ",
  ė: "ė",
  ȩ: "ȩ",
  ḟ: "ḟ",
  ǵ: "ǵ",
  ḡ: "ḡ",
  ğ: "ğ",
  ǧ: "ǧ",
  ĝ: "ĝ",
  ġ: "ġ",
  ģ: "ģ",
  ḧ: "ḧ",
  ȟ: "ȟ",
  ĥ: "ĥ",
  ḣ: "ḣ",
  ḩ: "ḩ",
  í: "í",
  ì: "ì",
  ï: "ï",
  ḯ: "ḯ",
  ĩ: "ĩ",
  ī: "ī",
  ĭ: "ĭ",
  ǐ: "ǐ",
  î: "î",
  ǰ: "ǰ",
  ĵ: "ĵ",
  ḱ: "ḱ",
  ǩ: "ǩ",
  ķ: "ķ",
  ĺ: "ĺ",
  ľ: "ľ",
  ļ: "ļ",
  ḿ: "ḿ",
  ṁ: "ṁ",
  ń: "ń",
  ǹ: "ǹ",
  ñ: "ñ",
  ň: "ň",
  ṅ: "ṅ",
  ņ: "ņ",
  ó: "ó",
  ò: "ò",
  ö: "ö",
  ȫ: "ȫ",
  õ: "õ",
  ṍ: "ṍ",
  ṏ: "ṏ",
  ȭ: "ȭ",
  ō: "ō",
  ṓ: "ṓ",
  ṑ: "ṑ",
  ŏ: "ŏ",
  ǒ: "ǒ",
  ô: "ô",
  ố: "ố",
  ồ: "ồ",
  ỗ: "ỗ",
  ȯ: "ȯ",
  ȱ: "ȱ",
  ő: "ő",
  ṕ: "ṕ",
  ṗ: "ṗ",
  ŕ: "ŕ",
  ř: "ř",
  ṙ: "ṙ",
  ŗ: "ŗ",
  ś: "ś",
  ṥ: "ṥ",
  š: "š",
  ṧ: "ṧ",
  ŝ: "ŝ",
  ṡ: "ṡ",
  ş: "ş",
  ẗ: "ẗ",
  ť: "ť",
  ṫ: "ṫ",
  ţ: "ţ",
  ú: "ú",
  ù: "ù",
  ü: "ü",
  ǘ: "ǘ",
  ǜ: "ǜ",
  ǖ: "ǖ",
  ǚ: "ǚ",
  ũ: "ũ",
  ṹ: "ṹ",
  ū: "ū",
  ṻ: "ṻ",
  ŭ: "ŭ",
  ǔ: "ǔ",
  û: "û",
  ů: "ů",
  ű: "ű",
  ṽ: "ṽ",
  ẃ: "ẃ",
  ẁ: "ẁ",
  ẅ: "ẅ",
  ŵ: "ŵ",
  ẇ: "ẇ",
  ẘ: "ẘ",
  ẍ: "ẍ",
  ẋ: "ẋ",
  ý: "ý",
  ỳ: "ỳ",
  ÿ: "ÿ",
  ỹ: "ỹ",
  ȳ: "ȳ",
  ŷ: "ŷ",
  ẏ: "ẏ",
  ẙ: "ẙ",
  ź: "ź",
  ž: "ž",
  ẑ: "ẑ",
  ż: "ż",
  Á: "Á",
  À: "À",
  Ä: "Ä",
  Ǟ: "Ǟ",
  Ã: "Ã",
  Ā: "Ā",
  Ă: "Ă",
  Ắ: "Ắ",
  Ằ: "Ằ",
  Ẵ: "Ẵ",
  Ǎ: "Ǎ",
  Â: "Â",
  Ấ: "Ấ",
  Ầ: "Ầ",
  Ẫ: "Ẫ",
  Ȧ: "Ȧ",
  Ǡ: "Ǡ",
  Å: "Å",
  Ǻ: "Ǻ",
  Ḃ: "Ḃ",
  Ć: "Ć",
  Ḉ: "Ḉ",
  Č: "Č",
  Ĉ: "Ĉ",
  Ċ: "Ċ",
  Ç: "Ç",
  Ď: "Ď",
  Ḋ: "Ḋ",
  Ḑ: "Ḑ",
  É: "É",
  È: "È",
  Ë: "Ë",
  Ẽ: "Ẽ",
  Ē: "Ē",
  Ḗ: "Ḗ",
  Ḕ: "Ḕ",
  Ĕ: "Ĕ",
  Ḝ: "Ḝ",
  Ě: "Ě",
  Ê: "Ê",
  Ế: "Ế",
  Ề: "Ề",
  Ễ: "Ễ",
  Ė: "Ė",
  Ȩ: "Ȩ",
  Ḟ: "Ḟ",
  Ǵ: "Ǵ",
  Ḡ: "Ḡ",
  Ğ: "Ğ",
  Ǧ: "Ǧ",
  Ĝ: "Ĝ",
  Ġ: "Ġ",
  Ģ: "Ģ",
  Ḧ: "Ḧ",
  Ȟ: "Ȟ",
  Ĥ: "Ĥ",
  Ḣ: "Ḣ",
  Ḩ: "Ḩ",
  Í: "Í",
  Ì: "Ì",
  Ï: "Ï",
  Ḯ: "Ḯ",
  Ĩ: "Ĩ",
  Ī: "Ī",
  Ĭ: "Ĭ",
  Ǐ: "Ǐ",
  Î: "Î",
  İ: "İ",
  Ĵ: "Ĵ",
  Ḱ: "Ḱ",
  Ǩ: "Ǩ",
  Ķ: "Ķ",
  Ĺ: "Ĺ",
  Ľ: "Ľ",
  Ļ: "Ļ",
  Ḿ: "Ḿ",
  Ṁ: "Ṁ",
  Ń: "Ń",
  Ǹ: "Ǹ",
  Ñ: "Ñ",
  Ň: "Ň",
  Ṅ: "Ṅ",
  Ņ: "Ņ",
  Ó: "Ó",
  Ò: "Ò",
  Ö: "Ö",
  Ȫ: "Ȫ",
  Õ: "Õ",
  Ṍ: "Ṍ",
  Ṏ: "Ṏ",
  Ȭ: "Ȭ",
  Ō: "Ō",
  Ṓ: "Ṓ",
  Ṑ: "Ṑ",
  Ŏ: "Ŏ",
  Ǒ: "Ǒ",
  Ô: "Ô",
  Ố: "Ố",
  Ồ: "Ồ",
  Ỗ: "Ỗ",
  Ȯ: "Ȯ",
  Ȱ: "Ȱ",
  Ő: "Ő",
  Ṕ: "Ṕ",
  Ṗ: "Ṗ",
  Ŕ: "Ŕ",
  Ř: "Ř",
  Ṙ: "Ṙ",
  Ŗ: "Ŗ",
  Ś: "Ś",
  Ṥ: "Ṥ",
  Š: "Š",
  Ṧ: "Ṧ",
  Ŝ: "Ŝ",
  Ṡ: "Ṡ",
  Ş: "Ş",
  Ť: "Ť",
  Ṫ: "Ṫ",
  Ţ: "Ţ",
  Ú: "Ú",
  Ù: "Ù",
  Ü: "Ü",
  Ǘ: "Ǘ",
  Ǜ: "Ǜ",
  Ǖ: "Ǖ",
  Ǚ: "Ǚ",
  Ũ: "Ũ",
  Ṹ: "Ṹ",
  Ū: "Ū",
  Ṻ: "Ṻ",
  Ŭ: "Ŭ",
  Ǔ: "Ǔ",
  Û: "Û",
  Ů: "Ů",
  Ű: "Ű",
  Ṽ: "Ṽ",
  Ẃ: "Ẃ",
  Ẁ: "Ẁ",
  Ẅ: "Ẅ",
  Ŵ: "Ŵ",
  Ẇ: "Ẇ",
  Ẍ: "Ẍ",
  Ẋ: "Ẋ",
  Ý: "Ý",
  Ỳ: "Ỳ",
  Ÿ: "Ÿ",
  Ỹ: "Ỹ",
  Ȳ: "Ȳ",
  Ŷ: "Ŷ",
  Ẏ: "Ẏ",
  Ź: "Ź",
  Ž: "Ž",
  Ẑ: "Ẑ",
  Ż: "Ż",
  ά: "ά",
  ὰ: "ὰ",
  ᾱ: "ᾱ",
  ᾰ: "ᾰ",
  έ: "έ",
  ὲ: "ὲ",
  ή: "ή",
  ὴ: "ὴ",
  ί: "ί",
  ὶ: "ὶ",
  ϊ: "ϊ",
  ΐ: "ΐ",
  ῒ: "ῒ",
  ῑ: "ῑ",
  ῐ: "ῐ",
  ό: "ό",
  ὸ: "ὸ",
  ύ: "ύ",
  ὺ: "ὺ",
  ϋ: "ϋ",
  ΰ: "ΰ",
  ῢ: "ῢ",
  ῡ: "ῡ",
  ῠ: "ῠ",
  ώ: "ώ",
  ὼ: "ὼ",
  Ύ: "Ύ",
  Ὺ: "Ὺ",
  Ϋ: "Ϋ",
  Ῡ: "Ῡ",
  Ῠ: "Ῠ",
  Ώ: "Ώ",
  Ὼ: "Ὼ"
};
class ci {
  constructor(e, i) {
    this.mode = void 0, this.gullet = void 0, this.settings = void 0, this.leftrightDepth = void 0, this.nextToken = void 0, this.mode = "math", this.gullet = new fa(e, i, this.mode), this.settings = i, this.leftrightDepth = 0;
  }
  /**
   * Checks a result to make sure it has the right type, and throws an
   * appropriate error otherwise.
   */
  expect(e, i) {
    if (i === void 0 && (i = !0), this.fetch().text !== e)
      throw new ie("Expected '" + e + "', got '" + this.fetch().text + "'", this.fetch());
    i && this.consume();
  }
  /**
   * Discards the current lookahead token, considering it consumed.
   */
  consume() {
    this.nextToken = null;
  }
  /**
   * Return the current lookahead token, or if there isn't one (at the
   * beginning, or if the previous lookahead token was consume()d),
   * fetch the next token as the new lookahead token and return it.
   */
  fetch() {
    return this.nextToken == null && (this.nextToken = this.gullet.expandNextToken()), this.nextToken;
  }
  /**
   * Switches between "text" and "math" modes.
   */
  switchMode(e) {
    this.mode = e, this.gullet.switchMode(e);
  }
  /**
   * Main parsing function, which parses an entire input.
   */
  parse() {
    this.settings.globalGroup || this.gullet.beginGroup(), this.settings.colorIsTextColor && this.gullet.macros.set("\\color", "\\textcolor");
    try {
      var e = this.parseExpression(!1);
      return this.expect("EOF"), this.settings.globalGroup || this.gullet.endGroup(), e;
    } finally {
      this.gullet.endGroups();
    }
  }
  /**
   * Fully parse a separate sequence of tokens as a separate job.
   * Tokens should be specified in reverse order, as in a MacroDefinition.
   */
  subparse(e) {
    var i = this.nextToken;
    this.consume(), this.gullet.pushToken(new vt("}")), this.gullet.pushTokens(e);
    var n = this.parseExpression(!1);
    return this.expect("}"), this.nextToken = i, n;
  }
  /**
   * Parses an "expression", which is a list of atoms.
   *
   * `breakOnInfix`: Should the parsing stop when we hit infix nodes? This
   *                 happens when functions have higher precedence han infix
   *                 nodes in implicit parses.
   *
   * `breakOnTokenText`: The text of the token that the expression should end
   *                     with, or `null` if something else should end the
   *                     expression.
   */
  parseExpression(e, i) {
    for (var n = []; ; ) {
      this.mode === "math" && this.consumeSpaces();
      var l = this.fetch();
      if (ci.endOfExpression.indexOf(l.text) !== -1 || i && l.text === i || e && Nt[l.text] && Nt[l.text].infix)
        break;
      var r = this.parseAtom(i);
      if (r) {
        if (r.type === "internal")
          continue;
      } else
        break;
      n.push(r);
    }
    return this.mode === "text" && this.formLigatures(n), this.handleInfixNodes(n);
  }
  /**
   * Rewrites infix operators such as \over with corresponding commands such
   * as \frac.
   *
   * There can only be one infix operator per group.  If there's more than one
   * then the expression is ambiguous.  This can be resolved by adding {}.
   */
  handleInfixNodes(e) {
    for (var i = -1, n, l = 0; l < e.length; l++)
      if (e[l].type === "infix") {
        if (i !== -1)
          throw new ie("only one infix operator per group", e[l].token);
        i = l, n = e[l].replaceWith;
      }
    if (i !== -1 && n) {
      var r, u, h = e.slice(0, i), s = e.slice(i + 1);
      h.length === 1 && h[0].type === "ordgroup" ? r = h[0] : r = {
        type: "ordgroup",
        mode: this.mode,
        body: h
      }, s.length === 1 && s[0].type === "ordgroup" ? u = s[0] : u = {
        type: "ordgroup",
        mode: this.mode,
        body: s
      };
      var m;
      return n === "\\\\abovefrac" ? m = this.callFunction(n, [r, e[i], u], []) : m = this.callFunction(n, [r, u], []), [m];
    } else
      return e;
  }
  /**
   * Handle a subscript or superscript with nice errors.
   */
  handleSupSubscript(e) {
    var i = this.fetch(), n = i.text;
    this.consume(), this.consumeSpaces();
    var l = this.parseGroup(e);
    if (!l)
      throw new ie("Expected group after '" + n + "'", i);
    return l;
  }
  /**
   * Converts the textual input of an unsupported command into a text node
   * contained within a color node whose color is determined by errorColor
   */
  formatUnsupportedCmd(e) {
    for (var i = [], n = 0; n < e.length; n++)
      i.push({
        type: "textord",
        mode: "text",
        text: e[n]
      });
    var l = {
      type: "text",
      mode: this.mode,
      body: i
    }, r = {
      type: "color",
      mode: this.mode,
      color: this.settings.errorColor,
      body: [l]
    };
    return r;
  }
  /**
   * Parses a group with optional super/subscripts.
   */
  parseAtom(e) {
    var i = this.parseGroup("atom", e);
    if (this.mode === "text")
      return i;
    for (var n, l; ; ) {
      this.consumeSpaces();
      var r = this.fetch();
      if (r.text === "\\limits" || r.text === "\\nolimits") {
        if (i && i.type === "op") {
          var u = r.text === "\\limits";
          i.limits = u, i.alwaysHandleSupSub = !0;
        } else if (i && i.type === "operatorname")
          i.alwaysHandleSupSub && (i.limits = r.text === "\\limits");
        else
          throw new ie("Limit controls must follow a math operator", r);
        this.consume();
      } else if (r.text === "^") {
        if (n)
          throw new ie("Double superscript", r);
        n = this.handleSupSubscript("superscript");
      } else if (r.text === "_") {
        if (l)
          throw new ie("Double subscript", r);
        l = this.handleSupSubscript("subscript");
      } else if (r.text === "'") {
        if (n)
          throw new ie("Double superscript", r);
        var h = {
          type: "textord",
          mode: this.mode,
          text: "\\prime"
        }, s = [h];
        for (this.consume(); this.fetch().text === "'"; )
          s.push(h), this.consume();
        this.fetch().text === "^" && s.push(this.handleSupSubscript("superscript")), n = {
          type: "ordgroup",
          mode: this.mode,
          body: s
        };
      } else if (Si[r.text]) {
        var m = Si[r.text], c = Ll.test(r.text);
        for (this.consume(); ; ) {
          var g = this.fetch().text;
          if (!Si[g] || Ll.test(g) !== c)
            break;
          this.consume(), m += Si[g];
        }
        var x = new ci(m, this.settings).parse();
        c ? l = {
          type: "ordgroup",
          mode: "math",
          body: x
        } : n = {
          type: "ordgroup",
          mode: "math",
          body: x
        };
      } else
        break;
    }
    return n || l ? {
      type: "supsub",
      mode: this.mode,
      base: i,
      sup: n,
      sub: l
    } : i;
  }
  /**
   * Parses an entire function, including its base and all of its arguments.
   */
  parseFunction(e, i) {
    var n = this.fetch(), l = n.text, r = Nt[l];
    if (!r)
      return null;
    if (this.consume(), i && i !== "atom" && !r.allowedInArgument)
      throw new ie("Got function '" + l + "' with no arguments" + (i ? " as " + i : ""), n);
    if (this.mode === "text" && !r.allowedInText)
      throw new ie("Can't use function '" + l + "' in text mode", n);
    if (this.mode === "math" && r.allowedInMath === !1)
      throw new ie("Can't use function '" + l + "' in math mode", n);
    var {
      args: u,
      optArgs: h
    } = this.parseArguments(l, r);
    return this.callFunction(l, u, h, n, e);
  }
  /**
   * Call a function handler with a suitable context and arguments.
   */
  callFunction(e, i, n, l, r) {
    var u = {
      funcName: e,
      parser: this,
      token: l,
      breakOnTokenText: r
    }, h = Nt[e];
    if (h && h.handler)
      return h.handler(u, i, n);
    throw new ie("No function handler for " + e);
  }
  /**
   * Parses the arguments of a function or environment
   */
  parseArguments(e, i) {
    var n = i.numArgs + i.numOptionalArgs;
    if (n === 0)
      return {
        args: [],
        optArgs: []
      };
    for (var l = [], r = [], u = 0; u < n; u++) {
      var h = i.argTypes && i.argTypes[u], s = u < i.numOptionalArgs;
      (i.primitive && h == null || // \sqrt expands into primitive if optional argument doesn't exist
      i.type === "sqrt" && u === 1 && r[0] == null) && (h = "primitive");
      var m = this.parseGroupOfType("argument to '" + e + "'", h, s);
      if (s)
        r.push(m);
      else if (m != null)
        l.push(m);
      else
        throw new ie("Null argument, please report this as a bug");
    }
    return {
      args: l,
      optArgs: r
    };
  }
  /**
   * Parses a group when the mode is changing.
   */
  parseGroupOfType(e, i, n) {
    switch (i) {
      case "color":
        return this.parseColorGroup(n);
      case "size":
        return this.parseSizeGroup(n);
      case "url":
        return this.parseUrlGroup(n);
      case "math":
      case "text":
        return this.parseArgumentGroup(n, i);
      case "hbox": {
        var l = this.parseArgumentGroup(n, "text");
        return l != null ? {
          type: "styling",
          mode: l.mode,
          body: [l],
          style: "text"
          // simulate \textstyle
        } : null;
      }
      case "raw": {
        var r = this.parseStringGroup("raw", n);
        return r != null ? {
          type: "raw",
          mode: "text",
          string: r.text
        } : null;
      }
      case "primitive": {
        if (n)
          throw new ie("A primitive argument cannot be optional");
        var u = this.parseGroup(e);
        if (u == null)
          throw new ie("Expected group as " + e, this.fetch());
        return u;
      }
      case "original":
      case null:
      case void 0:
        return this.parseArgumentGroup(n);
      default:
        throw new ie("Unknown group type as " + e, this.fetch());
    }
  }
  /**
   * Discard any space tokens, fetching the next non-space token.
   */
  consumeSpaces() {
    for (; this.fetch().text === " "; )
      this.consume();
  }
  /**
   * Parses a group, essentially returning the string formed by the
   * brace-enclosed tokens plus some position information.
   */
  parseStringGroup(e, i) {
    var n = this.gullet.scanArgument(i);
    if (n == null)
      return null;
    for (var l = "", r; (r = this.fetch()).text !== "EOF"; )
      l += r.text, this.consume();
    return this.consume(), n.text = l, n;
  }
  /**
   * Parses a regex-delimited group: the largest sequence of tokens
   * whose concatenated strings match `regex`. Returns the string
   * formed by the tokens plus some position information.
   */
  parseRegexGroup(e, i) {
    for (var n = this.fetch(), l = n, r = "", u; (u = this.fetch()).text !== "EOF" && e.test(r + u.text); )
      l = u, r += l.text, this.consume();
    if (r === "")
      throw new ie("Invalid " + i + ": '" + n.text + "'", n);
    return n.range(l, r);
  }
  /**
   * Parses a color description.
   */
  parseColorGroup(e) {
    var i = this.parseStringGroup("color", e);
    if (i == null)
      return null;
    var n = /^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(i.text);
    if (!n)
      throw new ie("Invalid color: '" + i.text + "'", i);
    var l = n[0];
    return /^[0-9a-f]{6}$/i.test(l) && (l = "#" + l), {
      type: "color-token",
      mode: this.mode,
      color: l
    };
  }
  /**
   * Parses a size specification, consisting of magnitude and unit.
   */
  parseSizeGroup(e) {
    var i, n = !1;
    if (this.gullet.consumeSpaces(), !e && this.gullet.future().text !== "{" ? i = this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/, "size") : i = this.parseStringGroup("size", e), !i)
      return null;
    !e && i.text.length === 0 && (i.text = "0pt", n = !0);
    var l = /([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(i.text);
    if (!l)
      throw new ie("Invalid size: '" + i.text + "'", i);
    var r = {
      number: +(l[1] + l[2]),
      // sign + magnitude, cast to number
      unit: l[3]
    };
    if (!Ol(r))
      throw new ie("Invalid unit: '" + r.unit + "'", i);
    return {
      type: "size",
      mode: this.mode,
      value: r,
      isBlank: n
    };
  }
  /**
   * Parses an URL, checking escaped letters and allowed protocols,
   * and setting the catcode of % as an active character (as in \hyperref).
   */
  parseUrlGroup(e) {
    this.gullet.lexer.setCatcode("%", 13), this.gullet.lexer.setCatcode("~", 12);
    var i = this.parseStringGroup("url", e);
    if (this.gullet.lexer.setCatcode("%", 14), this.gullet.lexer.setCatcode("~", 13), i == null)
      return null;
    var n = i.text.replace(/\\([#$%&~_^{}])/g, "$1");
    return {
      type: "url",
      mode: this.mode,
      url: n
    };
  }
  /**
   * Parses an argument with the mode specified.
   */
  parseArgumentGroup(e, i) {
    var n = this.gullet.scanArgument(e);
    if (n == null)
      return null;
    var l = this.mode;
    i && this.switchMode(i), this.gullet.beginGroup();
    var r = this.parseExpression(!1, "EOF");
    this.expect("EOF"), this.gullet.endGroup();
    var u = {
      type: "ordgroup",
      mode: this.mode,
      loc: n.loc,
      body: r
    };
    return i && this.switchMode(l), u;
  }
  /**
   * Parses an ordinary group, which is either a single nucleus (like "x")
   * or an expression in braces (like "{x+y}") or an implicit group, a group
   * that starts at the current position, and ends right before a higher explicit
   * group ends, or at EOF.
   */
  parseGroup(e, i) {
    var n = this.fetch(), l = n.text, r;
    if (l === "{" || l === "\\begingroup") {
      this.consume();
      var u = l === "{" ? "}" : "\\endgroup";
      this.gullet.beginGroup();
      var h = this.parseExpression(!1, u), s = this.fetch();
      this.expect(u), this.gullet.endGroup(), r = {
        type: "ordgroup",
        mode: this.mode,
        loc: lt.range(n, s),
        body: h,
        // A group formed by \begingroup...\endgroup is a semi-simple group
        // which doesn't affect spacing in math mode, i.e., is transparent.
        // https://tex.stackexchange.com/questions/1930/when-should-one-
        // use-begingroup-instead-of-bgroup
        semisimple: l === "\\begingroup" || void 0
      };
    } else if (r = this.parseFunction(i, e) || this.parseSymbol(), r == null && l[0] === "\\" && !L0.hasOwnProperty(l)) {
      if (this.settings.throwOnError)
        throw new ie("Undefined control sequence: " + l, n);
      r = this.formatUnsupportedCmd(l), this.consume();
    }
    return r;
  }
  /**
   * Form ligature-like combinations of characters for text mode.
   * This includes inputs like "--", "---", "``" and "''".
   * The result will simply replace multiple textord nodes with a single
   * character in each value by a single textord node having multiple
   * characters in its value.  The representation is still ASCII source.
   * The group will be modified in place.
   */
  formLigatures(e) {
    for (var i = e.length - 1, n = 0; n < i; ++n) {
      var l = e[n], r = l.text;
      r === "-" && e[n + 1].text === "-" && (n + 1 < i && e[n + 2].text === "-" ? (e.splice(n, 3, {
        type: "textord",
        mode: "text",
        loc: lt.range(l, e[n + 2]),
        text: "---"
      }), i -= 2) : (e.splice(n, 2, {
        type: "textord",
        mode: "text",
        loc: lt.range(l, e[n + 1]),
        text: "--"
      }), i -= 1)), (r === "'" || r === "`") && e[n + 1].text === r && (e.splice(n, 2, {
        type: "textord",
        mode: "text",
        loc: lt.range(l, e[n + 1]),
        text: r + r
      }), i -= 1);
    }
  }
  /**
   * Parse a single symbol out of the string. Here, we handle single character
   * symbols and special functions like \verb.
   */
  parseSymbol() {
    var e = this.fetch(), i = e.text;
    if (/^\\verb[^a-zA-Z]/.test(i)) {
      this.consume();
      var n = i.slice(5), l = n.charAt(0) === "*";
      if (l && (n = n.slice(1)), n.length < 2 || n.charAt(0) !== n.slice(-1))
        throw new ie(`\\verb assertion failed --
                    please report what input caused this bug`);
      return n = n.slice(1, -1), {
        type: "verb",
        mode: "text",
        body: n,
        star: l
      };
    }
    zl.hasOwnProperty(i[0]) && !Ne[this.mode][i[0]] && (this.settings.strict && this.mode === "math" && this.settings.reportNonstrict("unicodeTextInMathMode", 'Accented Unicode text character "' + i[0] + '" used in math mode', e), i = zl[i[0]] + i.slice(1));
    var r = ua.exec(i);
    r && (i = i.substring(0, r.index), i === "i" ? i = "ı" : i === "j" && (i = "ȷ"));
    var u;
    if (Ne[this.mode][i]) {
      this.settings.strict && this.mode === "math" && an.indexOf(i) >= 0 && this.settings.reportNonstrict("unicodeTextInMathMode", 'Latin-1/Unicode text character "' + i[0] + '" used in math mode', e);
      var h = Ne[this.mode][i].group, s = lt.range(e), m;
      if (tr.hasOwnProperty(h)) {
        var c = h;
        m = {
          type: "atom",
          mode: this.mode,
          family: c,
          loc: s,
          text: i
        };
      } else
        m = {
          type: h,
          mode: this.mode,
          loc: s,
          text: i
        };
      u = m;
    } else if (i.charCodeAt(0) >= 128)
      this.settings.strict && (Il(i.charCodeAt(0)) ? this.mode === "math" && this.settings.reportNonstrict("unicodeTextInMathMode", 'Unicode text character "' + i[0] + '" used in math mode', e) : this.settings.reportNonstrict("unknownSymbol", 'Unrecognized Unicode character "' + i[0] + '"' + (" (" + i.charCodeAt(0) + ")"), e)), u = {
        type: "textord",
        mode: "text",
        loc: lt.range(e),
        text: i
      };
    else
      return null;
    if (this.consume(), r)
      for (var g = 0; g < r[0].length; g++) {
        var x = r[0][g];
        if (!tn[x])
          throw new ie("Unknown accent ' " + x + "'", e);
        var T = tn[x][this.mode] || tn[x].text;
        if (!T)
          throw new ie("Accent " + x + " unsupported in " + this.mode + " mode", e);
        u = {
          type: "accent",
          mode: this.mode,
          loc: lt.range(e),
          label: T,
          isStretchy: !1,
          isShifty: !0,
          // $FlowFixMe
          base: u
        };
      }
    return u;
  }
}
ci.endOfExpression = ["}", "\\endgroup", "\\end", "\\right", "&"];
var Rn = function(e, i) {
  if (!(typeof e == "string" || e instanceof String))
    throw new TypeError("KaTeX can only parse string typed expression");
  var n = new ci(e, i);
  delete n.gullet.macros.current["\\df@tag"];
  var l = n.parse();
  if (delete n.gullet.macros.current["\\current@color"], delete n.gullet.macros.current["\\color"], n.gullet.macros.get("\\df@tag")) {
    if (!i.displayMode)
      throw new ie("\\tag works only in display equations");
    l = [{
      type: "tag",
      mode: "text",
      body: l,
      tag: n.subparse([new vt("\\df@tag")])
    }];
  }
  return l;
}, z0 = function(e, i, n) {
  i.textContent = "";
  var l = Dn(e, n).toNode();
  i.appendChild(l);
};
typeof document < "u" && document.compatMode !== "CSS1Compat" && (typeof console < "u" && console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."), z0 = function() {
  throw new ie("KaTeX doesn't work in quirks mode.");
});
var ma = function(e, i) {
  var n = Dn(e, i).toMarkup();
  return n;
}, pa = function(e, i) {
  var n = new gn(i);
  return Rn(e, n);
}, M0 = function(e, i, n) {
  if (n.throwOnError || !(e instanceof ie))
    throw e;
  var l = G.makeSpan(["katex-error"], [new ct(i)]);
  return l.setAttribute("title", e.toString()), l.setAttribute("style", "color:" + n.errorColor), l;
}, Dn = function(e, i) {
  var n = new gn(i);
  try {
    var l = Rn(e, n);
    return Sr(l, e, n);
  } catch (r) {
    return M0(r, e, n);
  }
}, ga = function(e, i) {
  var n = new gn(i);
  try {
    var l = Rn(e, n);
    return kr(l, e, n);
  } catch (r) {
    return M0(r, e, n);
  }
}, va = {
  /**
   * Current KaTeX version
   */
  version: "0.16.9",
  /**
   * Renders the given LaTeX into an HTML+MathML combination, and adds
   * it as a child to the specified DOM node.
   */
  render: z0,
  /**
   * Renders the given LaTeX into an HTML+MathML combination string,
   * for sending to the client.
   */
  renderToString: ma,
  /**
   * KaTeX error, usually during parsing.
   */
  ParseError: ie,
  /**
   * The shema of Settings
   */
  SETTINGS_SCHEMA: ki,
  /**
   * Parses the given LaTeX into KaTeX's internal parse tree structure,
   * without rendering to HTML or MathML.
   *
   * NOTE: This method is not currently recommended for public use.
   * The internal tree representation is unstable and is very likely
   * to change. Use at your own risk.
   */
  __parse: pa,
  /**
   * Renders the given LaTeX into an HTML+MathML internal DOM tree
   * representation, without flattening that representation to a string.
   *
   * NOTE: This method is not currently recommended for public use.
   * The internal tree representation is unstable and is very likely
   * to change. Use at your own risk.
   */
  __renderToDomTree: Dn,
  /**
   * Renders the given LaTeX into an HTML internal DOM tree representation,
   * without MathML and without flattening that representation to a string.
   *
   * NOTE: This method is not currently recommended for public use.
   * The internal tree representation is unstable and is very likely
   * to change. Use at your own risk.
   */
  __renderToHTMLTree: ga,
  /**
   * extends internal font metrics object with a new object
   * each key in the new object represents a font name
  */
  __setFontMetrics: js,
  /**
   * adds a new symbol to builtin symbols table
   */
  __defineSymbol: f,
  /**
   * adds a new function to builtin function list,
   * which directly produce parse tree elements
   * and have their own html/mathml builders
   */
  __defineFunction: oe,
  /**
   * adds a new macro to builtin macro list
   */
  __defineMacro: E,
  /**
   * Expose the dom tree node types, which can be useful for type checking nodes.
   *
   * NOTE: This method is not currently recommended for public use.
   * The internal tree representation is unstable and is very likely
   * to change. Use at your own risk.
   */
  __domTree: {
    Span: di,
    Anchor: yn,
    SymbolNode: ct,
    SvgNode: Et,
    PathNode: Ht,
    LineNode: rn
  }
}, Oi = {}, Hn = {};
const A0 = {
  name: "blockquote",
  display: "command",
  add: function(t, e) {
    const i = t.context;
    i.blockquote = {
      targetButton: e,
      tag: t.util.createElement("BLOCKQUOTE")
    };
  },
  /**
   * @Override core
   */
  active: function(t) {
    if (!t)
      this.util.removeClass(this.context.blockquote.targetButton, "active");
    else if (/blockquote/i.test(t.nodeName))
      return this.util.addClass(this.context.blockquote.targetButton, "active"), !0;
    return !1;
  },
  /**
   * @Override core
   */
  action: function() {
    const t = this.util.getParentElement(this.getSelectionNode(), "blockquote");
    t ? this.detachRangeFormatElement(t, null, null, !1, !1) : this.applyRangeFormatElement(this.context.blockquote.tag.cloneNode(!1));
  }
}, B0 = {
  name: "align",
  display: "submenu",
  add: function(t, e) {
    const i = t.icons, n = t.context;
    n.align = {
      targetButton: e,
      _itemMenu: null,
      _alignList: null,
      currentAlign: "",
      defaultDir: t.options.rtl ? "right" : "left",
      icons: {
        justify: i.align_justify,
        left: i.align_left,
        right: i.align_right,
        center: i.align_center
      }
    };
    let l = this.setSubmenu(t), r = n.align._itemMenu = l.querySelector("ul");
    r.addEventListener("click", this.pickup.bind(t)), n.align._alignList = r.querySelectorAll("li button"), t.initMenuTarget(this.name, e, l), l = null, r = null;
  },
  setSubmenu: function(t) {
    const e = t.lang, i = t.icons, n = t.util.createElement("DIV"), l = t.options.alignItems;
    let r = "";
    for (let u = 0, h, s; u < l.length; u++)
      h = l[u], s = e.toolbar["align" + h.charAt(0).toUpperCase() + h.slice(1)], r += '<li><button type="button" class="se-btn-list se-btn-align" data-value="' + h + '" title="' + s + '" aria-label="' + s + '"><span class="se-list-icon">' + i["align_" + h] + "</span>" + s + "</button></li>";
    return n.className = "se-submenu se-list-layer se-list-align", n.innerHTML = '<div class="se-list-inner"><ul class="se-list-basic">' + r + "</ul></div>", n;
  },
  /**
   * @Override core
   */
  active: function(t) {
    const e = this.context.align, i = e.targetButton, n = i.firstElementChild;
    if (!t)
      this.util.changeElement(n, e.icons[e.defaultDir]), i.removeAttribute("data-focus");
    else if (this.util.isFormatElement(t)) {
      const l = t.style.textAlign;
      if (l)
        return this.util.changeElement(n, e.icons[l] || e.icons[e.defaultDir]), i.setAttribute("data-focus", l), !0;
    }
    return !1;
  },
  /**
   * @Override submenu
   */
  on: function() {
    const t = this.context.align, e = t._alignList, i = t.targetButton.getAttribute("data-focus") || t.defaultDir;
    if (i !== t.currentAlign) {
      for (let n = 0, l = e.length; n < l; n++)
        i === e[n].getAttribute("data-value") ? this.util.addClass(e[n], "active") : this.util.removeClass(e[n], "active");
      t.currentAlign = i;
    }
  },
  exchangeDir: function() {
    const t = this.options.rtl ? "right" : "left";
    if (!this.context.align || this.context.align.defaultDir === t)
      return;
    this.context.align.defaultDir = t;
    let e = this.context.align._itemMenu, i = e.querySelector('[data-value="left"]'), n = e.querySelector('[data-value="right"]');
    if (i && n) {
      const l = i.parentElement, r = n.parentElement;
      l.appendChild(n), r.appendChild(i);
    }
  },
  pickup: function(t) {
    t.preventDefault(), t.stopPropagation();
    let e = t.target, i = null;
    for (; !i && !/UL/i.test(e.tagName); )
      i = e.getAttribute("data-value"), e = e.parentNode;
    if (!i)
      return;
    const n = this.context.align.defaultDir, l = this.getSelectedElements();
    for (let r = 0, u = l.length; r < u; r++)
      this.util.setStyle(l[r], "textAlign", i === n ? "" : i);
    this.effectNode = null, this.submenuOff(), this.focus(), this.history.push(!1);
  }
}, N0 = {
  name: "font",
  display: "submenu",
  add: function(t, e) {
    const i = t.context;
    i.font = {
      targetText: e.querySelector(".txt"),
      targetTooltip: e.parentNode.querySelector(".se-tooltip-text"),
      _fontList: null,
      currentFont: ""
    };
    let n = this.setSubmenu(t);
    n.querySelector(".se-list-inner").addEventListener("click", this.pickup.bind(t)), i.font._fontList = n.querySelectorAll("ul li button"), t.initMenuTarget(this.name, e, n), n = null;
  },
  setSubmenu: function(t) {
    const e = t.lang, i = t.util.createElement("DIV");
    i.className = "se-submenu se-list-layer se-list-font-family";
    let n, l, r, u, h = t.options.font, s = '<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="default_value se-btn-list" title="' + e.toolbar.default + '" aria-label="' + e.toolbar.default + '">(' + e.toolbar.default + ")</button></li>";
    for (r = 0, u = h.length; r < u; r++)
      n = h[r], l = n.split(",")[0], s += '<li><button type="button" class="se-btn-list" data-value="' + n + '" data-txt="' + l + '" title="' + l + '" aria-label="' + l + '" style="font-family:' + n + ';">' + l + "</button></li>";
    return s += "</ul></div>", i.innerHTML = s, i;
  },
  /**
  * @Override core
  */
  active: function(t) {
    const e = this.context.font.targetText, i = this.context.font.targetTooltip;
    if (t) {
      if (t.style && t.style.fontFamily.length > 0) {
        const n = t.style.fontFamily.replace(/["']/g, "");
        return this.util.changeTxt(e, n), this.util.changeTxt(i, this.lang.toolbar.font + " (" + n + ")"), !0;
      }
    } else {
      const n = this.hasFocus ? this.wwComputedStyle.fontFamily : this.lang.toolbar.font;
      this.util.changeTxt(e, n), this.util.changeTxt(i, this.hasFocus ? this.lang.toolbar.font + (n ? " (" + n + ")" : "") : n);
    }
    return !1;
  },
  /**
  * @Override submenu
  */
  on: function() {
    const t = this.context.font, e = t._fontList, i = t.targetText.textContent;
    if (i !== t.currentFont) {
      for (let n = 0, l = e.length; n < l; n++)
        i === e[n].getAttribute("data-value") ? this.util.addClass(e[n], "active") : this.util.removeClass(e[n], "active");
      t.currentFont = i;
    }
  },
  pickup: function(t) {
    if (!/^BUTTON$/i.test(t.target.tagName))
      return !1;
    t.preventDefault(), t.stopPropagation();
    const e = t.target.getAttribute("data-value");
    if (e) {
      const i = this.util.createElement("SPAN");
      i.style.fontFamily = e, this.nodeChange(i, ["font-family"], null, null);
    } else
      this.nodeChange(null, ["font-family"], ["span"], !0);
    this.submenuOff();
  }
}, R0 = {
  name: "fontSize",
  display: "submenu",
  add: function(t, e) {
    const i = t.context;
    i.fontSize = {
      targetText: e.querySelector(".txt"),
      _sizeList: null,
      currentSize: ""
    };
    let n = this.setSubmenu(t), l = n.querySelector("ul");
    l.addEventListener("click", this.pickup.bind(t)), i.fontSize._sizeList = l.querySelectorAll("li button"), t.initMenuTarget(this.name, e, n), n = null, l = null;
  },
  setSubmenu: function(t) {
    const e = t.options, i = t.lang, n = t.util.createElement("DIV");
    n.className = "se-submenu se-list-layer se-list-font-size";
    const l = e.fontSize ? e.fontSize : [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72];
    let r = '<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="default_value se-btn-list" title="' + i.toolbar.default + '" aria-label="' + i.toolbar.default + '">(' + i.toolbar.default + ")</button></li>";
    for (let u = 0, h = e.fontSizeUnit, s = l.length, m; u < s; u++)
      m = l[u], r += '<li><button type="button" class="se-btn-list" data-value="' + m + h + '" title="' + m + h + '" aria-label="' + m + h + '" style="font-size:' + m + h + ';">' + m + "</button></li>";
    return r += "</ul></div>", n.innerHTML = r, n;
  },
  /**
  * @Override core
  */
  active: function(t) {
    if (!t)
      this.util.changeTxt(this.context.fontSize.targetText, this.hasFocus ? this._convertFontSize.call(this, this.options.fontSizeUnit, this.wwComputedStyle.fontSize) : this.lang.toolbar.fontSize);
    else if (t.style && t.style.fontSize.length > 0)
      return this.util.changeTxt(this.context.fontSize.targetText, this._convertFontSize.call(this, this.options.fontSizeUnit, t.style.fontSize)), !0;
    return !1;
  },
  /**
  * @Override submenu
  */
  on: function() {
    const t = this.context.fontSize, e = t._sizeList, i = t.targetText.textContent;
    if (i !== t.currentSize) {
      for (let n = 0, l = e.length; n < l; n++)
        i === e[n].getAttribute("data-value") ? this.util.addClass(e[n], "active") : this.util.removeClass(e[n], "active");
      t.currentSize = i;
    }
  },
  pickup: function(t) {
    if (!/^BUTTON$/i.test(t.target.tagName))
      return !1;
    t.preventDefault(), t.stopPropagation();
    const e = t.target.getAttribute("data-value");
    if (e) {
      const i = this.util.createElement("SPAN");
      i.style.fontSize = e, this.nodeChange(i, ["font-size"], null, null);
    } else
      this.nodeChange(null, ["font-size"], ["span"], !0);
    this.submenuOff();
  }
}, D0 = {
  name: "colorPicker",
  /**
   * @description Constructor
   * @param {Object} core Core object 
   */
  add: function(t) {
    const e = t.context;
    e.colorPicker = {
      colorListHTML: "",
      _colorInput: "",
      _defaultColor: "#000",
      _styleProperty: "color",
      _currentColor: "",
      _colorList: []
    }, e.colorPicker.colorListHTML = this.createColorList(t, this._makeColorList);
  },
  /**
   * @description Create color list
   * @param {Object} core Core object 
   * @param {Function} makeColor this._makeColorList
   * @returns {String} HTML string
   */
  createColorList: function(t, e) {
    const i = t.options, n = t.lang, l = !i.colorList || i.colorList.length === 0 ? [
      "#ff0000",
      "#ff5e00",
      "#ffe400",
      "#abf200",
      "#00d8ff",
      "#0055ff",
      "#6600ff",
      "#ff00dd",
      "#000000",
      "#ffd8d8",
      "#fae0d4",
      "#faf4c0",
      "#e4f7ba",
      "#d4f4fa",
      "#d9e5ff",
      "#e8d9ff",
      "#ffd9fa",
      "#f1f1f1",
      "#ffa7a7",
      "#ffc19e",
      "#faed7d",
      "#cef279",
      "#b2ebf4",
      "#b2ccff",
      "#d1b2ff",
      "#ffb2f5",
      "#bdbdbd",
      "#f15f5f",
      "#f29661",
      "#e5d85c",
      "#bce55c",
      "#5cd1e5",
      "#6699ff",
      "#a366ff",
      "#f261df",
      "#8c8c8c",
      "#980000",
      "#993800",
      "#998a00",
      "#6b9900",
      "#008299",
      "#003399",
      "#3d0099",
      "#990085",
      "#353535",
      "#670000",
      "#662500",
      "#665c00",
      "#476600",
      "#005766",
      "#002266",
      "#290066",
      "#660058",
      "#222222"
    ] : i.colorList;
    let r = [], u = '<div class="se-list-inner">';
    for (let h = 0, s = l.length, m; h < s; h++)
      m = l[h], m && (typeof m == "string" && (r.push(m), h < s - 1) || (r.length > 0 && (u += '<div class="se-selector-color">' + e(r) + "</div>", r = []), typeof m == "object" && (u += '<div class="se-selector-color">' + e(m) + "</div>")));
    return u += '<form class="se-form-group"><input type="text" maxlength="9" class="_se_color_picker_input se-color-input"/><button type="submit" class="se-btn-primary _se_color_picker_submit" title="' + n.dialogBox.submitButton + '" aria-label="' + n.dialogBox.submitButton + '">' + t.icons.checked + '</button><button type="button" class="se-btn _se_color_picker_remove" title="' + n.toolbar.removeFormat + '" aria-label="' + n.toolbar.removeFormat + '">' + t.icons.erase + "</button></form></div>", u;
  },
  /**
   * @description Internal function used by this.createColorList
   * @param {Array} colorList Color list
   * @private
   */
  _makeColorList: function(t) {
    let e = "";
    e += '<ul class="se-color-pallet">';
    for (let i = 0, n = t.length, l; i < n; i++)
      l = t[i], typeof l == "string" && (e += '<li><button type="button" data-value="' + l + '" title="' + l + '" aria-label="' + l + '" style="background-color:' + l + ';"></button></li>');
    return e += "</ul>", e;
  },
  /**
   * @description Displays or resets the currently selected color at color list.
   * @param {Node} node Current Selected node
   * @param {String|null} color Color value
   */
  init: function(t, e) {
    const i = this.plugins.colorPicker;
    let n = e || i.getColorInNode.call(this, t) || this.context.colorPicker._defaultColor;
    n = i.isHexColor(n) ? n : i.rgb2hex(n) || n;
    const l = this.context.colorPicker._colorList;
    if (l)
      for (let r = 0, u = l.length; r < u; r++)
        n.toLowerCase() === l[r].getAttribute("data-value").toLowerCase() ? this.util.addClass(l[r], "active") : this.util.removeClass(l[r], "active");
    i.setInputText.call(this, i.colorName2hex.call(this, n));
  },
  /**
   * @description Store color values
   * @param {String} hexColorStr Hax color value
   */
  setCurrentColor: function(t) {
    this.context.colorPicker._currentColor = t, this.context.colorPicker._colorInput.style.borderColor = t;
  },
  /**
   * @description Set color at input element
   * @param {String} hexColorStr Hax color value
   */
  setInputText: function(t) {
    t = /^#/.test(t) ? t : "#" + t, this.context.colorPicker._colorInput.value = t, this.plugins.colorPicker.setCurrentColor.call(this, t);
  },
  /**
   * @description Gets color value at color property of node
   * @param {Node} node Selected node 
   * @returns {String}
   */
  getColorInNode: function(t) {
    let e = "";
    const i = this.context.colorPicker._styleProperty;
    for (; t && !this.util.isWysiwygDiv(t) && e.length === 0; )
      t.nodeType === 1 && t.style[i] && (e = t.style[i]), t = t.parentNode;
    return e;
  },
  /**
   * @description Function to check hex format color
   * @param {String} str Color value
   */
  isHexColor: function(t) {
    return /^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(t);
  },
  /**
   * @description Function to convert hex format to a rgb color
   * @param {String} rgb RGB color format
   * @returns {String}
   */
  rgb2hex: function(t) {
    const e = t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
    return e && e.length === 4 ? "#" + ("0" + parseInt(e[1], 10).toString(16)).slice(-2) + ("0" + parseInt(e[2], 10).toString(16)).slice(-2) + ("0" + parseInt(e[3], 10).toString(16)).slice(-2) : "";
  },
  /**
   * @description Converts color values of other formats to hex color values and returns.
   * @param {String} colorName Color value
   * @returns {String}
   */
  colorName2hex: function(t) {
    if (/^#/.test(t))
      return t;
    var e = this.util.createElement("div");
    e.style.display = "none", e.style.color = t;
    var i = this._w.getComputedStyle(this._d.body.appendChild(e)).color.match(/\d+/g).map(function(n) {
      return parseInt(n, 10);
    });
    return this.util.removeItem(e), i.length >= 3 ? "#" + ((1 << 24) + (i[0] << 16) + (i[1] << 8) + i[2]).toString(16).substr(1) : !1;
  }
}, H0 = {
  name: "fontColor",
  display: "submenu",
  add: function(t, e) {
    t.addModule([D0]);
    const i = t.context;
    i.fontColor = {
      previewEl: null,
      colorInput: null,
      colorList: null
    };
    let n = this.setSubmenu(t);
    i.fontColor.colorInput = n.querySelector("._se_color_picker_input"), i.fontColor.colorInput.addEventListener("keyup", this.onChangeInput.bind(t)), n.querySelector("._se_color_picker_submit").addEventListener("click", this.submit.bind(t)), n.querySelector("._se_color_picker_remove").addEventListener("click", this.remove.bind(t)), n.addEventListener("click", this.pickup.bind(t)), i.fontColor.colorList = n.querySelectorAll("li button"), t.initMenuTarget(this.name, e, n), n = null;
  },
  setSubmenu: function(t) {
    const e = t.context.colorPicker.colorListHTML, i = t.util.createElement("DIV");
    return i.className = "se-submenu se-list-layer", i.innerHTML = e, i;
  },
  /**
  * @Override submenu
  */
  on: function() {
    const t = this.context.colorPicker, e = this.context.fontColor;
    t._colorInput = e.colorInput;
    const i = this.wwComputedStyle.color;
    t._defaultColor = i ? this.plugins.colorPicker.isHexColor(i) ? i : this.plugins.colorPicker.rgb2hex(i) : "#333333", t._styleProperty = "color", t._colorList = e.colorList, this.plugins.colorPicker.init.call(this, this.getSelectionNode(), null);
  },
  /**
  * @Override _colorPicker
  */
  onChangeInput: function(t) {
    this.plugins.colorPicker.setCurrentColor.call(this, t.target.value);
  },
  submit: function() {
    this.plugins.fontColor.applyColor.call(this, this.context.colorPicker._currentColor);
  },
  pickup: function(t) {
    t.preventDefault(), t.stopPropagation(), this.plugins.fontColor.applyColor.call(this, t.target.getAttribute("data-value"));
  },
  remove: function() {
    this.nodeChange(null, ["color"], ["span"], !0), this.submenuOff();
  },
  applyColor: function(t) {
    if (!t)
      return;
    const e = this.util.createElement("SPAN");
    e.style.color = t, this.nodeChange(e, ["color"], null, null), this.submenuOff();
  }
}, I0 = {
  name: "hiliteColor",
  display: "submenu",
  add: function(t, e) {
    t.addModule([D0]);
    const i = t.context;
    i.hiliteColor = {
      previewEl: null,
      colorInput: null,
      colorList: null
    };
    let n = this.setSubmenu(t);
    i.hiliteColor.colorInput = n.querySelector("._se_color_picker_input"), i.hiliteColor.colorInput.addEventListener("keyup", this.onChangeInput.bind(t)), n.querySelector("._se_color_picker_submit").addEventListener("click", this.submit.bind(t)), n.querySelector("._se_color_picker_remove").addEventListener("click", this.remove.bind(t)), n.addEventListener("click", this.pickup.bind(t)), i.hiliteColor.colorList = n.querySelectorAll("li button"), t.initMenuTarget(this.name, e, n), n = null;
  },
  setSubmenu: function(t) {
    const e = t.context.colorPicker.colorListHTML, i = t.util.createElement("DIV");
    return i.className = "se-submenu se-list-layer", i.innerHTML = e, i;
  },
  /**
  * @Override submenu
  */
  on: function() {
    const t = this.context.colorPicker, e = this.context.hiliteColor;
    t._colorInput = e.colorInput;
    const i = this.wwComputedStyle.backgroundColor;
    t._defaultColor = i ? this.plugins.colorPicker.isHexColor(i) ? i : this.plugins.colorPicker.rgb2hex(i) : "#ffffff", t._styleProperty = "backgroundColor", t._colorList = e.colorList, this.plugins.colorPicker.init.call(this, this.getSelectionNode(), null);
  },
  /**
  * @Override _colorPicker
  */
  onChangeInput: function(t) {
    this.plugins.colorPicker.setCurrentColor.call(this, t.target.value);
  },
  submit: function() {
    this.plugins.hiliteColor.applyColor.call(this, this.context.colorPicker._currentColor);
  },
  pickup: function(t) {
    t.preventDefault(), t.stopPropagation(), this.plugins.hiliteColor.applyColor.call(this, t.target.getAttribute("data-value"));
  },
  remove: function() {
    this.nodeChange(null, ["background-color"], ["span"], !0), this.submenuOff();
  },
  applyColor: function(t) {
    if (!t)
      return;
    const e = this.util.createElement("SPAN");
    e.style.backgroundColor = t, this.nodeChange(e, ["background-color"], null, null), this.submenuOff();
  }
}, O0 = {
  name: "horizontalRule",
  display: "submenu",
  add: function(t, e) {
    t.context.horizontalRule = {
      currentHR: null
    };
    let i = this.setSubmenu(t);
    i.querySelector("ul").addEventListener("click", this.horizontalRulePick.bind(t)), t.initMenuTarget(this.name, e, i), i = null;
  },
  setSubmenu: function(t) {
    const e = t.lang, i = t.util.createElement("DIV"), n = t.options.hrItems || [{ name: e.toolbar.hr_solid, class: "__se__solid" }, { name: e.toolbar.hr_dashed, class: "__se__dashed" }, { name: e.toolbar.hr_dotted, class: "__se__dotted" }];
    let l = "";
    for (let r = 0, u = n.length; r < u; r++)
      l += '<li><button type="button" class="se-btn-list btn_line" data-command="horizontalRule" data-value="' + n[r].class + '" title="' + n[r].name + '" aria-label="' + n[r].name + '"><hr' + (n[r].class ? ' class="' + n[r].class + '"' : "") + (n[r].style ? ' style="' + n[r].style + '"' : "") + "/></button></li>";
    return i.className = "se-submenu se-list-layer se-list-line", i.innerHTML = '<div class="se-list-inner"><ul class="se-list-basic">' + l + "</ul></div>", i;
  },
  active: function(t) {
    if (!t)
      this.util.hasClass(this.context.horizontalRule.currentHR, "on") && this.controllersOff();
    else if (/HR/i.test(t.nodeName))
      return this.context.horizontalRule.currentHR = t, this.util.hasClass(t, "on") || (this.util.addClass(t, "on"), this.controllersOn("hr", this.util.removeClass.bind(this.util, t, "on"))), !0;
    return !1;
  },
  appendHr: function(t) {
    return this.focus(), this.insertComponent(t.cloneNode(!1), !1, !0, !1);
  },
  horizontalRulePick: function(t) {
    t.preventDefault(), t.stopPropagation();
    let e = t.target, i = e.getAttribute("data-command");
    for (; !i && !/UL/i.test(e.tagName); )
      e = e.parentNode, i = e.getAttribute("data-command");
    if (!i)
      return;
    const n = this.plugins.horizontalRule.appendHr.call(this, e.firstElementChild);
    n && (this.setRange(n, 0, n, 0), this.submenuOff());
  }
}, F0 = {
  name: "list",
  display: "submenu",
  add: function(t, e) {
    const i = t.context;
    i.list = {
      targetButton: e,
      _list: null,
      currentList: "",
      icons: {
        bullets: t.icons.list_bullets,
        number: t.icons.list_number
      }
    };
    let n = this.setSubmenu(t), l = n.querySelector("ul");
    l.addEventListener("click", this.pickup.bind(t)), i.list._list = l.querySelectorAll("li button"), t.initMenuTarget(this.name, e, n), n = null, l = null;
  },
  setSubmenu: function(t) {
    const e = t.lang, i = t.util.createElement("DIV");
    return i.className = "se-submenu se-list-layer", i.innerHTML = '<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="se-btn-list se-tooltip" data-command="OL" title="' + e.toolbar.orderList + '" aria-label="' + e.toolbar.orderList + '">' + t.icons.list_number + '</button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="UL" title="' + e.toolbar.unorderList + '" aria-label="' + e.toolbar.unorderList + '">' + t.icons.list_bullets + "</button></li></ul></div>", i;
  },
  /**
  * @Override core
  */
  active: function(t) {
    const e = this.context.list.targetButton, i = e.firstElementChild, n = this.util;
    if (n.isList(t)) {
      const l = t.nodeName;
      return e.setAttribute("data-focus", l), n.addClass(e, "active"), /UL/i.test(l) ? n.changeElement(i, this.context.list.icons.bullets) : n.changeElement(i, this.context.list.icons.number), !0;
    } else
      e.removeAttribute("data-focus"), n.changeElement(i, this.context.list.icons.number), n.removeClass(e, "active");
    return !1;
  },
  /**
  * @Override submenu
  */
  on: function() {
    const t = this.context.list, e = t._list, i = t.targetButton.getAttribute("data-focus") || "";
    if (i !== t.currentList) {
      for (let n = 0, l = e.length; n < l; n++)
        i === e[n].getAttribute("data-command") ? this.util.addClass(e[n], "active") : this.util.removeClass(e[n], "active");
      t.currentList = i;
    }
  },
  editList: function(t, e, i) {
    let n = this.getRange(), l = e || this.getSelectedElementsAndComponents(!1);
    if (l.length === 0 && (e || (n = this.getRange_addLine(n, null), l = this.getSelectedElementsAndComponents(!1), l.length === 0)))
      return;
    const r = this.util;
    r.sortByDepth(l, !0);
    let u = l[0], h = l[l.length - 1], s = (r.isListCell(u) || r.isComponent(u)) && !u.previousElementSibling ? u.parentNode.previousElementSibling : u.previousElementSibling, m = (r.isListCell(h) || r.isComponent(h)) && !h.nextElementSibling ? h.parentNode.nextElementSibling : h.nextElementSibling;
    const c = n.collapsed, g = {
      sc: n.startContainer,
      so: n.startContainer === n.endContainer && r.onlyZeroWidthSpace(n.startContainer) && n.startOffset === 0 && n.endOffset === 1 ? n.endOffset : n.startOffset,
      ec: n.endContainer,
      eo: n.endOffset
    };
    let x = null, T = !0;
    for (let L = 0, A = l.length; L < A; L++)
      if (!r.isList(r.getRangeFormatElement(l[L], (function(a) {
        return this.getRangeFormatElement(a) && a !== l[L];
      }).bind(r)))) {
        T = !1;
        break;
      }
    if (T && (!s || u.tagName !== s.tagName || t !== s.tagName.toUpperCase()) && (!m || h.tagName !== m.tagName || t !== m.tagName.toUpperCase())) {
      if (i) {
        for (let p = 0, v = l.length; p < v; p++)
          for (let _ = p - 1; _ >= 0; _--)
            if (l[_].contains(l[p])) {
              l.splice(p, 1), p--, v--;
              break;
            }
      }
      const L = r.getRangeFormatElement(u), A = L && L.tagName === t;
      let a, o;
      const d = (function(p) {
        return !this.isComponent(p);
      }).bind(r);
      A || (o = r.createElement(t));
      for (let p = 0, v = l.length, _, b; p < v; p++)
        b = r.getRangeFormatElement(l[p], d), !(!b || !r.isList(b)) && (_ ? _ !== b ? (i && r.isListCell(b.parentNode) ? this.plugins.list._detachNested.call(this, a.f) : x = this.detachRangeFormatElement(a.f[0].parentNode, a.f, o, !1, !0), b = l[p].parentNode, A || (o = r.createElement(t)), _ = b, a = { r: _, f: [r.getParentElement(l[p], "LI")] }) : a.f.push(r.getParentElement(l[p], "LI")) : (_ = b, a = { r: _, f: [r.getParentElement(l[p], "LI")] }), p === v - 1 && (i && r.isListCell(b.parentNode) ? this.plugins.list._detachNested.call(this, a.f) : x = this.detachRangeFormatElement(a.f[0].parentNode, a.f, o, !1, !0)));
    } else {
      const L = s && s.parentNode, A = m && m.parentNode;
      s = L && !r.isWysiwygDiv(L) && L.nodeName === t ? L : s, m = A && !r.isWysiwygDiv(A) && A.nodeName === t ? A : m;
      const a = s && s.tagName === t, o = m && m.tagName === t;
      let d = a ? s : r.createElement(t), p = null, v = null, _ = null;
      const b = (function(S) {
        return !this.isComponent(S) && !this.isList(S);
      }).bind(r);
      for (let S = 0, k = l.length, w, z, M, N, O, I, $, Y, j; S < k; S++) {
        if (z = l[S], z.childNodes.length === 0 && !r._isIgnoreNodeChange(z)) {
          r.removeItem(z);
          continue;
        }
        if (N = l[S + 1], O = z.parentNode, I = N ? N.parentNode : null, M = r.isListCell(z), j = r.isRangeFormatElement(O) ? O : null, $ = M && !r.isWysiwygDiv(O) ? O.parentNode : O, Y = M && !r.isWysiwygDiv(O) ? !N || r.isListCell($) ? O : O.nextSibling : z.nextSibling, w = r.createElement("LI"), r.copyFormatAttributes(w, z), S === 0 && g.sc === z && (g.sc = w), S === k - 1 && g.ec === z && (g.ec = w), r.isComponent(z)) {
          const R = /^HR$/i.test(z.nodeName);
          R || (w.innerHTML = "<br>"), w.innerHTML += z.outerHTML, R && (w.innerHTML += "<br>");
        } else {
          const R = z.childNodes;
          for (; R[0]; )
            w.appendChild(R[0]);
        }
        d.appendChild(w), (!N || $ !== I || r.isRangeFormatElement(Y)) && (p || (p = d), (!a || !N || $ !== I) && !(N && r.isList(I) && I === O) && d.parentNode !== $ && $.insertBefore(d, Y)), r.removeItem(z), a && v === null && (v = d.children.length - 1), N && (r.getRangeFormatElement(I, b) !== r.getRangeFormatElement(O, b) || r.isList(I) && r.isList(O) && r.getElementDepth(I) !== r.getElementDepth(O)) && (d = r.createElement(t)), j && j.children.length === 0 && r.removeItem(j);
      }
      v && (p = p.children[v]), o && (_ = d.children.length - 1, d.innerHTML += m.innerHTML, d.children[_], r.removeItem(m));
    }
    return this.effectNode = null, c ? x : g;
  },
  _detachNested: function(t) {
    const e = t[0], i = t[t.length - 1], n = i.nextElementSibling, l = e.parentNode, r = l.parentNode.nextElementSibling, u = l.parentNode.parentNode;
    for (let s = 0, m = t.length; s < m; s++)
      u.insertBefore(t[s], r);
    if (n && l.children.length > 0) {
      const s = l.cloneNode(!1), m = l.childNodes, c = this.util.getPositionIndex(n);
      for (; m[c]; )
        s.appendChild(m[c]);
      i.appendChild(s);
    }
    l.children.length === 0 && this.util.removeItem(l), this.util.mergeSameTags(u);
    const h = this.util.getEdgeChildNodes(e, i);
    return {
      cc: e.parentNode,
      sc: h.sc,
      ec: h.ec
    };
  },
  editInsideList: function(t, e) {
    e = e || this.getSelectedElements().filter((function(u) {
      return this.isListCell(u);
    }).bind(this.util));
    const i = e.length;
    if (i === 0 || !t && !this.util.isListCell(e[0].previousElementSibling) && !this.util.isListCell(e[i - 1].nextElementSibling))
      return {
        sc: e[0],
        so: 0,
        ec: e[i - 1],
        eo: 1
      };
    let n = e[0].parentNode, l = e[i - 1], r = null;
    if (t) {
      if (n !== l.parentNode && this.util.isList(l.parentNode.parentNode) && l.nextElementSibling)
        for (l = l.nextElementSibling; l; )
          e.push(l), l = l.nextElementSibling;
      r = this.plugins.list.editList.call(this, n.nodeName.toUpperCase(), e, !0);
    } else {
      let u = this.util.createElement(n.nodeName), h = e[0].previousElementSibling, s = l.nextElementSibling;
      const m = { s: null, e: null, sl: n, el: n };
      for (let x = 0, T = i, L; x < T; x++)
        L = e[x], L.parentNode !== n && (this.plugins.list._insiedList.call(this, n, u, h, s, m), n = L.parentNode, u = this.util.createElement(n.nodeName)), h = L.previousElementSibling, s = L.nextElementSibling, u.appendChild(L);
      this.plugins.list._insiedList.call(this, n, u, h, s, m);
      const c = this.util.getNodeFromPath(m.s, m.sl), g = this.util.getNodeFromPath(m.e, m.el);
      r = {
        sc: c,
        so: 0,
        ec: g,
        eo: g.textContent.length
      };
    }
    return r;
  },
  _insiedList: function(t, e, i, n, l) {
    let r = !1;
    if (i && e.tagName === i.tagName) {
      const u = e.children;
      for (; u[0]; )
        i.appendChild(u[0]);
      e = i, r = !0;
    }
    if (n && e.tagName === n.tagName) {
      const u = n.children;
      for (; u[0]; )
        e.appendChild(u[0]);
      const h = n.nextElementSibling;
      n.parentNode.removeChild(n), n = h;
    }
    if (!r) {
      this.util.isListCell(i) && (t = i, n = null), t.insertBefore(e, n), l.s || (l.s = this.util.getNodePath(e.firstElementChild.firstChild, t, null), l.sl = t);
      const u = t.contains(l.sl) ? this.util.getNodePath(l.sl, t) : null;
      l.e = this.util.getNodePath(e.lastElementChild.firstChild, t, null), l.el = t, this.util.mergeSameTags(t, [l.s, l.e, u], !1), this.util.mergeNestedTags(t), u && (l.sl = this.util.getNodeFromPath(u, t));
    }
    return e;
  },
  pickup: function(t) {
    t.preventDefault(), t.stopPropagation();
    let e = t.target, i = "";
    for (; !i && !/^UL$/i.test(e.tagName); )
      i = e.getAttribute("data-command"), e = e.parentNode;
    if (!i)
      return;
    const n = this.plugins.list.editList.call(this, i, null, !1);
    n && this.setRange(n.sc, n.so, n.ec, n.eo), this.submenuOff(), this.history.push(!1);
  }
}, P0 = {
  name: "table",
  display: "submenu",
  add: function(t, e) {
    const i = t.context;
    let n = i.table = {
      _element: null,
      _tdElement: null,
      _trElement: null,
      _trElements: null,
      _tableXY: [],
      _maxWidth: !0,
      _fixedColumn: !1,
      _rtl: t.options.rtl,
      cellControllerTop: t.options.tableCellControllerPosition === "top",
      resizeText: null,
      headerButton: null,
      mergeButton: null,
      splitButton: null,
      splitMenu: null,
      maxText: t.lang.controller.maxSize,
      minText: t.lang.controller.minSize,
      _physical_cellCnt: 0,
      _logical_cellCnt: 0,
      _rowCnt: 0,
      _rowIndex: 0,
      _physical_cellIndex: 0,
      _logical_cellIndex: 0,
      _current_colSpan: 0,
      _current_rowSpan: 0,
      icons: {
        expansion: t.icons.expansion,
        reduction: t.icons.reduction
      }
    }, l = this.setSubmenu(t), r = l.querySelector(".se-controller-table-picker");
    n.tableHighlight = l.querySelector(".se-table-size-highlighted"), n.tableUnHighlight = l.querySelector(".se-table-size-unhighlighted"), n.tableDisplay = l.querySelector(".se-table-size-display"), t.options.rtl && (n.tableHighlight.style.left = 10 * 18 - 13 + "px");
    let u = this.setController_table(t);
    n.tableController = u, n.resizeButton = u.querySelector("._se_table_resize"), n.resizeText = u.querySelector("._se_table_resize > span > span"), n.columnFixedButton = u.querySelector("._se_table_fixed_column"), n.headerButton = u.querySelector("._se_table_header");
    let h = this.setController_tableEditor(t, n.cellControllerTop);
    n.resizeDiv = h, n.splitMenu = h.querySelector(".se-btn-group-sub"), n.mergeButton = h.querySelector("._se_table_merge_button"), n.splitButton = h.querySelector("._se_table_split_button"), n.insertRowAboveButton = h.querySelector("._se_table_insert_row_a"), n.insertRowBelowButton = h.querySelector("._se_table_insert_row_b"), r.addEventListener("mousemove", this.onMouseMove_tablePicker.bind(t, n)), r.addEventListener("click", this.appendTable.bind(t)), h.addEventListener("click", this.onClick_tableController.bind(t)), u.addEventListener("click", this.onClick_tableController.bind(t)), t.initMenuTarget(this.name, e, l), i.element.relative.appendChild(h), i.element.relative.appendChild(u), l = null, r = null, h = null, u = null, n = null;
  },
  setSubmenu: function(t) {
    const e = t.util.createElement("DIV");
    return e.className = "se-submenu se-selector-table", e.innerHTML = '<div class="se-table-size"><div class="se-table-size-picker se-controller-table-picker"></div><div class="se-table-size-highlighted"></div><div class="se-table-size-unhighlighted"></div></div><div class="se-table-size-display">1 x 1</div>', e;
  },
  setController_table: function(t) {
    const e = t.lang, i = t.icons, n = t.util.createElement("DIV");
    return n.className = "se-controller se-controller-table", n.innerHTML = '<div><div class="se-btn-group"><button type="button" data-command="resize" class="se-btn se-tooltip _se_table_resize">' + i.expansion + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.maxSize + '</span></span></button><button type="button" data-command="layout" class="se-btn se-tooltip _se_table_fixed_column">' + i.fixed_column_width + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.fixedColumnWidth + '</span></span></button><button type="button" data-command="header" class="se-btn se-tooltip _se_table_header">' + i.table_header + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.tableHeader + '</span></span></button><button type="button" data-command="remove" class="se-btn se-tooltip">' + i.delete + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.remove + "</span></span></button></div></div>", n;
  },
  setController_tableEditor: function(t, e) {
    const i = t.lang, n = t.icons, l = t.util.createElement("DIV");
    return l.className = "se-controller se-controller-table-cell", l.innerHTML = (e ? "" : '<div class="se-arrow se-arrow-up"></div>') + '<div class="se-btn-group"><button type="button" data-command="insert" data-value="row" data-option="up" class="se-btn se-tooltip _se_table_insert_row_a">' + n.insert_row_above + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + i.controller.insertRowAbove + '</span></span></button><button type="button" data-command="insert" data-value="row" data-option="down" class="se-btn se-tooltip _se_table_insert_row_b">' + n.insert_row_below + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + i.controller.insertRowBelow + '</span></span></button><button type="button" data-command="delete" data-value="row" class="se-btn se-tooltip">' + n.delete_row + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + i.controller.deleteRow + '</span></span></button><button type="button" data-command="merge" class="_se_table_merge_button se-btn se-tooltip" disabled>' + n.merge_cell + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + i.controller.mergeCells + '</span></span></button></div><div class="se-btn-group" style="padding-top: 0;"><button type="button" data-command="insert" data-value="cell" data-option="left" class="se-btn se-tooltip">' + n.insert_column_left + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + i.controller.insertColumnBefore + '</span></span></button><button type="button" data-command="insert" data-value="cell" data-option="right" class="se-btn se-tooltip">' + n.insert_column_right + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + i.controller.insertColumnAfter + '</span></span></button><button type="button" data-command="delete" data-value="cell" class="se-btn se-tooltip">' + n.delete_column + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + i.controller.deleteColumn + '</span></span></button><button type="button" data-command="onsplit" class="_se_table_split_button se-btn se-tooltip">' + n.split_cell + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + i.controller.splitCells + '</span></span></button><div class="se-btn-group-sub sun-editor-common se-list-layer se-table-split"><div class="se-list-inner"><ul class="se-list-basic"><li class="se-btn-list" data-command="split" data-value="vertical" style="line-height:32px;" title="' + i.controller.VerticalSplit + '" aria-label="' + i.controller.VerticalSplit + '">' + i.controller.VerticalSplit + '</li><li class="se-btn-list" data-command="split" data-value="horizontal" style="line-height:32px;" title="' + i.controller.HorizontalSplit + '" aria-label="' + i.controller.HorizontalSplit + '">' + i.controller.HorizontalSplit + "</li></ul></div></div></div>", l;
  },
  appendTable: function() {
    const t = this.util.createElement("TABLE"), e = this.plugins.table.createCells, i = this.context.table._tableXY[0];
    let n = this.context.table._tableXY[1], l = "<tbody>";
    for (; n > 0; )
      l += "<tr>" + e.call(this, "td", i) + "</tr>", --n;
    if (l += "</tbody>", t.innerHTML = l, this.insertComponent(t, !1, !0, !1)) {
      const u = t.querySelector("td div");
      this.setRange(u, 0, u, 0), this.plugins.table.reset_table_picker.call(this);
    }
  },
  createCells: function(t, e, i) {
    if (t = t.toLowerCase(), i) {
      const n = this.util.createElement(t);
      return n.innerHTML = "<div><br></div>", n;
    } else {
      let n = "";
      for (; e > 0; )
        n += "<" + t + "><div><br></div></" + t + ">", e--;
      return n;
    }
  },
  onMouseMove_tablePicker: function(t, e) {
    e.stopPropagation();
    let i = this._w.Math.ceil(e.offsetX / 18), n = this._w.Math.ceil(e.offsetY / 18);
    i = i < 1 ? 1 : i, n = n < 1 ? 1 : n, t._rtl && (t.tableHighlight.style.left = i * 18 - 13 + "px", i = 11 - i), t.tableHighlight.style.width = i + "em", t.tableHighlight.style.height = n + "em", this.util.changeTxt(t.tableDisplay, i + " x " + n), t._tableXY = [i, n];
  },
  reset_table_picker: function() {
    if (!this.context.table.tableHighlight)
      return;
    const t = this.context.table.tableHighlight.style, e = this.context.table.tableUnHighlight.style;
    t.width = "1em", t.height = "1em", e.width = "10em", e.height = "10em", this.util.changeTxt(this.context.table.tableDisplay, "1 x 1"), this.submenuOff();
  },
  init: function() {
    const t = this.context.table, e = this.plugins.table;
    if (e._removeEvents.call(this), e._selectedTable) {
      const i = e._selectedTable.querySelectorAll(".se-table-selected-cell");
      for (let n = 0, l = i.length; n < l; n++)
        this.util.removeClass(i[n], "se-table-selected-cell");
    }
    e._toggleEditor.call(this, !0), t._element = null, t._tdElement = null, t._trElement = null, t._trElements = null, t._tableXY = [], t._maxWidth = !0, t._fixedColumn = !1, t._physical_cellCnt = 0, t._logical_cellCnt = 0, t._rowCnt = 0, t._rowIndex = 0, t._physical_cellIndex = 0, t._logical_cellIndex = 0, t._current_colSpan = 0, t._current_rowSpan = 0, e._shift = !1, e._selectedCells = null, e._selectedTable = null, e._ref = null, e._fixedCell = null, e._selectedCell = null, e._fixedCellName = null;
  },
  /** table edit controller */
  call_controller_tableEdit: function(t) {
    const e = this.plugins.table, i = this.context.table;
    if (!this.getSelection().isCollapsed && !e._selectedCell) {
      this.controllersOff(), this.util.removeClass(t, "se-table-selected-cell");
      return;
    }
    const n = i._element || this.plugins.table._selectedTable || this.util.getParentElement(t, "TABLE");
    i._maxWidth = this.util.hasClass(n, "se-table-size-100") || n.style.width === "100%" || !n.style.width && !this.util.hasClass(n, "se-table-size-auto"), i._fixedColumn = this.util.hasClass(n, "se-table-layout-fixed") || n.style.tableLayout === "fixed", e.setTableStyle.call(this, i._maxWidth ? "width|column" : "width"), e.setPositionControllerTop.call(this, n), e.setPositionControllerDiv.call(this, t, e._shift), e._shift || this.controllersOn(i.resizeDiv, i.tableController, e.init.bind(this), t, "table");
  },
  setPositionControllerTop: function(t) {
    this.setControllerPosition(this.context.table.tableController, t, "top", { left: 0, top: 0 });
  },
  setPositionControllerDiv: function(t, e) {
    const i = this.context.table, n = i.resizeDiv;
    this.plugins.table.setCellInfo.call(this, t, e), i.cellControllerTop ? this.setControllerPosition(n, i._element, "top", { left: i.tableController.offsetWidth, top: 0 }) : this.setControllerPosition(n, t, "bottom", { left: 0, top: 0 });
  },
  setCellInfo: function(t, e) {
    const i = this.context.table, n = i._element = this.plugins.table._selectedTable || this.util.getParentElement(t, "TABLE");
    if (/THEAD/i.test(n.firstElementChild.nodeName) ? this.util.addClass(i.headerButton, "active") : this.util.removeClass(i.headerButton, "active"), e || i._physical_cellCnt === 0) {
      i._tdElement !== t && (i._tdElement = t, i._trElement = t.parentNode);
      const l = i._trElements = n.rows, r = t.cellIndex;
      let u = 0;
      for (let c = 0, g = l[0].cells, x = l[0].cells.length; c < x; c++)
        u += g[c].colSpan;
      const h = i._rowIndex = i._trElement.rowIndex;
      i._rowCnt = l.length, i._physical_cellCnt = i._trElement.cells.length, i._logical_cellCnt = u, i._physical_cellIndex = r, i._current_colSpan = i._tdElement.colSpan - 1, i._current_rowSpan - i._trElement.cells[r].rowSpan - 1;
      let s = [], m = [];
      for (let c = 0, g, x; c <= h; c++) {
        g = l[c].cells, x = 0;
        for (let T = 0, L = g.length, A, a, o, d; T < L; T++) {
          if (A = g[T], a = A.colSpan - 1, o = A.rowSpan - 1, d = T + x, m.length > 0)
            for (let p = 0, v; p < m.length; p++)
              v = m[p], !(v.row > c) && (d >= v.index ? (x += v.cs, d += v.cs, v.rs -= 1, v.row = c + 1, v.rs < 1 && (m.splice(p, 1), p--)) : T === L - 1 && (v.rs -= 1, v.row = c + 1, v.rs < 1 && (m.splice(p, 1), p--)));
          if (c === h && T === r) {
            i._logical_cellIndex = d;
            break;
          }
          o > 0 && s.push({
            index: d,
            cs: a + 1,
            rs: o,
            row: -1
          }), x += a;
        }
        m = m.concat(s).sort(function(T, L) {
          return T.index - L.index;
        }), s = [];
      }
      s = null, m = null;
    }
  },
  editTable: function(t, e) {
    const i = this.plugins.table, n = this.context.table, l = n._element, r = t === "row";
    if (r) {
      const u = n._trElement.parentNode;
      if (/^THEAD$/i.test(u.nodeName)) {
        if (e === "up")
          return;
        if (!u.nextElementSibling || !/^TBODY$/i.test(u.nextElementSibling.nodeName)) {
          l.innerHTML += "<tbody><tr>" + i.createCells.call(this, "td", n._logical_cellCnt, !1) + "</tr></tbody>";
          return;
        }
      }
    }
    if (i._ref) {
      const u = n._tdElement, h = i._selectedCells;
      if (r)
        if (e)
          i.setCellInfo.call(this, e === "up" ? h[0] : h[h.length - 1], !0), i.editRow.call(this, e, u);
        else {
          let s = h[0].parentNode;
          const m = [h[0]];
          for (let c = 1, g = h.length, x; c < g; c++)
            x = h[c], s !== x.parentNode && (m.push(x), s = x.parentNode);
          for (let c = 0, g = m.length; c < g; c++)
            i.setCellInfo.call(this, m[c], !0), i.editRow.call(this, e);
        }
      else {
        const s = h[0].parentNode;
        if (e) {
          let m = null;
          for (let c = 0, g = h.length - 1; c < g; c++)
            if (s !== h[c + 1].parentNode) {
              m = h[c];
              break;
            }
          i.setCellInfo.call(this, e === "left" ? h[0] : m || h[0], !0), i.editCell.call(this, e, u);
        } else {
          const m = [h[0]];
          for (let c = 1, g = h.length, x; c < g && (x = h[c], s === x.parentNode); c++)
            m.push(x);
          for (let c = 0, g = m.length; c < g; c++)
            i.setCellInfo.call(this, m[c], !0), i.editCell.call(this, e);
        }
      }
      e || i.init.call(this);
    } else
      i[r ? "editRow" : "editCell"].call(this, e);
    if (!e) {
      const u = l.children;
      for (let h = 0; h < u.length; h++)
        u[h].children.length === 0 && (this.util.removeItem(u[h]), h--);
      l.children.length === 0 && this.util.removeItem(l);
    }
  },
  editRow: function(t, e) {
    const i = this.context.table, n = !t, l = t === "up", r = i._rowIndex, u = n || l ? r : r + i._current_rowSpan + 1, h = n ? -1 : 1, s = i._trElements;
    let m = i._logical_cellCnt;
    for (let c = 0, g = r + (n ? -1 : 0), x; c <= g; c++) {
      if (x = s[c].cells, x.length === 0)
        return;
      for (let T = 0, L = x.length, A, a; T < L; T++)
        A = x[T].rowSpan, a = x[T].colSpan, !(A < 2 && a < 2) && A + c > u && u > c && (x[T].rowSpan = A + h, m -= a);
    }
    if (n) {
      const c = s[r + 1];
      if (c) {
        const g = [];
        let x = s[r].cells, T = 0;
        for (let L = 0, A = x.length, a, o; L < A; L++)
          a = x[L], o = L + T, T += a.colSpan - 1, a.rowSpan > 1 && (a.rowSpan -= 1, g.push({ cell: a.cloneNode(!1), index: o }));
        if (g.length > 0) {
          let L = g.shift();
          x = c.cells, T = 0;
          for (let A = 0, a = x.length, o, d; A < a && (o = x[A], d = A + T, T += o.colSpan - 1, !(d >= L.index && (A--, T--, T += L.cell.colSpan - 1, c.insertBefore(L.cell, o), L = g.shift(), !L))); A++)
            ;
          if (L) {
            c.appendChild(L.cell);
            for (let A = 0, a = g.length; A < a; A++)
              c.appendChild(g[A].cell);
          }
        }
      }
      i._element.deleteRow(u);
    } else {
      const c = i._element.insertRow(u);
      c.innerHTML = this.plugins.table.createCells.call(this, "td", m, !1);
    }
    n ? this.controllersOff() : this.plugins.table.setPositionControllerDiv.call(this, e || i._tdElement, !0);
  },
  editCell: function(t, e) {
    const i = this.context.table, n = this.util, l = !t, r = t === "left", u = i._current_colSpan, h = l || r ? i._logical_cellIndex : i._logical_cellIndex + u + 1, s = i._trElements;
    let m = [], c = [], g = 0;
    const x = [], T = [];
    for (let L = 0, A = i._rowCnt, a, o, d, p, v, _; L < A; L++) {
      a = s[L], o = h, v = !1, d = a.cells, _ = 0;
      for (let b = 0, S, k = d.length, w, z, M; b < k && (S = d[b], !!S); b++)
        if (w = S.rowSpan - 1, z = S.colSpan - 1, l) {
          if (M = b + _, c.length > 0) {
            const N = !d[b + 1];
            for (let O = 0, I; O < c.length; O++)
              I = c[O], !(I.row > L) && (M >= I.index ? (_ += I.cs, M = b + _, I.rs -= 1, I.row = L + 1, I.rs < 1 && (c.splice(O, 1), O--)) : N && (I.rs -= 1, I.row = L + 1, I.rs < 1 && (c.splice(O, 1), O--)));
          }
          w > 0 && m.push({
            rs: w,
            cs: z + 1,
            index: M,
            row: -1
          }), M >= o && M + z <= o + u ? x.push(S) : M <= o + u && M + z >= o ? S.colSpan -= n.getOverlapRangeAtIndex(h, h + u, M, M + z) : w > 0 && (M < o || M + z > o + u) && T.push({
            cell: S,
            i: L,
            rs: L + w
          }), _ += z;
        } else {
          if (b >= o)
            break;
          if (z > 0) {
            if (g < 1 && z + b >= o) {
              S.colSpan += 1, o = null, g = w + 1;
              break;
            }
            o -= z;
          }
          if (!v) {
            for (let N = 0, O; N < c.length; N++)
              O = c[N], o -= O.cs, O.rs -= 1, O.rs < 1 && (c.splice(N, 1), N--);
            v = !0;
          }
        }
      if (c = c.concat(m).sort(function(b, S) {
        return b.index - S.index;
      }), m = [], !l) {
        if (g > 0) {
          g -= 1;
          continue;
        }
        o !== null && d.length > 0 && (p = this.plugins.table.createCells.call(this, d[0].nodeName, 0, !0), p = a.insertBefore(p, d[o]));
      }
    }
    if (l) {
      let L, A;
      for (let a = 0, o = x.length, d; a < o; a++)
        d = x[a].parentNode, n.removeItem(x[a]), d.cells.length === 0 && (L || (L = n.getArrayIndex(s, d)), A = n.getArrayIndex(s, d), n.removeItem(d));
      for (let a = 0, o = T.length, d; a < o; a++)
        d = T[a], d.cell.rowSpan = n.getOverlapRangeAtIndex(L, A, d.i, d.rs);
      this.controllersOff();
    } else
      this.plugins.table.setPositionControllerDiv.call(this, e || i._tdElement, !0);
  },
  _closeSplitMenu: null,
  openSplitMenu: function() {
    this.util.addClass(this.context.table.splitButton, "on"), this.context.table.splitMenu.style.display = "inline-table", this.plugins.table._closeSplitMenu = (function() {
      this.util.removeClass(this.context.table.splitButton, "on"), this.context.table.splitMenu.style.display = "none", this.removeDocEvent("click", this.plugins.table._closeSplitMenu), this.plugins.table._closeSplitMenu = null;
    }).bind(this), this.addDocEvent("click", this.plugins.table._closeSplitMenu);
  },
  splitCells: function(t) {
    const e = this.util, i = t === "vertical", n = this.context.table, l = n._tdElement, r = n._trElements, u = n._trElement, h = n._logical_cellIndex, s = n._rowIndex, m = this.plugins.table.createCells.call(this, l.nodeName, 0, !0);
    if (i) {
      const c = l.colSpan;
      if (m.rowSpan = l.rowSpan, c > 1)
        m.colSpan = this._w.Math.floor(c / 2), l.colSpan = c - m.colSpan, u.insertBefore(m, l.nextElementSibling);
      else {
        let g = [], x = [];
        for (let T = 0, L = n._rowCnt, A, a; T < L; T++) {
          A = r[T].cells, a = 0;
          for (let o = 0, d = A.length, p, v, _, b; o < d; o++) {
            if (p = A[o], v = p.colSpan - 1, _ = p.rowSpan - 1, b = o + a, x.length > 0)
              for (let S = 0, k; S < x.length; S++)
                k = x[S], !(k.row > T) && (b >= k.index ? (a += k.cs, b += k.cs, k.rs -= 1, k.row = T + 1, k.rs < 1 && (x.splice(S, 1), S--)) : o === d - 1 && (k.rs -= 1, k.row = T + 1, k.rs < 1 && (x.splice(S, 1), S--)));
            if (b <= h && _ > 0 && g.push({
              index: b,
              cs: v + 1,
              rs: _,
              row: -1
            }), p !== l && b <= h && b + v >= h + c - 1) {
              p.colSpan += 1;
              break;
            }
            if (b > h)
              break;
            a += v;
          }
          x = x.concat(g).sort(function(o, d) {
            return o.index - d.index;
          }), g = [];
        }
        u.insertBefore(m, l.nextElementSibling);
      }
    } else {
      const c = l.rowSpan;
      if (m.colSpan = l.colSpan, c > 1) {
        m.rowSpan = this._w.Math.floor(c / 2);
        const g = c - m.rowSpan, x = [], T = e.getArrayIndex(r, u) + g;
        for (let o = 0, d, p; o < T; o++) {
          d = r[o].cells, p = 0;
          for (let v = 0, _ = d.length, b, S, k; v < _ && (k = v + p, !(k >= h)); v++)
            b = d[v], S = b.rowSpan - 1, S > 0 && S + o >= T && k < h && x.push({
              index: k,
              cs: b.colSpan
            }), p += b.colSpan - 1;
        }
        const L = r[T], A = L.cells;
        let a = x.shift();
        for (let o = 0, d = A.length, p = 0, v, _, b, S; o < d; o++) {
          if (b = o + p, v = A[o], _ = v.colSpan - 1, S = b + _ + 1, a && S >= a.index && (p += a.cs, S += a.cs, a = x.shift()), S >= h || o === d - 1) {
            L.insertBefore(m, v.nextElementSibling);
            break;
          }
          p += _;
        }
        l.rowSpan = g;
      } else {
        m.rowSpan = l.rowSpan;
        const g = e.createElement("TR");
        g.appendChild(m);
        for (let L = 0, A; L < s; L++) {
          if (A = r[L].cells, A.length === 0)
            return;
          for (let a = 0, o = A.length; a < o; a++)
            L + A[a].rowSpan - 1 >= s && (A[a].rowSpan += 1);
        }
        const x = n._physical_cellIndex, T = u.cells;
        for (let L = 0, A = T.length; L < A; L++)
          L !== x && (T[L].rowSpan += 1);
        u.parentNode.insertBefore(g, u.nextElementSibling);
      }
    }
    this.focusEdge(l), this.plugins.table.setPositionControllerDiv.call(this, l, !0);
  },
  mergeCells: function() {
    const t = this.plugins.table, e = this.context.table, i = this.util, n = t._ref, l = t._selectedCells, r = l[0];
    let u = null, h = null, s = n.ce - n.cs + 1, m = n.re - n.rs + 1, c = "", g = null;
    for (let x = 1, T = l.length, L, A; x < T; x++) {
      L = l[x], g !== L.parentNode && (g = L.parentNode), A = L.children;
      for (let a = 0, o = A.length; a < o; a++)
        i.isFormatElement(A[a]) && i.onlyZeroWidthSpace(A[a].textContent) && i.removeItem(A[a]);
      c += L.innerHTML, i.removeItem(L), g.cells.length === 0 && (u ? h = g : u = g, m -= 1);
    }
    if (u) {
      const x = e._trElements, T = i.getArrayIndex(x, u), L = i.getArrayIndex(x, h || u), A = [];
      for (let a = 0, o; a <= L; a++) {
        if (o = x[a].cells, o.length === 0) {
          A.push(x[a]);
          continue;
        }
        for (let d = 0, p = o.length, v, _; d < p; d++)
          v = o[d], _ = v.rowSpan - 1, _ > 0 && a + _ >= T && (v.rowSpan -= i.getOverlapRangeAtIndex(T, L, a, a + _));
      }
      for (let a = 0, o = A.length; a < o; a++)
        i.removeItem(A[a]);
    }
    r.innerHTML += c, r.colSpan = s, r.rowSpan = m, this.controllersOff(), t.setActiveButton.call(this, !0, !1), t.call_controller_tableEdit.call(this, r), i.addClass(r, "se-table-selected-cell"), this.focusEdge(r);
  },
  toggleHeader: function() {
    const t = this.util, e = this.context.table.headerButton, i = t.hasClass(e, "active"), n = this.context.table._element;
    if (i)
      t.removeItem(n.querySelector("thead"));
    else {
      const l = t.createElement("THEAD");
      l.innerHTML = "<tr>" + this.plugins.table.createCells.call(this, "th", this.context.table._logical_cellCnt, !1) + "</tr>", n.insertBefore(l, n.firstElementChild);
    }
    t.toggleClass(e, "active"), /TH/i.test(this.context.table._tdElement.nodeName) ? this.controllersOff() : this.plugins.table.setPositionControllerDiv.call(this, this.context.table._tdElement, !1);
  },
  setTableStyle: function(t) {
    const e = this.context.table, i = e._element;
    let n, l, r, u;
    t.indexOf("width") > -1 && (n = e.resizeButton.firstElementChild, l = e.resizeText, e._maxWidth ? (r = e.icons.reduction, u = e.minText, e.columnFixedButton.style.display = "block", this.util.removeClass(i, "se-table-size-auto"), this.util.addClass(i, "se-table-size-100")) : (r = e.icons.expansion, u = e.maxText, e.columnFixedButton.style.display = "none", this.util.removeClass(i, "se-table-size-100"), this.util.addClass(i, "se-table-size-auto")), this.util.changeElement(n, r), this.util.changeTxt(l, u)), t.indexOf("column") > -1 && (e._fixedColumn ? (this.util.removeClass(i, "se-table-layout-auto"), this.util.addClass(i, "se-table-layout-fixed"), this.util.addClass(e.columnFixedButton, "active")) : (this.util.removeClass(i, "se-table-layout-fixed"), this.util.addClass(i, "se-table-layout-auto"), this.util.removeClass(e.columnFixedButton, "active")));
  },
  setActiveButton: function(t, e) {
    const i = this.context.table;
    /^TH$/i.test(t.nodeName) ? (i.insertRowAboveButton.setAttribute("disabled", !0), i.insertRowBelowButton.setAttribute("disabled", !0)) : (i.insertRowAboveButton.removeAttribute("disabled"), i.insertRowBelowButton.removeAttribute("disabled")), !e || t === e ? (i.splitButton.removeAttribute("disabled"), i.mergeButton.setAttribute("disabled", !0)) : (i.splitButton.setAttribute("disabled", !0), i.mergeButton.removeAttribute("disabled"));
  },
  // multi selecte
  _bindOnSelect: null,
  _bindOffSelect: null,
  _bindOffShift: null,
  _selectedCells: null,
  _shift: !1,
  _fixedCell: null,
  _fixedCellName: null,
  _selectedCell: null,
  _selectedTable: null,
  _ref: null,
  _toggleEditor: function(t) {
    this.context.element.wysiwyg.setAttribute("contenteditable", t), t ? this.util.removeClass(this.context.element.wysiwyg, "se-disabled") : this.util.addClass(this.context.element.wysiwyg, "se-disabled");
  },
  _offCellMultiSelect: function(t) {
    t.stopPropagation();
    const e = this.plugins.table;
    e._shift ? e._initBind && (this._wd.removeEventListener("touchmove", e._initBind), e._initBind = null) : (e._removeEvents.call(this), e._toggleEditor.call(this, !0)), !(!e._fixedCell || !e._selectedTable) && (e.setActiveButton.call(this, e._fixedCell, e._selectedCell), e.call_controller_tableEdit.call(this, e._selectedCell || e._fixedCell), e._selectedCells = e._selectedTable.querySelectorAll(".se-table-selected-cell"), e._selectedCell && e._fixedCell && this.focusEdge(e._selectedCell), e._shift || (e._fixedCell = null, e._selectedCell = null, e._fixedCellName = null));
  },
  _onCellMultiSelect: function(t) {
    this._antiBlur = !0;
    const e = this.plugins.table, i = this.util.getParentElement(t.target, this.util.isCell);
    if (e._shift)
      i === e._fixedCell ? e._toggleEditor.call(this, !0) : e._toggleEditor.call(this, !1);
    else if (!e._ref) {
      if (i === e._fixedCell)
        return;
      e._toggleEditor.call(this, !1);
    }
    !i || i === e._selectedCell || e._fixedCellName !== i.nodeName || e._selectedTable !== this.util.getParentElement(i, "TABLE") || (e._selectedCell = i, e._setMultiCells.call(this, e._fixedCell, i));
  },
  _setMultiCells: function(t, e) {
    const i = this.plugins.table, n = i._selectedTable.rows, l = this.util, r = i._selectedTable.querySelectorAll(".se-table-selected-cell");
    for (let c = 0, g = r.length; c < g; c++)
      l.removeClass(r[c], "se-table-selected-cell");
    if (t === e && (l.addClass(t, "se-table-selected-cell"), !i._shift))
      return;
    let u = !0, h = [], s = [];
    const m = i._ref = { _i: 0, cs: null, ce: null, rs: null, re: null };
    for (let c = 0, g = n.length, x, T; c < g; c++) {
      x = n[c].cells, T = 0;
      for (let L = 0, A = x.length, a, o, d, p; L < A; L++) {
        if (a = x[L], d = a.colSpan - 1, p = a.rowSpan - 1, o = L + T, h.length > 0)
          for (let v = 0, _; v < h.length; v++)
            _ = h[v], !(_.row > c) && (o >= _.index ? (T += _.cs, o += _.cs, _.rs -= 1, _.row = c + 1, _.rs < 1 && (h.splice(v, 1), v--)) : L === A - 1 && (_.rs -= 1, _.row = c + 1, _.rs < 1 && (h.splice(v, 1), v--)));
        if (u) {
          if ((a === t || a === e) && (m.cs = m.cs !== null && m.cs < o ? m.cs : o, m.ce = m.ce !== null && m.ce > o + d ? m.ce : o + d, m.rs = m.rs !== null && m.rs < c ? m.rs : c, m.re = m.re !== null && m.re > c + p ? m.re : c + p, m._i += 1), m._i === 2) {
            u = !1, h = [], s = [], c = -1;
            break;
          }
        } else if (l.getOverlapRangeAtIndex(m.cs, m.ce, o, o + d) && l.getOverlapRangeAtIndex(m.rs, m.re, c, c + p)) {
          const v = m.cs < o ? m.cs : o, _ = m.ce > o + d ? m.ce : o + d, b = m.rs < c ? m.rs : c, S = m.re > c + p ? m.re : c + p;
          if (m.cs !== v || m.ce !== _ || m.rs !== b || m.re !== S) {
            m.cs = v, m.ce = _, m.rs = b, m.re = S, c = -1, h = [], s = [];
            break;
          }
          l.addClass(a, "se-table-selected-cell");
        }
        p > 0 && s.push({
          index: o,
          cs: d + 1,
          rs: p,
          row: -1
        }), T += a.colSpan - 1;
      }
      h = h.concat(s).sort(function(L, A) {
        return L.index - A.index;
      }), s = [];
    }
  },
  _removeEvents: function() {
    const t = this.plugins.table;
    t._initBind && (this._wd.removeEventListener("touchmove", t._initBind), t._initBind = null), t._bindOnSelect && (this._wd.removeEventListener("mousedown", t._bindOnSelect), this._wd.removeEventListener("mousemove", t._bindOnSelect), t._bindOnSelect = null), t._bindOffSelect && (this._wd.removeEventListener("mouseup", t._bindOffSelect), t._bindOffSelect = null), t._bindOffShift && (this._wd.removeEventListener("keyup", t._bindOffShift), t._bindOffShift = null);
  },
  _initBind: null,
  onTableCellMultiSelect: function(t, e) {
    const i = this.plugins.table;
    i._removeEvents.call(this), this.controllersOff(), i._shift = e, i._fixedCell = t, i._fixedCellName = t.nodeName, i._selectedTable = this.util.getParentElement(t, "TABLE");
    const n = i._selectedTable.querySelectorAll(".se-table-selected-cell");
    for (let l = 0, r = n.length; l < r; l++)
      this.util.removeClass(n[l], "se-table-selected-cell");
    this.util.addClass(t, "se-table-selected-cell"), i._bindOnSelect = i._onCellMultiSelect.bind(this), i._bindOffSelect = i._offCellMultiSelect.bind(this), e ? (i._bindOffShift = (function() {
      this.controllersOn(this.context.table.resizeDiv, this.context.table.tableController, this.plugins.table.init.bind(this), t, "table"), i._ref || this.controllersOff();
    }).bind(this), this._wd.addEventListener("keyup", i._bindOffShift, !1), this._wd.addEventListener("mousedown", i._bindOnSelect, !1)) : this._wd.addEventListener("mousemove", i._bindOnSelect, !1), this._wd.addEventListener("mouseup", i._bindOffSelect, !1), i._initBind = i.init.bind(this), this._wd.addEventListener("touchmove", i._initBind, !1);
  },
  onClick_tableController: function(t) {
    t.stopPropagation();
    const e = t.target.getAttribute("data-command") ? t.target : t.target.parentNode;
    if (e.getAttribute("disabled"))
      return;
    const i = e.getAttribute("data-command"), n = e.getAttribute("data-value"), l = e.getAttribute("data-option"), r = this.plugins.table;
    if (typeof r._closeSplitMenu == "function" && (r._closeSplitMenu(), i === "onsplit") || !i)
      return;
    t.preventDefault();
    const u = this.context.table;
    switch (i) {
      case "insert":
      case "delete":
        r.editTable.call(this, n, l);
        break;
      case "header":
        r.toggleHeader.call(this);
        break;
      case "onsplit":
        r.openSplitMenu.call(this);
        break;
      case "split":
        r.splitCells.call(this, n);
        break;
      case "merge":
        r.mergeCells.call(this);
        break;
      case "resize":
        u._maxWidth = !u._maxWidth, r.setTableStyle.call(this, "width"), r.setPositionControllerTop.call(this, u._element), r.setPositionControllerDiv.call(this, u._tdElement, r._shift);
        break;
      case "layout":
        u._fixedColumn = !u._fixedColumn, r.setTableStyle.call(this, "column"), r.setPositionControllerTop.call(this, u._element), r.setPositionControllerDiv.call(this, u._tdElement, r._shift);
        break;
      case "remove":
        const h = u._element.parentNode;
        this.util.removeItem(u._element), this.controllersOff(), h !== this.context.element.wysiwyg && this.util.removeItemAllParents(h, function(s) {
          return s.childNodes.length === 0;
        }, null), this.focus();
    }
    this.history.push(!1);
  }
}, V0 = {
  name: "formatBlock",
  display: "submenu",
  add: function(t, e) {
    const i = t.context;
    i.formatBlock = {
      targetText: e.querySelector(".txt"),
      targetTooltip: e.parentNode.querySelector(".se-tooltip-text"),
      _formatList: null,
      currentFormat: ""
    };
    let n = this.setSubmenu(t);
    n.querySelector("ul").addEventListener("click", this.pickUp.bind(t)), i.formatBlock._formatList = n.querySelectorAll("li button"), t.initMenuTarget(this.name, e, n), n = null;
  },
  setSubmenu: function(t) {
    const e = t.options, i = t.lang.toolbar, n = t.util.createElement("DIV");
    n.className = "se-submenu se-list-layer se-list-format";
    const l = ["p", "div", "blockquote", "pre", "h1", "h2", "h3", "h4", "h5", "h6"], r = !e.formats || e.formats.length === 0 ? l : e.formats;
    let u = '<div class="se-list-inner"><ul class="se-list-basic">';
    for (let h = 0, s = r.length, m, c, g, x, T, L, A; h < s; h++)
      m = r[h], typeof m == "string" && l.indexOf(m) > -1 ? (c = m.toLowerCase(), g = c === "blockquote" ? "range" : c === "pre" ? "free" : "replace", T = /^h/.test(c) ? c.match(/\d+/)[0] : "", x = i["tag_" + (T ? "h" : c)] + T, A = "", L = "") : (c = m.tag.toLowerCase(), g = m.command, x = m.name || c, A = m.class, L = A ? ' class="' + A + '"' : ""), u += '<li><button type="button" class="se-btn-list" data-command="' + g + '" data-value="' + c + '" data-class="' + A + '" title="' + x + '" aria-label="' + x + '"><' + c + L + ">" + x + "</" + c + "></button></li>";
    return u += "</ul></div>", n.innerHTML = u, n;
  },
  /**
  * @Override core
  */
  active: function(t) {
    let e = this.lang.toolbar.formats;
    const i = this.context.formatBlock.targetText;
    if (!t)
      this.util.changeTxt(i, e);
    else if (this.util.isFormatElement(t)) {
      const l = this.context.formatBlock._formatList, r = t.nodeName.toLowerCase(), u = (t.className.match(/(\s|^)__se__format__[^\s]+/) || [""])[0].trim();
      for (let h = 0, s = l.length, m; h < s; h++)
        if (m = l[h], r === m.getAttribute("data-value") && u === m.getAttribute("data-class")) {
          e = m.title;
          break;
        }
      return this.util.changeTxt(i, e), i.setAttribute("data-value", r), i.setAttribute("data-class", u), !0;
    }
    return !1;
  },
  /**
  * @Override submenu
  */
  on: function() {
    const t = this.context.formatBlock, e = t._formatList, i = t.targetText, n = (i.getAttribute("data-value") || "") + (i.getAttribute("data-class") || "");
    if (n !== t.currentFormat) {
      for (let l = 0, r = e.length, u; l < r; l++)
        u = e[l], n === u.getAttribute("data-value") + u.getAttribute("data-class") ? this.util.addClass(u, "active") : this.util.removeClass(u, "active");
      t.currentFormat = n;
    }
  },
  pickUp: function(t) {
    t.preventDefault(), t.stopPropagation();
    let e = t.target, i = null, n = null, l = null, r = "";
    for (; !i && !/UL/i.test(e.tagName); ) {
      if (i = e.getAttribute("data-command"), n = e.getAttribute("data-value"), r = e.getAttribute("data-class"), i) {
        l = e.firstChild;
        break;
      }
      e = e.parentNode;
    }
    if (i) {
      if (i === "range") {
        const u = l.cloneNode(!1);
        this.applyRangeFormatElement(u);
      } else {
        let u = this.getRange(), h = this.getSelectedElementsAndComponents(!1);
        if (h.length === 0 && (u = this.getRange_addLine(u, null), h = this.getSelectedElementsAndComponents(!1), h.length === 0))
          return;
        const s = u.startOffset, m = u.endOffset, c = this.util;
        let g = h[0], x = h[h.length - 1];
        const T = c.getNodePath(u.startContainer, g, null, null), L = c.getNodePath(u.endContainer, x, null, null), A = this.detachList(h, !1);
        A.sc && (g = A.sc), A.ec && (x = A.ec), this.setRange(c.getNodeFromPath(T, g), s, c.getNodeFromPath(L, x), m);
        const a = this.getSelectedElementsAndComponents(!1);
        if (i === "free") {
          const o = a.length - 1;
          let d = a[o].parentNode, p = l.cloneNode(!1);
          const v = p;
          for (let _ = o, b, S, k, w, z, M, N = !0; _ >= 0; _--)
            if (b = a[_], b !== (a[_ + 1] ? a[_ + 1].parentNode : null)) {
              if (M = c.isComponent(b), S = M ? "" : b.innerHTML.replace(/(?!>)\s+(?=<)|\n/g, " "), k = c.getParentElement(b, function(O) {
                return O.parentNode === d;
              }), (d !== b.parentNode || M) && (c.isFormatElement(d) ? (d.parentNode.insertBefore(p, d.nextSibling), d = d.parentNode) : (d.insertBefore(p, k ? k.nextSibling : null), d = b.parentNode), w = p.nextSibling, w && p.nodeName === w.nodeName && c.isSameAttributes(p, w) && (p.innerHTML += "<BR>" + w.innerHTML, c.removeItem(w)), p = l.cloneNode(!1), N = !0), z = p.innerHTML, p.innerHTML = (N || !S || !z || /<br>$/i.test(S) ? S : S + "<BR>") + z, _ === 0) {
                d.insertBefore(p, b), w = b.nextSibling, w && p.nodeName === w.nodeName && c.isSameAttributes(p, w) && (p.innerHTML += "<BR>" + w.innerHTML, c.removeItem(w));
                const O = p.previousSibling;
                O && p.nodeName === O.nodeName && c.isSameAttributes(p, O) && (O.innerHTML += "<BR>" + p.innerHTML, c.removeItem(p));
              }
              M || c.removeItem(b), S && (N = !1);
            }
          this.setRange(v, 0, v, 0);
        } else {
          for (let o = 0, d = a.length, p, v; o < d; o++)
            p = a[o], (p.nodeName.toLowerCase() !== n.toLowerCase() || (p.className.match(/(\s|^)__se__format__[^\s]+/) || [""])[0].trim() !== r) && !c.isComponent(p) && (v = l.cloneNode(!1), c.copyFormatAttributes(v, p), v.innerHTML = p.innerHTML, p.parentNode.replaceChild(v, p)), o === 0 && (g = v || p), o === d - 1 && (x = v || p), v = null;
          this.setRange(c.getNodeFromPath(T, g), s, c.getNodeFromPath(L, x), m);
        }
        this.history.push(!1);
      }
      this.submenuOff();
    }
  }
}, U0 = {
  name: "lineHeight",
  display: "submenu",
  add: function(t, e) {
    const i = t.context;
    i.lineHeight = {
      _sizeList: null,
      currentSize: -1
    };
    let n = this.setSubmenu(t), l = n.querySelector("ul");
    l.addEventListener("click", this.pickup.bind(t)), i.lineHeight._sizeList = l.querySelectorAll("li button"), t.initMenuTarget(this.name, e, n), n = null, l = null;
  },
  setSubmenu: function(t) {
    const e = t.options, i = t.lang, n = t.util.createElement("DIV");
    n.className = "se-submenu se-list-layer";
    const l = e.lineHeights ? e.lineHeights : [
      { text: "1", value: 1 },
      { text: "1.15", value: 1.15 },
      { text: "1.5", value: 1.5 },
      { text: "2", value: 2 }
    ];
    let r = '<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="default_value se-btn-list" title="' + i.toolbar.default + '" aria-label="' + i.toolbar.default + '">(' + i.toolbar.default + ")</button></li>";
    for (let u = 0, h = l.length, s; u < h; u++)
      s = l[u], r += '<li><button type="button" class="se-btn-list" data-value="' + s.value + '" title="' + s.text + '" aria-label="' + s.text + '">' + s.text + "</button></li>";
    return r += "</ul></div>", n.innerHTML = r, n;
  },
  /**
  * @Override submenu
  */
  on: function() {
    const t = this.context.lineHeight, e = t._sizeList, i = this.util.getFormatElement(this.getSelectionNode()), n = i ? i.style.lineHeight + "" : "";
    if (n !== t.currentSize) {
      for (let l = 0, r = e.length; l < r; l++)
        n === e[l].getAttribute("data-value") ? this.util.addClass(e[l], "active") : this.util.removeClass(e[l], "active");
      t.currentSize = n;
    }
  },
  pickup: function(t) {
    if (!/^BUTTON$/i.test(t.target.tagName))
      return !1;
    t.preventDefault(), t.stopPropagation();
    const e = t.target.getAttribute("data-value") || "", i = this.getSelectedElements();
    for (let n = 0, l = i.length; n < l; n++)
      i[n].style.lineHeight = e;
    this.submenuOff(), this.history.push(!1);
  }
}, q0 = {
  name: "template",
  display: "submenu",
  add: function(t, e) {
    const i = t.context;
    i.template = {
      selectedIndex: -1
    };
    let n = this.setSubmenu(t);
    n.querySelector("ul").addEventListener("click", this.pickup.bind(t)), t.initMenuTarget(this.name, e, n), n = null;
  },
  setSubmenu: function(t) {
    const e = t.options.templates;
    if (!e || e.length === 0)
      throw Error('[SUNEDITOR.plugins.template.fail] To use the "template" plugin, please define the "templates" option.');
    const i = t.util.createElement("DIV");
    i.className = "se-list-layer";
    let n = '<div class="se-submenu se-list-inner"><ul class="se-list-basic">';
    for (let l = 0, r = e.length, u; l < r; l++)
      u = e[l], n += '<li><button type="button" class="se-btn-list" data-value="' + l + '" title="' + u.name + '" aria-label="' + u.name + '">' + u.name + "</button></li>";
    return n += "</ul></div>", i.innerHTML = n, i;
  },
  pickup: function(t) {
    if (!/^BUTTON$/i.test(t.target.tagName))
      return !1;
    t.preventDefault(), t.stopPropagation(), this.context.template.selectedIndex = t.target.getAttribute("data-value") * 1;
    const e = this.options.templates[this.context.template.selectedIndex];
    if (e.html)
      this.setContents(e.html);
    else
      throw this.submenuOff(), Error('[SUNEDITOR.template.fail] cause : "templates[i].html not found"');
    this.submenuOff();
  }
}, W0 = {
  name: "paragraphStyle",
  display: "submenu",
  add: function(t, e) {
    const i = t.context;
    i.paragraphStyle = {
      _classList: null
    };
    let n = this.setSubmenu(t);
    n.querySelector("ul").addEventListener("click", this.pickUp.bind(t)), i.paragraphStyle._classList = n.querySelectorAll("li button"), t.initMenuTarget(this.name, e, n), n = null;
  },
  setSubmenu: function(t) {
    const e = t.options, i = t.util.createElement("DIV");
    i.className = "se-submenu se-list-layer se-list-format";
    const n = t.lang.menu, l = {
      spaced: {
        name: n.spaced,
        class: "__se__p-spaced",
        _class: ""
      },
      bordered: {
        name: n.bordered,
        class: "__se__p-bordered",
        _class: ""
      },
      neon: {
        name: n.neon,
        class: "__se__p-neon",
        _class: ""
      }
    }, r = !e.paragraphStyles || e.paragraphStyles.length === 0 ? ["spaced", "bordered", "neon"] : e.paragraphStyles;
    let u = '<div class="se-list-inner"><ul class="se-list-basic">';
    for (let h = 0, s = r.length, m, c, g, x; h < s; h++) {
      if (m = r[h], typeof m == "string") {
        const T = l[m.toLowerCase()];
        if (!T)
          continue;
        m = T;
      }
      c = m.name, g = m.class ? ' class="' + m.class + '"' : "", x = m._class, u += '<li><button type="button" class="se-btn-list' + (x ? " " + x : "") + '" data-value="' + m.class + '" title="' + c + '" aria-label="' + c + '"><div' + g + ">" + c + "</div></button></li>";
    }
    return u += "</ul></div>", i.innerHTML = u, i;
  },
  /**
  * @Override submenu
  */
  on: function() {
    const e = this.context.paragraphStyle._classList, i = this.util.getFormatElement(this.getSelectionNode());
    for (let n = 0, l = e.length; n < l; n++)
      this.util.hasClass(i, e[n].getAttribute("data-value")) ? this.util.addClass(e[n], "active") : this.util.removeClass(e[n], "active");
  },
  pickUp: function(t) {
    t.preventDefault(), t.stopPropagation();
    let e = t.target, i = null;
    for (; !/^UL$/i.test(e.tagName) && (i = e.getAttribute("data-value"), !i); )
      e = e.parentNode;
    if (!i)
      return;
    let n = this.getSelectedElements();
    if (n.length === 0 && (this.getRange_addLine(this.getRange(), null), n = this.getSelectedElements(), n.length === 0))
      return;
    const l = this.util.hasClass(e, "active") ? this.util.removeClass.bind(this.util) : this.util.addClass.bind(this.util);
    for (let r = 0, u = n.length; r < u; r++)
      l(n[r], i);
    this.submenuOff(), this.history.push(!1);
  }
}, Z0 = {
  name: "textStyle",
  display: "submenu",
  add: function(t, e) {
    const i = t.context;
    i.textStyle = {
      _styleList: null
    };
    let n = this.setSubmenu(t), l = n.querySelector("ul");
    l.addEventListener("click", this.pickup.bind(t)), i.textStyle._styleList = n.querySelectorAll("li button"), t.initMenuTarget(this.name, e, n), n = null, l = null;
  },
  setSubmenu: function(t) {
    const e = t.options, i = t.util.createElement("DIV");
    i.className = "se-submenu se-list-layer se-list-format";
    const n = {
      code: {
        name: t.lang.menu.code,
        class: "__se__t-code",
        tag: "code"
      },
      translucent: {
        name: t.lang.menu.translucent,
        style: "opacity: 0.5;",
        tag: "span"
      },
      shadow: {
        name: t.lang.menu.shadow,
        class: "__se__t-shadow",
        tag: "span"
      }
    }, l = e.textStyles ? e.textStyles : t._w.Object.keys(n);
    let r = '<div class="se-list-inner"><ul class="se-list-basic">';
    for (let u = 0, h = l.length, s, m, c, g, x, T, L; u < h; u++) {
      if (s = l[u], g = "", T = "", x = [], typeof s == "string") {
        const A = n[s.toLowerCase()];
        if (!A)
          continue;
        s = A;
      }
      c = s.name, m = s.tag || "span", L = s._class, s.style && (g += ' style="' + s.style + '"', T += s.style.replace(/:[^;]+(;|$)\s*/g, ","), x.push("style")), s.class && (g += ' class="' + s.class + '"', T += "." + s.class.trim().replace(/\s+/g, ",."), x.push("class")), T = T.replace(/,$/, ""), r += '<li><button type="button" class="se-btn-list' + (L ? " " + L : "") + '" data-command="' + m + '" data-value="' + T + '" title="' + c + '" aria-label="' + c + '"><' + m + g + ">" + c + "</" + m + "></button></li>";
    }
    return r += "</ul></div>", i.innerHTML = r, i;
  },
  /**
  * @Override submenu
  */
  on: function() {
    const t = this.util, i = this.context.textStyle._styleList, n = this.getSelectionNode();
    for (let l = 0, r = i.length, u, h, s; l < r; l++) {
      u = i[l], h = u.getAttribute("data-value").split(",");
      for (let m = 0, c, g; m < h.length; m++) {
        for (c = n, s = !1; c && !t.isFormatElement(c) && !t.isComponent(c); ) {
          if (c.nodeName.toLowerCase() === u.getAttribute("data-command").toLowerCase() && (g = h[m], /^\./.test(g) ? t.hasClass(c, g.replace(/^\./, "")) : c.style[g])) {
            s = !0;
            break;
          }
          c = c.parentNode;
        }
        if (!s)
          break;
      }
      s ? t.addClass(u, "active") : t.removeClass(u, "active");
    }
  },
  pickup: function(t) {
    t.preventDefault(), t.stopPropagation();
    let e = t.target, i = null, n = null;
    for (; !i && !/UL/i.test(e.tagName); ) {
      if (i = e.getAttribute("data-command"), i) {
        n = e.firstChild;
        break;
      }
      e = e.parentNode;
    }
    if (!i)
      return;
    const l = n.style.cssText.replace(/:.+(;|$)/g, ",").split(",");
    l.pop();
    const r = n.classList;
    for (let s = 0, m = r.length; s < m; s++)
      l.push("." + r[s]);
    const u = this.util.hasClass(e, "active") ? null : n.cloneNode(!1), h = u ? null : [n.nodeName];
    this.nodeChange(u, l, h, !0), this.submenuOff();
  }
};
var $0 = { exports: {} };
(function(t) {
  (function(e, i) {
    t.exports = e.document ? i(e, !0) : function(n) {
      if (!n.document)
        throw new Error("SUNEDITOR_MODULES a window with a document");
      return i(n);
    };
  })(typeof window < "u" ? window : Re, function(e, i) {
    const n = {
      name: "dialog",
      /**
       * @description Constructor
       * @param {Object} core Core object 
       */
      add: function(l) {
        const r = l.context;
        r.dialog = {
          kind: "",
          updateModal: !1,
          _closeSignal: !1
        };
        let u = l.util.createElement("DIV");
        u.className = "se-dialog sun-editor-common";
        let h = l.util.createElement("DIV");
        h.className = "se-dialog-back", h.style.display = "none";
        let s = l.util.createElement("DIV");
        s.className = "se-dialog-inner", s.style.display = "none", u.appendChild(h), u.appendChild(s), r.dialog.modalArea = u, r.dialog.back = h, r.dialog.modal = s, r.dialog.modal.addEventListener("mousedown", this._onMouseDown_dialog.bind(l)), r.dialog.modal.addEventListener("click", this._onClick_dialog.bind(l)), r.element.relative.appendChild(u), u = null, h = null, s = null;
      },
      /**
       * @description Event to control the behavior of closing the dialog
       * @param {MouseEvent} e Event object
       * @private
       */
      _onMouseDown_dialog: function(l) {
        /se-dialog-inner/.test(l.target.className) ? this.context.dialog._closeSignal = !0 : this.context.dialog._closeSignal = !1;
      },
      /**
       * @description Event to close the window when the outside area of the dialog or close button is click
       * @param {MouseEvent} e Event object
       * @private
       */
      _onClick_dialog: function(l) {
        (/close/.test(l.target.getAttribute("data-command")) || this.context.dialog._closeSignal) && this.plugins.dialog.close.call(this);
      },
      /**
       * @description Open a Dialog plugin
       * @param {String} kind Dialog plugin name
       * @param {Boolean} update Whether it will open for update ('image' === this.currentControllerName)
       */
      open: function(l, r) {
        if (this.modalForm)
          return !1;
        this.plugins.dialog._bindClose && (this._d.removeEventListener("keydown", this.plugins.dialog._bindClose), this.plugins.dialog._bindClose = null), this.plugins.dialog._bindClose = (function(h) {
          /27/.test(h.keyCode) && this.plugins.dialog.close.call(this);
        }).bind(this), this._d.addEventListener("keydown", this.plugins.dialog._bindClose), this.context.dialog.updateModal = r, this.options.popupDisplay === "full" ? this.context.dialog.modalArea.style.position = "fixed" : this.context.dialog.modalArea.style.position = "absolute", this.context.dialog.kind = l, this.modalForm = this.context[l].modal;
        const u = this.context[l].focusElement;
        typeof this.plugins[l].on == "function" && this.plugins[l].on.call(this, r), this.context.dialog.modalArea.style.display = "block", this.context.dialog.back.style.display = "block", this.context.dialog.modal.style.display = "block", this.modalForm.style.display = "block", u && u.focus();
      },
      _bindClose: null,
      /**
       * @description Close a Dialog plugin
       * The plugin's "init" method is called.
       */
      close: function() {
        this.plugins.dialog._bindClose && (this._d.removeEventListener("keydown", this.plugins.dialog._bindClose), this.plugins.dialog._bindClose = null);
        const l = this.context.dialog.kind;
        this.modalForm.style.display = "none", this.context.dialog.back.style.display = "none", this.context.dialog.modalArea.style.display = "none", this.context.dialog.updateModal = !1, typeof this.plugins[l].init == "function" && this.plugins[l].init.call(this), this.context.dialog.kind = "", this.modalForm = null, this.focus();
      }
    };
    return typeof i > "u" && (e.SUNEDITOR_MODULES || Object.defineProperty(e, "SUNEDITOR_MODULES", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: {}
    }), Object.defineProperty(e.SUNEDITOR_MODULES, "dialog", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: n
    })), n;
  });
})($0);
var ba = $0.exports;
const mi = /* @__PURE__ */ Kt(ba), ya = {
  name: "selectMenu",
  add: function(t) {
    t.context.selectMenu = {
      caller: {},
      callerContext: null
    };
  },
  setForm: function() {
    return '<div class="se-select-list"></div>';
  },
  createList: function(t, e, i) {
    t.form.innerHTML = "<ul>" + i + "</ul>", t.items = e, t.menus = t.form.querySelectorAll("li");
  },
  initEvent: function(t, e) {
    const i = e.querySelector(".se-select-list"), n = this.context.selectMenu.caller[t] = {
      form: i,
      items: [],
      menus: [],
      index: -1,
      item: null,
      clickMethod: null,
      callerName: t
    };
    i.addEventListener("mousedown", this.plugins.selectMenu.onMousedown_list), i.addEventListener("mousemove", this.plugins.selectMenu.onMouseMove_list.bind(this, n)), i.addEventListener("click", this.plugins.selectMenu.onClick_list.bind(this, n));
  },
  onMousedown_list: function(t) {
    t.preventDefault(), t.stopPropagation();
  },
  onMouseMove_list: function(t, e) {
    this.util.addClass(t.form, "__se_select-menu-mouse-move");
    const i = e.target.getAttribute("data-index");
    i && (t.index = i * 1);
  },
  onClick_list: function(t, e) {
    const i = e.target.getAttribute("data-index");
    i && t.clickMethod.call(this, t.items[i]);
  },
  moveItem: function(t, e) {
    this.util.removeClass(t.form, "__se_select-menu-mouse-move"), e = t.index + e;
    const i = t.menus, n = i.length, l = t.index = e >= n ? 0 : e < 0 ? n - 1 : e;
    for (let r = 0; r < n; r++)
      r === l ? this.util.addClass(i[r], "active") : this.util.removeClass(i[r], "active");
    t.item = t.items[l];
  },
  getItem: function(t, e) {
    return e = !e || e < 0 ? t.index : e, t.items[e];
  },
  on: function(t, e) {
    const i = this.context.selectMenu.caller[t];
    this.context.selectMenu.callerContext = i, i.clickMethod = e, i.callerName = t;
  },
  open: function(t, e) {
    const i = t.form;
    i.style.visibility = "hidden", i.style.display = "block", e(i), i.style.visibility = "";
  },
  close: function(t) {
    t.form.style.display = "none", t.items = [], t.menus = [], t.index = -1, t.item = null;
  },
  init: function(t) {
    t && (t.items = [], t.menus = [], t.index = -1, t.item = null, t.callerName = "", this.context.selectMenu.callerContext = null);
  }
}, Y0 = {
  name: "anchor",
  add: function(t) {
    t.addModule([ya]), t.context.anchor = {
      caller: {},
      forms: this.setDialogForm(t),
      host: (t._w.location.origin + t._w.location.pathname).replace(/\/$/, ""),
      callerContext: null
    };
  },
  /** dialog */
  setDialogForm: function(t) {
    const e = t.lang, i = t.options.linkRel, n = (t.options.linkRelDefault.default || "").split(" "), l = t.icons, r = t.util.createElement("DIV");
    let u = '<div class="se-dialog-body"><div class="se-dialog-form"><label>' + e.dialogBox.linkBox.url + '</label><div class="se-dialog-form-files"><input class="se-input-form se-input-url" type="text" placeholder="' + (t.options.protocol || "") + '" /><button type="button" class="se-btn se-dialog-files-edge-button _se_bookmark_button" title="' + e.dialogBox.linkBox.bookmark + '" aria-label="' + e.dialogBox.linkBox.bookmark + '">' + l.bookmark + "</button>" + t.plugins.selectMenu.setForm() + '</div><div class="se-anchor-preview-form"><span class="se-svg se-anchor-preview-icon _se_anchor_bookmark_icon">' + l.bookmark + '</span><span class="se-svg se-anchor-preview-icon _se_anchor_download_icon">' + l.download + '</span><pre class="se-link-preview"></pre></div></div><div class="se-dialog-form"><label>' + e.dialogBox.linkBox.text + '</label><input class="se-input-form _se_anchor_text" type="text" /></div><div class="se-dialog-form-footer"><label><input type="checkbox" class="se-dialog-btn-check _se_anchor_check" />&nbsp;' + e.dialogBox.linkBox.newWindowCheck + '</label><label><input type="checkbox" class="se-dialog-btn-check _se_anchor_download" />&nbsp;' + e.dialogBox.linkBox.downloadLinkCheck + "</label>";
    if (i.length > 0) {
      u += '<div class="se-anchor-rel"><button type="button" class="se-btn se-btn-select se-anchor-rel-btn">&lt;rel&gt;</button><div class="se-anchor-rel-wrapper"><pre class="se-link-preview se-anchor-rel-preview"></pre></div><div class="se-list-layer"><div class="se-list-inner"><ul class="se-list-basic se-list-checked">';
      for (let h = 0, s = i.length, m; h < s; h++)
        m = i[h], u += '<li><button type="button" class="se-btn-list' + (n.indexOf(m) > -1 ? " se-checked" : "") + '" data-command="' + m + '" title="' + m + '" aria-label="' + m + '"><span class="se-svg">' + l.checked + "</span>" + m + "</button></li>";
      u += "</ul></div></div></div>";
    }
    return u += "</div></div>", r.innerHTML = u, r;
  },
  initEvent: function(t, e) {
    const i = this.plugins.anchor, n = this.context.anchor.caller[t] = {
      modal: e,
      urlInput: null,
      linkDefaultRel: this.options.linkRelDefault,
      defaultRel: this.options.linkRelDefault.default || "",
      currentRel: [],
      linkAnchor: null,
      linkValue: "",
      _change: !1,
      callerName: t
    };
    typeof n.linkDefaultRel.default == "string" && (n.linkDefaultRel.default = n.linkDefaultRel.default.trim()), typeof n.linkDefaultRel.check_new_window == "string" && (n.linkDefaultRel.check_new_window = n.linkDefaultRel.check_new_window.trim()), typeof n.linkDefaultRel.check_bookmark == "string" && (n.linkDefaultRel.check_bookmark = n.linkDefaultRel.check_bookmark.trim()), n.urlInput = e.querySelector(".se-input-url"), n.anchorText = e.querySelector("._se_anchor_text"), n.newWindowCheck = e.querySelector("._se_anchor_check"), n.downloadCheck = e.querySelector("._se_anchor_download"), n.download = e.querySelector("._se_anchor_download_icon"), n.preview = e.querySelector(".se-link-preview"), n.bookmark = e.querySelector("._se_anchor_bookmark_icon"), n.bookmarkButton = e.querySelector("._se_bookmark_button"), this.plugins.selectMenu.initEvent.call(this, t, e);
    const l = this.context.selectMenu.caller[t];
    this.options.linkRel.length > 0 && (n.relButton = e.querySelector(".se-anchor-rel-btn"), n.relList = e.querySelector(".se-list-layer"), n.relPreview = e.querySelector(".se-anchor-rel-preview"), n.relButton.addEventListener("click", i.onClick_relButton.bind(this, n)), n.relList.addEventListener("click", i.onClick_relList.bind(this, n))), n.newWindowCheck.addEventListener("change", i.onChange_newWindowCheck.bind(this, n)), n.downloadCheck.addEventListener("change", i.onChange_downloadCheck.bind(this, n)), n.anchorText.addEventListener("input", i.onChangeAnchorText.bind(this, n)), n.urlInput.addEventListener("input", i.onChangeUrlInput.bind(this, n)), n.urlInput.addEventListener("keydown", i.onKeyDownUrlInput.bind(this, l)), n.urlInput.addEventListener("focus", i.onFocusUrlInput.bind(this, n, l)), n.urlInput.addEventListener("blur", i.onBlurUrlInput.bind(this, l)), n.bookmarkButton.addEventListener("click", i.onClick_bookmarkButton.bind(this, n));
  },
  on: function(t, e) {
    const i = this.plugins.anchor;
    if (!e)
      i.init.call(this, t), t.anchorText.value = this.getSelection().toString().trim(), t.newWindowCheck.checked = this.options.linkTargetNewWindow;
    else if (t.linkAnchor) {
      this.context.dialog.updateModal = !0;
      const n = t.linkAnchor.getAttribute("href");
      t.linkValue = t.preview.textContent = t.urlInput.value = i.selfPathBookmark.call(this, n) ? n.substr(n.lastIndexOf("#")) : n, t.anchorText.value = t.linkAnchor.textContent, t.newWindowCheck.checked = !!/_blank/i.test(t.linkAnchor.target), t.downloadCheck.checked = t.linkAnchor.download;
    }
    this.context.anchor.callerContext = t, i.setRel.call(this, t, e && t.linkAnchor ? t.linkAnchor.rel : t.defaultRel), i.setLinkPreview.call(this, t, t.linkValue), this.plugins.selectMenu.on.call(this, t.callerName, this.plugins.anchor.setHeaderBookmark);
  },
  selfPathBookmark: function(t) {
    const e = this._w.location.href.replace(/\/$/, "");
    return t.indexOf("#") === 0 || t.indexOf(e) === 0 && t.indexOf("#") === (e.indexOf("#") === -1 ? e.length : e.substr(0, e.indexOf("#")).length);
  },
  _closeRelMenu: null,
  toggleRelList: function(t, e) {
    if (!e)
      this.plugins.anchor._closeRelMenu && this.plugins.anchor._closeRelMenu();
    else {
      const i = t.relButton, n = t.relList;
      this.util.addClass(i, "active"), n.style.visibility = "hidden", n.style.display = "block", this.options.rtl ? n.style.left = i.offsetLeft - n.offsetWidth - 1 + "px" : n.style.left = i.offsetLeft + i.offsetWidth + 1 + "px", n.style.top = i.offsetTop + i.offsetHeight / 2 - n.offsetHeight / 2 + "px", n.style.visibility = "", this.plugins.anchor._closeRelMenu = (function(l, r, u) {
        u && (l.relButton.contains(u.target) || l.relList.contains(u.target)) || (this.util.removeClass(r, "active"), l.relList.style.display = "none", this.modalForm.removeEventListener("click", this.plugins.anchor._closeRelMenu), this.plugins.anchor._closeRelMenu = null);
      }).bind(this, t, i), this.modalForm.addEventListener("click", this.plugins.anchor._closeRelMenu);
    }
  },
  onClick_relButton: function(t, e) {
    this.plugins.anchor.toggleRelList.call(this, t, !this.util.hasClass(e.target, "active"));
  },
  onClick_relList: function(t, e) {
    const i = e.target, n = i.getAttribute("data-command");
    if (!n)
      return;
    const l = t.currentRel, r = this.util.toggleClass(i, "se-checked"), u = l.indexOf(n);
    r ? u === -1 && l.push(n) : u > -1 && l.splice(u, 1), t.relPreview.title = t.relPreview.textContent = l.join(" ");
  },
  setRel: function(t, e) {
    const i = t.relList, n = t.currentRel = e ? e.split(" ") : [];
    if (!i)
      return;
    const l = i.querySelectorAll("button");
    for (let r = 0, u = l.length, h; r < u; r++)
      h = l[r].getAttribute("data-command"), n.indexOf(h) > -1 ? this.util.addClass(l[r], "se-checked") : this.util.removeClass(l[r], "se-checked");
    t.relPreview.title = t.relPreview.textContent = n.join(" ");
  },
  createHeaderList: function(t, e, i) {
    const n = this.util.getListChildren(this.context.element.wysiwyg, function(h) {
      return /h[1-6]/i.test(h.nodeName);
    });
    if (n.length === 0)
      return;
    const l = new this._w.RegExp("^" + i.replace(/^#/, ""), "i"), r = [];
    let u = "";
    for (let h = 0, s = n.length, m; h < s; h++)
      m = n[h], l.test(m.textContent) && (r.push(m), u += '<li class="se-select-item" data-index="' + h + '">' + m.textContent + "</li>");
    r.length === 0 ? this.plugins.selectMenu.close.call(this, e) : (this.plugins.selectMenu.createList(e, r, u), this.plugins.selectMenu.open.call(this, e, this.plugins.anchor._setMenuListPosition.bind(this, t)));
  },
  _setMenuListPosition: function(t, e) {
    e.style.top = t.urlInput.offsetHeight + 1 + "px";
  },
  onKeyDownUrlInput: function(t, e) {
    switch (e.keyCode) {
      case 38:
        e.preventDefault(), e.stopPropagation(), this.plugins.selectMenu.moveItem.call(this, t, -1);
        break;
      case 40:
        e.preventDefault(), e.stopPropagation(), this.plugins.selectMenu.moveItem.call(this, t, 1);
        break;
      case 13:
        t.index > -1 && (e.preventDefault(), e.stopPropagation(), this.plugins.anchor.setHeaderBookmark.call(this, this.plugins.selectMenu.getItem(t, null)));
        break;
    }
  },
  setHeaderBookmark: function(t) {
    const e = this.context.anchor.callerContext, i = t.id || "h_" + this._w.Math.random().toString().replace(/.+\./, "");
    t.id = i, e.urlInput.value = "#" + i, (!e.anchorText.value.trim() || !e._change) && (e.anchorText.value = t.textContent), this.plugins.anchor.setLinkPreview.call(this, e, e.urlInput.value), this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext), this.context.anchor.callerContext.urlInput.focus();
  },
  onChangeAnchorText: function(t, e) {
    t._change = !!e.target.value.trim();
  },
  onChangeUrlInput: function(t, e) {
    const i = e.target.value.trim();
    this.plugins.anchor.setLinkPreview.call(this, t, i), this.plugins.anchor.selfPathBookmark.call(this, i) ? this.plugins.anchor.createHeaderList.call(this, t, this.context.selectMenu.callerContext, i) : this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext);
  },
  onFocusUrlInput: function(t, e) {
    const i = t.urlInput.value;
    this.plugins.anchor.selfPathBookmark.call(this, i) && this.plugins.anchor.createHeaderList.call(this, t, e, i);
  },
  onBlurUrlInput: function(t) {
    this.plugins.selectMenu.close.call(this, t);
  },
  setLinkPreview: function(t, e) {
    const i = t.preview, n = this.options.linkProtocol, l = this.options.linkNoPrefix, r = /^(mailto\:|tel\:|sms\:|https*\:\/\/|#)/.test(e) || e.indexOf(n) === 0, u = n ? this._w.RegExp("^" + e.substr(0, n.length)).test(n) : !1;
    e = t.linkValue = i.textContent = e ? l ? e : n && !r && !u ? n + e : r ? e : /^www\./.test(e) ? "http://" + e : this.context.anchor.host + (/^\//.test(e) ? "" : "/") + e : "", this.plugins.anchor.selfPathBookmark.call(this, e) ? (t.bookmark.style.display = "block", this.util.addClass(t.bookmarkButton, "active")) : (t.bookmark.style.display = "none", this.util.removeClass(t.bookmarkButton, "active")), !this.plugins.anchor.selfPathBookmark.call(this, e) && t.downloadCheck.checked ? t.download.style.display = "block" : t.download.style.display = "none";
  },
  setCtx: function(t, e) {
    t && (e.linkAnchor = t, e.linkValue = t.href, e.currentRel = t.rel.split(" "));
  },
  updateAnchor: function(t, e, i, n, l) {
    !this.plugins.anchor.selfPathBookmark.call(this, e) && n.downloadCheck.checked ? t.setAttribute("download", i || e) : t.removeAttribute("download"), n.newWindowCheck.checked ? t.target = "_blank" : t.removeAttribute("target");
    const r = n.currentRel.join(" ");
    r ? t.rel = r : t.removeAttribute("rel"), t.href = e, l ? t.children.length === 0 && (t.textContent = "") : t.textContent = i;
  },
  createAnchor: function(t, e) {
    if (t.linkValue.length === 0)
      return null;
    const i = t.linkValue, n = t.anchorText, l = n.value.length === 0 ? i : n.value, r = t.linkAnchor || this.util.createElement("A");
    return this.plugins.anchor.updateAnchor.call(this, r, i, l, t, e), t.linkValue = t.preview.textContent = t.urlInput.value = t.anchorText.value = "", r;
  },
  onClick_bookmarkButton: function(t) {
    let e = t.urlInput.value;
    this.plugins.anchor.selfPathBookmark.call(this, e) ? (e = e.substr(1), t.bookmark.style.display = "none", this.util.removeClass(t.bookmarkButton, "active"), this.plugins.selectMenu.close.call(this, this.context.selectMenu.callerContext)) : (e = "#" + e, t.bookmark.style.display = "block", this.util.addClass(t.bookmarkButton, "active"), t.downloadCheck.checked = !1, t.download.style.display = "none", this.plugins.anchor.createHeaderList.call(this, t, this.context.selectMenu.callerContext, e)), t.urlInput.value = e, this.plugins.anchor.setLinkPreview.call(this, t, e), t.urlInput.focus();
  },
  onChange_newWindowCheck: function(t, e) {
    typeof t.linkDefaultRel.check_new_window == "string" && (e.target.checked ? this.plugins.anchor.setRel.call(this, t, this.plugins.anchor._relMerge.call(this, t, t.linkDefaultRel.check_new_window)) : this.plugins.anchor.setRel.call(this, t, this.plugins.anchor._relDelete.call(this, t, t.linkDefaultRel.check_new_window)));
  },
  onChange_downloadCheck: function(t, e) {
    e.target.checked ? (t.download.style.display = "block", t.bookmark.style.display = "none", this.util.removeClass(t.bookmarkButton, "active"), t.linkValue = t.preview.textContent = t.urlInput.value = t.urlInput.value.replace(/^\#+/, ""), typeof t.linkDefaultRel.check_bookmark == "string" && this.plugins.anchor.setRel.call(this, t, this.plugins.anchor._relMerge.call(this, t, t.linkDefaultRel.check_bookmark))) : (t.download.style.display = "none", typeof t.linkDefaultRel.check_bookmark == "string" && this.plugins.anchor.setRel.call(this, t, this.plugins.anchor._relDelete.call(this, t, t.linkDefaultRel.check_bookmark)));
  },
  _relMerge: function(t, e) {
    const i = t.currentRel;
    if (!e)
      return i.join(" ");
    if (/^only\:/.test(e))
      return e = e.replace(/^only\:/, "").trim(), t.currentRel = e.split(" "), e;
    const n = e.split(" ");
    for (let l = 0, r = n.length, u; l < r; l++)
      u = i.indexOf(n[l]), u === -1 && i.push(n[l]);
    return i.join(" ");
  },
  _relDelete: function(t, e) {
    if (!e)
      return t.currentRel.join(" ");
    /^only\:/.test(e) && (e = e.replace(/^only\:/, "").trim());
    const i = t.currentRel.join(" ").replace(this._w.RegExp(e + "\\s*"), "");
    return t.currentRel = i.split(" "), i;
  },
  init: function(t) {
    t.linkAnchor = null, t.linkValue = t.preview.textContent = t.urlInput.value = "", t.anchorText.value = "", t.newWindowCheck.checked = !1, t.downloadCheck.checked = !1, t._change = !1, this.plugins.anchor.setRel.call(this, t, t.defaultRel), t.relList && this.plugins.anchor.toggleRelList.call(this, t, !1), this.context.anchor.callerContext = null, this.plugins.selectMenu.init.call(this, this.context.selectMenu.callerContext);
  }
}, j0 = {
  name: "link",
  display: "dialog",
  add: function(t) {
    t.addModule([mi, Y0]);
    const e = t.context, i = e.link = {
      focusElement: null,
      // @Override dialog // This element has focus when the dialog is opened.
      _linkAnchor: null,
      anchorCtx: null
    };
    let n = this.setDialog(t);
    i.modal = n;
    let l = this.setController_LinkButton(t);
    i.linkController = l, n.querySelector("form").addEventListener("submit", this.submit.bind(t)), l.addEventListener("click", this.onClick_linkController.bind(t)), e.dialog.modal.appendChild(n), e.element.relative.appendChild(l), t.plugins.anchor.initEvent.call(t, "link", n), i.focusElement = e.anchor.caller.link.urlInput, n = null, l = null;
  },
  /** dialog */
  setDialog: function(t) {
    const e = t.lang, i = t.util.createElement("DIV"), n = t.icons;
    i.className = "se-dialog-content", i.style.display = "none";
    let l = '<form><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" title="' + e.dialogBox.close + '" aria-label="' + e.dialogBox.close + '">' + n.cancel + '</button><span class="se-modal-title">' + e.dialogBox.linkBox.title + "</span></div>" + t.context.anchor.forms.innerHTML + '<div class="se-dialog-footer"><button type="submit" class="se-btn-primary" title="' + e.dialogBox.submitButton + '" aria-label="' + e.dialogBox.submitButton + '"><span>' + e.dialogBox.submitButton + "</span></button></div></form>";
    return i.innerHTML = l, i;
  },
  /** modify controller button */
  setController_LinkButton: function(t) {
    const e = t.lang, i = t.icons, n = t.util.createElement("DIV");
    return n.className = "se-controller se-controller-link", n.innerHTML = '<div class="se-arrow se-arrow-up"></div><div class="link-content"><span><a target="_blank" href=""></a>&nbsp;</span><div class="se-btn-group"><button type="button" data-command="update" tabindex="-1" class="se-btn se-tooltip">' + i.edit + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.edit + '</span></span></button><button type="button" data-command="unlink" tabindex="-1" class="se-btn se-tooltip">' + i.unlink + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.unlink + '</span></span></button><button type="button" data-command="delete" tabindex="-1" class="se-btn se-tooltip">' + i.delete + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.remove + "</span></span></button></div></div>", n;
  },
  /**
   * @Override dialog
   */
  open: function() {
    this.plugins.dialog.open.call(this, "link", this.currentControllerName === "link");
  },
  submit: function(t) {
    this.showLoading(), t.preventDefault(), t.stopPropagation();
    try {
      const e = this.plugins.anchor.createAnchor.call(this, this.context.anchor.caller.link, !1);
      if (e === null)
        return;
      if (this.context.dialog.updateModal) {
        const i = this.context.link._linkAnchor.childNodes[0];
        this.setRange(i, 0, i, i.textContent.length);
      } else {
        const i = this.getSelectedElements();
        if (i.length > 1) {
          const n = this.util.createElement(i[0].nodeName);
          if (n.appendChild(e), !this.insertNode(n, null, !0))
            return;
        } else if (!this.insertNode(e, null, !0))
          return;
        this.setRange(e.childNodes[0], 0, e.childNodes[0], e.textContent.length);
      }
    } finally {
      this.plugins.dialog.close.call(this), this.closeLoading(), this.history.push(!1);
    }
    return !1;
  },
  /**
   * @Override core
   */
  active: function(t) {
    if (!t)
      this.controllerArray.indexOf(this.context.link.linkController) > -1 && this.controllersOff();
    else if (this.util.isAnchor(t) && t.getAttribute("data-image-link") === null)
      return this.controllerArray.indexOf(this.context.link.linkController) < 0 && this.plugins.link.call_controller.call(this, t), !0;
    return !1;
  },
  /**
   * @Override dialog
   */
  on: function(t) {
    this.plugins.anchor.on.call(this, this.context.anchor.caller.link, t);
  },
  call_controller: function(t) {
    this.editLink = this.context.link._linkAnchor = this.context.anchor.caller.link.linkAnchor = t;
    const e = this.context.link.linkController, i = e.querySelector("a");
    i.href = t.href, i.title = t.textContent, i.textContent = t.textContent, this.util.addClass(t, "on"), this.setControllerPosition(e, t, "bottom", { left: 0, top: 0 }), this.controllersOn(e, t, "link", this.util.removeClass.bind(this.util, this.context.link._linkAnchor, "on"));
  },
  onClick_linkController: function(t) {
    t.stopPropagation();
    const e = t.target.getAttribute("data-command") || t.target.parentNode.getAttribute("data-command");
    if (e) {
      if (t.preventDefault(), /update/.test(e))
        this.plugins.dialog.open.call(this, "link", !0);
      else if (/unlink/.test(e)) {
        const i = this.util.getChildElement(this.context.link._linkAnchor, function(l) {
          return l.childNodes.length === 0 || l.nodeType === 3;
        }, !1), n = this.util.getChildElement(this.context.link._linkAnchor, function(l) {
          return l.childNodes.length === 0 || l.nodeType === 3;
        }, !0);
        this.setRange(i, 0, n, n.textContent.length), this.nodeChange(null, null, ["A"], !1);
      } else
        this.util.removeItem(this.context.link._linkAnchor), this.context.anchor.caller.link.linkAnchor = null, this.focus(), this.history.push(!1);
      this.controllersOff();
    }
  },
  /**
   * @Override dialog
   */
  init: function() {
    this.context.link.linkController.style.display = "none", this.plugins.anchor.init.call(this, this.context.anchor.caller.link);
  }
};
var G0 = { exports: {} };
(function(t) {
  (function(e, i) {
    t.exports = e.document ? i(e, !0) : function(n) {
      if (!n.document)
        throw new Error("SUNEDITOR_MODULES a window with a document");
      return i(n);
    };
  })(typeof window < "u" ? window : Re, function(e, i) {
    const n = {
      name: "component",
      /**
       * @description Create a container for the resizing component and insert the element.
       * @param {Element} cover Cover element (FIGURE)
       * @param {String} className Class name of container (fixed: se-component)
       * @returns {Element} Created container element
       */
      set_container: function(l, r) {
        const u = this.util.createElement("DIV");
        return u.className = "se-component " + r, u.appendChild(l), u;
      },
      /**
       * @description Cover the target element with a FIGURE element.
       * @param {Element} element Target element
       */
      set_cover: function(l) {
        const r = this.util.createElement("FIGURE");
        return r.appendChild(l), r;
      },
      /**
       * @description Return HTML string of caption(FIGCAPTION) element
       * @returns {String}
       */
      create_caption: function() {
        const l = this.util.createElement("FIGCAPTION");
        return l.innerHTML = "<div>" + this.lang.dialogBox.caption + "</div>", l;
      }
    };
    return typeof i > "u" && (e.SUNEDITOR_MODULES || Object.defineProperty(e, "SUNEDITOR_MODULES", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: {}
    }), Object.defineProperty(e.SUNEDITOR_MODULES, "component", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: n
    })), n;
  });
})(G0);
var _a = G0.exports;
const In = /* @__PURE__ */ Kt(_a);
var X0 = { exports: {} };
(function(t) {
  (function(e, i) {
    t.exports = e.document ? i(e, !0) : function(n) {
      if (!n.document)
        throw new Error("SUNEDITOR_MODULES a window with a document");
      return i(n);
    };
  })(typeof window < "u" ? window : Re, function(e, i) {
    const n = {
      name: "resizing",
      /**
       * @description Constructor
       * Require context properties when resizing module
          inputX: Element,
          inputY: Element,
          _container: null,
          _cover: null,
          _element: null,
          _element_w: 1,
          _element_h: 1,
          _element_l: 0,
          _element_t: 0,
          _defaultSizeX: 'auto',
          _defaultSizeY: 'auto',
          _origin_w: core.options.imageWidth === 'auto' ? '' : core.options.imageWidth,
          _origin_h: core.options.imageHeight === 'auto' ? '' : core.options.imageHeight,
          _proportionChecked: true,
          // -- select function --
          _resizing: core.options.imageResizing,
          _resizeDotHide: !core.options.imageHeightShow,
          _rotation: core.options.imageRotation,
          _onlyPercentage: core.options.imageSizeOnlyPercentage,
          _ratio: false,
          _ratioX: 1,
          _ratioY: 1
          _captionShow: true,
          // -- when used caption (_captionShow: true) --
          _caption: null,
          _captionChecked: false,
          captionCheckEl: null,
       * @param {Object} core Core object 
       */
      add: function(l) {
        const r = l.icons, u = l.context;
        u.resizing = {
          _resizeClientX: 0,
          _resizeClientY: 0,
          _resize_plugin: "",
          _resize_w: 0,
          _resize_h: 0,
          _origin_w: 0,
          _origin_h: 0,
          _rotateVertical: !1,
          _resize_direction: "",
          _move_path: null,
          _isChange: !1,
          alignIcons: {
            basic: r.align_justify,
            left: r.align_left,
            right: r.align_right,
            center: r.align_center
          }
        };
        let h = this.setController_resize(l);
        u.resizing.resizeContainer = h, u.resizing.resizeDiv = h.querySelector(".se-modal-resize"), u.resizing.resizeDot = h.querySelector(".se-resize-dot"), u.resizing.resizeDisplay = h.querySelector(".se-resize-display");
        let s = this.setController_button(l);
        u.resizing.resizeButton = s;
        let m = u.resizing.resizeHandles = u.resizing.resizeDot.querySelectorAll("span");
        u.resizing.resizeButtonGroup = s.querySelector("._se_resizing_btn_group"), u.resizing.rotationButtons = s.querySelectorAll("._se_resizing_btn_group ._se_rotation"), u.resizing.percentageButtons = s.querySelectorAll("._se_resizing_btn_group ._se_percentage"), u.resizing.alignMenu = s.querySelector(".se-resizing-align-list"), u.resizing.alignMenuList = u.resizing.alignMenu.querySelectorAll("button"), u.resizing.alignButton = s.querySelector("._se_resizing_align_button"), u.resizing.autoSizeButton = s.querySelector("._se_resizing_btn_group ._se_auto_size"), u.resizing.captionButton = s.querySelector("._se_resizing_caption_button"), h.addEventListener("mousedown", function(c) {
          c.preventDefault();
        }), m[0].addEventListener("mousedown", this.onMouseDown_resize_handle.bind(l)), m[1].addEventListener("mousedown", this.onMouseDown_resize_handle.bind(l)), m[2].addEventListener("mousedown", this.onMouseDown_resize_handle.bind(l)), m[3].addEventListener("mousedown", this.onMouseDown_resize_handle.bind(l)), m[4].addEventListener("mousedown", this.onMouseDown_resize_handle.bind(l)), m[5].addEventListener("mousedown", this.onMouseDown_resize_handle.bind(l)), m[6].addEventListener("mousedown", this.onMouseDown_resize_handle.bind(l)), m[7].addEventListener("mousedown", this.onMouseDown_resize_handle.bind(l)), s.addEventListener("click", this.onClick_resizeButton.bind(l)), u.element.relative.appendChild(h), u.element.relative.appendChild(s), h = null, s = null, m = null;
      },
      /** resize controller, button (image, iframe, video) */
      setController_resize: function(l) {
        const r = l.util.createElement("DIV");
        return r.className = "se-controller se-resizing-container", r.style.display = "none", r.innerHTML = '<div class="se-modal-resize"></div><div class="se-resize-dot"><span class="tl"></span><span class="tr"></span><span class="bl"></span><span class="br"></span><span class="lw"></span><span class="th"></span><span class="rw"></span><span class="bh"></span><div class="se-resize-display"></div></div>', r;
      },
      setController_button: function(l) {
        const r = l.lang, u = l.icons, h = l.util.createElement("DIV");
        return h.className = "se-controller se-controller-resizing", h.innerHTML = '<div class="se-arrow se-arrow-up"></div><div class="se-btn-group _se_resizing_btn_group"><button type="button" data-command="percent" data-value="1" class="se-tooltip _se_percentage"><span>100%</span><span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.resize100 + '</span></span></button><button type="button" data-command="percent" data-value="0.75" class="se-tooltip _se_percentage"><span>75%</span><span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.resize75 + '</span></span></button><button type="button" data-command="percent" data-value="0.5" class="se-tooltip _se_percentage"><span>50%</span><span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.resize50 + '</span></span></button><button type="button" data-command="auto" class="se-btn se-tooltip _se_auto_size">' + u.auto_size + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.autoSize + '</span></span></button><button type="button" data-command="rotate" data-value="-90" class="se-btn se-tooltip _se_rotation">' + u.rotate_left + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.rotateLeft + '</span></span></button><button type="button" data-command="rotate" data-value="90" class="se-btn se-tooltip _se_rotation">' + u.rotate_right + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.rotateRight + '</span></span></button></div><div class="se-btn-group" style="padding-top: 0;"><button type="button" data-command="mirror" data-value="h" class="se-btn se-tooltip">' + u.mirror_horizontal + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.mirrorHorizontal + '</span></span></button><button type="button" data-command="mirror" data-value="v" class="se-btn se-tooltip">' + u.mirror_vertical + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.mirrorVertical + '</span></span></button><button type="button" data-command="onalign" class="se-btn se-tooltip _se_resizing_align_button">' + u.align_justify + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.toolbar.align + '</span></span></button><div class="se-btn-group-sub sun-editor-common se-list-layer se-resizing-align-list"><div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="basic">' + u.align_justify + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.dialogBox.basic + '</span></span></button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="left">' + u.align_left + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.dialogBox.left + '</span></span></button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="center">' + u.align_center + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.dialogBox.center + '</span></span></button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="right">' + u.align_right + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.dialogBox.right + '</span></span></button></li></ul></div></div><button type="button" data-command="caption" class="se-btn se-tooltip _se_resizing_caption_button">' + u.caption + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.dialogBox.caption + '</span></span></button><button type="button" data-command="revert" class="se-btn se-tooltip">' + u.revert + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.dialogBox.revertButton + '</span></span></button><button type="button" data-command="update" class="se-btn se-tooltip">' + u.modify + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.edit + '</span></span></button><button type="button" data-command="delete" class="se-btn se-tooltip">' + u.delete + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + r.controller.remove + "</span></span></button></div>", h;
      },
      /**
       * @description Gets the width size
       * @param {Object} contextPlugin context object of plugin (core.context[plugin])
       * @param {Element} element Target element
       * @param {Element} cover Cover element (FIGURE)
       * @param {Element} container Container element (DIV.se-component)
       * @returns {String}
       */
      _module_getSizeX: function(l, r, u, h) {
        return r || (r = l._element), u || (u = l._cover), h || (h = l._container), r ? /%$/.test(r.style.width) ? (h && this.util.getNumber(h.style.width, 2) || 100) + "%" : r.style.width : "";
      },
      /**
       * @description Gets the height size
       * @param {Object} contextPlugin context object of plugin (core.context[plugin])
       * @param {Element} element Target element
       * @param {Element} cover Cover element (FIGURE)
       * @param {Element} container Container element (DIV.se-component)
       * @returns {String}
       */
      _module_getSizeY: function(l, r, u, h) {
        return r || (r = l._element), u || (u = l._cover), h || (h = l._container), !h || !u ? r && r.style.height || "" : this.util.getNumber(u.style.paddingBottom, 0) > 0 && !this.context.resizing._rotateVertical ? u.style.height : !/%$/.test(r.style.height) || !/%$/.test(r.style.width) ? r.style.height : (h && this.util.getNumber(h.style.height, 2) || 100) + "%";
      },
      /**
       * @description Called at the "openModify" to put the size of the current target into the size input element.
       * @param {Object} contextPlugin context object of plugin (core.context[plugin])
       * @param {Object} pluginObj Plugin object
       */
      _module_setModifyInputSize: function(l, r) {
        const u = l._onlyPercentage && this.context.resizing._rotateVertical;
        l.proportion.checked = l._proportionChecked = l._element.getAttribute("data-proportion") !== "false";
        let h = u ? "" : this.plugins.resizing._module_getSizeX.call(this, l);
        if (h === l._defaultSizeX && (h = ""), l._onlyPercentage && (h = this.util.getNumber(h, 2)), l.inputX.value = h, r.setInputSize.call(this, "x"), !l._onlyPercentage) {
          let s = u ? "" : this.plugins.resizing._module_getSizeY.call(this, l);
          s === l._defaultSizeY && (s = ""), l._onlyPercentage && (s = this.util.getNumber(s, 2)), l.inputY.value = s;
        }
        l.inputX.disabled = !!u, l.inputY.disabled = !!u, l.proportion.disabled = !!u, r.setRatio.call(this);
      },
      /**
       * @description It is called in "setInputSize" (input tag keyupEvent), 
       * checks the value entered in the input tag, 
       * calculates the ratio, and sets the calculated value in the input tag of the opposite size.
       * @param {Object} contextPlugin context object of plugin (core.context[plugin])
       * @param {String} xy 'x': width, 'y': height
       */
      _module_setInputSize: function(l, r) {
        if (l._onlyPercentage) {
          r === "x" && l.inputX.value > 100 && (l.inputX.value = 100);
          return;
        }
        if (l.proportion.checked && l._ratio && /\d/.test(l.inputX.value) && /\d/.test(l.inputY.value)) {
          const u = l.inputX.value.replace(/\d+|\./g, "") || l.sizeUnit, h = l.inputY.value.replace(/\d+|\./g, "") || l.sizeUnit;
          if (u !== h)
            return;
          const s = u === "%" ? 2 : 0;
          r === "x" ? l.inputY.value = this.util.getNumber(l._ratioY * this.util.getNumber(l.inputX.value, s), s) + h : l.inputX.value = this.util.getNumber(l._ratioX * this.util.getNumber(l.inputY.value, s), s) + u;
        }
      },
      /**
       * @description It is called in "setRatio" (input and proportionCheck tags changeEvent), 
       * checks the value of the input tag, calculates the ratio, and resets it in the input tag.
       * @param {Object} contextPlugin context object of plugin (core.context[plugin])
       */
      _module_setRatio: function(l) {
        const r = l.inputX.value, u = l.inputY.value;
        if (l.proportion.checked && /\d+/.test(r) && /\d+/.test(u)) {
          const h = r.replace(/\d+|\./g, "") || l.sizeUnit, s = u.replace(/\d+|\./g, "") || l.sizeUnit;
          if (h !== s)
            l._ratio = !1;
          else if (!l._ratio) {
            const m = this.util.getNumber(r, 0), c = this.util.getNumber(u, 0);
            l._ratio = !0, l._ratioX = m / c, l._ratioY = c / m;
          }
        } else
          l._ratio = !1;
      },
      /**
       * @description Revert size of element to origin size (plugin._origin_w, plugin._origin_h)
       * @param {Object} contextPlugin context object of plugin (core.context[plugin])
       */
      _module_sizeRevert: function(l) {
        l._onlyPercentage ? l.inputX.value = l._origin_w > 100 ? 100 : l._origin_w : (l.inputX.value = l._origin_w, l.inputY.value = l._origin_h);
      },
      /**
       * @description Save the size data (element.setAttribute("data-size"))
       * Used at the "setSize" method
       * @param {Object} contextPlugin context object of plugin (core.context[plugin])
       */
      _module_saveCurrentSize: function(l) {
        const r = this.plugins.resizing._module_getSizeX.call(this, l), u = this.plugins.resizing._module_getSizeY.call(this, l);
        l._element.setAttribute("data-size", r + "," + u), l._videoRatio && (l._videoRatio = u);
      },
      /**
       * @description Call the resizing module
       * @param {Element} targetElement Resizing target element
       * @param {string} plugin Plugin name
       * @returns {Object} Size of resizing div {w, h, t, l}
       */
      call_controller_resize: function(l, r) {
        const u = this.context.resizing, h = this.context[r];
        u._resize_plugin = r;
        const s = u.resizeContainer, m = u.resizeDiv, c = this.util.getOffset(l, this.context.element.wysiwygFrame), g = u._rotateVertical = /^(90|270)$/.test(Math.abs(l.getAttribute("data-rotate")).toString()), x = g ? l.offsetHeight : l.offsetWidth, T = g ? l.offsetWidth : l.offsetHeight, L = c.top, A = c.left - this.context.element.wysiwygFrame.scrollLeft;
        s.style.top = L + "px", s.style.left = A + "px", s.style.width = x + "px", s.style.height = T + "px", m.style.top = "0px", m.style.left = "0px", m.style.width = x + "px", m.style.height = T + "px";
        let a = l.getAttribute("data-align") || "basic";
        a = a === "none" ? "basic" : a;
        const o = this.util.getParentElement(l, this.util.isComponent), d = this.util.getParentElement(l, "FIGURE"), p = this.plugins.resizing._module_getSizeX.call(this, h, l, d, o) || "auto", v = h._onlyPercentage && r === "image" ? "" : ", " + (this.plugins.resizing._module_getSizeY.call(this, h, l, d, o) || "auto");
        this.util.changeTxt(u.resizeDisplay, this.lang.dialogBox[a] + " (" + p + v + ")"), u.resizeButtonGroup.style.display = h._resizing ? "" : "none";
        const _ = h._resizing && !h._resizeDotHide && !h._onlyPercentage ? "flex" : "none", b = u.resizeHandles;
        for (let M = 0, N = b.length; M < N; M++)
          b[M].style.display = _;
        if (h._resizing) {
          const M = u.rotationButtons;
          M[0].style.display = M[1].style.display = h._rotation ? "" : "none";
        }
        if (h._alignHide)
          u.alignButton.style.display = "none";
        else {
          u.alignButton.style.display = "";
          const M = u.alignMenuList;
          this.util.changeElement(u.alignButton.firstElementChild, u.alignIcons[a]);
          for (let N = 0, O = M.length; N < O; N++)
            M[N].getAttribute("data-value") === a ? this.util.addClass(M[N], "on") : this.util.removeClass(M[N], "on");
        }
        const S = u.percentageButtons, k = /%$/.test(l.style.width) && /%$/.test(o.style.width) ? this.util.getNumber(o.style.width, 0) / 100 + "" : "";
        for (let M = 0, N = S.length; M < N; M++)
          S[M].getAttribute("data-value") === k ? this.util.addClass(S[M], "active") : this.util.removeClass(S[M], "active");
        h._captionShow ? (u.captionButton.style.display = "", this.util.getChildElement(l.parentNode, "figcaption") ? (this.util.addClass(u.captionButton, "active"), h._captionChecked = !0) : (this.util.removeClass(u.captionButton, "active"), h._captionChecked = !1)) : u.captionButton.style.display = "none", s.style.display = "block";
        const w = { left: 0, top: 50 };
        this.options.iframe && (w.left -= this.context.element.wysiwygFrame.parentElement.offsetLeft, w.top -= this.context.element.wysiwygFrame.parentElement.offsetTop), this.setControllerPosition(u.resizeButton, s, "bottom", w), this.controllersOn(s, u.resizeButton, this.util.setDisabledButtons.bind(this.util, !1, this.resizingDisabledButtons), l, r), this.util.setDisabledButtons(!0, this.resizingDisabledButtons), u._resize_w = x, u._resize_h = T;
        const z = (l.getAttribute("origin-size") || "").split(",");
        return u._origin_w = z[0] || l.naturalWidth, u._origin_h = z[1] || l.naturalHeight, {
          w: x,
          h: T,
          t: L,
          l: A
        };
      },
      _closeAlignMenu: null,
      /**
       * @description Open align submenu of module
       */
      openAlignMenu: function() {
        const l = this.context.resizing.alignButton;
        this.util.addClass(l, "on"), this.context.resizing.alignMenu.style.top = l.offsetTop + l.offsetHeight + "px", this.context.resizing.alignMenu.style.left = l.offsetLeft - l.offsetWidth / 2 + "px", this.context.resizing.alignMenu.style.display = "block", this.plugins.resizing._closeAlignMenu = (function() {
          this.util.removeClass(this.context.resizing.alignButton, "on"), this.context.resizing.alignMenu.style.display = "none", this.removeDocEvent("click", this.plugins.resizing._closeAlignMenu), this.plugins.resizing._closeAlignMenu = null;
        }).bind(this), this.addDocEvent("click", this.plugins.resizing._closeAlignMenu);
      },
      /**
       * @description Click event of resizing toolbar
       * Performs the action of the clicked toolbar button.
       * @param {MouseEvent} e Event object
       */
      onClick_resizeButton: function(l) {
        l.stopPropagation();
        const r = l.target, u = r.getAttribute("data-command") || r.parentNode.getAttribute("data-command");
        if (!u)
          return;
        const h = r.getAttribute("data-value") || r.parentNode.getAttribute("data-value"), s = this.context.resizing._resize_plugin, m = this.context[s], c = m._element, g = this.plugins[s];
        if (l.preventDefault(), !(typeof this.plugins.resizing._closeAlignMenu == "function" && (this.plugins.resizing._closeAlignMenu(), u === "onalign"))) {
          switch (u) {
            case "auto":
              this.plugins.resizing.resetTransform.call(this, c), g.setAutoSize.call(this), this.selectComponent(c, s);
              break;
            case "percent":
              let x = this.plugins.resizing._module_getSizeY.call(this, m);
              if (this.context.resizing._rotateVertical) {
                const _ = c.getAttribute("data-percentage");
                _ && (x = _.split(",")[1]);
              }
              this.plugins.resizing.resetTransform.call(this, c), g.setPercentSize.call(this, h * 100, this.util.getNumber(x, 0) === null || !/%$/.test(x) ? "" : x), this.selectComponent(c, s);
              break;
            case "mirror":
              const T = c.getAttribute("data-rotate") || "0";
              let L = c.getAttribute("data-rotateX") || "", A = c.getAttribute("data-rotateY") || "";
              h === "h" && !this.context.resizing._rotateVertical || h === "v" && this.context.resizing._rotateVertical ? A = A ? "" : "180" : L = L ? "" : "180", c.setAttribute("data-rotateX", L), c.setAttribute("data-rotateY", A), this.plugins.resizing._setTransForm(c, T, L, A);
              break;
            case "rotate":
              const a = this.context.resizing, o = c.getAttribute("data-rotate") * 1 + h * 1, d = this._w.Math.abs(o) >= 360 ? 0 : o;
              c.setAttribute("data-rotate", d), a._rotateVertical = /^(90|270)$/.test(this._w.Math.abs(d).toString()), this.plugins.resizing.setTransformSize.call(this, c, null, null), this.selectComponent(c, s);
              break;
            case "onalign":
              this.plugins.resizing.openAlignMenu.call(this);
              return;
            case "align":
              const p = h === "basic" ? "none" : h;
              g.setAlign.call(this, p, null, null, null), this.selectComponent(c, s);
              break;
            case "caption":
              const v = !m._captionChecked;
              if (g.openModify.call(this, !0), m._captionChecked = m.captionCheckEl.checked = v, g.update_image.call(this, !1, !1, !1), v) {
                const _ = this.util.getChildElement(m._caption, function(b) {
                  return b.nodeType === 3;
                });
                _ ? this.setRange(_, 0, _, _.textContent.length) : m._caption.focus(), this.controllersOff();
              } else
                this.selectComponent(c, s), g.openModify.call(this, !0);
              break;
            case "revert":
              g.setOriginSize.call(this), this.selectComponent(c, s);
              break;
            case "update":
              g.openModify.call(this), this.controllersOff();
              break;
            case "delete":
              g.destroy.call(this);
              break;
          }
          this.history.push(!1);
        }
      },
      /**
       * @description Initialize the transform style (rotation) of the element.
       * @param {Element} element Target element
       */
      resetTransform: function(l) {
        const r = (l.getAttribute("data-size") || l.getAttribute("data-origin") || "").split(",");
        this.context.resizing._rotateVertical = !1, l.style.maxWidth = "", l.style.transform = "", l.style.transformOrigin = "", l.setAttribute("data-rotate", ""), l.setAttribute("data-rotateX", ""), l.setAttribute("data-rotateY", ""), this.plugins[this.context.resizing._resize_plugin].setSize.call(this, r[0] ? r[0] : "auto", r[1] ? r[1] : "", !0);
      },
      /**
       * @description Set the transform style (rotation) of the element.
       * @param {Element} element Target element
       * @param {Number|null} width Element's width size
       * @param {Number|null} height Element's height size
       */
      setTransformSize: function(l, r, u) {
        let h = l.getAttribute("data-percentage");
        const s = this.context.resizing._rotateVertical, m = l.getAttribute("data-rotate") * 1;
        let c = "";
        if (h && !s)
          h = h.split(","), h[0] === "auto" && h[1] === "auto" ? this.plugins[this.context.resizing._resize_plugin].setAutoSize.call(this) : this.plugins[this.context.resizing._resize_plugin].setPercentSize.call(this, h[0], h[1]);
        else {
          const g = this.util.getParentElement(l, "FIGURE"), x = r || l.offsetWidth, T = u || l.offsetHeight, L = (s ? T : x) + "px", A = (s ? x : T) + "px";
          if (this.plugins[this.context.resizing._resize_plugin].cancelPercentAttr.call(this), this.plugins[this.context.resizing._resize_plugin].setSize.call(this, x + "px", T + "px", !0), g.style.width = L, g.style.height = this.context[this.context.resizing._resize_plugin]._caption ? "" : A, s) {
            let a = x / 2 + "px " + x / 2 + "px 0", o = T / 2 + "px " + T / 2 + "px 0";
            c = m === 90 || m === -270 ? o : a;
          }
        }
        l.style.transformOrigin = c, this.plugins.resizing._setTransForm(l, m.toString(), l.getAttribute("data-rotateX") || "", l.getAttribute("data-rotateY") || ""), s ? l.style.maxWidth = "none" : l.style.maxWidth = "", this.plugins.resizing.setCaptionPosition.call(this, l);
      },
      _setTransForm: function(l, r, u, h) {
        let s = (l.offsetWidth - l.offsetHeight) * (/-/.test(r) ? 1 : -1), m = "";
        if (/[1-9]/.test(r) && (u || h))
          switch (m = u ? "Y" : "X", r) {
            case "90":
              m = u && h ? "X" : h ? m : "";
              break;
            case "270":
              s *= -1, m = u && h ? "Y" : u ? m : "";
              break;
            case "-90":
              m = u && h ? "Y" : u ? m : "";
              break;
            case "-270":
              s *= -1, m = u && h ? "X" : h ? m : "";
              break;
            default:
              m = "";
          }
        r % 180 === 0 && (l.style.maxWidth = ""), l.style.transform = "rotate(" + r + "deg)" + (u ? " rotateX(" + u + "deg)" : "") + (h ? " rotateY(" + h + "deg)" : "") + (m ? " translate" + m + "(" + s + "px)" : "");
      },
      /**
       * @description The position of the caption is set automatically.
       * @param {Element} element Target element (not caption element)
       */
      setCaptionPosition: function(l) {
        const r = this.util.getChildElement(this.util.getParentElement(l, "FIGURE"), "FIGCAPTION");
        r && (r.style.marginTop = (this.context.resizing._rotateVertical ? l.offsetWidth - l.offsetHeight : 0) + "px");
      },
      /**
       * @description Mouse down event of resize handles
       * @param {MouseEvent} e Event object 
       */
      onMouseDown_resize_handle: function(l) {
        l.stopPropagation(), l.preventDefault();
        const r = this.context.resizing, u = r._resize_direction = l.target.classList[0];
        r._resizeClientX = l.clientX, r._resizeClientY = l.clientY, this.context.element.resizeBackground.style.display = "block", r.resizeButton.style.display = "none", r.resizeDiv.style.float = /l/.test(u) ? "right" : /r/.test(u) ? "left" : "none";
        const h = (function(c) {
          if (c.type === "keydown" && c.keyCode !== 27)
            return;
          const g = r._isChange;
          r._isChange = !1, this.removeDocEvent("mousemove", s), this.removeDocEvent("mouseup", h), this.removeDocEvent("keydown", h), c.type === "keydown" ? (this.controllersOff(), this.context.element.resizeBackground.style.display = "none", this.plugins[this.context.resizing._resize_plugin].init.call(this)) : (this.plugins.resizing.cancel_controller_resize.call(this, u), g && this.history.push(!1));
        }).bind(this), s = this.plugins.resizing.resizing_element.bind(this, r, u, this.context[r._resize_plugin]);
        this.addDocEvent("mousemove", s), this.addDocEvent("mouseup", h), this.addDocEvent("keydown", h);
      },
      /**
       * @description Mouse move event after call "onMouseDown_resize_handle" of resize handles
       * The size of the module's "div" is adjusted according to the mouse move event.
       * @param {Object} contextResizing "core.context.resizing" object (binding argument)
       * @param {String} direction Direction ("tl", "tr", "bl", "br", "lw", "th", "rw", "bh") (binding argument)
       * @param {Object} plugin "core.context[currentPlugin]" object (binding argument)
       * @param {MouseEvent} e Event object
       */
      resizing_element: function(l, r, u, h) {
        const s = h.clientX, m = h.clientY;
        let c = u._element_w, g = u._element_h;
        const x = u._element_w + (/r/.test(r) ? s - l._resizeClientX : l._resizeClientX - s), T = u._element_h + (/b/.test(r) ? m - l._resizeClientY : l._resizeClientY - m), L = u._element_h / u._element_w * x;
        /t/.test(r) && (l.resizeDiv.style.top = u._element_h - (/h/.test(r) ? T : L) + "px"), /l/.test(r) && (l.resizeDiv.style.left = u._element_w - x + "px"), /r|l/.test(r) && (l.resizeDiv.style.width = x + "px", c = x), /^(t|b)[^h]$/.test(r) ? (l.resizeDiv.style.height = L + "px", g = L) : /^(t|b)h$/.test(r) && (l.resizeDiv.style.height = T + "px", g = T), l._resize_w = c, l._resize_h = g, this.util.changeTxt(l.resizeDisplay, this._w.Math.round(c) + " x " + this._w.Math.round(g)), l._isChange = !0;
      },
      /**
       * @description Resize the element to the size of the "div" adjusted in the "resizing_element" method.
       * Called at the mouse-up event registered in "onMouseDown_resize_handle".
       * @param {String} direction Direction ("tl", "tr", "bl", "br", "lw", "th", "rw", "bh")
       */
      cancel_controller_resize: function(l) {
        const r = this.context.resizing._rotateVertical;
        this.controllersOff(), this.context.element.resizeBackground.style.display = "none";
        let u = this._w.Math.round(r ? this.context.resizing._resize_h : this.context.resizing._resize_w), h = this._w.Math.round(r ? this.context.resizing._resize_w : this.context.resizing._resize_h);
        if (!r && !/%$/.test(u)) {
          const c = this.context.element.wysiwygFrame.clientWidth - 32 - 2;
          this.util.getNumber(u, 0) > c && (h = this._w.Math.round(h / u * c), u = c);
        }
        const s = this.context.resizing._resize_plugin;
        this.plugins[s].setSize.call(this, u, h, !1, l), r && this.plugins.resizing.setTransformSize.call(this, this.context[this.context.resizing._resize_plugin]._element, u, h), this.selectComponent(this.context[s]._element, s);
      }
    };
    return typeof i > "u" && (e.SUNEDITOR_MODULES || Object.defineProperty(e, "SUNEDITOR_MODULES", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: {}
    }), Object.defineProperty(e.SUNEDITOR_MODULES, "resizing", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: n
    })), n;
  });
})(X0);
var wa = X0.exports;
const K0 = /* @__PURE__ */ Kt(wa);
var J0 = { exports: {} };
(function(t) {
  (function(e, i) {
    t.exports = e.document ? i(e, !0) : function(n) {
      if (!n.document)
        throw new Error("SUNEDITOR_MODULES a window with a document");
      return i(n);
    };
  })(typeof window < "u" ? window : Re, function(e, i) {
    const n = {
      name: "fileManager",
      _xmlHttp: null,
      _checkMediaComponent: function(l) {
        return /IMG/i.test(l) ? !/FIGURE/i.test(l.parentElement.nodeName) || !/FIGURE/i.test(l.parentElement.parentElement.nodeName) : !0;
      },
      /**
       * @description Upload the file to the server.
       * @param {String} uploadUrl Upload server url
       * @param {Object|null} uploadHeader Request header
       * @param {FormData} formData FormData in body
       * @param {Function|null} callBack Success call back function
       * @param {Function|null} errorCallBack Error call back function
       * @example this.plugins.fileManager.upload.call(this, imageUploadUrl, this.options.imageUploadHeader, formData, this.plugins.image.callBack_imgUpload.bind(this, info), this.functions.onImageUploadError);
       */
      upload: function(l, r, u, h, s) {
        this.showLoading();
        const m = this.plugins.fileManager, c = m._xmlHttp = this.util.getXMLHttpRequest();
        if (c.onreadystatechange = m._callBackUpload.bind(this, c, h, s), c.open("post", l, !0), r !== null && typeof r == "object" && this._w.Object.keys(r).length > 0)
          for (let g in r)
            c.setRequestHeader(g, r[g]);
        c.send(u);
      },
      _callBackUpload: function(l, r, u) {
        if (l.readyState === 4)
          if (l.status === 200)
            try {
              r(l);
            } catch (h) {
              throw Error('[SUNEDITOR.fileManager.upload.callBack.fail] cause : "' + h.message + '"');
            } finally {
              this.closeLoading();
            }
          else {
            this.closeLoading();
            const h = l.responseText ? JSON.parse(l.responseText) : l;
            if (typeof u != "function" || u("", h, this)) {
              const s = "[SUNEDITOR.fileManager.upload.serverException] status: " + l.status + ", response: " + (h.errorMessage || l.responseText);
              throw this.functions.noticeOpen(s), Error(s);
            }
          }
      },
      /**
       * @description Checke the file's information and modify the tag that does not fit the format.
       * @param {String} pluginName Plugin name
       * @param {Array} tagNames Tag array to check
       * @param {Function|null} uploadEventHandler Event handler to process updated file info after checking (used in "setInfo")
       * @param {Function} modifyHandler A function to modify a tag that does not fit the format (Argument value: Tag element)
       * @param {Boolean} resizing True if the plugin is using a resizing module
       * @example 
       * const modifyHandler = function (tag) {
       *      imagePlugin.onModifyMode.call(this, tag, null);
       *      imagePlugin.openModify.call(this, true);
       *      imagePlugin.update_image.call(this, true, false, true);
       *  }.bind(this);
       *  this.plugins.fileManager.checkInfo.call(this, 'image', ['img'], this.functions.onImageUpload, modifyHandler, true);
       */
      checkInfo: function(l, r, u, h, s) {
        let m = [];
        for (let o = 0, d = r.length; o < d; o++)
          m = m.concat([].slice.call(this.context.element.wysiwyg.querySelectorAll(r[o] + ':not([data-se-embed="true"])')));
        const c = this.plugins.fileManager, g = this.context[l], x = g._infoList, T = c.setInfo.bind(this);
        if (m.length === x.length)
          if (this._componentsInfoReset) {
            for (let o = 0, d = m.length; o < d; o++)
              T(l, m[o], u, null, s);
            return;
          } else {
            let o = !1;
            for (let d = 0, p = x.length, v; d < p; d++)
              if (v = x[d], m.filter(function(_) {
                return v.src === _.src && v.index.toString() === _.getAttribute("data-index");
              }).length === 0) {
                o = !0;
                break;
              }
            if (!o)
              return;
          }
        const L = s ? this.context.resizing._resize_plugin : "";
        s && (this.context.resizing._resize_plugin = l);
        const A = [], a = [];
        for (let o = 0, d = x.length; o < d; o++)
          a[o] = x[o].index;
        for (g.__updateTags = m; m.length > 0; ) {
          const o = m.shift();
          !this.util.getParentElement(o, this.util.isMediaComponent) || !c._checkMediaComponent(o) ? (A.push(g._infoIndex), h(o)) : !o.getAttribute("data-index") || a.indexOf(o.getAttribute("data-index") * 1) < 0 ? (A.push(g._infoIndex), o.removeAttribute("data-index"), T(l, o, u, null, s)) : A.push(o.getAttribute("data-index") * 1);
        }
        for (let o = 0, d; o < x.length; o++)
          d = x[o].index, !(A.indexOf(d) > -1) && (x.splice(o, 1), typeof u == "function" && u(null, d, "delete", null, 0, this), o--);
        s && (this.context.resizing._resize_plugin = L);
      },
      /**
       * @description Create info object of file and add it to "_infoList" (this.context[pluginName]._infoList[])
       * @param {String} pluginName Plugin name 
       * @param {Element} element 
       * @param {Function|null} uploadEventHandler Event handler to process updated file info (created in setInfo)
       * @param {Object|null} file 
       * @param {Boolean} resizing True if the plugin is using a resizing module
       * @example 
       * uploadCallBack {.. file = { name: fileList[i].name, size: fileList[i].size };
       * this.plugins.fileManager.setInfo.call(this, 'image', oImg, this.functions.onImageUpload, file, true);
       */
      setInfo: function(l, r, u, h, s) {
        const m = s ? this.context.resizing._resize_plugin : "";
        s && (this.context.resizing._resize_plugin = l);
        const c = this.plugins[l], g = this.context[l], x = g._infoList;
        let T = r.getAttribute("data-index"), L = null, A = "";
        if (h || (h = {
          name: r.getAttribute("data-file-name") || (typeof r.src == "string" ? r.src.split("/").pop() : ""),
          size: r.getAttribute("data-file-size") || 0
        }), !T || this._componentsInfoInit)
          A = "create", T = g._infoIndex++, r.setAttribute("data-index", T), r.setAttribute("data-file-name", h.name), r.setAttribute("data-file-size", h.size), L = {
            src: r.src,
            index: T * 1,
            name: h.name,
            size: h.size
          }, x.push(L);
        else {
          A = "update", T *= 1;
          for (let a = 0, o = x.length; a < o; a++)
            if (T === x[a].index) {
              L = x[a];
              break;
            }
          L || (T = g._infoIndex++, L = { index: T }, x.push(L)), L.src = r.src, L.name = r.getAttribute("data-file-name"), L.size = r.getAttribute("data-file-size") * 1;
        }
        if (L.element = r, L.delete = c.destroy.bind(this, r), L.select = (function(a) {
          a.scrollIntoView(!0), this._w.setTimeout(c.select.bind(this, a));
        }).bind(this, r), s) {
          if (!r.getAttribute("origin-size") && r.naturalWidth && r.setAttribute("origin-size", r.naturalWidth + "," + r.naturalHeight), !r.getAttribute("data-origin")) {
            const a = this.util.getParentElement(r, this.util.isMediaComponent), o = this.util.getParentElement(r, "FIGURE"), d = this.plugins.resizing._module_getSizeX.call(this, g, r, o, a), p = this.plugins.resizing._module_getSizeY.call(this, g, r, o, a);
            r.setAttribute("data-origin", d + "," + p), r.setAttribute("data-size", d + "," + p);
          }
          if (!r.style.width) {
            const a = (r.getAttribute("data-size") || r.getAttribute("data-origin") || "").split(",");
            c.onModifyMode.call(this, r, null), c.applySize.call(this, a[0], a[1]);
          }
          this.context.resizing._resize_plugin = m;
        }
        typeof u == "function" && u(r, T, A, L, --g._uploadFileLength < 0 ? 0 : g._uploadFileLength, this);
      },
      /**
       * @description Delete info object at "_infoList"
       * @param {String} pluginName Plugin name 
       * @param {Number} index index of info object (this.context[pluginName]._infoList[].index)
       * @param {Function|null} uploadEventHandler Event handler to process updated file info (created in setInfo)
       */
      deleteInfo: function(l, r, u) {
        if (r >= 0) {
          const h = this.context[l]._infoList;
          for (let s = 0, m = h.length; s < m; s++)
            if (r === h[s].index) {
              h.splice(s, 1), typeof u == "function" && u(null, r, "delete", null, 0, this);
              return;
            }
        }
      },
      /**
       * @description Reset info object and "_infoList = []", "_infoIndex = 0"
       * @param {String} pluginName Plugin name 
       * @param {Function|null} uploadEventHandler Event handler to process updated file info (created in setInfo)
       */
      resetInfo: function(l, r) {
        const u = this.context[l];
        if (typeof r == "function") {
          const h = u._infoList;
          for (let s = 0, m = h.length; s < m; s++)
            r(null, h[s].index, "delete", null, 0, this);
        }
        u._infoList = [], u._infoIndex = 0;
      }
    };
    return typeof i > "u" && (e.SUNEDITOR_MODULES || Object.defineProperty(e, "SUNEDITOR_MODULES", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: {}
    }), Object.defineProperty(e.SUNEDITOR_MODULES, "fileManager", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: n
    })), n;
  });
})(J0);
var xa = J0.exports;
const On = /* @__PURE__ */ Kt(xa), Q0 = {
  name: "image",
  display: "dialog",
  add: function(t) {
    t.addModule([mi, Y0, In, K0, On]);
    const e = t.options, i = t.context, n = i.image = {
      _infoList: [],
      // @Override fileManager
      _infoIndex: 0,
      // @Override fileManager
      _uploadFileLength: 0,
      // @Override fileManager
      focusElement: null,
      // @Override dialog // This element has focus when the dialog is opened.
      sizeUnit: e._imageSizeUnit,
      _linkElement: "",
      _altText: "",
      _align: "none",
      _floatClassRegExp: "__se__float\\-[a-z]+",
      _v_src: { _linkValue: "" },
      svgDefaultSize: "30%",
      base64RenderIndex: 0,
      // @require @Override component
      _element: null,
      _cover: null,
      _container: null,
      // @Override resizing properties
      inputX: null,
      inputY: null,
      _element_w: 1,
      _element_h: 1,
      _element_l: 0,
      _element_t: 0,
      _defaultSizeX: "auto",
      _defaultSizeY: "auto",
      _origin_w: e.imageWidth === "auto" ? "" : e.imageWidth,
      _origin_h: e.imageHeight === "auto" ? "" : e.imageHeight,
      _proportionChecked: !0,
      _resizing: e.imageResizing,
      _resizeDotHide: !e.imageHeightShow,
      _rotation: e.imageRotation,
      _alignHide: !e.imageAlignShow,
      _onlyPercentage: e.imageSizeOnlyPercentage,
      _ratio: !1,
      _ratioX: 1,
      _ratioY: 1,
      _captionShow: !0,
      _captionChecked: !1,
      _caption: null,
      captionCheckEl: null
    };
    let l = this.setDialog(t);
    n.modal = l, n.imgInputFile = l.querySelector("._se_image_file"), n.imgUrlFile = l.querySelector("._se_image_url"), n.focusElement = n.imgInputFile || n.imgUrlFile, n.altText = l.querySelector("._se_image_alt"), n.captionCheckEl = l.querySelector("._se_image_check_caption"), n.previewSrc = l.querySelector("._se_tab_content_image .se-link-preview"), l.querySelector(".se-dialog-tabs").addEventListener("click", this.openTab.bind(t)), l.querySelector("form").addEventListener("submit", this.submit.bind(t)), n.imgInputFile && l.querySelector(".se-file-remove").addEventListener("click", this._removeSelectedFiles.bind(n.imgInputFile, n.imgUrlFile, n.previewSrc)), n.imgUrlFile && n.imgUrlFile.addEventListener("input", this._onLinkPreview.bind(n.previewSrc, n._v_src, e.linkProtocol)), n.imgInputFile && n.imgUrlFile && n.imgInputFile.addEventListener("change", this._fileInputChange.bind(n));
    const r = l.querySelector(".__se__gallery");
    r && r.addEventListener("click", this._openGallery.bind(t)), n.proportion = {}, n.inputX = {}, n.inputY = {}, e.imageResizing && (n.proportion = l.querySelector("._se_image_check_proportion"), n.inputX = l.querySelector("._se_image_size_x"), n.inputY = l.querySelector("._se_image_size_y"), n.inputX.value = e.imageWidth, n.inputY.value = e.imageHeight, n.inputX.addEventListener("keyup", this.setInputSize.bind(t, "x")), n.inputY.addEventListener("keyup", this.setInputSize.bind(t, "y")), n.inputX.addEventListener("change", this.setRatio.bind(t)), n.inputY.addEventListener("change", this.setRatio.bind(t)), n.proportion.addEventListener("change", this.setRatio.bind(t)), l.querySelector(".se-dialog-btn-revert").addEventListener("click", this.sizeRevert.bind(t))), i.dialog.modal.appendChild(l), t.plugins.anchor.initEvent.call(t, "image", l.querySelector("._se_tab_content_url")), n.anchorCtx = t.context.anchor.caller.image, l = null;
  },
  /** dialog */
  setDialog: function(t) {
    const e = t.options, i = t.lang, n = t.util.createElement("DIV");
    n.className = "se-dialog-content se-dialog-image", n.style.display = "none";
    let l = '<div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" class="close" title="' + i.dialogBox.close + '" aria-label="' + i.dialogBox.close + '">' + t.icons.cancel + '</button><span class="se-modal-title">' + i.dialogBox.imageBox.title + '</span></div><div class="se-dialog-tabs"><button type="button" class="_se_tab_link active" data-tab-link="image">' + i.toolbar.image + '</button><button type="button" class="_se_tab_link" data-tab-link="url">' + i.toolbar.link + '</button></div><form method="post" enctype="multipart/form-data"><div class="_se_tab_content _se_tab_content_image"><div class="se-dialog-body"><div style="border-bottom: 1px dashed #ccc;">';
    if (e.imageFileInput && (l += '<div class="se-dialog-form"><label>' + i.dialogBox.imageBox.file + '</label><div class="se-dialog-form-files"><input class="se-input-form _se_image_file" type="file" accept="' + e.imageAccept + '"' + (e.imageMultipleFile ? ' multiple="multiple"' : "") + '/><button type="button" class="se-btn se-dialog-files-edge-button se-file-remove" title="' + i.controller.remove + '" aria-label="' + i.controller.remove + '">' + t.icons.cancel + "</button></div></div>"), e.imageUrlInput && (l += '<div class="se-dialog-form"><label>' + i.dialogBox.imageBox.url + '</label><div class="se-dialog-form-files"><input class="se-input-form se-input-url _se_image_url" type="text" />' + (e.imageGalleryUrl && t.plugins.imageGallery ? '<button type="button" class="se-btn se-dialog-files-edge-button __se__gallery" title="' + i.toolbar.imageGallery + '" aria-label="' + i.toolbar.imageGallery + '">' + t.icons.image_gallery + "</button>" : "") + '</div><pre class="se-link-preview"></pre></div>'), l += '</div><div class="se-dialog-form"><label>' + i.dialogBox.imageBox.altText + '</label><input class="se-input-form _se_image_alt" type="text" /></div>', e.imageResizing) {
      const r = e.imageSizeOnlyPercentage, u = r ? ' style="display: none !important;"' : "", h = e.imageHeightShow ? "" : ' style="display: none !important;"';
      l += '<div class="se-dialog-form">', r || !e.imageHeightShow ? l += '<div class="se-dialog-size-text"><label class="size-w">' + i.dialogBox.size + "</label></div>" : l += '<div class="se-dialog-size-text"><label class="size-w">' + i.dialogBox.width + '</label><label class="se-dialog-size-x">&nbsp;</label><label class="size-h">' + i.dialogBox.height + "</label></div>", l += '<input class="se-input-control _se_image_size_x" placeholder="auto"' + (r ? ' type="number" min="1"' : 'type="text"') + (r ? ' max="100"' : "") + ' /><label class="se-dialog-size-x"' + h + ">" + (r ? "%" : "x") + '</label><input type="text" class="se-input-control _se_image_size_y" placeholder="auto"' + u + (r ? ' max="100"' : "") + h + "/><label" + u + h + '><input type="checkbox" class="se-dialog-btn-check _se_image_check_proportion" checked/>&nbsp;' + i.dialogBox.proportion + '</label><button type="button" title="' + i.dialogBox.revertButton + '" aria-label="' + i.dialogBox.revertButton + '" class="se-btn se-dialog-btn-revert" style="float: right;">' + t.icons.revert + "</button></div>";
    }
    return l += '<div class="se-dialog-form se-dialog-form-footer"><label><input type="checkbox" class="se-dialog-btn-check _se_image_check_caption" />&nbsp;' + i.dialogBox.caption + '</label></div></div></div><div class="_se_tab_content _se_tab_content_url" style="display: none">' + t.context.anchor.forms.innerHTML + '</div><div class="se-dialog-footer"><div' + (e.imageAlignShow ? "" : ' style="display: none"') + '><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="none" checked>' + i.dialogBox.basic + '</label><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="left">' + i.dialogBox.left + '</label><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="center">' + i.dialogBox.center + '</label><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="right">' + i.dialogBox.right + '</label></div><button type="submit" class="se-btn-primary" title="' + i.dialogBox.submitButton + '" aria-label="' + i.dialogBox.submitButton + '"><span>' + i.dialogBox.submitButton + "</span></button></div></form>", n.innerHTML = l, n;
  },
  _fileInputChange: function() {
    this.imgInputFile.value ? (this.imgUrlFile.setAttribute("disabled", !0), this.previewSrc.style.textDecoration = "line-through") : (this.imgUrlFile.removeAttribute("disabled"), this.previewSrc.style.textDecoration = "");
  },
  _removeSelectedFiles: function(t, e) {
    this.value = "", t && (t.removeAttribute("disabled"), e.style.textDecoration = "");
  },
  _openGallery: function() {
    this.callPlugin("imageGallery", this.plugins.imageGallery.open.bind(this, this.plugins.image._setUrlInput.bind(this.context.image)), null);
  },
  _setUrlInput: function(t) {
    this.altText.value = t.alt, this._v_src._linkValue = this.previewSrc.textContent = this.imgUrlFile.value = t.src, this.imgUrlFile.focus();
  },
  _onLinkPreview: function(t, e, i) {
    const n = i.target.value.trim();
    t._linkValue = this.textContent = n ? e && n.indexOf("://") === -1 && n.indexOf("#") !== 0 ? e + n : n.indexOf("://") === -1 ? "/" + n : n : "";
  },
  /**
   * @Override @Required fileManager
   */
  fileTags: ["img"],
  /**
   * @Override core, fileManager, resizing
   * @description It is called from core.selectComponent.
   * @param {Element} element Target element
   */
  select: function(t) {
    this.plugins.image.onModifyMode.call(this, t, this.plugins.resizing.call_controller_resize.call(this, t, "image"));
  },
  /**
   * @Override fileManager, resizing
   */
  destroy: function(t) {
    const e = t || this.context.image._element, i = this.util.getParentElement(e, this.util.isMediaComponent) || e, n = e.getAttribute("data-index") * 1;
    let l = i.previousElementSibling || i.nextElementSibling;
    const r = i.parentNode;
    this.util.removeItem(i), this.plugins.image.init.call(this), this.controllersOff(), r !== this.context.element.wysiwyg && this.util.removeItemAllParents(r, function(u) {
      return u.childNodes.length === 0;
    }, null), this.focusEdge(l), this.plugins.fileManager.deleteInfo.call(this, "image", n, this.functions.onImageUpload), this.history.push(!1);
  },
  /**
   * @Required @Override dialog
   */
  on: function(t) {
    const e = this.context.image;
    t ? e.imgInputFile && this.options.imageMultipleFile && e.imgInputFile.removeAttribute("multiple") : (e.inputX.value = e._origin_w = this.options.imageWidth === e._defaultSizeX ? "" : this.options.imageWidth, e.inputY.value = e._origin_h = this.options.imageHeight === e._defaultSizeY ? "" : this.options.imageHeight, e.imgInputFile && this.options.imageMultipleFile && e.imgInputFile.setAttribute("multiple", "multiple")), this.plugins.anchor.on.call(this, e.anchorCtx, t);
  },
  /**
   * @Required @Override dialog
   */
  open: function() {
    this.plugins.dialog.open.call(this, "image", this.currentControllerName === "image");
  },
  openTab: function(t) {
    const e = this.context.image.modal, i = t === "init" ? e.querySelector("._se_tab_link") : t.target;
    if (!/^BUTTON$/i.test(i.tagName))
      return !1;
    const n = i.getAttribute("data-tab-link"), l = "_se_tab_content";
    let r, u, h;
    for (u = e.getElementsByClassName(l), r = 0; r < u.length; r++)
      u[r].style.display = "none";
    for (h = e.getElementsByClassName("_se_tab_link"), r = 0; r < h.length; r++)
      this.util.removeClass(h[r], "active");
    return e.querySelector("." + l + "_" + n).style.display = "block", this.util.addClass(i, "active"), n === "image" && this.context.image.focusElement ? this.context.image.focusElement.focus() : n === "url" && this.context.anchor.caller.image.urlInput.focus(), !1;
  },
  submit: function(t) {
    const e = this.context.image, i = this.plugins.image;
    t.preventDefault(), t.stopPropagation(), e._altText = e.altText.value, e._align = e.modal.querySelector('input[name="suneditor_image_radio"]:checked').value, e._captionChecked = e.captionCheckEl.checked, e._resizing && (e._proportionChecked = e.proportion.checked);
    try {
      this.context.dialog.updateModal && i.update_image.call(this, !1, !0, !1), e.imgInputFile && e.imgInputFile.files.length > 0 ? (this.showLoading(), i.submitAction.call(this, this.context.image.imgInputFile.files)) : e.imgUrlFile && e._v_src._linkValue.length > 0 && (this.showLoading(), i.onRender_imgUrl.call(this, e._v_src._linkValue));
    } catch (n) {
      throw this.closeLoading(), Error('[SUNEDITOR.image.submit.fail] cause : "' + n.message + '"');
    } finally {
      this.plugins.dialog.close.call(this);
    }
    return !1;
  },
  submitAction: function(t) {
    if (t.length === 0)
      return;
    let e = 0, i = [];
    for (let h = 0, s = t.length; h < s; h++)
      /image/i.test(t[h].type) && (i.push(t[h]), e += t[h].size);
    const n = this.options.imageUploadSizeLimit;
    if (n > 0) {
      let h = 0;
      const s = this.context.image._infoList;
      for (let m = 0, c = s.length; m < c; m++)
        h += s[m].size * 1;
      if (e + h > n) {
        this.closeLoading();
        const m = "[SUNEDITOR.imageUpload.fail] Size of uploadable total images: " + n / 1e3 + "KB";
        (typeof this.functions.onImageUploadError != "function" || this.functions.onImageUploadError(m, { limitSize: n, currentSize: h, uploadSize: e }, this)) && this.functions.noticeOpen(m);
        return;
      }
    }
    const l = this.context.image;
    l._uploadFileLength = i.length;
    const u = {
      anchor: this.plugins.anchor.createAnchor.call(this, l.anchorCtx, !0),
      inputWidth: l.inputX.value,
      inputHeight: l.inputY.value,
      align: l._align,
      isUpdate: this.context.dialog.updateModal,
      alt: l._altText,
      element: l._element
    };
    if (typeof this.functions.onImageUploadBefore == "function") {
      const h = this.functions.onImageUploadBefore(i, u, this, (function(s) {
        s && this._w.Array.isArray(s.result) ? this.plugins.image.register.call(this, u, s) : this.plugins.image.upload.call(this, u, s);
      }).bind(this));
      if (typeof h > "u")
        return;
      if (!h) {
        this.closeLoading();
        return;
      }
      this._w.Array.isArray(h) && h.length > 0 && (i = h);
    }
    this.plugins.image.upload.call(this, u, i);
  },
  error: function(t, e) {
    if (this.closeLoading(), typeof this.functions.onImageUploadError != "function" || this.functions.onImageUploadError(t, e, this))
      throw this.functions.noticeOpen(t), Error("[SUNEDITOR.plugin.image.error] response: " + t);
  },
  upload: function(t, e) {
    if (!e) {
      this.closeLoading();
      return;
    }
    if (typeof e == "string") {
      this.plugins.image.error.call(this, e, null);
      return;
    }
    const i = this.options.imageUploadUrl, n = this.context.dialog.updateModal ? 1 : e.length;
    if (typeof i == "string" && i.length > 0) {
      const l = new FormData();
      for (let r = 0; r < n; r++)
        l.append("file-" + r, e[r]);
      this.plugins.fileManager.upload.call(this, i, this.options.imageUploadHeader, l, this.plugins.image.callBack_imgUpload.bind(this, t), this.functions.onImageUploadError);
    } else
      this.plugins.image.setup_reader.call(this, e, t.anchor, t.inputWidth, t.inputHeight, t.align, t.alt, n, t.isUpdate);
  },
  callBack_imgUpload: function(t, e) {
    if (typeof this.functions.imageUploadHandler == "function")
      this.functions.imageUploadHandler(e, t, this);
    else {
      const i = JSON.parse(e.responseText);
      i.errorMessage ? this.plugins.image.error.call(this, i.errorMessage, i) : this.plugins.image.register.call(this, t, i);
    }
  },
  register: function(t, e) {
    const i = e.result;
    for (let n = 0, l = i.length, r; n < l; n++)
      if (r = { name: i[n].name, size: i[n].size }, t.isUpdate) {
        this.plugins.image.update_src.call(this, i[n].url, t.element, r);
        break;
      } else
        this.plugins.image.create_image.call(this, i[n].url, t.anchor, t.inputWidth, t.inputHeight, t.align, r, t.alt);
    this.closeLoading();
  },
  setup_reader: function(t, e, i, n, l, r, u, h) {
    try {
      this.context.image.base64RenderIndex = u;
      const s = this._w.FileReader, m = [u];
      this.context.image.inputX.value = i, this.context.image.inputY.value = n;
      for (let c = 0, g, x; c < u; c++)
        g = new s(), x = t[c], g.onload = (function(T, L, A, a, o) {
          m[o] = { result: T.result, file: a }, --this.context.image.base64RenderIndex === 0 && (this.plugins.image.onRender_imgBase64.call(this, L, m, A, e, i, n, l, r), this.closeLoading());
        }).bind(this, g, h, this.context.image._element, x, c), g.readAsDataURL(x);
    } catch (s) {
      throw this.closeLoading(), Error('[SUNEDITOR.image.setup_reader.fail] cause : "' + s.message + '"');
    }
  },
  onRender_imgBase64: function(t, e, i, n, l, r, u, h) {
    const s = this.plugins.image.update_src, m = this.plugins.image.create_image;
    for (let c = 0, g = e.length; c < g; c++)
      t ? (this.context.image._element.setAttribute("data-file-name", e[c].file.name), this.context.image._element.setAttribute("data-file-size", e[c].file.size), s.call(this, e[c].result, i, e[c].file)) : m.call(this, e[c].result, n, l, r, u, e[c].file, h);
  },
  onRender_imgUrl: function(t) {
    if (t || (t = this.context.image._v_src._linkValue), !t)
      return !1;
    const e = this.context.image;
    try {
      const i = { name: t.split("/").pop(), size: 0 };
      this.context.dialog.updateModal ? this.plugins.image.update_src.call(this, t, e._element, i) : this.plugins.image.create_image.call(this, t, this.plugins.anchor.createAnchor.call(this, e.anchorCtx, !0), e.inputX.value, e.inputY.value, e._align, i, e._altText);
    } catch (i) {
      throw Error('[SUNEDITOR.image.URLRendering.fail] cause : "' + i.message + '"');
    } finally {
      this.closeLoading();
    }
  },
  onRender_link: function(t, e) {
    return e ? (e.setAttribute("data-image-link", "image"), t.setAttribute("data-image-link", e.href), e.appendChild(t), e) : t;
  },
  /**
   * @Override resizing
   * @param {String} xy 'x': width, 'y': height
   * @param {KeyboardEvent} e Event object
   */
  setInputSize: function(t, e) {
    if (e && e.keyCode === 32) {
      e.preventDefault();
      return;
    }
    this.plugins.resizing._module_setInputSize.call(this, this.context.image, t);
  },
  /**
   * @Override resizing
   */
  setRatio: function() {
    this.plugins.resizing._module_setRatio.call(this, this.context.image);
  },
  /**
   * @Override fileManager
   */
  checkFileInfo: function() {
    const t = this.plugins.image, e = this.context.image, i = (function(n) {
      t.onModifyMode.call(this, n, null), t.openModify.call(this, !0), e.inputX.value = e._origin_w, e.inputY.value = e._origin_h;
      const l = this.util.getFormatElement(n);
      l && (e._align = l.style.textAlign || l.style.float), this.util.isAnchor(n.parentNode) && !e.anchorCtx.linkValue && (e.anchorCtx.linkValue = " "), t.update_image.call(this, !0, !1, !0), t.init.call(this);
    }).bind(this);
    this.plugins.fileManager.checkInfo.call(this, "image", ["img"], this.functions.onImageUpload, i, !0);
  },
  /**
   * @Override fileManager
   */
  resetFileInfo: function() {
    this.plugins.fileManager.resetInfo.call(this, "image", this.functions.onImageUpload);
  },
  create_image: function(t, e, i, n, l, r, u) {
    const h = this.plugins.image, s = this.context.image;
    this.context.resizing._resize_plugin = "image";
    let m = this.util.createElement("IMG");
    m.src = t, m.alt = u, m.setAttribute("data-rotate", "0"), e = h.onRender_link.call(this, m, e ? e.cloneNode(!1) : null), s._resizing && m.setAttribute("data-proportion", s._proportionChecked);
    const c = this.plugins.component.set_cover.call(this, e), g = this.plugins.component.set_container.call(this, c, "se-image-container");
    s._captionChecked && (s._caption = this.plugins.component.create_caption.call(this), c.appendChild(s._caption)), s._element = m, s._cover = c, s._container = g, h.applySize.call(this, i, n), h.setAlign.call(this, l, m, c, g), m.onload = h._image_create_onload.bind(this, m, s.svgDefaultSize, g), this.insertComponent(g, !0, !0, !0) && this.plugins.fileManager.setInfo.call(this, "image", m, this.functions.onImageUpload, r, !0), this.context.resizing._resize_plugin = "";
  },
  _image_create_onload: function(t, e, i) {
    if (t.offsetWidth === 0 && this.plugins.image.applySize.call(this, e, ""), this.options.mediaAutoSelect)
      this.selectComponent(t, "image");
    else {
      const n = this.appendFormatTag(i, null);
      n && this.setRange(n, 0, n, 0);
    }
  },
  update_image: function(t, e, i) {
    const n = this.context.image;
    let l = n._element, r = n._cover, u = n._container, h = !1;
    r === null && (h = !0, l = n._element.cloneNode(!0), r = this.plugins.component.set_cover.call(this, l)), u === null ? (r = r.cloneNode(!0), l = r.querySelector("img"), h = !0, u = this.plugins.component.set_container.call(this, r, "se-image-container")) : h && (u.innerHTML = "", u.appendChild(r), n._cover = r, n._element = l, h = !1);
    let s;
    const m = this.util.isNumber(n.inputX.value) ? n.inputX.value + n.sizeUnit : n.inputX.value, c = this.util.isNumber(n.inputY.value) ? n.inputY.value + n.sizeUnit : n.inputY.value;
    /%$/.test(l.style.width) ? s = m !== u.style.width || c !== u.style.height : s = m !== l.style.width || c !== l.style.height, l.alt = n._altText;
    let g = !1;
    n._captionChecked ? n._caption || (n._caption = this.plugins.component.create_caption.call(this), r.appendChild(n._caption), g = !0) : n._caption && (this.util.removeItem(n._caption), n._caption = null, g = !0);
    let x = null;
    const T = this.plugins.anchor.createAnchor.call(this, n.anchorCtx, !0);
    if (T)
      n._linkElement !== T || h && !u.contains(T) ? (n._linkElement = T.cloneNode(!1), r.insertBefore(this.plugins.image.onRender_link.call(this, l, n._linkElement), n._caption), x = n._element) : n._linkElement.setAttribute("data-image-link", "image");
    else if (n._linkElement !== null) {
      const A = l;
      if (A.setAttribute("data-image-link", ""), r.contains(n._linkElement)) {
        const a = A.cloneNode(!0);
        r.removeChild(n._linkElement), r.insertBefore(a, n._caption), n._element = l = a;
      }
    }
    let L = null;
    if (h) {
      if (L = this.util.isRangeFormatElement(n._element.parentNode) || this.util.isWysiwygDiv(n._element.parentNode) ? n._element : this.util.isAnchor(n._element.parentNode) ? n._element.parentNode : this.util.getFormatElement(n._element) || n._element, this.util.getParentElement(n._element, this.util.isNotCheckingNode))
        L = x ? T : n._element, L.parentNode.replaceChild(u, L);
      else if (this.util.isListCell(L)) {
        const A = this.util.getParentElement(n._element, function(a) {
          return a.parentNode === L;
        });
        L.insertBefore(u, A), this.util.removeItem(n._element), this.util.removeEmptyNode(A, null, !0);
      } else if (this.util.isFormatElement(L)) {
        const A = this.util.getParentElement(n._element, function(a) {
          return a.parentNode === L;
        });
        L = this.util.splitElement(L, A), L.parentNode.insertBefore(u, L), this.util.removeItem(n._element), this.util.removeEmptyNode(L, null, !0), L.children.length === 0 && (L.innerHTML = this.util.htmlRemoveWhiteSpace(L.innerHTML));
      } else if (this.util.isFormatElement(L.parentNode)) {
        const A = L.parentNode;
        A.parentNode.insertBefore(u, L.previousSibling ? A.nextElementSibling : A), n.__updateTags.map(function(a) {
          return L.contains(a);
        }).length === 0 && this.util.removeItem(L);
      } else
        L.parentNode.replaceChild(u, L);
      l = u.querySelector("img"), n._element = l, n._cover = r, n._container = u;
    }
    x && (h ? (this.util.removeItem(x), this.util.getListChildren(T, function(A) {
      return /IMG/i.test(A.tagName);
    }).length === 0 && this.util.removeItem(T)) : this.util.removeItem(T)), (g || !n._onlyPercentage && s) && !t && (/\d+/.test(l.style.height) || this.context.resizing._rotateVertical && n._captionChecked) && (/%$/.test(n.inputX.value) || /%$/.test(n.inputY.value) ? this.plugins.resizing.resetTransform.call(this, l) : this.plugins.resizing.setTransformSize.call(this, l, this.util.getNumber(n.inputX.value, 0), this.util.getNumber(n.inputY.value, 0))), n._resizing && (l.setAttribute("data-proportion", n._proportionChecked), s && this.plugins.image.applySize.call(this)), this.plugins.image.setAlign.call(this, null, l, null, null), t && this.plugins.fileManager.setInfo.call(this, "image", l, this.functions.onImageUpload, null, !0), e && this.selectComponent(l, "image"), i || this.history.push(!1);
  },
  update_src: function(t, e, i) {
    e.src = t, this._w.setTimeout(this.plugins.fileManager.setInfo.bind(this, "image", e, this.functions.onImageUpload, i, !0)), this.selectComponent(e, "image");
  },
  /**
   * @Required @Override fileManager, resizing
   */
  onModifyMode: function(t, e) {
    if (!t)
      return;
    const i = this.context.image;
    i._linkElement = i.anchorCtx.linkAnchor = this.util.isAnchor(t.parentNode) ? t.parentNode : null, i._element = t, i._cover = this.util.getParentElement(t, "FIGURE"), i._container = this.util.getParentElement(t, this.util.isMediaComponent), i._caption = this.util.getChildElement(i._cover, "FIGCAPTION"), i._align = t.getAttribute("data-align") || t.style.float || "none", t.style.float = "", this.plugins.anchor.setCtx(i._linkElement, i.anchorCtx), e && (i._element_w = e.w, i._element_h = e.h, i._element_t = e.t, i._element_l = e.l);
    let n = i._element.getAttribute("data-size") || i._element.getAttribute("data-origin"), l, r;
    n ? (n = n.split(","), l = n[0], r = n[1]) : e && (l = e.w, r = e.h), i._origin_w = l || t.style.width || t.width || "", i._origin_h = r || t.style.height || t.height || "";
  },
  /**
   * @Required @Override fileManager, resizing
   */
  openModify: function(t) {
    const e = this.context.image;
    e.imgUrlFile && (e._v_src._linkValue = e.previewSrc.textContent = e.imgUrlFile.value = e._element.src), e._altText = e.altText.value = e._element.alt, (e.modal.querySelector('input[name="suneditor_image_radio"][value="' + e._align + '"]') || e.modal.querySelector('input[name="suneditor_image_radio"][value="none"]')).checked = !0, e._align = e.modal.querySelector('input[name="suneditor_image_radio"]:checked').value, e._captionChecked = e.captionCheckEl.checked = !!e._caption, e._resizing && this.plugins.resizing._module_setModifyInputSize.call(this, e, this.plugins.image), t || this.plugins.dialog.open.call(this, "image", !0);
  },
  /**
   * @Override fileManager
   */
  applySize: function(t, e) {
    const i = this.context.image;
    return t || (t = i.inputX.value || this.options.imageWidth), e || (e = i.inputY.value || this.options.imageHeight), i._onlyPercentage && t || /%$/.test(t) ? (this.plugins.image.setPercentSize.call(this, t, e), !0) : ((!t || t === "auto") && (!e || e === "auto") ? this.plugins.image.setAutoSize.call(this) : this.plugins.image.setSize.call(this, t, e, !1), !1);
  },
  /**
   * @Override resizing
   */
  sizeRevert: function() {
    this.plugins.resizing._module_sizeRevert.call(this, this.context.image);
  },
  /**
   * @Override resizing
   */
  setSize: function(t, e, i, n) {
    const l = this.context.image, r = /^(rw|lw)$/.test(n) && /\d+/.test(l._element.style.height);
    /^(th|bh)$/.test(n) && /\d+/.test(l._element.style.width) || (l._element.style.width = this.util.isNumber(t) ? t + l.sizeUnit : t, this.plugins.image.cancelPercentAttr.call(this)), r || (l._element.style.height = this.util.isNumber(e) ? e + l.sizeUnit : /%$/.test(e) ? "" : e), l._align === "center" && this.plugins.image.setAlign.call(this, null, null, null, null), i || l._element.removeAttribute("data-percentage"), this.plugins.resizing._module_saveCurrentSize.call(this, l);
  },
  /**
   * @Override resizing
   */
  setAutoSize: function() {
    const t = this.context.image;
    t._caption && (t._caption.style.marginTop = ""), this.plugins.resizing.resetTransform.call(this, t._element), this.plugins.image.cancelPercentAttr.call(this), t._element.style.maxWidth = "", t._element.style.width = "", t._element.style.height = "", t._cover.style.width = "", t._cover.style.height = "", this.plugins.image.setAlign.call(this, null, null, null, null), t._element.setAttribute("data-percentage", "auto,auto"), this.plugins.resizing._module_saveCurrentSize.call(this, t);
  },
  /**
   * @Override resizing
   */
  setOriginSize: function() {
    const t = this.context.image;
    t._element.removeAttribute("data-percentage"), this.plugins.resizing.resetTransform.call(this, t._element), this.plugins.image.cancelPercentAttr.call(this);
    const e = (t._element.getAttribute("data-origin") || "").split(","), i = e[0], n = e[1];
    e && (t._onlyPercentage || /%$/.test(i) && (/%$/.test(n) || !/\d/.test(n)) ? this.plugins.image.setPercentSize.call(this, i, n) : this.plugins.image.setSize.call(this, i, n), this.plugins.resizing._module_saveCurrentSize.call(this, t));
  },
  /**
   * @Override resizing
   */
  setPercentSize: function(t, e) {
    const i = this.context.image;
    e = e && !/%$/.test(e) && !this.util.getNumber(e, 0) ? this.util.isNumber(e) ? e + "%" : e : this.util.isNumber(e) ? e + i.sizeUnit : e || "";
    const n = /%$/.test(e);
    i._container.style.width = this.util.isNumber(t) ? t + "%" : t, i._container.style.height = "", i._cover.style.width = "100%", i._cover.style.height = n ? e : "", i._element.style.width = "100%", i._element.style.height = n ? "" : e, i._element.style.maxWidth = "", i._align === "center" && this.plugins.image.setAlign.call(this, null, null, null, null), i._element.setAttribute("data-percentage", t + "," + e), this.plugins.resizing.setCaptionPosition.call(this, i._element), this.plugins.resizing._module_saveCurrentSize.call(this, i);
  },
  /**
   * @Override resizing
   */
  cancelPercentAttr: function() {
    const t = this.context.image;
    t._cover.style.width = "", t._cover.style.height = "", t._container.style.width = "", t._container.style.height = "", this.util.removeClass(t._container, this.context.image._floatClassRegExp), this.util.addClass(t._container, "__se__float-" + t._align), t._align === "center" && this.plugins.image.setAlign.call(this, null, null, null, null);
  },
  /**
   * @Override resizing
   */
  setAlign: function(t, e, i, n) {
    const l = this.context.image;
    t || (t = l._align), e || (e = l._element), i || (i = l._cover), n || (n = l._container), /%$/.test(e.style.width) && t === "center" ? (n.style.minWidth = "100%", i.style.width = n.style.width) : (n.style.minWidth = "", i.style.width = this.context.resizing._rotateVertical ? e.style.height || e.offsetHeight : !e.style.width || e.style.width === "auto" ? "" : e.style.width || "100%"), this.util.hasClass(n, "__se__float-" + t) || (this.util.removeClass(n, l._floatClassRegExp), this.util.addClass(n, "__se__float-" + t)), e.setAttribute("data-align", t);
  },
  /**
   * @Override dialog
   */
  init: function() {
    const t = this.context.image;
    t.imgInputFile && (t.imgInputFile.value = ""), t.imgUrlFile && (t._v_src._linkValue = t.previewSrc.textContent = t.imgUrlFile.value = ""), t.imgInputFile && t.imgUrlFile && (t.imgUrlFile.removeAttribute("disabled"), t.previewSrc.style.textDecoration = ""), t.altText.value = "", t.modal.querySelector('input[name="suneditor_image_radio"][value="none"]').checked = !0, t.captionCheckEl.checked = !1, t._element = null, this.plugins.image.openTab.call(this, "init"), t._resizing && (t.inputX.value = this.options.imageWidth === t._defaultSizeX ? "" : this.options.imageWidth, t.inputY.value = this.options.imageHeight === t._defaultSizeY ? "" : this.options.imageHeight, t.proportion.checked = !0, t._ratio = !1, t._ratioX = 1, t._ratioY = 1), this.plugins.anchor.init.call(this, t.anchorCtx);
  }
}, es = {
  name: "video",
  display: "dialog",
  add: function(t) {
    t.addModule([mi, In, K0, On]);
    const e = t.options, i = t.context, n = i.video = {
      _infoList: [],
      // @Override fileManager
      _infoIndex: 0,
      // @Override fileManager
      _uploadFileLength: 0,
      // @Override fileManager
      focusElement: null,
      // @Override dialog // This element has focus when the dialog is opened.
      sizeUnit: e._videoSizeUnit,
      _align: "none",
      _floatClassRegExp: "__se__float\\-[a-z]+",
      _youtubeQuery: e.youtubeQuery,
      _videoRatio: e.videoRatio * 100 + "%",
      _defaultRatio: e.videoRatio * 100 + "%",
      _linkValue: "",
      // @require @Override component
      _element: null,
      _cover: null,
      _container: null,
      // @Override resizing properties
      inputX: null,
      inputY: null,
      _element_w: 1,
      _element_h: 1,
      _element_l: 0,
      _element_t: 0,
      _defaultSizeX: "100%",
      _defaultSizeY: e.videoRatio * 100 + "%",
      _origin_w: e.videoWidth === "100%" ? "" : e.videoWidth,
      _origin_h: e.videoHeight === "56.25%" ? "" : e.videoHeight,
      _proportionChecked: !0,
      _resizing: e.videoResizing,
      _resizeDotHide: !e.videoHeightShow,
      _rotation: e.videoRotation,
      _alignHide: !e.videoAlignShow,
      _onlyPercentage: e.videoSizeOnlyPercentage,
      _ratio: !1,
      _ratioX: 1,
      _ratioY: 1,
      _captionShow: !1
    };
    let l = this.setDialog(t);
    n.modal = l, n.videoInputFile = l.querySelector("._se_video_file"), n.videoUrlFile = l.querySelector(".se-input-url"), n.focusElement = n.videoUrlFile || n.videoInputFile, n.preview = l.querySelector(".se-link-preview"), l.querySelector("form").addEventListener("submit", this.submit.bind(t)), n.videoInputFile && l.querySelector(".se-dialog-files-edge-button").addEventListener("click", this._removeSelectedFiles.bind(n.videoInputFile, n.videoUrlFile, n.preview)), n.videoInputFile && n.videoUrlFile && n.videoInputFile.addEventListener("change", this._fileInputChange.bind(n)), n.videoUrlFile && n.videoUrlFile.addEventListener("input", this._onLinkPreview.bind(n.preview, n, e.linkProtocol)), n.proportion = {}, n.videoRatioOption = {}, n.inputX = {}, n.inputY = {}, e.videoResizing && (n.proportion = l.querySelector("._se_video_check_proportion"), n.videoRatioOption = l.querySelector(".se-video-ratio"), n.inputX = l.querySelector("._se_video_size_x"), n.inputY = l.querySelector("._se_video_size_y"), n.inputX.value = e.videoWidth, n.inputY.value = e.videoHeight, n.inputX.addEventListener("keyup", this.setInputSize.bind(t, "x")), n.inputY.addEventListener("keyup", this.setInputSize.bind(t, "y")), n.inputX.addEventListener("change", this.setRatio.bind(t)), n.inputY.addEventListener("change", this.setRatio.bind(t)), n.proportion.addEventListener("change", this.setRatio.bind(t)), n.videoRatioOption.addEventListener("change", this.setVideoRatio.bind(t)), l.querySelector(".se-dialog-btn-revert").addEventListener("click", this.sizeRevert.bind(t))), i.dialog.modal.appendChild(l), l = null;
  },
  /** dialog */
  setDialog: function(t) {
    const e = t.options, i = t.lang, n = t.util.createElement("DIV");
    n.className = "se-dialog-content", n.style.display = "none";
    let l = '<form method="post" enctype="multipart/form-data"><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" title="' + i.dialogBox.close + '" aria-label="' + i.dialogBox.close + '">' + t.icons.cancel + '</button><span class="se-modal-title">' + i.dialogBox.videoBox.title + '</span></div><div class="se-dialog-body">';
    if (e.videoFileInput && (l += '<div class="se-dialog-form"><label>' + i.dialogBox.videoBox.file + '</label><div class="se-dialog-form-files"><input class="se-input-form _se_video_file" type="file" accept="' + e.videoAccept + '"' + (e.videoMultipleFile ? ' multiple="multiple"' : "") + '/><button type="button" data-command="filesRemove" class="se-btn se-dialog-files-edge-button se-file-remove" title="' + i.controller.remove + '" aria-label="' + i.controller.remove + '">' + t.icons.cancel + "</button></div></div>"), e.videoUrlInput && (l += '<div class="se-dialog-form"><label>' + i.dialogBox.videoBox.url + '</label><input class="se-input-form se-input-url" type="text" /><pre class="se-link-preview"></pre></div>'), e.videoResizing) {
      const r = e.videoRatioList || [{ name: "16:9", value: 0.5625 }, { name: "4:3", value: 0.75 }, { name: "21:9", value: 0.4285 }], u = e.videoRatio, h = e.videoSizeOnlyPercentage, s = h ? ' style="display: none !important;"' : "", m = e.videoHeightShow ? "" : ' style="display: none !important;"', c = e.videoRatioShow ? "" : ' style="display: none !important;"', g = !h && !e.videoHeightShow && !e.videoRatioShow ? ' style="display: none !important;"' : "";
      l += '<div class="se-dialog-form"><div class="se-dialog-size-text"><label class="size-w">' + i.dialogBox.width + '</label><label class="se-dialog-size-x">&nbsp;</label><label class="size-h"' + m + ">" + i.dialogBox.height + '</label><label class="size-h"' + c + ">(" + i.dialogBox.ratio + ')</label></div><input class="se-input-control _se_video_size_x" placeholder="100%"' + (h ? ' type="number" min="1"' : 'type="text"') + (h ? ' max="100"' : "") + '/><label class="se-dialog-size-x"' + g + ">" + (h ? "%" : "x") + '</label><input class="se-input-control _se_video_size_y" placeholder="' + e.videoRatio * 100 + '%"' + (h ? ' type="number" min="1"' : 'type="text"') + (h ? ' max="100"' : "") + m + '/><select class="se-input-select se-video-ratio" title="' + i.dialogBox.ratio + '" aria-label="' + i.dialogBox.ratio + '"' + c + ">", m || (l += '<option value=""> - </option>');
      for (let x = 0, T = r.length; x < T; x++)
        l += '<option value="' + r[x].value + '"' + (u.toString() === r[x].value.toString() ? " selected" : "") + ">" + r[x].name + "</option>";
      l += '</select><button type="button" title="' + i.dialogBox.revertButton + '" aria-label="' + i.dialogBox.revertButton + '" class="se-btn se-dialog-btn-revert" style="float: right;">' + t.icons.revert + '</button></div><div class="se-dialog-form se-dialog-form-footer"' + s + g + '><label><input type="checkbox" class="se-dialog-btn-check _se_video_check_proportion" checked/>&nbsp;' + i.dialogBox.proportion + "</label></div>";
    }
    return l += '</div><div class="se-dialog-footer"><div' + (e.videoAlignShow ? "" : ' style="display: none"') + '><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="none" checked>' + i.dialogBox.basic + '</label><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="left">' + i.dialogBox.left + '</label><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="center">' + i.dialogBox.center + '</label><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="right">' + i.dialogBox.right + '</label></div><button type="submit" class="se-btn-primary" title="' + i.dialogBox.submitButton + '" aria-label="' + i.dialogBox.submitButton + '"><span>' + i.dialogBox.submitButton + "</span></button></div></form>", n.innerHTML = l, n;
  },
  _fileInputChange: function() {
    this.videoInputFile.value ? (this.videoUrlFile.setAttribute("disabled", !0), this.preview.style.textDecoration = "line-through") : (this.videoUrlFile.removeAttribute("disabled"), this.preview.style.textDecoration = "");
  },
  _removeSelectedFiles: function(t, e) {
    this.value = "", t && (t.removeAttribute("disabled"), e.style.textDecoration = "");
  },
  _onLinkPreview: function(t, e, i) {
    const n = i.target.value.trim();
    /^<iframe.*\/iframe>$/.test(n) ? (t._linkValue = n, this.textContent = '<IFrame :src=".."></IFrame>') : t._linkValue = this.textContent = n ? e && n.indexOf("://") === -1 && n.indexOf("#") !== 0 ? e + n : n.indexOf("://") === -1 ? "/" + n : n : "";
  },
  _setTagAttrs: function(t) {
    t.setAttribute("controls", !0);
    const e = this.options.videoTagAttrs;
    if (e)
      for (let i in e)
        this.util.hasOwn(e, i) && t.setAttribute(i, e[i]);
  },
  createVideoTag: function() {
    const t = this.util.createElement("VIDEO");
    return this.plugins.video._setTagAttrs.call(this, t), t;
  },
  _setIframeAttrs: function(t) {
    t.frameBorder = "0", t.allowFullscreen = !0;
    const e = this.options.videoIframeAttrs;
    if (e)
      for (let i in e)
        this.util.hasOwn(e, i) && t.setAttribute(i, e[i]);
  },
  createIframeTag: function() {
    const t = this.util.createElement("IFRAME");
    return this.plugins.video._setIframeAttrs.call(this, t), t;
  },
  /**
   * @Override @Required fileManager
   */
  fileTags: ["iframe", "video"],
  /**
   * @Override core, resizing, fileManager
   * @description It is called from core.selectComponent.
   * @param {Element} element Target element
   */
  select: function(t) {
    this.plugins.video.onModifyMode.call(this, t, this.plugins.resizing.call_controller_resize.call(this, t, "video"));
  },
  /**
   * @Override fileManager, resizing
   */
  destroy: function(t) {
    const e = t || this.context.video._element, i = this.context.video._container, n = e.getAttribute("data-index") * 1;
    let l = i.previousElementSibling || i.nextElementSibling;
    const r = i.parentNode;
    this.util.removeItem(i), this.plugins.video.init.call(this), this.controllersOff(), r !== this.context.element.wysiwyg && this.util.removeItemAllParents(r, function(u) {
      return u.childNodes.length === 0;
    }, null), this.focusEdge(l), this.plugins.fileManager.deleteInfo.call(this, "video", n, this.functions.onVideoUpload), this.history.push(!1);
  },
  /**
   * @Required @Override dialog
   */
  on: function(t) {
    const e = this.context.video;
    t ? e.videoInputFile && this.options.videoMultipleFile && e.videoInputFile.removeAttribute("multiple") : (e.inputX.value = e._origin_w = this.options.videoWidth === e._defaultSizeX ? "" : this.options.videoWidth, e.inputY.value = e._origin_h = this.options.videoHeight === e._defaultSizeY ? "" : this.options.videoHeight, e.proportion.disabled = !0, e.videoInputFile && this.options.videoMultipleFile && e.videoInputFile.setAttribute("multiple", "multiple")), e._resizing && this.plugins.video.setVideoRatioSelect.call(this, e._origin_h || e._defaultRatio);
  },
  /**
   * @Required @Override dialog
   */
  open: function() {
    this.plugins.dialog.open.call(this, "video", this.currentControllerName === "video");
  },
  setVideoRatio: function(t) {
    const e = this.context.video, i = t.target.options[t.target.selectedIndex].value;
    e._defaultSizeY = e._videoRatio = i ? i * 100 + "%" : e._defaultSizeY, e.inputY.placeholder = i ? i * 100 + "%" : "", e.inputY.value = "";
  },
  /**
   * @Override resizing
   * @param {String} xy 'x': width, 'y': height
   * @param {KeyboardEvent} e Event object
   */
  setInputSize: function(t, e) {
    if (e && e.keyCode === 32) {
      e.preventDefault();
      return;
    }
    const i = this.context.video;
    this.plugins.resizing._module_setInputSize.call(this, i, t), t === "y" && this.plugins.video.setVideoRatioSelect.call(this, e.target.value || i._defaultRatio);
  },
  /**
   * @Override resizing
   */
  setRatio: function() {
    this.plugins.resizing._module_setRatio.call(this, this.context.video);
  },
  submit: function(t) {
    const e = this.context.video, i = this.plugins.video;
    t.preventDefault(), t.stopPropagation(), e._align = e.modal.querySelector('input[name="suneditor_video_radio"]:checked').value;
    try {
      e.videoInputFile && e.videoInputFile.files.length > 0 ? (this.showLoading(), i.submitAction.call(this, this.context.video.videoInputFile.files)) : e.videoUrlFile && e._linkValue.length > 0 && (this.showLoading(), i.setup_url.call(this, e._linkValue));
    } catch (n) {
      throw this.closeLoading(), Error('[SUNEDITOR.video.submit.fail] cause : "' + n.message + '"');
    } finally {
      this.plugins.dialog.close.call(this);
    }
    return !1;
  },
  submitAction: function(t) {
    if (t.length === 0)
      return;
    let e = 0, i = [];
    for (let u = 0, h = t.length; u < h; u++)
      /video/i.test(t[u].type) && (i.push(t[u]), e += t[u].size);
    const n = this.options.videoUploadSizeLimit;
    if (n > 0) {
      let u = 0;
      const h = this.context.video._infoList;
      for (let s = 0, m = h.length; s < m; s++)
        u += h[s].size * 1;
      if (e + u > n) {
        this.closeLoading();
        const s = "[SUNEDITOR.videoUpload.fail] Size of uploadable total videos: " + n / 1e3 + "KB";
        (typeof this.functions.onVideoUploadError != "function" || this.functions.onVideoUploadError(s, { limitSize: n, currentSize: u, uploadSize: e }, this)) && this.functions.noticeOpen(s);
        return;
      }
    }
    const l = this.context.video;
    l._uploadFileLength = i.length;
    const r = {
      inputWidth: l.inputX.value,
      inputHeight: l.inputY.value,
      align: l._align,
      isUpdate: this.context.dialog.updateModal,
      element: l._element
    };
    if (typeof this.functions.onVideoUploadBefore == "function") {
      const u = this.functions.onVideoUploadBefore(i, r, this, (function(h) {
        h && this._w.Array.isArray(h.result) ? this.plugins.video.register.call(this, r, h) : this.plugins.video.upload.call(this, r, h);
      }).bind(this));
      if (typeof u > "u")
        return;
      if (!u) {
        this.closeLoading();
        return;
      }
      typeof u == "object" && u.length > 0 && (i = u);
    }
    this.plugins.video.upload.call(this, r, i);
  },
  error: function(t, e) {
    if (this.closeLoading(), typeof this.functions.onVideoUploadError != "function" || this.functions.onVideoUploadError(t, e, this))
      throw this.functions.noticeOpen(t), Error("[SUNEDITOR.plugin.video.error] response: " + t);
  },
  upload: function(t, e) {
    if (!e) {
      this.closeLoading();
      return;
    }
    if (typeof e == "string") {
      this.plugins.video.error.call(this, e, null);
      return;
    }
    const i = this.options.videoUploadUrl, n = this.context.dialog.updateModal ? 1 : e.length;
    if (typeof i == "string" && i.length > 0) {
      const l = new FormData();
      for (let r = 0; r < n; r++)
        l.append("file-" + r, e[r]);
      this.plugins.fileManager.upload.call(this, i, this.options.videoUploadHeader, l, this.plugins.video.callBack_videoUpload.bind(this, t), this.functions.onVideoUploadError);
    } else
      throw Error('[SUNEDITOR.videoUpload.fail] cause : There is no "videoUploadUrl" option.');
  },
  callBack_videoUpload: function(t, e) {
    if (typeof this.functions.videoUploadHandler == "function")
      this.functions.videoUploadHandler(e, t, this);
    else {
      const i = JSON.parse(e.responseText);
      i.errorMessage ? this.plugins.video.error.call(this, i.errorMessage, i) : this.plugins.video.register.call(this, t, i);
    }
  },
  register: function(t, e) {
    const i = e.result, n = this.plugins.video.createVideoTag.call(this);
    for (let l = 0, r = i.length, u; l < r; l++)
      u = { name: i[l].name, size: i[l].size }, this.plugins.video.create_video.call(this, t.isUpdate ? t.element : n.cloneNode(!1), i[l].url, t.inputWidth, t.inputHeight, t.align, u, t.isUpdate);
    this.closeLoading();
  },
  setup_url: function(t) {
    try {
      const e = this.context.video;
      if (t || (t = e._linkValue), !t || /^<iframe.*\/iframe>$/.test(t) && (t = new this._w.DOMParser().parseFromString(t, "text/html").querySelector("iframe").src, t.length === 0))
        return !1;
      if (/youtu\.?be/.test(t)) {
        if (/^http/.test(t) || (t = "https://" + t), t = t.replace("watch?v=", ""), /^\/\/.+\/embed\//.test(t) || (t = t.replace(t.match(/\/\/.+\//)[0], "//www.youtube.com/embed/").replace("&", "?&")), e._youtubeQuery.length > 0)
          if (/\?/.test(t)) {
            const i = t.split("?");
            t = i[0] + "?" + e._youtubeQuery + "&" + i[1];
          } else
            t += "?" + e._youtubeQuery;
      } else
        /vimeo\.com/.test(t) && (t.endsWith("/") && (t = t.slice(0, -1)), t = "https://player.vimeo.com/video/" + t.slice(t.lastIndexOf("/") + 1));
      this.plugins.video.create_video.call(this, this.plugins.video[!/embed|iframe|player|\/e\/|\.php|\.html?/.test(t) && !/vimeo\.com/.test(t) ? "createVideoTag" : "createIframeTag"].call(this), t, e.inputX.value, e.inputY.value, e._align, null, this.context.dialog.updateModal);
    } catch (e) {
      throw Error('[SUNEDITOR.video.upload.fail] cause : "' + e.message + '"');
    } finally {
      this.closeLoading();
    }
  },
  create_video: function(t, e, i, n, l, r, u) {
    this.context.resizing._resize_plugin = "video";
    const h = this.context.video;
    let s = null, m = null, c = !1;
    if (u) {
      if (t = h._element, t.src !== e) {
        c = !0;
        const A = /youtu\.?be/.test(e), a = /vimeo\.com/.test(e);
        if ((A || a) && !/^iframe$/i.test(t.nodeName)) {
          const o = this.plugins.video.createIframeTag.call(this);
          o.src = e, t.parentNode.replaceChild(o, t), h._element = t = o;
        } else if (!A && !a && !/^videoo$/i.test(t.nodeName)) {
          const o = this.plugins.video.createVideoTag.call(this);
          o.src = e, t.parentNode.replaceChild(o, t), h._element = t = o;
        } else
          t.src = e;
      }
      m = h._container, s = this.util.getParentElement(t, "FIGURE");
    } else
      c = !0, t.src = e, h._element = t, s = this.plugins.component.set_cover.call(this, t), m = this.plugins.component.set_container.call(this, s, "se-video-container");
    h._cover = s, h._container = m;
    const g = this.plugins.resizing._module_getSizeX.call(this, h) !== (i || h._defaultSizeX) || this.plugins.resizing._module_getSizeY.call(this, h) !== (n || h._videoRatio), x = !u || g;
    h._resizing && (this.context.video._proportionChecked = h.proportion.checked, t.setAttribute("data-proportion", h._proportionChecked));
    let T = !1;
    x && (T = this.plugins.video.applySize.call(this)), T && l === "center" || this.plugins.video.setAlign.call(this, null, t, s, m);
    let L = !0;
    if (u)
      h._resizing && this.context.resizing._rotateVertical && x && this.plugins.resizing.setTransformSize.call(this, t, null, null);
    else if (L = this.insertComponent(m, !1, !0, !this.options.mediaAutoSelect), !this.options.mediaAutoSelect) {
      const A = this.appendFormatTag(m, null);
      A && this.setRange(A, 0, A, 0);
    }
    L && (c && this.plugins.fileManager.setInfo.call(this, "video", t, this.functions.onVideoUpload, r, !0), u && (this.selectComponent(t, "video"), this.history.push(!1))), this.context.resizing._resize_plugin = "";
  },
  _update_videoCover: function(t) {
    if (!t)
      return;
    const e = this.context.video;
    /^video$/i.test(t.nodeName) ? this.plugins.video._setTagAttrs.call(this, t) : this.plugins.video._setIframeAttrs.call(this, t);
    let i = this.util.isRangeFormatElement(t.parentNode) || this.util.isWysiwygDiv(t.parentNode) ? t : this.util.getFormatElement(t) || t;
    const n = t;
    e._element = t = t.cloneNode(!0);
    const l = e._cover = this.plugins.component.set_cover.call(this, t), r = e._container = this.plugins.component.set_container.call(this, l, "se-video-container");
    try {
      const u = i.querySelector("figcaption");
      let h = null;
      u && (h = this.util.createElement("DIV"), h.innerHTML = u.innerHTML, this.util.removeItem(u));
      const s = (t.getAttribute("data-size") || t.getAttribute("data-origin") || "").split(",");
      this.plugins.video.applySize.call(this, s[0] || n.style.width || n.width || "", s[1] || n.style.height || n.height || "");
      const m = this.util.getFormatElement(n);
      if (m && (e._align = m.style.textAlign || m.style.float), this.plugins.video.setAlign.call(this, null, t, l, r), this.util.getParentElement(n, this.util.isNotCheckingNode))
        n.parentNode.replaceChild(r, n);
      else if (this.util.isListCell(i)) {
        const c = this.util.getParentElement(n, function(g) {
          return g.parentNode === i;
        });
        i.insertBefore(r, c), this.util.removeItem(n), this.util.removeEmptyNode(c, null, !0);
      } else if (this.util.isFormatElement(i)) {
        const c = this.util.getParentElement(n, function(g) {
          return g.parentNode === i;
        });
        i = this.util.splitElement(i, c), i.parentNode.insertBefore(r, i), this.util.removeItem(n), this.util.removeEmptyNode(i, null, !0), i.children.length === 0 && (i.innerHTML = this.util.htmlRemoveWhiteSpace(i.innerHTML));
      } else
        i.parentNode.replaceChild(r, i);
      h && i.parentNode.insertBefore(h, r.nextElementSibling);
    } catch (u) {
      console.warn("[SUNEDITOR.video.error] Maybe the video tag is nested.", u);
    }
    this.plugins.fileManager.setInfo.call(this, "video", t, this.functions.onVideoUpload, null, !0), this.plugins.video.init.call(this);
  },
  /**
   * @Required @Override fileManager, resizing
   */
  onModifyMode: function(t, e) {
    const i = this.context.video;
    i._element = t, i._cover = this.util.getParentElement(t, "FIGURE"), i._container = this.util.getParentElement(t, this.util.isMediaComponent), i._align = t.style.float || t.getAttribute("data-align") || "none", t.style.float = "", e && (i._element_w = e.w, i._element_h = e.h, i._element_t = e.t, i._element_l = e.l);
    let n = i._element.getAttribute("data-size") || i._element.getAttribute("data-origin"), l, r;
    n ? (n = n.split(","), l = n[0], r = n[1]) : e && (l = e.w, r = e.h), i._origin_w = l || t.style.width || t.width || "", i._origin_h = r || t.style.height || t.height || "";
  },
  /**
   * @Required @Override fileManager, resizing
   */
  openModify: function(t) {
    const e = this.context.video;
    if (e.videoUrlFile && (e._linkValue = e.preview.textContent = e.videoUrlFile.value = e._element.src || (e._element.querySelector("source") || "").src || ""), (e.modal.querySelector('input[name="suneditor_video_radio"][value="' + e._align + '"]') || e.modal.querySelector('input[name="suneditor_video_radio"][value="none"]')).checked = !0, e._resizing) {
      this.plugins.resizing._module_setModifyInputSize.call(this, e, this.plugins.video);
      const i = e._videoRatio = this.plugins.resizing._module_getSizeY.call(this, e);
      this.plugins.video.setVideoRatioSelect.call(this, i) || (e.inputY.value = e._onlyPercentage ? this.util.getNumber(i, 2) : i);
    }
    t || this.plugins.dialog.open.call(this, "video", !0);
  },
  setVideoRatioSelect: function(t) {
    let e = !1;
    const i = this.context.video, n = i.videoRatioOption.options;
    /%$/.test(t) || i._onlyPercentage ? t = this.util.getNumber(t, 2) / 100 + "" : (!this.util.isNumber(t) || t * 1 >= 1) && (t = ""), i.inputY.placeholder = "";
    for (let l = 0, r = n.length; l < r; l++)
      n[l].value === t ? (e = n[l].selected = !0, i.inputY.placeholder = t ? t * 100 + "%" : "") : n[l].selected = !1;
    return e;
  },
  /**
   * @Override fileManager
   */
  checkFileInfo: function() {
    this.plugins.fileManager.checkInfo.call(this, "video", ["iframe", "video"], this.functions.onVideoUpload, this.plugins.video._update_videoCover.bind(this), !0);
  },
  /**
   * @Override fileManager
   */
  resetFileInfo: function() {
    this.plugins.fileManager.resetInfo.call(this, "video", this.functions.onVideoUpload);
  },
  /**
   * @Override fileManager
   */
  applySize: function(t, e) {
    const i = this.context.video;
    return t || (t = i.inputX.value || this.options.videoWidth), e || (e = i.inputY.value || this.options.videoHeight), i._onlyPercentage || /%$/.test(t) || !t ? (this.plugins.video.setPercentSize.call(this, t || "100%", e || (/%$/.test(i._videoRatio) ? i._videoRatio : i._defaultRatio)), !0) : ((!t || t === "auto") && (!e || e === "auto") ? this.plugins.video.setAutoSize.call(this) : this.plugins.video.setSize.call(this, t, e || i._videoRatio || i._defaultRatio, !1), !1);
  },
  /**
   * @Override resizing
   */
  sizeRevert: function() {
    this.plugins.resizing._module_sizeRevert.call(this, this.context.video);
  },
  /**
   * @Override resizing
   */
  setSize: function(t, e, i, n) {
    const l = this.context.video, r = /^(rw|lw)$/.test(n), u = /^(th|bh)$/.test(n);
    u || (t = this.util.getNumber(t, 0)), r || (e = this.util.isNumber(e) ? e + l.sizeUnit : e || ""), t = t ? t + l.sizeUnit : "", u || (l._element.style.width = t), r || (l._cover.style.paddingBottom = l._cover.style.height = e), !u && !/%$/.test(t) && (l._cover.style.width = t, l._container.style.width = ""), !r && !/%$/.test(e) ? l._element.style.height = e : l._element.style.height = "", i || l._element.removeAttribute("data-percentage"), this.plugins.resizing._module_saveCurrentSize.call(this, l);
  },
  /**
   * @Override resizing
   */
  setAutoSize: function() {
    this.plugins.video.setPercentSize.call(this, 100, this.context.video._defaultRatio);
  },
  /**
   * @Override resizing
   */
  setOriginSize: function(t) {
    const e = this.context.video;
    e._element.removeAttribute("data-percentage"), this.plugins.resizing.resetTransform.call(this, e._element), this.plugins.video.cancelPercentAttr.call(this);
    const i = ((t ? e._element.getAttribute("data-size") : "") || e._element.getAttribute("data-origin") || "").split(",");
    if (i) {
      const n = i[0], l = i[1];
      e._onlyPercentage || /%$/.test(n) && (/%$/.test(l) || !/\d/.test(l)) ? this.plugins.video.setPercentSize.call(this, n, l) : this.plugins.video.setSize.call(this, n, l), this.plugins.resizing._module_saveCurrentSize.call(this, e);
    }
  },
  /**
   * @Override resizing
   */
  setPercentSize: function(t, e) {
    const i = this.context.video;
    e = e && !/%$/.test(e) && !this.util.getNumber(e, 0) ? this.util.isNumber(e) ? e + "%" : e : this.util.isNumber(e) ? e + i.sizeUnit : e || i._defaultRatio, i._container.style.width = this.util.isNumber(t) ? t + "%" : t, i._container.style.height = "", i._cover.style.width = "100%", i._cover.style.height = e, i._cover.style.paddingBottom = e, i._element.style.width = "100%", i._element.style.height = "100%", i._element.style.maxWidth = "", i._align === "center" && this.plugins.video.setAlign.call(this, null, null, null, null), i._element.setAttribute("data-percentage", t + "," + e), this.plugins.resizing._module_saveCurrentSize.call(this, i);
  },
  /**
   * @Override resizing
   */
  cancelPercentAttr: function() {
    const t = this.context.video;
    t._cover.style.width = "", t._cover.style.height = "", t._cover.style.paddingBottom = "", t._container.style.width = "", t._container.style.height = "", this.util.removeClass(t._container, this.context.video._floatClassRegExp), this.util.addClass(t._container, "__se__float-" + t._align), t._align === "center" && this.plugins.video.setAlign.call(this, null, null, null, null);
  },
  /**
   * @Override resizing
   */
  setAlign: function(t, e, i, n) {
    const l = this.context.video;
    t || (t = l._align), e || (e = l._element), i || (i = l._cover), n || (n = l._container), /%$/.test(e.style.width) && t === "center" ? (n.style.minWidth = "100%", i.style.width = n.style.width, i.style.height = i.style.height, i.style.paddingBottom = /%$/.test(i.style.height) ? this.util.getNumber(this.util.getNumber(i.style.height, 2) / 100 * this.util.getNumber(i.style.width, 2), 2) + "%" : i.style.height) : (n.style.minWidth = "", i.style.width = this.context.resizing._rotateVertical ? e.style.height || e.offsetHeight : e.style.width || "100%", i.style.paddingBottom = i.style.height), this.util.hasClass(n, "__se__float-" + t) || (this.util.removeClass(n, l._floatClassRegExp), this.util.addClass(n, "__se__float-" + t)), e.setAttribute("data-align", t);
  },
  /**
   * @Override dialog
   */
  init: function() {
    const t = this.context.video;
    t.videoInputFile && (t.videoInputFile.value = ""), t.videoUrlFile && (t._linkValue = t.preview.textContent = t.videoUrlFile.value = ""), t.videoInputFile && t.videoUrlFile && (t.videoUrlFile.removeAttribute("disabled"), t.preview.style.textDecoration = ""), t._origin_w = this.options.videoWidth, t._origin_h = this.options.videoHeight, t.modal.querySelector('input[name="suneditor_video_radio"][value="none"]').checked = !0, t._resizing && (t.inputX.value = this.options.videoWidth === t._defaultSizeX ? "" : this.options.videoWidth, t.inputY.value = this.options.videoHeight === t._defaultSizeY ? "" : this.options.videoHeight, t.proportion.checked = !0, t.proportion.disabled = !0, this.plugins.video.setVideoRatioSelect.call(this, t._defaultRatio));
  }
}, ts = {
  name: "audio",
  display: "dialog",
  add: function(t) {
    t.addModule([mi, In, On]);
    const e = t.context, i = e.audio = {
      _infoList: [],
      // @Override fileManager
      _infoIndex: 0,
      // @Override fileManager
      _uploadFileLength: 0,
      // @Override fileManager
      focusElement: null,
      // @Override dialog // This element has focus when the dialog is opened.
      targetSelect: null,
      _origin_w: t.options.audioWidth,
      _origin_h: t.options.audioHeight,
      _linkValue: "",
      // @require @Override component
      _element: null,
      _cover: null,
      _container: null
    };
    let n = this.setDialog(t);
    i.modal = n, i.audioInputFile = n.querySelector("._se_audio_files"), i.audioUrlFile = n.querySelector(".se-input-url"), i.focusElement = i.audioInputFile || i.audioUrlFile, i.preview = n.querySelector(".se-link-preview");
    let l = this.setController(t);
    i.controller = l, n.querySelector("form").addEventListener("submit", this.submit.bind(t)), i.audioInputFile && n.querySelector(".se-dialog-files-edge-button").addEventListener("click", this._removeSelectedFiles.bind(i.audioInputFile, i.audioUrlFile, i.preview)), i.audioInputFile && i.audioUrlFile && i.audioInputFile.addEventListener("change", this._fileInputChange.bind(i)), l.addEventListener("click", this.onClick_controller.bind(t)), i.audioUrlFile && i.audioUrlFile.addEventListener("input", this._onLinkPreview.bind(i.preview, i, t.options.linkProtocol)), e.dialog.modal.appendChild(n), e.element.relative.appendChild(l), n = null, l = null;
  },
  /** HTML - dialog */
  setDialog: function(t) {
    const e = t.options, i = t.lang, n = t.util.createElement("DIV");
    n.className = "se-dialog-content", n.style.display = "none";
    let l = '<form method="post" enctype="multipart/form-data"><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" title="' + i.dialogBox.close + '" aria-label="' + i.dialogBox.close + '">' + t.icons.cancel + '</button><span class="se-modal-title">' + i.dialogBox.audioBox.title + '</span></div><div class="se-dialog-body">';
    return e.audioFileInput && (l += '<div class="se-dialog-form"><label>' + i.dialogBox.audioBox.file + '</label><div class="se-dialog-form-files"><input class="se-input-form _se_audio_files" type="file" accept="' + e.audioAccept + '"' + (e.audioMultipleFile ? ' multiple="multiple"' : "") + '/><button type="button" data-command="filesRemove" class="se-btn se-dialog-files-edge-button se-file-remove" title="' + i.controller.remove + '" aria-label="' + i.controller.remove + '">' + t.icons.cancel + "</button></div></div>"), e.audioUrlInput && (l += '<div class="se-dialog-form"><label>' + i.dialogBox.audioBox.url + '</label><input class="se-input-form se-input-url" type="text" /><pre class="se-link-preview"></pre></div>'), l += '</div><div class="se-dialog-footer"><button type="submit" class="se-btn-primary" title="' + i.dialogBox.submitButton + '" aria-label="' + i.dialogBox.submitButton + '"><span>' + i.dialogBox.submitButton + "</span></button></div></form>", n.innerHTML = l, n;
  },
  /** HTML - controller */
  setController: function(t) {
    const e = t.lang, i = t.icons, n = t.util.createElement("DIV");
    return n.className = "se-controller se-controller-link", n.innerHTML = '<div class="se-arrow se-arrow-up"></div><div class="link-content"><div class="se-btn-group"><button type="button" data-command="update" tabindex="-1" class="se-tooltip">' + i.edit + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.edit + '</span></span></button><button type="button" data-command="delete" tabindex="-1" class="se-tooltip">' + i.delete + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.remove + "</span></span></button></div></div>", n;
  },
  // Disable url input when uploading files
  _fileInputChange: function() {
    this.audioInputFile.value ? (this.audioUrlFile.setAttribute("disabled", !0), this.preview.style.textDecoration = "line-through") : (this.audioUrlFile.removeAttribute("disabled"), this.preview.style.textDecoration = "");
  },
  // Disable url input when uploading files
  _removeSelectedFiles: function(t, e) {
    this.value = "", t && (t.removeAttribute("disabled"), e.style.textDecoration = "");
  },
  // create new audio tag
  _createAudioTag: function() {
    const t = this.util.createElement("AUDIO");
    this.plugins.audio._setTagAttrs.call(this, t);
    const e = this.context.audio._origin_w, i = this.context.audio._origin_h;
    return t.setAttribute("origin-size", e + "," + i), t.style.cssText = (e ? "width:" + e + "; " : "") + (i ? "height:" + i + ";" : ""), t;
  },
  _setTagAttrs: function(t) {
    t.setAttribute("controls", !0);
    const e = this.options.audioTagAttrs;
    if (e)
      for (let i in e)
        this.util.hasOwn(e, i) && t.setAttribute(i, e[i]);
  },
  _onLinkPreview: function(t, e, i) {
    const n = i.target.value.trim();
    t._linkValue = this.textContent = n ? e && n.indexOf("://") === -1 && n.indexOf("#") !== 0 ? e + n : n.indexOf("://") === -1 ? "/" + n : n : "";
  },
  /**
   * @Required @Override fileManager
   */
  fileTags: ["audio"],
  /**
   * @Override core, fileManager, resizing
   * @description It is called from core.selectComponent.
   * @param {Element} element Target element
   */
  select: function(t) {
    this.plugins.audio.onModifyMode.call(this, t);
  },
  /**
   * @Override fileManager, resizing 
   */
  destroy: function(t) {
    t = t || this.context.audio._element;
    const e = this.util.getParentElement(t, this.util.isComponent) || t, i = t.getAttribute("data-index") * 1, n = e.previousElementSibling || e.nextElementSibling, l = e.parentNode;
    this.util.removeItem(e), this.plugins.audio.init.call(this), this.controllersOff(), l !== this.context.element.wysiwyg && this.util.removeItemAllParents(l, function(r) {
      return r.childNodes.length === 0;
    }, null), this.focusEdge(n), this.plugins.fileManager.deleteInfo.call(this, "audio", i, this.functions.onAudioUpload), this.history.push(!1);
  },
  /**
   * @Override fileManager
   */
  checkFileInfo: function() {
    this.plugins.fileManager.checkInfo.call(this, "audio", ["audio"], this.functions.onAudioUpload, this.plugins.audio.updateCover.bind(this), !1);
  },
  /**
   * @Override fileManager
   */
  resetFileInfo: function() {
    this.plugins.fileManager.resetInfo.call(this, "audio", this.functions.onAudioUpload);
  },
  /**
   * @Required @Override dialog
   */
  on: function(t) {
    const e = this.context.audio;
    t ? e._element ? (this.context.dialog.updateModal = !0, e._linkValue = e.preview.textContent = e.audioUrlFile.value = e._element.src, e.audioInputFile && this.options.audioMultipleFile && e.audioInputFile.removeAttribute("multiple")) : e.audioInputFile && this.options.audioMultipleFile && e.audioInputFile.removeAttribute("multiple") : (this.plugins.audio.init.call(this), e.audioInputFile && this.options.audioMultipleFile && e.audioInputFile.setAttribute("multiple", "multiple"));
  },
  /**
   * @Required @Override dialog
   */
  open: function() {
    this.plugins.dialog.open.call(this, "audio", this.currentControllerName === "audio");
  },
  submit: function(t) {
    const e = this.context.audio;
    t.preventDefault(), t.stopPropagation();
    try {
      e.audioInputFile && e.audioInputFile.files.length > 0 ? (this.showLoading(), this.plugins.audio.submitAction.call(this, e.audioInputFile.files)) : e.audioUrlFile && e._linkValue.length > 0 && (this.showLoading(), this.plugins.audio.setupUrl.call(this, e._linkValue));
    } catch (i) {
      throw this.closeLoading(), Error('[SUNEDITOR.audio.submit.fail] cause : "' + i.message + '"');
    } finally {
      this.plugins.dialog.close.call(this);
    }
    return !1;
  },
  submitAction: function(t) {
    if (t.length === 0)
      return;
    let e = 0, i = [];
    for (let u = 0, h = t.length; u < h; u++)
      /audio/i.test(t[u].type) && (i.push(t[u]), e += t[u].size);
    const n = this.options.audioUploadSizeLimit;
    if (n > 0) {
      let u = 0;
      const h = this.context.audio._infoList;
      for (let s = 0, m = h.length; s < m; s++)
        u += h[s].size * 1;
      if (e + u > n) {
        this.closeLoading();
        const s = "[SUNEDITOR.audioUpload.fail] Size of uploadable total audios: " + n / 1e3 + "KB";
        (typeof this.functions.onAudioUploadError != "function" || this.functions.onAudioUploadError(s, { limitSize: n, currentSize: u, uploadSize: e }, this)) && this.functions.noticeOpen(s);
        return;
      }
    }
    const l = this.context.audio;
    l._uploadFileLength = i.length;
    const r = {
      isUpdate: this.context.dialog.updateModal,
      element: l._element
    };
    if (typeof this.functions.onAudioUploadBefore == "function") {
      const u = this.functions.onAudioUploadBefore(i, r, this, (function(h) {
        h && this._w.Array.isArray(h.result) ? this.plugins.audio.register.call(this, r, h) : this.plugins.audio.upload.call(this, r, h);
      }).bind(this));
      if (typeof u > "u")
        return;
      if (!u) {
        this.closeLoading();
        return;
      }
      typeof u == "object" && u.length > 0 && (i = u);
    }
    this.plugins.audio.upload.call(this, r, i);
  },
  error: function(t, e) {
    if (this.closeLoading(), typeof this.functions.onAudioUploadError != "function" || this.functions.onAudioUploadError(t, e, this))
      throw this.functions.noticeOpen(t), Error("[SUNEDITOR.plugin.audio.exception] response: " + t);
  },
  upload: function(t, e) {
    if (!e) {
      this.closeLoading();
      return;
    }
    if (typeof e == "string") {
      this.plugins.audio.error.call(this, e, null);
      return;
    }
    const i = this.options.audioUploadUrl, n = this.context.dialog.updateModal ? 1 : e.length, l = new FormData();
    for (let r = 0; r < n; r++)
      l.append("file-" + r, e[r]);
    this.plugins.fileManager.upload.call(this, i, this.options.audioUploadHeader, l, this.plugins.audio.callBack_upload.bind(this, t), this.functions.onAudioUploadError);
  },
  callBack_upload: function(t, e) {
    if (typeof this.functions.audioUploadHandler == "function")
      this.functions.audioUploadHandler(e, t, this);
    else {
      const i = JSON.parse(e.responseText);
      i.errorMessage ? this.plugins.audio.error.call(this, i.errorMessage, i) : this.plugins.audio.register.call(this, t, i);
    }
  },
  register: function(t, e) {
    const i = e.result;
    for (let n = 0, l = i.length, r, u; n < l; n++)
      t.isUpdate ? u = t.element : u = this.plugins.audio._createAudioTag.call(this), r = { name: i[n].name, size: i[n].size }, this.plugins.audio.create_audio.call(this, u, i[n].url, r, t.isUpdate);
    this.closeLoading();
  },
  setupUrl: function(t) {
    try {
      if (t.length === 0)
        return !1;
      this.plugins.audio.create_audio.call(this, this.plugins.audio._createAudioTag.call(this), t, null, this.context.dialog.updateModal);
    } catch (e) {
      throw Error('[SUNEDITOR.audio.audio.fail] cause : "' + e.message + '"');
    } finally {
      this.closeLoading();
    }
  },
  create_audio: function(t, e, i, n) {
    const l = this.context.audio;
    if (n)
      if (l._element && (t = l._element), t && t.src !== e)
        t.src = e, this.selectComponent(t, "audio");
      else {
        this.selectComponent(t, "audio");
        return;
      }
    else {
      t.src = e;
      const r = this.plugins.component.set_cover.call(this, t), u = this.plugins.component.set_container.call(this, r, "");
      if (!this.insertComponent(u, !1, !0, !this.options.mediaAutoSelect)) {
        this.focus();
        return;
      }
      if (!this.options.mediaAutoSelect) {
        const h = this.appendFormatTag(u, null);
        h && this.setRange(h, 0, h, 0);
      }
    }
    this.plugins.fileManager.setInfo.call(this, "audio", t, this.functions.onAudioUpload, i, !1), n && this.history.push(!1);
  },
  updateCover: function(t) {
    const e = this.context.audio;
    this.plugins.audio._setTagAttrs.call(this, t);
    let i = this.util.isRangeFormatElement(t.parentNode) || this.util.isWysiwygDiv(t.parentNode) ? t : this.util.getFormatElement(t) || t;
    const n = t;
    e._element = t = t.cloneNode(!1);
    const l = this.plugins.component.set_cover.call(this, t), r = this.plugins.component.set_container.call(this, l, "se-audio-container");
    try {
      if (this.util.getParentElement(n, this.util.isNotCheckingNode))
        n.parentNode.replaceChild(r, n);
      else if (this.util.isListCell(i)) {
        const u = this.util.getParentElement(n, function(h) {
          return h.parentNode === i;
        });
        i.insertBefore(r, u), this.util.removeItem(n), this.util.removeEmptyNode(u, null, !0);
      } else if (this.util.isFormatElement(i)) {
        const u = this.util.getParentElement(n, function(h) {
          return h.parentNode === i;
        });
        i = this.util.splitElement(i, u), i.parentNode.insertBefore(r, i), this.util.removeItem(n), this.util.removeEmptyNode(i, null, !0), i.children.length === 0 && (i.innerHTML = this.util.htmlRemoveWhiteSpace(i.innerHTML));
      } else
        i.parentNode.replaceChild(r, i);
    } catch (u) {
      console.warn("[SUNEDITOR.audio.error] Maybe the audio tag is nested.", u);
    }
    this.plugins.fileManager.setInfo.call(this, "audio", t, this.functions.onAudioUpload, null, !1), this.plugins.audio.init.call(this);
  },
  /**
   * @Required @Override fileManager, resizing
   */
  onModifyMode: function(t) {
    const e = this.context.audio;
    this.setControllerPosition(e.controller, t, "bottom", { left: 0, top: 0 }), this.controllersOn(e.controller, t, this.plugins.audio.onControllerOff.bind(this, t), "audio"), this.util.addClass(t, "active"), e._element = t, e._cover = this.util.getParentElement(t, "FIGURE"), e._container = this.util.getParentElement(t, this.util.isComponent);
  },
  /**
   * @Required @Override fileManager, resizing
   */
  openModify: function(t) {
    if (this.context.audio.audioUrlFile) {
      const e = this.context.audio;
      e._linkValue = e.preview.textContent = e.audioUrlFile.value = e._element.src;
    }
    t || this.plugins.dialog.open.call(this, "audio", !0);
  },
  onClick_controller: function(t) {
    t.stopPropagation();
    const e = t.target.getAttribute("data-command");
    e && (t.preventDefault(), /update/.test(e) ? this.plugins.audio.openModify.call(this, !1) : this.plugins.audio.destroy.call(this, this.context.audio._element), this.controllersOff());
  },
  onControllerOff: function(t) {
    this.util.removeClass(t, "active"), this.context.audio.controller.style.display = "none";
  },
  /**
   * @Required @Override dialog
   */
  init: function() {
    if (this.context.dialog.updateModal)
      return;
    const t = this.context.audio;
    t.audioInputFile && (t.audioInputFile.value = ""), t.audioUrlFile && (t._linkValue = t.preview.textContent = t.audioUrlFile.value = ""), t.audioInputFile && t.audioUrlFile && (t.audioUrlFile.removeAttribute("disabled"), t.preview.style.textDecoration = ""), t._element = null;
  }
}, Ml = "https://katex.org/docs/supported.html", is = {
  name: "math",
  display: "dialog",
  add: function(t) {
    t.addModule([mi]);
    const e = t.context;
    e.math = {
      focusElement: null,
      // @Override dialog // This element has focus when the dialog is opened.
      previewElement: null,
      fontSizeElement: null,
      defaultFontSize: "",
      _mathExp: null
    };
    let i = this.setDialog(t);
    e.math.modal = i, e.math.focusElement = i.querySelector(".se-math-exp"), e.math.previewElement = i.querySelector(".se-math-preview"), e.math.fontSizeElement = i.querySelector(".se-math-size"), e.math.focusElement.addEventListener(t.util.isIE ? "textinput" : "input", this._renderMathExp.bind(t, e.math), !1), e.math.fontSizeElement.addEventListener("change", (function(l) {
      this.fontSize = l.target.value;
    }).bind(e.math.previewElement.style), !1);
    let n = this.setController_MathButton(t);
    e.math.mathController = n, e.math._mathExp = null, i.querySelector("form").addEventListener("submit", this.submit.bind(t), !1), n.addEventListener("click", this.onClick_mathController.bind(t)), e.math.previewElement.style.fontSize = e.math.defaultFontSize, e.dialog.modal.appendChild(i), e.element.relative.appendChild(n), i = null, n = null;
  },
  /** dialog */
  setDialog: function(t) {
    const e = t.lang, i = t.util.createElement("DIV"), n = t.options.mathFontSize;
    let l = n[0].value;
    i.className = "se-dialog-content", i.style.display = "none";
    let r = '<form><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" title="' + e.dialogBox.close + '" aria-label="' + e.dialogBox.close + '">' + t.icons.cancel + '</button><span class="se-modal-title">' + e.dialogBox.mathBox.title + '</span></div><div class="se-dialog-body"><div class="se-dialog-form"><label>' + e.dialogBox.mathBox.inputLabel + ' (<a href="' + Ml + '" target="_blank">KaTeX</a>)</label><textarea class="se-input-form se-math-exp" type="text"></textarea></div><div class="se-dialog-form"><label>' + e.dialogBox.mathBox.fontSizeLabel + '</label><select class="se-input-select se-math-size">';
    for (let u = 0, h = n.length, s; u < h; u++)
      s = n[u], s.default && (l = s.value), r += '<option value="' + s.value + '"' + (s.default ? " selected" : "") + ">" + s.text + "</option>";
    return r += '</select></div><div class="se-dialog-form"><label>' + e.dialogBox.mathBox.previewLabel + '</label><p class="se-math-preview"></p></div></div><div class="se-dialog-footer"><button type="submit" class="se-btn-primary" title="' + e.dialogBox.submitButton + '" aria-label="' + e.dialogBox.submitButton + '"><span>' + e.dialogBox.submitButton + "</span></button></div></form>", t.context.math.defaultFontSize = l, i.innerHTML = r, i;
  },
  /** modify controller button */
  setController_MathButton: function(t) {
    const e = t.lang, i = t.util.createElement("DIV");
    return i.className = "se-controller se-controller-link", i.innerHTML = '<div class="se-arrow se-arrow-up"></div><div class="link-content"><div class="se-btn-group"><button type="button" data-command="update" tabindex="-1" class="se-btn se-tooltip">' + t.icons.edit + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.edit + '</span></span></button><button type="button" data-command="delete" tabindex="-1" class="se-btn se-tooltip">' + t.icons.delete + '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + e.controller.remove + "</span></span></button></div></div>", i;
  },
  /**
   * @Required @Override dialog
   */
  open: function() {
    this.plugins.dialog.open.call(this, "math", this.currentControllerName === "math");
  },
  /**
   * @Override core - managedTagsInfo
   */
  managedTags: function() {
    return {
      className: "katex",
      method: function(t) {
        if (!t.getAttribute("data-exp") || !this.options.katex)
          return;
        const e = this._d.createRange().createContextualFragment(this.plugins.math._renderer.call(this, this.util.HTMLDecoder(t.getAttribute("data-exp"))));
        t.innerHTML = e.querySelector(".katex").innerHTML, t.setAttribute("contenteditable", !1);
      }
    };
  },
  _renderer: function(t) {
    let e = "";
    try {
      this.util.removeClass(this.context.math.focusElement, "se-error"), e = this.options.katex.src.renderToString(t, { throwOnError: !0, displayMode: !0 });
    } catch (i) {
      this.util.addClass(this.context.math.focusElement, "se-error"), e = '<span class="se-math-katex-error">Katex syntax error. (Refer <a href="' + Ml + '" target="_blank">KaTeX</a>)</span>', console.warn("[SUNEDITOR.math.Katex.error] ", i);
    }
    return e;
  },
  _renderMathExp: function(t, e) {
    t.previewElement.innerHTML = this.plugins.math._renderer.call(this, e.target.value);
  },
  submit: function(t) {
    this.showLoading(), t.preventDefault(), t.stopPropagation();
    const e = (function() {
      if (this.context.math.focusElement.value.trim().length === 0)
        return !1;
      const i = this.context.math, n = i.focusElement.value, l = i.previewElement.querySelector(".katex");
      if (!l)
        return !1;
      if (l.className = "__se__katex " + l.className, l.setAttribute("contenteditable", !1), l.setAttribute("data-exp", this.util.HTMLEncoder(n)), l.setAttribute("data-font-size", i.fontSizeElement.value), l.style.fontSize = i.fontSizeElement.value, this.context.dialog.updateModal) {
        const r = this.util.getParentElement(i._mathExp, ".katex");
        r.parentNode.replaceChild(l, r), this.setRange(l, 0, l, 1);
      } else {
        const r = this.getSelectedElements();
        if (r.length > 1) {
          const h = this.util.createElement(r[0].nodeName);
          if (h.appendChild(l), !this.insertNode(h, null, !0))
            return !1;
        } else if (!this.insertNode(l, null, !0))
          return !1;
        const u = this.util.createTextNode(this.util.zeroWidthSpace);
        l.parentNode.insertBefore(u, l.nextSibling), this.setRange(l, 0, l, 1);
      }
      return i.focusElement.value = "", i.fontSizeElement.value = "1em", i.previewElement.style.fontSize = "1em", i.previewElement.innerHTML = "", !0;
    }).bind(this);
    try {
      e() && (this.plugins.dialog.close.call(this), this.history.push(!1));
    } catch {
      this.plugins.dialog.close.call(this);
    } finally {
      this.closeLoading();
    }
    return !1;
  },
  active: function(t) {
    if (!t)
      this.controllerArray.indexOf(this.context.math.mathController) > -1 && this.controllersOff();
    else if (t.getAttribute("data-exp"))
      return this.controllerArray.indexOf(this.context.math.mathController) < 0 && (this.setRange(t, 0, t, 1), this.plugins.math.call_controller.call(this, t)), !0;
    return !1;
  },
  on: function(t) {
    if (!t)
      this.plugins.math.init.call(this);
    else {
      const e = this.context.math;
      if (e._mathExp) {
        const i = this.util.HTMLDecoder(e._mathExp.getAttribute("data-exp")), n = e._mathExp.getAttribute("data-font-size") || "1em";
        this.context.dialog.updateModal = !0, e.focusElement.value = i, e.fontSizeElement.value = n, e.previewElement.innerHTML = this.plugins.math._renderer.call(this, i), e.previewElement.style.fontSize = n;
      }
    }
  },
  call_controller: function(t) {
    this.context.math._mathExp = t;
    const e = this.context.math.mathController;
    this.setControllerPosition(e, t, "bottom", { left: 0, top: 0 }), this.controllersOn(e, t, "math");
  },
  onClick_mathController: function(t) {
    t.stopPropagation();
    const e = t.target.getAttribute("data-command") || t.target.parentNode.getAttribute("data-command");
    e && (t.preventDefault(), /update/.test(e) ? (this.context.math.focusElement.value = this.util.HTMLDecoder(this.context.math._mathExp.getAttribute("data-exp")), this.plugins.dialog.open.call(this, "math", !0)) : (this.util.removeItem(this.context.math._mathExp), this.context.math._mathExp = null, this.focus(), this.history.push(!1)), this.controllersOff());
  },
  init: function() {
    const t = this.context.math;
    t.mathController.style.display = "none", t._mathExp = null, t.focusElement.value = "", t.previewElement.innerHTML = "";
  }
};
var ns = { exports: {} };
(function(t) {
  (function(e, i) {
    t.exports = e.document ? i(e, !0) : function(n) {
      if (!n.document)
        throw new Error("SUNEDITOR_MODULES a window with a document");
      return i(n);
    };
  })(typeof window < "u" ? window : Re, function(e, i) {
    const n = {
      name: "fileBrowser",
      _xmlHttp: null,
      _loading: null,
      /**
       * @description Constructor
       * @param {Object} core Core object 
       */
      add: function(l) {
        const r = l.context;
        r.fileBrowser = {
          _closeSignal: !1,
          area: null,
          header: null,
          tagArea: null,
          body: null,
          list: null,
          tagElements: null,
          items: [],
          selectedTags: [],
          selectorHandler: null,
          contextPlugin: "",
          columnSize: 4
        };
        let u = l.util.createElement("DIV");
        u.className = "se-file-browser sun-editor-common";
        let h = l.util.createElement("DIV");
        h.className = "se-file-browser-back";
        let s = l.util.createElement("DIV");
        s.className = "se-file-browser-inner", s.innerHTML = this.set_browser(l), u.appendChild(h), u.appendChild(s), this._loading = u.querySelector(".se-loading-box"), r.fileBrowser.area = u, r.fileBrowser.header = s.querySelector(".se-file-browser-header"), r.fileBrowser.titleArea = s.querySelector(".se-file-browser-title"), r.fileBrowser.tagArea = s.querySelector(".se-file-browser-tags"), r.fileBrowser.body = s.querySelector(".se-file-browser-body"), r.fileBrowser.list = s.querySelector(".se-file-browser-list"), r.fileBrowser.tagArea.addEventListener("click", this.onClickTag.bind(l)), r.fileBrowser.list.addEventListener("click", this.onClickFile.bind(l)), s.addEventListener("mousedown", this._onMouseDown_browser.bind(l)), s.addEventListener("click", this._onClick_browser.bind(l)), r.element.relative.appendChild(u), u = null, h = null, s = null;
      },
      set_browser: function(l) {
        const r = l.lang;
        return '<div class="se-file-browser-content"><div class="se-file-browser-header"><button type="button" data-command="close" class="se-btn se-file-browser-close" class="close" title="' + r.dialogBox.close + '" aria-label="' + r.dialogBox.close + '">' + l.icons.cancel + '</button><span class="se-file-browser-title"></span><div class="se-file-browser-tags"></div></div><div class="se-file-browser-body"><div class="se-loading-box sun-editor-common"><div class="se-loading-effect"></div></div><div class="se-file-browser-list"></div></div></div>';
      },
      /**
       * @description Event to control the behavior of closing the browser
       * @param {MouseEvent} e Event object
       * @private
       */
      _onMouseDown_browser: function(l) {
        /se-file-browser-inner/.test(l.target.className) ? this.context.fileBrowser._closeSignal = !0 : this.context.fileBrowser._closeSignal = !1;
      },
      /**
       * @description Event to close the window when the outside area of the browser or close button is click
       * @param {MouseEvent} e Event object
       * @private
       */
      _onClick_browser: function(l) {
        l.stopPropagation(), (/close/.test(l.target.getAttribute("data-command")) || this.context.fileBrowser._closeSignal) && this.plugins.fileBrowser.close.call(this);
      },
      /**
       * @description Open a file browser plugin
       * @param {String} pluginName Plugin name using the file browser
       * @param {Function|null} selectorHandler When the function comes as an argument value, it substitutes "context.selectorHandler".
       */
      open: function(l, r) {
        this.plugins.fileBrowser._bindClose && (this._d.removeEventListener("keydown", this.plugins.fileBrowser._bindClose), this.plugins.fileBrowser._bindClose = null), this.plugins.fileBrowser._bindClose = (function(m) {
          /27/.test(m.keyCode) && this.plugins.fileBrowser.close.call(this);
        }).bind(this), this._d.addEventListener("keydown", this.plugins.fileBrowser._bindClose);
        const u = this.context.fileBrowser;
        u.contextPlugin = l, u.selectorHandler = r;
        const h = this.context[l], s = h.listClass;
        this.util.hasClass(u.list, s) || (u.list.className = "se-file-browser-list " + s), this.options.popupDisplay === "full" ? u.area.style.position = "fixed" : u.area.style.position = "absolute", u.titleArea.textContent = h.title, u.area.style.display = "block", this.plugins.fileBrowser._drawFileList.call(this, this.context[l].url, this.context[l].header);
      },
      _bindClose: null,
      /**
       * @description Close a fileBrowser plugin
       * The plugin's "init" method is called.
       */
      close: function() {
        const l = this.plugins.fileBrowser;
        l._xmlHttp && l._xmlHttp.abort(), l._bindClose && (this._d.removeEventListener("keydown", l._bindClose), l._bindClose = null);
        const r = this.context.fileBrowser;
        r.area.style.display = "none", r.selectorHandler = null, r.selectedTags = [], r.items = [], r.list.innerHTML = r.tagArea.innerHTML = r.titleArea.textContent = "", typeof this.plugins[r.contextPlugin].init == "function" && this.plugins[r.contextPlugin].init.call(this), r.contextPlugin = "";
      },
      /**
       * @description Show file browser loading box
       */
      showBrowserLoading: function() {
        this._loading.style.display = "block";
      },
      /**
       * @description Close file browser loading box
       */
      closeBrowserLoading: function() {
        this._loading.style.display = "none";
      },
      _drawFileList: function(l, r) {
        const u = this.plugins.fileBrowser, h = u._xmlHttp = this.util.getXMLHttpRequest();
        if (h.onreadystatechange = u._callBackGet.bind(this, h), h.open("get", l, !0), r !== null && typeof r == "object" && this._w.Object.keys(r).length > 0)
          for (let s in r)
            h.setRequestHeader(s, r[s]);
        h.send(null), this.plugins.fileBrowser.showBrowserLoading();
      },
      _callBackGet: function(l) {
        if (l.readyState === 4) {
          if (this.plugins.fileBrowser._xmlHttp = null, l.status === 200)
            try {
              const r = JSON.parse(l.responseText);
              r.result.length > 0 ? this.plugins.fileBrowser._drawListItem.call(this, r.result, !0) : r.nullMessage && (this.context.fileBrowser.list.innerHTML = r.nullMessage);
            } catch (r) {
              throw Error('[SUNEDITOR.fileBrowser.drawList.fail] cause : "' + r.message + '"');
            } finally {
              this.plugins.fileBrowser.closeBrowserLoading(), this.context.fileBrowser.body.style.maxHeight = this._w.innerHeight - this.context.fileBrowser.header.offsetHeight - 50 + "px";
            }
          else if (this.plugins.fileBrowser.closeBrowserLoading(), l.status !== 0) {
            const r = l.responseText ? JSON.parse(l.responseText) : l, u = "[SUNEDITOR.fileBrowser.get.serverException] status: " + l.status + ", response: " + (r.errorMessage || l.responseText);
            throw Error(u);
          }
        }
      },
      _drawListItem: function(l, r) {
        const u = this.context.fileBrowser, h = this.context[u.contextPlugin], s = [], m = l.length, c = h.columnSize || u.columnSize, g = c <= 1 ? 1 : Math.round(m / c) || 1, x = h.itemTemplateHandler;
        let T = "", L = '<div class="se-file-item-column">', A = 1;
        for (let a = 0, o, d; a < m; a++)
          if (o = l[a], d = o.tag ? typeof o.tag == "string" ? o.tag.split(",") : o.tag : [], d = o.tag = d.map(function(p) {
            return p.trim();
          }), L += x(o), (a + 1) % g === 0 && A < c && a + 1 < m && (A++, L += '</div><div class="se-file-item-column">'), r && d.length > 0)
            for (let p = 0, v = d.length, _; p < v; p++)
              _ = d[p], _ && s.indexOf(_) === -1 && (s.push(_), T += '<a title="' + _ + '" aria-label="' + _ + '">' + _ + "</a>");
        L += "</div>", u.list.innerHTML = L, r && (u.items = l, u.tagArea.innerHTML = T, u.tagElements = u.tagArea.querySelectorAll("A"));
      },
      onClickTag: function(l) {
        const r = l.target;
        if (!this.util.isAnchor(r))
          return;
        const u = r.textContent, h = this.plugins.fileBrowser, s = this.context.fileBrowser, m = s.tagArea.querySelector('a[title="' + u + '"]'), c = s.selectedTags, g = c.indexOf(u);
        g > -1 ? (c.splice(g, 1), this.util.removeClass(m, "on")) : (c.push(u), this.util.addClass(m, "on")), h._drawListItem.call(
          this,
          c.length === 0 ? s.items : s.items.filter(function(x) {
            return x.tag.some(function(T) {
              return c.indexOf(T) > -1;
            });
          }),
          !1
        );
      },
      onClickFile: function(l) {
        l.preventDefault(), l.stopPropagation();
        const r = this.context.fileBrowser, u = r.list;
        let h = l.target, s = null;
        if (h === u)
          return;
        for (; u !== h.parentNode && (s = h.getAttribute("data-command"), !s); )
          h = h.parentNode;
        if (!s)
          return;
        (r.selectorHandler || this.context[r.contextPlugin].selectorHandler)(h, h.parentNode.querySelector(".__se__img_name").textContent), this.plugins.fileBrowser.close.call(this);
      }
    };
    return typeof i > "u" && (e.SUNEDITOR_MODULES || Object.defineProperty(e, "SUNEDITOR_MODULES", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: {}
    }), Object.defineProperty(e.SUNEDITOR_MODULES, "fileBrowser", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: n
    })), n;
  });
})(ns);
var Ca = ns.exports;
const Sa = /* @__PURE__ */ Kt(Ca), ls = {
  name: "imageGallery",
  /**
   * @description Constructor
   * @param {Object} core Core object 
   */
  add: function(t) {
    t.addModule([Sa]);
    const e = t.context;
    e.imageGallery = {
      title: t.lang.toolbar.imageGallery,
      // @Required @Override fileBrowser - File browser window title.
      url: t.options.imageGalleryUrl,
      // @Required @Override fileBrowser - File server url.
      header: t.options.imageGalleryHeader,
      // @Required @Override fileBrowser - File server http header.
      listClass: "se-image-list",
      // @Required @Override fileBrowser - Class name of list div.
      itemTemplateHandler: this.drawItems,
      // @Required @Override fileBrowser - Function that defines the HTML of an file item.
      selectorHandler: this.setImage.bind(t),
      // @Required @Override fileBrowser - Function that action when item click.
      columnSize: 4
      // @Option @Override fileBrowser - Number of "div.se-file-item-column" to be created (default: 4)
    };
  },
  /**
   * @Required @Override fileBrowser
   * @description Open a file browser.
   * @param {Function|null} selectorHandler When the function comes as an argument value, it substitutes "context.selectorHandler".
   */
  open: function(t) {
    this.plugins.fileBrowser.open.call(this, "imageGallery", t);
  },
  /**
   * @Required @Override fileBrowser
   * @description Define the HTML of the item to be put in "div.se-file-item-column".
   * Format: [
   *      { src: "image src", name: "name(@option)", alt: "image alt(@option)", tag: "tag name(@option)" }
   * ]
   * @param {Object} item Item of the response data's array
   */
  drawItems: function(t) {
    const e = t.src.split("/").pop();
    return '<div class="se-file-item-img"><img src="' + (t.thumbnail || t.src) + '" alt="' + (t.alt || e) + '" data-command="pick" data-value="' + (t.src || t.thumbnail) + '"><div class="se-file-img-name se-file-name-back"></div><div class="se-file-img-name __se__img_name">' + (t.name || e) + "</div></div>";
  },
  setImage: function(t, e) {
    this.callPlugin("image", (function() {
      const i = { name: e, size: 0 };
      this.plugins.image.create_image.call(this, t.getAttribute("data-value"), null, this.context.image._origin_w, this.context.image._origin_h, "none", i, t.alt);
    }).bind(this), null);
  }
}, ka = { blockquote: A0, align: B0, font: N0, fontSize: R0, fontColor: H0, hiliteColor: I0, horizontalRule: O0, list: F0, table: P0, formatBlock: V0, lineHeight: U0, template: q0, paragraphStyle: W0, textStyle: Z0, link: j0, image: Q0, video: es, audio: ts, math: is, imageGallery: ls }, Ta = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  align: B0,
  audio: ts,
  blockquote: A0,
  default: ka,
  font: N0,
  fontColor: H0,
  fontSize: R0,
  formatBlock: V0,
  hiliteColor: I0,
  horizontalRule: O0,
  image: Q0,
  imageGallery: ls,
  lineHeight: U0,
  link: j0,
  list: F0,
  math: is,
  paragraphStyle: W0,
  table: P0,
  template: q0,
  textStyle: Z0,
  video: es
}, Symbol.toStringTag, { value: "Module" })), Ea = /* @__PURE__ */ Dl(Ta), Al = {
  // rtl icon
  rtl: {
    italic: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.5 15.8" xml:space="preserve"><g><path d="M0.3,0.1c0.3,0,0.5,0,0.7,0c1,0.1,1.7,0.1,2.2,0.1H4L7.2,0l0.2,1.1H7c-0.5,0-1,0.1-1.5,0.3v0.4l0.3,1.9L6,4.4L6.3,6 l0.1,0.4l0.1,0.5c0.1,0.2,0.1,0.4,0.2,0.7s0.1,0.6,0.2,0.9L7,9.1l0.6,2.8l0.3,1.4c0.1,0.4,0.2,0.7,0.4,1c0.4,0.2,0.8,0.3,1.2,0.4 l0.8,0.2l0.2,0.9l-1.1,0c-0.9-0.1-1.5-0.1-1.8-0.1h-2c-0.9,0.1-1.4,0.2-1.5,0.2c-0.1,0-0.2,0-0.3,0H3.4c-0.1,0-0.2,0-0.2,0 l-0.1-0.4c0-0.2-0.1-0.4-0.1-0.6l0.7-0.1c0.4,0,0.8-0.1,1.2-0.2c0-0.1,0-0.2,0-0.3l-0.1-0.5l-0.4-2.4L4,9.6L3.4,6.4 C3.2,5.7,3,4.7,2.7,3.3c0-0.3-0.1-0.5-0.1-0.8C2.5,2.1,2.4,1.9,2.3,1.6C2,1.4,1.6,1.3,1.3,1.2C0.9,1.2,0.5,1.1,0.2,0.9L0,0.4L0,0 L0.3,0.1L0.3,0.1z"/></g></svg>',
    indent: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.7 12.4" xml:space="preserve"><g><g><path d="M15.5,10.1L15.5,10.1c0.1,0,0.3,0.1,0.3,0.3v1.7c0,0.1,0,0.1-0.1,0.2c-0.1,0.1-0.1,0.1-0.2,0.1l-15.2,0 c-0.1,0-0.1,0-0.2-0.1C0,12.2,0,12.2,0,12.1l0-1.7c0-0.1,0-0.1,0.1-0.2c0.1-0.1,0.1-0.1,0.2-0.1C0.3,10.1,15.5,10.1,15.5,10.1z M9.8,6.7c0.1,0,0.1,0,0.2,0.1C10.1,6.9,10.1,7,10.1,7v1.7c0,0.1,0,0.2-0.1,0.2C10,9,9.9,9,9.8,9L0.3,9C0.2,9,0.1,9,0.1,8.9 C0,8.9,0,8.8,0,8.7V7C0,7,0,6.9,0.1,6.8c0.1-0.1,0.1-0.1,0.2-0.1C0.3,6.7,9.8,6.7,9.8,6.7z M0.3,3.4h9.6h0c0.1,0,0.3,0.1,0.3,0.3 v1.7v0c0,0.1-0.1,0.3-0.3,0.3H0.3c-0.1,0-0.1,0-0.2-0.1C0,5.5,0,5.4,0,5.3V3.6c0-0.1,0-0.1,0.1-0.2C0.1,3.4,0.2,3.4,0.3,3.4 L0.3,3.4z M0.3,0l15.2,0c0.1,0,0.1,0,0.2,0.1c0.1,0.1,0.1,0.1,0.1,0.2V2c0,0.1,0,0.2-0.1,0.2c-0.1,0.1-0.1,0.1-0.2,0.1H0.3 c-0.1,0-0.1,0-0.2-0.1C0,2.1,0,2,0,2l0-1.7c0-0.1,0-0.1,0.1-0.2C0.1,0,0.2,0,0.3,0z"/></g><path d="M13.1,3.5L15.7,6c0.1,0.1,0.1,0.3,0,0.4l-2.5,2.5C13.1,9,13,9,12.9,9c-0.1,0-0.1,0-0.2-0.1c-0.1-0.1-0.1-0.1-0.1-0.2V3.7 c0-0.1,0-0.2,0.1-0.2c0.1-0.1,0.1-0.1,0.2-0.1C13,3.4,13.1,3.4,13.1,3.5z"/></g></svg>',
    outdent: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.7 12.4" xml:space="preserve"><g><g><path d="M15.5,10.1L15.5,10.1c0.1,0,0.3,0.1,0.3,0.3v1.7c0,0.1,0,0.1-0.1,0.2c-0.1,0.1-0.1,0.1-0.2,0.1l-15.2,0 c-0.1,0-0.1,0-0.2-0.1C0,12.2,0,12.2,0,12.1l0-1.7c0-0.1,0-0.1,0.1-0.2c0.1-0.1,0.1-0.1,0.2-0.1C0.3,10.1,15.5,10.1,15.5,10.1z M9.8,6.7c0.1,0,0.1,0,0.2,0.1C10.1,6.9,10.1,7,10.1,7v1.7c0,0.1,0,0.2-0.1,0.2C10,9,9.9,9,9.8,9L0.3,9C0.2,9,0.1,9,0.1,8.9 C0,8.9,0,8.8,0,8.7V7C0,7,0,6.9,0.1,6.8c0.1-0.1,0.1-0.1,0.2-0.1C0.3,6.7,9.8,6.7,9.8,6.7z M0.3,3.4h9.6h0c0.1,0,0.3,0.1,0.3,0.3 v1.7v0c0,0.1-0.1,0.3-0.3,0.3H0.3c-0.1,0-0.1,0-0.2-0.1C0,5.5,0,5.4,0,5.3V3.6c0-0.1,0-0.1,0.1-0.2C0.1,3.4,0.2,3.4,0.3,3.4 L0.3,3.4z M0.3,0l15.2,0c0.1,0,0.1,0,0.2,0.1c0.1,0.1,0.1,0.1,0.1,0.2V2c0,0.1,0,0.2-0.1,0.2c-0.1,0.1-0.1,0.1-0.2,0.1H0.3 c-0.1,0-0.1,0-0.2-0.1C0,2.1,0,2,0,2l0-1.7c0-0.1,0-0.1,0.1-0.2C0.1,0,0.2,0,0.3,0z"/></g><path d="M15.5,3.4c0.1,0,0.1,0,0.2,0.1c0.1,0.1,0.1,0.1,0.1,0.2v5.1c0,0.1,0,0.1-0.1,0.2C15.6,9,15.5,9,15.5,9 c-0.1,0-0.1,0-0.2-0.1l-2.5-2.5c-0.1-0.1-0.1-0.3,0-0.4l2.5-2.5C15.3,3.4,15.4,3.4,15.5,3.4z"/></g></svg>',
    list_bullets: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.7 12.4" xml:space="preserve"><g><path d="M12.4,10.7c0,0.9,0.8,1.7,1.7,1.7c0.9,0,1.7-0.8,1.7-1.7C15.7,9.8,15,9,14.1,9c-0.4,0-0.9,0.2-1.2,0.5 C12.5,9.8,12.4,10.2,12.4,10.7C12.4,10.7,12.4,10.7,12.4,10.7z M12.4,6.2c0,0.9,0.8,1.7,1.7,1.7c0.4,0,0.9-0.2,1.2-0.5 c0.3-0.3,0.4-0.7,0.4-1.1c0-0.9-0.7-1.7-1.6-1.7C13.1,4.6,12.4,5.3,12.4,6.2C12.4,6.2,12.4,6.2,12.4,6.2z M0,9.8v1.7 c0,0.1,0,0.1,0.1,0.2c0.1,0.1,0.1,0.1,0.2,0.1l10.7,0c0,0,0,0,0,0c0.1,0,0.3-0.1,0.3-0.3V9.8c0-0.1,0-0.1-0.1-0.2 C11.1,9.6,11,9.6,11,9.6l-10.7,0c-0.1,0-0.1,0-0.2,0.1C0,9.7,0,9.8,0,9.8L0,9.8z M12.9,2.9c0.3,0.3,0.7,0.5,1.2,0.5 c0.4,0,0.9-0.2,1.2-0.5c0.7-0.7,0.7-1.7,0-2.4C14.9,0.2,14.5,0,14.1,0c-0.4,0-0.9,0.2-1.2,0.5c-0.3,0.3-0.5,0.7-0.5,1.2 C12.4,2.1,12.5,2.6,12.9,2.9z M0,5.3V7c0,0.1,0,0.1,0.1,0.2c0.1,0.1,0.1,0.1,0.2,0.1H11c0.1,0,0.1,0,0.2-0.1 c0.1-0.1,0.1-0.1,0.1-0.2V5.3c0,0,0,0,0,0c0-0.1-0.1-0.3-0.3-0.3H0.3c-0.1,0-0.1,0-0.2,0.1C0,5.2,0,5.3,0,5.3L0,5.3z M0,0.8v1.7 c0,0.1,0,0.1,0.1,0.2c0.1,0.1,0.1,0.1,0.2,0.1h10.7c0.1,0,0.1,0,0.2-0.1c0,0,0.1-0.1,0.1-0.2V0.8c0-0.1,0-0.1-0.1-0.2 c0-0.1-0.1-0.1-0.2-0.1H0.3c-0.1,0-0.1,0-0.2,0.1C0,0.7,0,0.8,0,0.8L0,0.8z"/></g></svg>',
    list_number: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.7 15.7" xml:space="preserve"><g><path d="M0,11.5l0,1.7c0,0.1,0,0.1,0.1,0.2c0.1,0.1,0.1,0.1,0.2,0.1H11c0.1,0,0.2,0,0.2-0.1c0.1-0.1,0.1-0.1,0.1-0.2v-1.7 c0-0.1,0-0.1-0.1-0.2c-0.1-0.1-0.1-0.1-0.2-0.1H0.3c-0.1,0-0.2,0-0.2,0.1C0,11.4,0,11.4,0,11.5L0,11.5z M0,8.7c0,0.1,0,0.1,0.1,0.2 C0.1,8.9,0.2,9,0.3,9H11c0.1,0,0.2,0,0.2-0.1c0.1-0.1,0.1-0.1,0.1-0.2V7c0-0.1,0-0.1-0.1-0.2c-0.1-0.1-0.1-0.1-0.2-0.1l-10.7,0 c-0.1,0-0.2,0-0.2,0.1C0,6.8,0,6.9,0,7C0,7,0,8.7,0,8.7z M0,2.5v1.7c0,0.1,0,0.1,0.1,0.2c0,0,0.1,0.1,0.2,0.1l10.7,0 c0.1,0,0.2,0,0.2-0.1c0.1-0.1,0.1-0.1,0.1-0.2V2.4c0-0.1,0-0.1-0.1-0.2c-0.1,0-0.1,0-0.2,0H0.3c-0.1,0-0.1,0-0.2,0 C0,2.3,0,2.4,0,2.5L0,2.5z"/></g><path d="M15.6,14.2c0-0.3-0.1-0.6-0.3-0.8c-0.2-0.2-0.4-0.4-0.7-0.4l0.9-1v-0.8h-2.9v1.3h0.9v-0.5h0.9l0,0c-0.1,0.1-0.2,0.2-0.3,0.3 s-0.2,0.3-0.4,0.5l-0.3,0.3l0.2,0.5c0.6,0,0.9,0.1,0.9,0.5c0,0.1-0.1,0.3-0.2,0.4c-0.1,0.1-0.3,0.1-0.4,0.1c-0.3,0-0.7-0.1-0.9-0.3 l-0.5,0.8c0.4,0.4,0.9,0.6,1.5,0.6c0.4,0,0.9-0.1,1.2-0.4C15.5,15.1,15.6,14.7,15.6,14.2z"/><path d="M15.6,8.7h-0.9v0.5h-1.1c0-0.2,0.2-0.4,0.4-0.5c0.2-0.2,0.4-0.3,0.7-0.4c0.3-0.2,0.5-0.3,0.7-0.6c0.2-0.2,0.3-0.5,0.3-0.8 c0-0.4-0.2-0.8-0.5-1c-0.6-0.4-1.4-0.5-2-0.1c-0.3,0.2-0.5,0.4-0.6,0.7L13.3,7c0.1-0.3,0.4-0.5,0.7-0.5c0.1,0,0.3,0,0.3,0.1 c0.1,0.1,0.1,0.2,0.1,0.3c0,0.2-0.1,0.3-0.2,0.4c-0.2,0.1-0.3,0.3-0.5,0.4c-0.2,0.1-0.4,0.3-0.6,0.4c-0.2,0.2-0.4,0.4-0.5,0.6 c-0.1,0.2-0.2,0.5-0.2,0.8c0,0.2,0,0.3,0,0.5h3.2L15.6,8.7L15.6,8.7z"/><path d="M15.6,3.6h-1V0h-0.9l-1.2,1.1l0.6,0.7c0.2-0.1,0.3-0.3,0.4-0.5l0,0v2.2h-0.9v0.9h3L15.6,3.6L15.6,3.6z"/></svg>',
    link: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.7 15.7" xml:space="preserve"><g><path d="M7.4,9.9l3.1,3.1c0.3,0.3,0.8,0.5,1.3,0.5c0.5,0,0.9-0.2,1.3-0.5c0,0,0,0,0,0c0.7-0.7,0.7-1.9,0-2.6L9.9,7.3 c0-0.1,0-0.2,0-0.3C9.9,7,10,7,10.1,7l2.2-0.2c0.1,0,0.1,0,0.2,0.1l2.1,2.1c0.4,0.4,0.7,0.8,0.9,1.3c0.2,0.5,0.3,1,0.3,1.5 c0,0.5-0.1,1-0.3,1.5c-0.8,2-3.2,3-5.2,2.2c-0.5-0.2-0.9-0.5-1.3-0.9l-2.1-2.1c-0.1,0-0.1-0.1-0.1-0.2L7,10.1C7,10,7,9.9,7.1,9.9 C7.2,9.8,7.3,9.9,7.4,9.9z M1.2,1.1C1.6,0.7,2,0.4,2.5,0.3c1-0.4,2.1-0.4,3.1,0C6,0.4,6.5,0.7,6.8,1.1L9,3.2C9,3.3,9.1,3.3,9,3.4 L8.8,5.6c0,0.1-0.1,0.2-0.2,0.2c-0.1,0.1-0.2,0.1-0.3,0L5.3,2.7C5,2.3,4.5,2.1,4,2.1c-0.5,0-0.9,0.2-1.3,0.5c0,0,0,0,0,0 C2,3.4,2,4.5,2.7,5.2l3.1,3.2c0.1,0.1,0.1,0.2,0,0.3c0,0.1-0.1,0.1-0.2,0.1L3.5,9C3.4,9,3.4,9,3.3,8.9L1.2,6.8c0,0,0,0,0,0 C-0.4,5.2-0.4,2.7,1.2,1.1L1.2,1.1z M14.3,6h-2.6c0,0,0,0,0,0c-0.1,0-0.2-0.1-0.2-0.2c0-0.1,0-0.2,0.1-0.3l2.5-0.7 c0.1,0,0.1,0,0.2,0c0.1,0,0.1,0.1,0.1,0.2l0.1,0.8c0,0.1,0,0.1-0.1,0.2C14.5,6,14.4,6,14.3,6L14.3,6z M10.2,4.1 c0,0.1-0.1,0.2-0.2,0.2l0,0c0,0,0,0,0,0C9.8,4.2,9.7,4.1,9.8,4L9.7,1.4c0-0.1,0-0.1,0.1-0.2c0.1,0,0.1,0,0.2,0h0.8 c0.1,0,0.1,0,0.2,0.1c0,0.1,0,0.1,0,0.2L10.2,4.1L10.2,4.1z M1.5,9.7h1.3h1.3c0.1,0,0.2,0.1,0.2,0.2c0,0.1,0,0.2-0.1,0.3l-2.5,0.6 H1.6c0,0-0.1,0-0.1,0c-0.1,0-0.1-0.1-0.1-0.2L1.2,9.9c0-0.1,0-0.1,0.1-0.2c0-0.1,0.1-0.1,0.2-0.1L1.5,9.7z M5.6,11.6 C5.6,11.6,5.6,11.6,5.6,11.6c0-0.1,0.1-0.2,0.3-0.1c0,0,0,0,0,0c0.1,0,0.2,0.1,0.2,0.2v2.6c0,0.1,0,0.1-0.1,0.2 c0,0-0.1,0.1-0.2,0.1L5,14.5c-0.1,0-0.1,0-0.2-0.1c0-0.1,0-0.1,0-0.2L5.6,11.6L5.6,11.6z"/></g></svg>',
    unlink: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.7 15.7" xml:space="preserve"><g><path d="M14.6,14.6c1.6-1.6,1.6-4.1,0-5.7l0,0l-3.1-3.1l-1.2,1.6l2.9,2.9c0.4,0.4,0.6,0.9,0.6,1.5c0,1.1-0.9,2.1-2.1,2.1l0,0 c-0.6,0-1.1-0.2-1.5-0.6l-0.4-0.4l-1.7,1l0.8,0.8C10.4,16.2,13,16.2,14.6,14.6L14.6,14.6L14.6,14.6z M3.6,6C3,5.9,2.6,5.5,2.3,5 S1.9,4,2.1,3.4C2.3,2.9,2.6,2.5,3,2.2C3.5,2,4.1,1.9,4.6,2l3.3,1.4l0.5-2L5.1,0.1C4-0.1,2.9,0,2,0.5C1.1,1.1,0.4,1.9,0.2,3 C-0.1,4,0,5.1,0.6,6C1.1,6.9,1.9,7.6,3,7.8l5.4,2l0.5-2L6.2,6.9L3.6,6z"/></g></svg>'
  },
  // common, ltr icon
  redo: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.59 14.18"><g><path d="M11.58,18.48a6.84,6.84,0,1,1,6.85-6.85s0,.26,0,.67a8,8,0,0,1-.22,1.44l.91-.55a.51.51,0,0,1,.36,0,.45.45,0,0,1,.29.22.47.47,0,0,1,.06.36.45.45,0,0,1-.22.29L17.42,15.3l-.12,0h-.25l-.12-.06-.09-.09-.06-.07,0-.06-.87-2.12a.43.43,0,0,1,0-.37.49.49,0,0,1,.27-.26.41.41,0,0,1,.36,0,.53.53,0,0,1,.27.26l.44,1.09a6.51,6.51,0,0,0,.24-1.36,4.58,4.58,0,0,0,0-.64,5.83,5.83,0,0,0-1.73-4.17,5.88,5.88,0,0,0-8.34,0,5.9,5.9,0,0,0,4.17,10.06.51.51,0,0,1,.33.15.48.48,0,0,1,0,.68.53.53,0,0,1-.33.12Z" transform="translate(-4.48 -4.54)"/></g></svg>',
  undo: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.59 14.18"><g><path d="M5,14a.43.43,0,0,1-.22-.29.46.46,0,0,1,.06-.36.43.43,0,0,1,.29-.22.56.56,0,0,1,.36,0l.91.55a8.27,8.27,0,0,1-.22-1.45,5.07,5.07,0,0,1,0-.67A6.85,6.85,0,1,1,13,18.47a.44.44,0,0,1-.33-.13.48.48,0,0,1,0-.68.51.51,0,0,1,.33-.15A5.89,5.89,0,0,0,17.15,7.45a5.88,5.88,0,0,0-8.33,0,5.84,5.84,0,0,0-1.73,4.17s0,.25,0,.65a6.49,6.49,0,0,0,.24,1.37l.44-1.09a.57.57,0,0,1,.27-.26.41.41,0,0,1,.36,0,.53.53,0,0,1,.27.26.43.43,0,0,1,0,.37L7.82,15l0,.09-.09.09-.1.07-.06,0H7.28l-.13,0-1.09-.63c-.65-.36-1-.57-1.1-.63Z" transform="translate(-4.49 -4.53)"/></g></svg>',
  bold: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11.76 15.75"><g><path d="M6.4,3.76V19.5h6.76a5.55,5.55,0,0,0,2-.32,4.93,4.93,0,0,0,1.52-1,4.27,4.27,0,0,0,1.48-3.34,3.87,3.87,0,0,0-.69-2.37,5.74,5.74,0,0,0-.71-.83,3.44,3.44,0,0,0-1.1-.65,3.6,3.6,0,0,0,1.58-1.36,3.66,3.66,0,0,0,.53-1.93,3.7,3.7,0,0,0-1.21-2.87,4.65,4.65,0,0,0-3.25-1.1H6.4Zm2.46,6.65V5.57h3.52a4.91,4.91,0,0,1,1.36.15,2.3,2.3,0,0,1,.85.45,2.06,2.06,0,0,1,.74,1.71,2.3,2.3,0,0,1-.78,1.92,2.54,2.54,0,0,1-.86.46,4.7,4.7,0,0,1-1.32.15H8.86Zm0,7.27V12.15H12.7a4.56,4.56,0,0,1,1.38.17,3.43,3.43,0,0,1,.95.49,2.29,2.29,0,0,1,.92,2,2.73,2.73,0,0,1-.83,2.1,2.66,2.66,0,0,1-.83.58,3.25,3.25,0,0,1-1.26.2H8.86Z" transform="translate(-6.4 -3.75)"/></g></svg>',
  underline: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9.78 15.74"><g><path d="M14.64,3.76h2.52v7.72a4.51,4.51,0,0,1-.59,2.31,3.76,3.76,0,0,1-1.71,1.53,6.12,6.12,0,0,1-2.64.53,5,5,0,0,1-3.57-1.18,4.17,4.17,0,0,1-1.27-3.24V3.76H9.9v7.3a3,3,0,0,0,.55,2,2.3,2.3,0,0,0,1.83.65,2.26,2.26,0,0,0,1.8-.65,3.09,3.09,0,0,0,.55-2V3.76Zm2.52,13.31V19.5H7.39V17.08h9.77Z" transform="translate(-7.38 -3.76)"/></g></svg>',
  italic: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.49 15.76"><g><path d="M17.16,3.79l.37,0-.06.38-.14.52A10,10,0,0,1,16.21,5a9.37,9.37,0,0,0-1,.32,6.68,6.68,0,0,0-.25.89c-.06.31-.11.59-.14.85-.3,1.36-.52,2.41-.68,3.14l-.61,3.18L13.1,15l-.43,2.4-.12.46a.62.62,0,0,0,0,.28c.44.1.85.17,1.23.22l.68.11a4.51,4.51,0,0,1-.08.6l-.09.42a.92.92,0,0,0-.23,0l-.43,0a1.37,1.37,0,0,1-.29,0c-.13,0-.63-.08-1.49-.16l-2,0c-.28,0-.87,0-1.78.12L7,19.5l.17-.88.8-.2A6.61,6.61,0,0,0,9.19,18,2.62,2.62,0,0,0,9.61,17l.28-1.41.58-2.75.12-.66c.05-.3.11-.58.17-.86s.12-.51.17-.69l.12-.48.12-.43.31-1.6.15-.65.31-1.91V5.14a3.86,3.86,0,0,0-1.48-.29l-.38,0,.2-1.06,3.24.14.75,0c.45,0,1.18,0,2.18-.09.23,0,.46,0,.71,0Z" transform="translate(-7.04 -3.76)"/></g></svg>',
  strike: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 14.9"><g><path d="M12.94,13a4.27,4.27,0,0,1,1.32.58,1.46,1.46,0,0,1,.55,1.2,1.87,1.87,0,0,1-.88,1.64,4.17,4.17,0,0,1-2.35.59,4.44,4.44,0,0,1-2.74-.71,2.72,2.72,0,0,1-1-2.17H5.57a4.56,4.56,0,0,0,1.55,3.7,7,7,0,0,0,4.47,1.23,6,6,0,0,0,4.07-1.3,4.24,4.24,0,0,0,1.52-3.37,4,4,0,0,0-.26-1.4h-4ZM6.37,10.24A3.27,3.27,0,0,1,6,8.68a4,4,0,0,1,1.48-3.3,5.92,5.92,0,0,1,3.88-1.21,5.58,5.58,0,0,1,3.91,1.24,4.36,4.36,0,0,1,1.45,3.17H14.44a2.12,2.12,0,0,0-.91-1.81,4.45,4.45,0,0,0-2.44-.55,3.69,3.69,0,0,0-2,.51A1.64,1.64,0,0,0,8.3,8.22a1.3,1.3,0,0,0,.48,1.11,7,7,0,0,0,2.1.78l.28.06.28.08H6.37Zm13.09.68a.73.73,0,0,1,.49.21.66.66,0,0,1,.2.48.64.64,0,0,1-.2.48.71.71,0,0,1-.49.19H5.1a.67.67,0,0,1-.49-.19.66.66,0,0,1-.2-.48.64.64,0,0,1,.2-.48.73.73,0,0,1,.49-.21H19.46Z" transform="translate(-4.41 -4.17)"/></g></svg>',
  subscript: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.75 14.61"><g><path d="M15.38,4.33H12.74L11.19,7c-.28.46-.51.87-.69,1.21L10.07,9h0l-.44-.8c-.22-.4-.45-.81-.71-1.23L7.34,4.33H4.68L8.26,10,4.4,16.08H7.1l1.69-2.83c.38-.63.72-1.22,1-1.78l.25-.46h0l.49.92c.24.45.48.89.74,1.32L13,16.08h2.61L11.84,10l1.77-2.84,1.77-2.85Zm4.77,13.75H17v-.15c0-.4.05-.64.16-.72a4.42,4.42,0,0,1,1.16-.31,3.3,3.3,0,0,0,1.54-.56A1.84,1.84,0,0,0,20.15,15a1.78,1.78,0,0,0-.44-1.41A2.8,2.8,0,0,0,18,13.25a2.71,2.71,0,0,0-1.69.37,1.83,1.83,0,0,0-.44,1.43v.23H17v-.23q0-.63.18-.78a1.62,1.62,0,0,1,.88-.15,1.59,1.59,0,0,1,.88.15q.18.15.18.75t-.18.75a3.58,3.58,0,0,1-1.18.33,3.33,3.33,0,0,0-1.52.51,1.57,1.57,0,0,0-.32,1.18v1.15h4.27v-.86Z" transform="translate(-4.4 -4.33)"/></g></svg>',
  superscript: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.75 15.42"><g><path d="M12,13.14l3.61-5.81H12.94L11.33,10c-.28.46-.51.88-.69,1.25l-.45.83h0l-.45-.85c-.22-.41-.45-.82-.71-1.24L7.4,7.33H4.68l3.66,5.81L4.4,19.33H7.14l1.74-2.87q.58-1,1-1.83l.25-.48h0l.51.94.75,1.37,1.72,2.87h2.67l-1.92-3.09c-1.12-1.8-1.76-2.83-1.92-3.1Zm4.84-4.41h0l0,.15h3.27v.86H15.77V8.58a1.66,1.66,0,0,1,.33-1.22,3.51,3.51,0,0,1,1.56-.51,3.68,3.68,0,0,0,1.21-.34c.13-.1.19-.36.19-.77S19,5.07,18.87,5A1.63,1.63,0,0,0,18,4.8a1.58,1.58,0,0,0-.91.17c-.13.11-.19.38-.19.8V6H15.78V5.76a1.87,1.87,0,0,1,.45-1.47A2.84,2.84,0,0,1,18,3.91a2.8,2.8,0,0,1,1.72.38,1.84,1.84,0,0,1,.45,1.44,1.91,1.91,0,0,1-.34,1.35,3.24,3.24,0,0,1-1.58.57A3.69,3.69,0,0,0,17,8c-.12.1-.17.35-.17.76Z" transform="translate(-4.4 -3.91)"/></g></svg>',
  erase: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 13.76"><g><path d="M13.69,17.2h6.46v1.31H8.56L4.41,14.37,14,4.75l6.06,6.06L16.89,14l-3.2,3.19Zm-4.61,0h2.77L14.09,15,9.88,10.75,6.25,14.38l1.41,1.41c.84.82,1.31,1.29,1.42,1.41Z" transform="translate(-4.41 -4.75)"/></g></svg>',
  indent: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 12.36"><g><path d="M4.68,14.45a.27.27,0,0,1-.19-.08.3.3,0,0,1-.08-.21V9.1a.27.27,0,0,1,.08-.19.28.28,0,0,1,.2-.08.25.25,0,0,1,.19.07l2.54,2.54a.29.29,0,0,1,0,.4L4.88,14.36a.24.24,0,0,1-.2.09Zm15.19,1.12a.27.27,0,0,1,.19.08.25.25,0,0,1,.08.19v1.69a.27.27,0,0,1-.08.19.25.25,0,0,1-.19.08H4.68a.27.27,0,0,1-.19-.08.25.25,0,0,1-.08-.19V15.84a.27.27,0,0,1,.27-.27H19.87Zm0-3.38a.27.27,0,0,1,.19.08.28.28,0,0,1,.08.21v1.68a.32.32,0,0,1-.08.21.25.25,0,0,1-.19.08H10.31a.27.27,0,0,1-.19-.08.3.3,0,0,1-.08-.21V12.48a.32.32,0,0,1,.08-.21.24.24,0,0,1,.19-.08h9.56Zm0-3.37a.27.27,0,0,1,.19.08.25.25,0,0,1,.08.19v1.69a.27.27,0,0,1-.08.19.25.25,0,0,1-.19.08H10.31a.27.27,0,0,1-.27-.27V9.1a.27.27,0,0,1,.27-.27h9.56Zm.2-3.29a.28.28,0,0,1,.08.2V7.41a.32.32,0,0,1-.08.21.25.25,0,0,1-.19.08H4.68a.27.27,0,0,1-.19-.08.3.3,0,0,1-.08-.21V5.73a.32.32,0,0,1,.08-.21.25.25,0,0,1,.19-.08H19.87a.28.28,0,0,1,.2.09Z" transform="translate(-4.41 -5.44)"/></g></svg>',
  outdent: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 12.36"><g><path d="M19.87,15.57a.27.27,0,0,1,.19.08.25.25,0,0,1,.08.19v1.69a.27.27,0,0,1-.08.19.25.25,0,0,1-.19.08H4.68a.27.27,0,0,1-.19-.08.25.25,0,0,1-.08-.19V15.84a.27.27,0,0,1,.27-.27H19.87ZM7.5,14.45a.25.25,0,0,1-.2-.09L4.76,11.84a.29.29,0,0,1,0-.4L7.3,8.9a.29.29,0,0,1,.4,0,.31.31,0,0,1,.07.2v5.06a.32.32,0,0,1-.08.21.26.26,0,0,1-.19.08ZM19.87,8.82a.27.27,0,0,1,.19.08.25.25,0,0,1,.08.19v1.69a.27.27,0,0,1-.08.19.25.25,0,0,1-.19.08H10.31a.27.27,0,0,1-.27-.27V9.1a.27.27,0,0,1,.27-.27h9.56Zm0,3.37a.27.27,0,0,1,.19.08.28.28,0,0,1,.08.21v1.68a.32.32,0,0,1-.08.21.25.25,0,0,1-.19.08H10.31a.27.27,0,0,1-.19-.08.3.3,0,0,1-.08-.21V12.48a.32.32,0,0,1,.08-.21.24.24,0,0,1,.19-.08h9.56Zm.2-6.66a.28.28,0,0,1,.08.2V7.41a.32.32,0,0,1-.08.21.25.25,0,0,1-.19.08H4.68a.27.27,0,0,1-.19-.08.3.3,0,0,1-.08-.21V5.73a.32.32,0,0,1,.08-.21.25.25,0,0,1,.19-.08H19.87a.28.28,0,0,1,.2.09Z" transform="translate(-4.41 -5.44)"/></g></svg>',
  expansion: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 15.74"><g><path d="M11.8,13.06l-5.1,5.1H9.51V19.5H4.41V14.4H5.75v2.81L8.3,14.66q2.25-2.23,2.55-2.55Zm8.35-9.3v5.1H18.81V6.05l-5.1,5.1-1-1,5.1-5.1H15.05V3.76Z" transform="translate(-4.41 -3.76)"/></g></svg>',
  reduction: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 15.74"><g><path d="M14.91,10h2.87v1.38H12.55V6.12h1.38V9l5.24-5.24.48.49.49.48ZM6.77,11.92H12v5.23H10.62V14.26L5.37,19.5l-1-1L9.63,13.3H6.77Z" transform="translate(-4.4 -3.76)"/></g></svg>',
  code_view: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.73 11.8"><g><path d="M8.09,7.94a.76.76,0,0,1,.53.22.72.72,0,0,1,.21.52.76.76,0,0,1-.22.54L6.18,11.63l2.43,2.44a.69.69,0,0,1,.2.51.66.66,0,0,1-.21.51.75.75,0,0,1-.51.22.63.63,0,0,1-.51-.21h0L4.63,12.15a.7.7,0,0,1-.22-.53.67.67,0,0,1,.25-.55L7.57,8.16a.82.82,0,0,1,.52-.22Zm12.05,3.69a.7.7,0,0,1-.23.52L17,15.1h0a.66.66,0,0,1-.51.21.73.73,0,0,1-.51-.22.75.75,0,0,1-.22-.51.63.63,0,0,1,.21-.51l2.43-2.44L15.92,9.22a.73.73,0,0,1-.22-.53A.74.74,0,0,1,17,8.18h0l2.91,2.91a.67.67,0,0,1,.27.54Zm-5.9-5.9a.73.73,0,0,1,.61.32.71.71,0,0,1,.07.68L11,17a1,1,0,0,1-.22.32.6.6,0,0,1-.35.16.75.75,0,0,1-.69-.26.69.69,0,0,1-.12-.72L13.56,6.23a.75.75,0,0,1,.26-.35.74.74,0,0,1,.42-.15Z" transform="translate(-4.41 -5.73)"/></g></svg>',
  preview: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.65 15.66"><g><path d="M16.19,14.43l2.49,2.49a.73.73,0,0,1,.21.52.67.67,0,0,1-.22.51.7.7,0,0,1-.52.22.69.69,0,0,1-.51-.21l-2.49-2.48a5.17,5.17,0,0,1-1.34.69,4.64,4.64,0,0,1-1.48.24,4.78,4.78,0,1,1,0-9.56,4.79,4.79,0,0,1,1.84.36,4.9,4.9,0,0,1,1.56,1,4.77,4.77,0,0,1,.46,6.18ZM10,14a3.3,3.3,0,0,0,2.34.93A3.37,3.37,0,0,0,14.7,14a3.3,3.3,0,0,0-1.08-5.41,3.47,3.47,0,0,0-2.56,0A3,3,0,0,0,10,9.28,3.31,3.31,0,0,0,10,14ZM16,4a3.86,3.86,0,0,1,2.77,1.14A3.9,3.9,0,0,1,20,7.85v4a.77.77,0,0,1-.22.53.7.7,0,0,1-.52.21.72.72,0,0,1-.74-.74v-4a2.46,2.46,0,0,0-.72-1.73A2.37,2.37,0,0,0,16,5.45H8.53A2.42,2.42,0,0,0,6.08,7.89v7.52a2.41,2.41,0,0,0,.71,1.73,2.46,2.46,0,0,0,1.74.72h4.08a.73.73,0,0,1,0,1.46H8.53a3.85,3.85,0,0,1-2.78-1.14A3.93,3.93,0,0,1,4.6,15.4V7.87A3.94,3.94,0,0,1,5.76,5.09,3.88,3.88,0,0,1,8.54,4H16Z" transform="translate(-4.45 -3.8)"/></g></svg>',
  print: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16.05 16.04"><g><path d="M19.76,15.84a1.29,1.29,0,0,0,.39-.92V8.35A2.05,2.05,0,0,0,19.57,7a1.93,1.93,0,0,0-1.38-.57H6.37a1.95,1.95,0,0,0-2,2v6.56a1.23,1.23,0,0,0,.38.92,1.35,1.35,0,0,0,.93.38h2V14.9l-2,0V8.35a.67.67,0,0,1,.18-.47.62.62,0,0,1,.48-.19H18.18a.6.6,0,0,1,.46.19.66.66,0,0,1,.18.47V14.9h-2v1.32h2A1.35,1.35,0,0,0,19.76,15.84ZM17.52,7.69V5.06a1.31,1.31,0,0,0-.38-.92,1.34,1.34,0,0,0-.94-.38H8.34A1.3,1.3,0,0,0,7,5.06V7.69H8.34V5.06h7.87V7.69h1.31ZM8.34,12.93h7.87l0,5.26H8.34V12.93Zm7.87,5.26v0Zm.65,1.31a.6.6,0,0,0,.46-.19.72.72,0,0,0,.2-.47V12.29a.74.74,0,0,0-.2-.47.6.6,0,0,0-.46-.19H7.68a.6.6,0,0,0-.46.19.72.72,0,0,0-.2.47v6.55a.74.74,0,0,0,.2.47.6.6,0,0,0,.46.19h9.18ZM16.67,9.28a.7.7,0,0,0-.94,0,.63.63,0,0,0-.18.46.67.67,0,0,0,.18.47.68.68,0,0,0,.94,0,.66.66,0,0,0,.18-.47A.58.58,0,0,0,16.67,9.28Z" transform="translate(-4.25 -3.61)"/></g></svg>',
  template: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.27 15.64"><g><path d="M18.18,19.16a1,1,0,0,0,1-1V5.73a1,1,0,0,0-1-1h-2v1h2V18.19H6.37V5.73h2v-1h-2A.94.94,0,0,0,5.68,5a1,1,0,0,0-.29.7V18.18a.94.94,0,0,0,.29.69,1,1,0,0,0,.69.29H18.18ZM9.82,10.31h4.92a.49.49,0,0,0,.35-.15.47.47,0,0,0,.15-.35.49.49,0,0,0-.15-.35.47.47,0,0,0-.35-.15H9.82a.49.49,0,0,0-.35.15.47.47,0,0,0-.15.35.49.49,0,0,0,.15.35.47.47,0,0,0,.35.15Zm5.9,4.92H8.83a.49.49,0,0,0-.35.15.47.47,0,0,0-.15.35.49.49,0,0,0,.15.35.47.47,0,0,0,.35.15h6.89a.49.49,0,0,0,.35-.15.47.47,0,0,0,.15-.35.51.51,0,0,0-.5-.5ZM7.36,12.77a.49.49,0,0,0,.15.35.47.47,0,0,0,.35.15h8.85a.49.49,0,0,0,.35-.15.47.47,0,0,0,.15-.35.49.49,0,0,0-.15-.35.47.47,0,0,0-.35-.15H7.85a.49.49,0,0,0-.35.15.52.52,0,0,0-.14.35Z" transform="translate(-5.14 -3.77)"/><path d="M14.24,6.71a1,1,0,0,0,1-1,1,1,0,0,0-1-1,1,1,0,0,0-1-1h-2a.94.94,0,0,0-.69.28,1,1,0,0,0-.29.7A.94.94,0,0,0,9.62,5a.91.91,0,0,0-.29.69,1,1,0,0,0,.29.7,1,1,0,0,0,.69.29h3.93Z" transform="translate(-5.14 -3.77)"/></g></svg>',
  line_height: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.76 13.56"><g><path d="M4.4,4.88V8.26a2,2,0,0,0,.5.39s.1,0,.18-.12a.62.62,0,0,0,.17-.28c.06-.19.13-.44.21-.74s.14-.52.19-.66a.58.58,0,0,1,.21-.3,2.41,2.41,0,0,1,.63-.21,3.83,3.83,0,0,1,.88-.12,9.15,9.15,0,0,1,1.31.06.16.16,0,0,1,.11,0,.26.26,0,0,1,.06.14,4,4,0,0,1,0,.49v2l.05,3.77c0,1.41,0,2.68-.05,3.81a1.79,1.79,0,0,1-.11.49,10.68,10.68,0,0,1-1.4.45,1.12,1.12,0,0,0-.69.43v.31l0,.22.61,0c.85-.08,1.54-.12,2.06-.12a19.76,19.76,0,0,1,2.09.08,15.08,15.08,0,0,0,1.64.08,1.4,1.4,0,0,0,.29,0,1.58,1.58,0,0,0,0-.26l-.05-.43a2.26,2.26,0,0,0-.43-.17l-.77-.22-.15,0a2.55,2.55,0,0,1-.78-.28,2.56,2.56,0,0,1-.11-.75l0-1.29,0-3.15V7.53a10.51,10.51,0,0,1,.06-1.2,3.83,3.83,0,0,1,.6,0l1.88,0a2.18,2.18,0,0,1,.38,0,.45.45,0,0,1,.23.17.9.9,0,0,1,.05.25c0,.16.06.35.1.58a3.33,3.33,0,0,0,.14.55A6.39,6.39,0,0,0,15,9a2.91,2.91,0,0,0,.6-.15,2.77,2.77,0,0,0,0-.46l0-.51,0-2.95-.25,0-.38,0L15,4.94a.71.71,0,0,1-.18.15.45.45,0,0,1-.25.07l-.29,0H8.75l-.15,0H7.45a17,17,0,0,1-1.86,0L5.36,5l-.25-.13ZM19.75,16.14h-.69v-9h.69A.4.4,0,0,0,20.13,7c.06-.11,0-.24-.1-.39L18.92,5.15a.52.52,0,0,0-.86,0L17,6.58c-.12.15-.16.28-.1.39s.18.16.38.16h.69v9h-.69a.4.4,0,0,0-.38.16c-.06.11,0,.24.1.39l1.11,1.43a.52.52,0,0,0,.86,0L20,16.69c.12-.15.16-.28.1-.39a.4.4,0,0,0-.38-.16Z" transform="translate(-4.4 -4.86)"/></g></svg>',
  paragraph_style: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11.81 15.74"><g><path d="M18.18,3.76v2h-2V19.5h-2V5.73h-2V19.5h-2V11.63a3.94,3.94,0,0,1,0-7.87h7.87Z" transform="translate(-6.37 -3.76)"/></g></svg>',
  text_style: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.76 15.74"><g><path d="M17.68,6.71a2.22,2.22,0,0,0,1.06-.22.74.74,0,0,0,.42-.7.73.73,0,0,0-.08-.33.67.67,0,0,0-.17-.22,1,1,0,0,0-.31-.15L18.26,5l-.45-.09A15.27,15.27,0,0,0,13.26,5V4.74c0-.66-.63-1-1.92-1-.24,0-.43.15-.59.46a4,4,0,0,0-.36,1.14h0v0a26.45,26.45,0,0,1-3.5.35A2,2,0,0,0,5.77,6a.84.84,0,0,0-.37.79,2.14,2.14,0,0,0,.41,1.29,1.23,1.23,0,0,0,1.05.63,16.62,16.62,0,0,0,3.29-.45l-.34,3.35c-.16,1.61-.29,2.9-.37,3.86s-.12,1.66-.12,2.09l0,.65a5.15,5.15,0,0,0,.05.6,1.28,1.28,0,0,0,.16.54.34.34,0,0,0,.28.18,1.16,1.16,0,0,0,.79-.46,3.66,3.66,0,0,0,.68-1,22.08,22.08,0,0,0,1-4.33q.49-3.1.78-6.15a24.69,24.69,0,0,1,4.62-.84Z" transform="translate(-5.4 -3.76)"/></g></svg>',
  save: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 15.74"><g><path d="M18.53,19.5l.2-.05A1.78,1.78,0,0,0,20.13,18l0-.09V7.14a2,2,0,0,0-.28-.64A3.18,3.18,0,0,0,19.43,6c-.5-.52-1-1-1.55-1.54A2.59,2.59,0,0,0,17.37,4a1.83,1.83,0,0,0-.61-.25H6l-.21,0a1.78,1.78,0,0,0-1.4,1.49l0,.1V17.87a2.49,2.49,0,0,0,.09.37,1.79,1.79,0,0,0,1.44,1.23l.09,0Zm-6.25-.6H6.92a.61.61,0,0,1-.68-.48.78.78,0,0,1,0-.22V12.3a.62.62,0,0,1,.69-.68H17.64a.62.62,0,0,1,.69.69V18.2a.64.64,0,0,1-.71.69H12.28ZM12,9.81H8.15a.63.63,0,0,1-.72-.71v-4a.64.64,0,0,1,.72-.72h7.66a.64.64,0,0,1,.72.72v4a.65.65,0,0,1-.74.72ZM13.5,5V9.18h1.78V5Z" transform="translate(-4.41 -3.76)"/></g></svg>',
  blockquote: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 475.082 475.081"><g><path d="M164.45,219.27h-63.954c-7.614,0-14.087-2.664-19.417-7.994c-5.327-5.33-7.994-11.801-7.994-19.417v-9.132c0-20.177,7.139-37.401,21.416-51.678c14.276-14.272,31.503-21.411,51.678-21.411h18.271c4.948,0,9.229-1.809,12.847-5.424c3.616-3.617,5.424-7.898,5.424-12.847V54.819c0-4.948-1.809-9.233-5.424-12.85c-3.617-3.612-7.898-5.424-12.847-5.424h-18.271c-19.797,0-38.684,3.858-56.673,11.563c-17.987,7.71-33.545,18.132-46.68,31.267c-13.134,13.129-23.553,28.688-31.262,46.677C3.855,144.039,0,162.931,0,182.726v200.991c0,15.235,5.327,28.171,15.986,38.834c10.66,10.657,23.606,15.985,38.832,15.985h109.639c15.225,0,28.167-5.328,38.828-15.985c10.657-10.663,15.987-23.599,15.987-38.834V274.088c0-15.232-5.33-28.168-15.994-38.832C192.622,224.6,179.675,219.27,164.45,219.27z"/><path d="M459.103,235.256c-10.656-10.656-23.599-15.986-38.828-15.986h-63.953c-7.61,0-14.089-2.664-19.41-7.994c-5.332-5.33-7.994-11.801-7.994-19.417v-9.132c0-20.177,7.139-37.401,21.409-51.678c14.271-14.272,31.497-21.411,51.682-21.411h18.267c4.949,0,9.233-1.809,12.848-5.424c3.613-3.617,5.428-7.898,5.428-12.847V54.819c0-4.948-1.814-9.233-5.428-12.85c-3.614-3.612-7.898-5.424-12.848-5.424h-18.267c-19.808,0-38.691,3.858-56.685,11.563c-17.984,7.71-33.537,18.132-46.672,31.267c-13.135,13.129-23.559,28.688-31.265,46.677c-7.707,17.987-11.567,36.879-11.567,56.674v200.991c0,15.235,5.332,28.171,15.988,38.834c10.657,10.657,23.6,15.985,38.828,15.985h109.633c15.229,0,28.171-5.328,38.827-15.985c10.664-10.663,15.985-23.599,15.985-38.834V274.088C475.082,258.855,469.76,245.92,459.103,235.256z"/></g></svg>',
  arrow_down: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.73 8.67"><g><path d="M18.79,7.52a.8.8,0,0,1,.56-.23.82.82,0,0,1,.79.79.8.8,0,0,1-.23.56l-7.07,7.07a.79.79,0,0,1-.57.25.77.77,0,0,1-.57-.25h0L4.64,8.65a.8.8,0,0,1-.23-.57.82.82,0,0,1,.79-.79.8.8,0,0,1,.56.23L12.28,14l3.26-3.26,3.25-3.26Z" transform="translate(-4.41 -7.29)"/></g></svg>',
  align_justify: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 13.77"><g><path d="M4.41,4.74v2H20.15v-2H4.41Zm0,5.9H20.15v-2H4.41v2Zm0,3.94H20.15v-2H4.41v2Zm0,3.93h7.87v-2H4.41v2Z" transform="translate(-4.41 -4.74)"/></g></svg>',
  align_left: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 13.77"><g><path d="M4.41,4.74v2H20.15v-2H4.41Zm11.8,3.94H4.41v2H16.22v-2Zm-11.8,5.9H18.18v-2H4.41v2Zm0,3.93h9.84v-2H4.41v2Z" transform="translate(-4.41 -4.74)"/></g></svg>',
  align_right: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 13.77"><g><path d="M4.41,4.74v2H20.15v-2H4.41Zm3.93,5.9H20.15v-2H8.34v2Zm-2,3.94H20.14v-2H6.37v2Zm3.94,3.93h9.84v-2H10.31v2Z" transform="translate(-4.41 -4.74)"/></g></svg>',
  align_center: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 13.77"><g><path d="M4.41,4.74v2H20.15v-2H4.41Zm2,3.94v2H18.18v-2H6.37Zm-1,5.9H19.16v-2H5.39v2Zm2,3.93H17.2v-2H7.36v2Z" transform="translate(-4.41 -4.74)"/></g></svg>',
  font_color: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 14.61"><g><path d="M18.5,15.57,14.28,4.32h-3.4L6.65,15.57h3l.8-2.26h4.23l.8,2.26h3ZM14,11.07H11.14L12.54,7,13.25,9c.41,1.18.64,1.86.7,2ZM4.41,16.69v2.24H20.15V16.69H4.41Z" transform="translate(-4.41 -4.32)"/></g></svg>',
  highlight_color: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.66 15.74"><g><path d="M12.32,9.31,13.38,13H11.21l.52-1.83q.46-1.61.54-1.83ZM4.44,3.76H20.1V19.5H4.44V3.76ZM14.71,17.32h2.63L13.7,6H10.89L7.26,17.32H9.89l.63-2.24h3.55l.32,1.12c.18.65.29,1,.32,1.12Z" transform="translate(-4.44 -3.76)"/></g></svg>',
  list_bullets: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 12.37"><g><path d="M7.77,16.12a1.59,1.59,0,0,0-.49-1.18,1.62,1.62,0,0,0-1.19-.49,1.68,1.68,0,1,0,0,3.36,1.67,1.67,0,0,0,1.68-1.69Zm0-4.48A1.67,1.67,0,0,0,6.09,10,1.68,1.68,0,0,0,4.9,12.82a1.62,1.62,0,0,0,1.19.49,1.67,1.67,0,0,0,1.68-1.67Zm12.38,3.64a.27.27,0,0,0-.08-.19.28.28,0,0,0-.2-.09H9.19a.28.28,0,0,0-.2.08.29.29,0,0,0-.08.19V17a.27.27,0,0,0,.28.28H19.87a.27.27,0,0,0,.19-.08.24.24,0,0,0,.08-.2V15.28ZM7.77,7.13a1.63,1.63,0,0,0-.49-1.2,1.61,1.61,0,0,0-1.19-.49,1.61,1.61,0,0,0-1.19.49,1.71,1.71,0,0,0,0,2.4,1.62,1.62,0,0,0,1.19.49,1.61,1.61,0,0,0,1.19-.49,1.63,1.63,0,0,0,.49-1.2Zm12.38,3.66a.28.28,0,0,0-.08-.2.29.29,0,0,0-.19-.08H9.19a.27.27,0,0,0-.28.28v1.69a.27.27,0,0,0,.08.19.24.24,0,0,0,.2.08H19.87a.27.27,0,0,0,.19-.08.25.25,0,0,0,.08-.19V10.79Zm0-4.5a.27.27,0,0,0-.08-.19A.25.25,0,0,0,19.88,6H9.19A.28.28,0,0,0,9,6.1a.26.26,0,0,0-.08.19V8A.27.27,0,0,0,9,8.17a.24.24,0,0,0,.2.08H19.87a.27.27,0,0,0,.19-.08A.25.25,0,0,0,20.14,8V6.29Z" transform="translate(-4.41 -5.44)"/></g></svg>',
  list_number: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.69 15.74"><g><path d="M7.66,18a1.24,1.24,0,0,0-.26-.78,1.17,1.17,0,0,0-.72-.42l.85-1V15H4.58v1.34h.94v-.46l.85,0h0c-.11.11-.22.23-.32.35s-.23.27-.37.47L5.39,17l.23.51c.61-.05.92.11.92.49a.42.42,0,0,1-.18.37.79.79,0,0,1-.45.12A1.41,1.41,0,0,1,5,18.15l-.51.77A2.06,2.06,0,0,0,6,19.5a1.8,1.8,0,0,0,1.2-.41A1.38,1.38,0,0,0,7.66,18Zm0-5.54H6.75V13H5.63A.72.72,0,0,1,6,12.51a5.45,5.45,0,0,1,.66-.45,2.71,2.71,0,0,0,.67-.57,1.19,1.19,0,0,0,.31-.81,1.29,1.29,0,0,0-.45-1,1.86,1.86,0,0,0-2-.11,1.51,1.51,0,0,0-.62.7l.74.52A.87.87,0,0,1,6,10.28a.51.51,0,0,1,.35.12.42.42,0,0,1,.13.33.55.55,0,0,1-.21.4,3,3,0,0,1-.5.38c-.19.13-.39.27-.58.42a2,2,0,0,0-.5.6,1.63,1.63,0,0,0-.21.81,3.89,3.89,0,0,0,.05.48h3.2V12.44Zm12.45,2.82a.27.27,0,0,0-.08-.19.28.28,0,0,0-.21-.08H9.1a.32.32,0,0,0-.21.08.24.24,0,0,0-.08.2V17a.27.27,0,0,0,.08.19.3.3,0,0,0,.21.08H19.83a.32.32,0,0,0,.21-.08.25.25,0,0,0,.08-.19V15.26ZM7.69,7.32h-1V3.76H5.8L4.6,4.88l.63.68a1.85,1.85,0,0,0,.43-.48h0l0,2.24H4.74V8.2h3V7.32Zm12.43,3.42a.27.27,0,0,0-.08-.19.28.28,0,0,0-.21-.08H9.1a.32.32,0,0,0-.21.08.24.24,0,0,0-.08.2v1.71a.27.27,0,0,0,.08.19.3.3,0,0,0,.21.08H19.83a.32.32,0,0,0,.21-.08.25.25,0,0,0,.08-.19V10.74Zm0-4.52A.27.27,0,0,0,20,6,.28.28,0,0,0,19.83,6H9.1A.32.32,0,0,0,8.89,6a.24.24,0,0,0-.08.19V7.93a.27.27,0,0,0,.08.19.32.32,0,0,0,.21.08H19.83A.32.32,0,0,0,20,8.12a.26.26,0,0,0,.08-.2V6.22Z" transform="translate(-4.43 -3.76)"/></g></svg>',
  table: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 15.74"><g><path d="M4.41,8.05V3.76H8.7V8.05H4.41Zm5.71,0V3.76h4.3V8.05h-4.3Zm5.74-4.29h4.29V8.05H15.86V3.76Zm-11.45,10V9.48H8.7v4.3H4.41Zm5.71,0V9.48h4.3v4.3h-4.3Zm5.74,0V9.48h4.29v4.3H15.86ZM4.41,19.5V15.21H8.7V19.5H4.41Zm5.71,0V15.21h4.3V19.5h-4.3Zm5.74,0V15.21h4.29V19.5H15.86Z" transform="translate(-4.41 -3.76)"/></g></svg>',
  horizontal_rule: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 2.24"><g><path d="M20.15,12.75V10.51H4.41v2.24H20.15Z" transform="translate(-4.41 -10.51)"/></g></svg>',
  show_blocks: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.66 15.67"><g><path d="M19.72,5.58a1.64,1.64,0,0,0-1.64-1.64H6.23a1.62,1.62,0,0,0-1.16.48,1.63,1.63,0,0,0-.48,1.16V9.63a1.6,1.6,0,0,0,.48,1.16,1.62,1.62,0,0,0,1.16.47H18.09a1.67,1.67,0,0,0,1.16-.47,1.62,1.62,0,0,0,.48-1.16V5.58Zm-.94,4.05a.68.68,0,0,1-.7.7H6.23a.66.66,0,0,1-.48-.2.74.74,0,0,1-.21-.5V5.58a.66.66,0,0,1,.2-.48.71.71,0,0,1,.48-.21H18.08a.74.74,0,0,1,.5.21.66.66,0,0,1,.2.48ZM6.48,7.72a.21.21,0,0,0,.17-.07.22.22,0,0,0,.07-.17V7.06a1.27,1.27,0,0,1,.11-.52.37.37,0,0,1,.36-.23H8.77A.25.25,0,0,0,9,6.17a.19.19,0,0,0,0-.23.27.27,0,0,0-.2-.12H7.19a.88.88,0,0,0-.72.39,1.51,1.51,0,0,0-.23.85v.42a.24.24,0,0,0,.24.24Zm-.19.81a.21.21,0,0,0,.17-.07.26.26,0,0,0,.07-.17.24.24,0,0,0-.24-.24.2.2,0,0,0-.16.09.2.2,0,0,0-.07.16.22.22,0,0,0,.07.17.23.23,0,0,0,.16.06Zm8.46,5.1a1.63,1.63,0,0,0-.47-1.16A1.61,1.61,0,0,0,13.12,12H6.23a1.6,1.6,0,0,0-1.16.46,1.62,1.62,0,0,0-.48,1.16v4.05a1.64,1.64,0,0,0,1.64,1.64h6.89a1.6,1.6,0,0,0,1.16-.48,1.62,1.62,0,0,0,.47-1.16Zm-.94,4a.7.7,0,0,1-.2.49.65.65,0,0,1-.5.2H6.23a.66.66,0,0,1-.48-.2.75.75,0,0,1-.21-.49v-4a.74.74,0,0,1,.21-.5.66.66,0,0,1,.48-.2h6.89a.68.68,0,0,1,.7.7v4Zm6.15,0v-4a1.6,1.6,0,0,0-.48-1.16A1.67,1.67,0,0,0,18.32,12H17.1a1.63,1.63,0,0,0-1.16.47,1.61,1.61,0,0,0-.47,1.16v4a1.67,1.67,0,0,0,.47,1.16,1.62,1.62,0,0,0,1.16.48h1.22A1.64,1.64,0,0,0,20,17.68Zm-.94-4v4a.75.75,0,0,1-.21.49.62.62,0,0,1-.48.2H17.11a.69.69,0,0,1-.5-.2.7.7,0,0,1-.2-.49v-4a.68.68,0,0,1,.7-.7h1.22a.66.66,0,0,1,.48.2.72.72,0,0,1,.21.5Z" transform="translate(-4.44 -3.79)"/></g></svg>',
  cancel: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 15.74"><g><path d="M14.15,11.63l5.61,5.61a1.29,1.29,0,0,1,.38.93,1.27,1.27,0,0,1-.4.93,1.25,1.25,0,0,1-.92.4,1.31,1.31,0,0,1-.94-.4l-5.61-5.61L6.67,19.1a1.31,1.31,0,0,1-.94.4,1.24,1.24,0,0,1-.92-.4,1.27,1.27,0,0,1-.4-.93,1.33,1.33,0,0,1,.38-.93l5.61-5.63L4.79,6a1.26,1.26,0,0,1-.38-.93,1.22,1.22,0,0,1,.4-.92,1.28,1.28,0,0,1,.92-.39,1.38,1.38,0,0,1,.94.38l5.61,5.61,5.61-5.61a1.33,1.33,0,0,1,.94-.38,1.26,1.26,0,0,1,.92.39,1.24,1.24,0,0,1,.4.92,1.29,1.29,0,0,1-.39.93L17,8.81l-2.8,2.82Z" transform="translate(-4.41 -3.76)"/></g></svg>',
  image: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.75 15.77"><g><path d="M8.77,8.72a.88.88,0,0,1-.61-.27.82.82,0,0,1-.25-.61.89.89,0,0,1,.25-.62A.82.82,0,0,1,8.77,7a.81.81,0,0,1,.61.25.83.83,0,0,1,.27.62.81.81,0,0,1-.25.61.91.91,0,0,1-.63.27Zm9.62-5a1.74,1.74,0,0,1,1.76,1.76V17.76a1.74,1.74,0,0,1-1.76,1.76H6.16A1.74,1.74,0,0,1,4.4,17.76V5.51A1.74,1.74,0,0,1,6.16,3.75H18.39Zm0,1.75H6.16v8L8.53,11.8a.94.94,0,0,1,.54-.17.86.86,0,0,1,.54.2L11.09,13l3.64-4.55a.78.78,0,0,1,.34-.25.85.85,0,0,1,.42-.07.89.89,0,0,1,.39.12.78.78,0,0,1,.28.29l2.24,3.67V5.51Zm0,12.24V15.6L15.3,10.53,11.89,14.8a.89.89,0,0,1-.59.32.82.82,0,0,1-.64-.18L9,13.62,6.16,15.74v2Z" transform="translate(-4.4 -3.75)"/></g></svg>',
  video: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 14.55"><g><path d="M20.15,10.26V18.9l-3.94-1.57v1.2H4.41V10.66H16.22v1.23l2-.81,2-.82ZM14.64,17h0V12.54h0v-.31H6V17h8.67Zm3.94-.37v-4l-2.37,1v2l1.18.48,1.19.48ZM7.94,9.86A2.77,2.77,0,0,1,5.19,7.11a2.76,2.76,0,0,1,5.51,0A2.78,2.78,0,0,1,7.94,9.86Zm0-3.93a1.21,1.21,0,0,0-.83.35,1.15,1.15,0,0,0-.34.84A1.09,1.09,0,0,0,7.11,8,1.15,1.15,0,0,0,8,8.28,1.13,1.13,0,0,0,9.11,7.12,1.16,1.16,0,0,0,7.94,5.93Zm5.9,3.93a2.34,2.34,0,0,1-1.67-.68,2.3,2.3,0,0,1-.68-1.67,2.35,2.35,0,0,1,4-1.67,2.37,2.37,0,0,1,0,3.34,2.33,2.33,0,0,1-1.68.68Zm0-3.14a.75.75,0,1,0,.55.22.73.73,0,0,0-.55-.22Z" transform="translate(-4.41 -4.35)"/></g></svg>',
  link: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 15.72"><g><path d="M13.05,13.63a.24.24,0,0,1,.15.22L13.42,16a.19.19,0,0,1-.08.18l-2.12,2.14a4.08,4.08,0,0,1-1.29.85A4,4,0,0,1,4.71,17a3.92,3.92,0,0,1-.3-1.52A4,4,0,0,1,4.71,14a3.91,3.91,0,0,1,.87-1.3L7.7,10.56a.25.25,0,0,1,.2-.06l2.17.22a.21.21,0,0,1,.19.15.24.24,0,0,1,0,.25L7.12,14.23a1.81,1.81,0,0,0,0,2.58,1.78,1.78,0,0,0,1.29.52,1.74,1.74,0,0,0,1.28-.52L12.8,13.7a.24.24,0,0,1,.25-.07ZM19,4.92a4,4,0,0,1,0,5.66L16.86,12.7a.25.25,0,0,1-.17.08l-2.2-.23a.21.21,0,0,1-.19-.15.22.22,0,0,1,0-.25L17.44,9a1.81,1.81,0,0,0,0-2.58,1.78,1.78,0,0,0-1.29-.52,1.74,1.74,0,0,0-1.28.52L11.76,9.57a.21.21,0,0,1-.25,0,.24.24,0,0,1-.16-.21l-.22-2.17a.19.19,0,0,1,.08-.18l2.12-2.14a4.08,4.08,0,0,1,1.29-.85,4.05,4.05,0,0,1,3.06,0,3.85,3.85,0,0,1,1.3.85ZM5.84,9.82a.25.25,0,0,1-.18-.08.19.19,0,0,1-.07-.19l.11-.77a.2.2,0,0,1,.11-.17.24.24,0,0,1,.2,0l2.5.72a.25.25,0,0,1,.15.27.22.22,0,0,1-.23.21l-2.59,0Zm4.12-2-.73-2.5a.27.27,0,0,1,0-.2A.21.21,0,0,1,9.41,5L10.19,5a.25.25,0,0,1,.19,0,.23.23,0,0,1,.08.18l-.05,2.61a.2.2,0,0,1-.19.23h0A.22.22,0,0,1,10,7.85Zm8.76,5.58a.25.25,0,0,1,.18.08.23.23,0,0,1,.06.2l-.11.77a.25.25,0,0,1-.11.17.21.21,0,0,1-.12,0l-.08,0L16,14a.25.25,0,0,1-.15-.27.22.22,0,0,1,.22-.21l1.29,0,1.33,0Zm-4.12,2,.74,2.51a.28.28,0,0,1,0,.2.23.23,0,0,1-.18.11l-.8.11a.23.23,0,0,1-.17-.07.25.25,0,0,1-.08-.18l0-2.61a.22.22,0,0,1,.22-.22.21.21,0,0,1,.26.15Z" transform="translate(-4.41 -3.77)"/></g></svg>',
  math: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11.81 15.73"><g><path d="M17.19,5.73a1,1,0,0,0,.71-.29,1,1,0,0,0,.28-.7,1,1,0,0,0-1-1H7.35a1,1,0,0,0-1,1,.77.77,0,0,0,.13.47h0l4.58,6.43L6.68,17.81a1.25,1.25,0,0,0-.29.71.94.94,0,0,0,.28.7.92.92,0,0,0,.69.28H17.2a1,1,0,0,0,.71-.28,1,1,0,0,0,0-1.39.92.92,0,0,0-.71-.29H9.26l3.87-5.43a.86.86,0,0,0,0-.95L9.26,5.73h7.93Z" transform="translate(-6.38 -3.77)"/></g></svg>',
  unlink: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 15.72"><g><path d="M19,18.32a4,4,0,0,0,0-5.68L15.85,9.5l-1.17,1.55L17.57,14a2,2,0,0,1,.61,1.47,2.08,2.08,0,0,1-2.09,2.09,2,2,0,0,1-1.47-.61l-.38-.37-1.74,1,.8.78a4,4,0,0,0,5.68,0ZM8,9.77a2,2,0,0,1-1.27-1,1.89,1.89,0,0,1-.21-1.57A2.1,2.1,0,0,1,7.45,6,2,2,0,0,1,9,5.76L12.27,7.2l.49-2L9.48,3.9a4,4,0,0,0-3.06.41A3.82,3.82,0,0,0,4.56,6.73a3.8,3.8,0,0,0,.4,3A3.78,3.78,0,0,0,7.39,11.6l5.38,2,.49-2-2.64-.94L8,9.77Z" transform="translate(-4.41 -3.76)"/></g></svg>',
  table_header: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.75 15.74"><g><path d="M17,19.5v-.78H15.5v.78H17Zm-3,0v-.78H12.5v.78H14Zm-3,0v-.78H9.53v.78H11Zm-3,0v-.78H6.53v.78H8Zm10.55,0a1.73,1.73,0,0,0,.85-.35,1.67,1.67,0,0,0,.56-.76l-.71-.31a1.21,1.21,0,0,1-.35.4,1.34,1.34,0,0,1-.53.23l.08.38c.06.24.09.38.1.41Zm-13.7-.63.55-.55A.77.77,0,0,1,5.25,18a1.31,1.31,0,0,1-.06-.38v-.38H4.41v.38a2,2,0,0,0,.12.68,1.6,1.6,0,0,0,.35.57Zm15.27-2.12V15.26h-.78v1.49h.78Zm-15-1V14.23H4.41v1.49h.78Zm15-2V12.26h-.78v1.49h.78Zm-15-1V11.22H4.41v1.51h.78Zm15-2V9.26h-.78v1.51h.78Zm-15-1V8.17H4.41V9.74h.78Zm15-2V6.28h-.78V7.77h.78Zm-15-1.11V5.33L4.48,5.1a.77.77,0,0,0-.07.27,2.72,2.72,0,0,0,0,.28v1h.79ZM19.21,5l.63-.4A1.62,1.62,0,0,0,19.16,4a1.94,1.94,0,0,0-.91-.22v.78a1.31,1.31,0,0,1,.56.12.88.88,0,0,1,.4.36ZM6,4.54H7.78V3.76H6a.82.82,0,0,0-.28.06l.12.35c.07.21.1.33.11.36Zm10.8,0V3.76H15.28v.78h1.49Zm-3,0V3.76H12.28v.78h1.49Zm-3,0V3.76H9.28v.78h1.51ZM6,10.84h12.6V6.91H6Z" transform="translate(-4.4 -3.76)"/></g></svg>',
  merge_cell: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.76 15.74"><g><path d="M18.92,13.5h1.23v4.15A1.84,1.84,0,0,1,18.3,19.5H14V18.27H18.3a.6.6,0,0,0,.44-.18.59.59,0,0,0,.18-.44V13.5ZM18.3,3.76a1.84,1.84,0,0,1,1.85,1.85V9.82H18.92V5.6a.6.6,0,0,0-.18-.44A.59.59,0,0,0,18.3,5H14V3.76H18.3Zm1.85,8.51H15.6L17.26,14l-.86.86-3.14-3.17L16.4,8.51l.86.86L15.62,11h4.54v1.24Zm-13.9,6h4.27V19.5H6.25A1.84,1.84,0,0,1,4.4,17.65V13.5H5.63v4.15a.61.61,0,0,0,.62.62Zm0-14.51h4.27V5H6.25a.6.6,0,0,0-.44.18.57.57,0,0,0-.17.43V9.81H4.41V5.6A1.83,1.83,0,0,1,6.25,3.76Zm5,7.9L8.15,14.83,7.3,14,9,12.27H4.41V11H8.94L7.3,9.38,7.73,9l.43-.43Z" transform="translate(-4.4 -3.76)"/></g></svg>',
  split_cell: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.75 15.74"><g><path d="M10.37,12.25H6.74L8.4,13.94l-.87.86L4.41,11.63,7.53,8.5l.87.86L6.74,11h3.62v1.23Zm9.78-.61L17,14.81,16.13,14l1.66-1.69H14.16V11h3.63L16.13,9.37l.43-.43A5.24,5.24,0,0,1,17,8.51ZM18.9,8.22V5.61a.57.57,0,0,0-.18-.43A.65.65,0,0,0,18.29,5H12.88V18.28h5.41a.7.7,0,0,0,.44-.18.57.57,0,0,0,.18-.43V15h1.23v2.64a1.84,1.84,0,0,1-1.85,1.83h-12A1.84,1.84,0,0,1,4.94,19a1.81,1.81,0,0,1-.54-1.29V15H5.63v2.64a.57.57,0,0,0,.18.43.67.67,0,0,0,.44.18h5.41V5H6.25a.7.7,0,0,0-.44.18.56.56,0,0,0-.17.43V8.22H4.41V5.61A1.8,1.8,0,0,1,5,4.31a1.91,1.91,0,0,1,1.31-.55h12a1.89,1.89,0,0,1,1.31.55,1.8,1.8,0,0,1,.54,1.3V8.23H18.9Z" transform="translate(-4.4 -3.76)"/></g></svg>',
  caption: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 13.79"><g><path d="M4.41,18.52H20.15v-2H4.41ZM20,4.73H18.07V6h.65v.65H20V4.73ZM17,6V4.73H14.55V6H17ZM13.49,6V4.73H11V6h2.47ZM10,6V4.73H7.5V6H10ZM5.79,6h.65V4.73H4.5V6.67H5.8V6ZM4.5,11.34H5.79V8.48H4.5ZM6.44,13.8H5.79v-.65H4.5v1.94H6.44ZM17,15.09V13.8H14.55v1.29H17Zm-3.52,0V13.8H11v1.29h2.47Zm-3.53,0V13.8H7.5v1.29H10ZM20,13.16H18.72v.65h-.65V15.1H20Zm-1.29-1.82H20V8.48h-1.3v2.86Z" transform="translate(-4.41 -4.73)"/></g></svg>',
  edit: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 15.73"><g><path d="M7.51,5.68h6l1.52-1.57H6.94a2.4,2.4,0,0,0-1.79.82A2.8,2.8,0,0,0,4.41,6.8V17a2.55,2.55,0,0,0,.75,1.8A2.48,2.48,0,0,0,7,19.5H17.22a2.57,2.57,0,0,0,1.83-.74,2.52,2.52,0,0,0,.77-1.8V8.83l-1.58,1.54v6a1.54,1.54,0,0,1-1.53,1.53H7.51A1.54,1.54,0,0,1,6,16.41V7.21A1.52,1.52,0,0,1,7.51,5.68Zm5.63,7.47h0L10.7,10.74l-1,3.38,1.71-.48,1.7-.49Zm.34-.34h0l5.36-5.32L16.4,5.08,11,10.4l1.23,1.21,1.21,1.2ZM19.93,6.4a.82.82,0,0,0,.22-.48A.54.54,0,0,0,20,5.47L18.45,4A.67.67,0,0,0,18,3.77a.7.7,0,0,0-.48.21l-.74.72,2.44,2.43.37-.37.35-.36Z" transform="translate(-4.41 -3.77)"/></g></svg>',
  delete: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.73 15.74"><g><path d="M19.16,6.71a.94.94,0,0,0,.69-.28.91.91,0,0,0,.29-.68A1,1,0,0,0,19.85,5a.93.93,0,0,0-.69-.3H14.24A.94.94,0,0,0,14,4.06a.92.92,0,0,0-.7-.3h-2a1,1,0,0,0-.7.3.93.93,0,0,0-.28.68H5.39A.92.92,0,0,0,4.7,5a1,1,0,0,0-.29.71.91.91,0,0,0,.29.68,1,1,0,0,0,.69.28H19.16Zm-12.79,1a1,1,0,0,0-.7.3.94.94,0,0,0-.28.69v8.85A1.88,1.88,0,0,0,6,18.93a1.9,1.9,0,0,0,1.39.57H17.2a1.87,1.87,0,0,0,1.39-.58,1.91,1.91,0,0,0,.58-1.39V8.68A1,1,0,0,0,18.88,8a.89.89,0,0,0-.7-.29,1,1,0,0,0-.69.29.92.92,0,0,0-.29.68v7.87a1,1,0,0,1-1,1H8.34a.94.94,0,0,1-.69-.28,1,1,0,0,1-.29-.71V8.68a1,1,0,0,0-1-1Z" transform="translate(-4.41 -3.76)"/></g></svg>',
  modify: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.7 15.74"><g><path d="M19.79,15.23a.66.66,0,0,1,.3.38.59.59,0,0,1-.07.48l-.8,1.38a.66.66,0,0,1-.38.3.59.59,0,0,1-.48-.07l-.68-.38a4.55,4.55,0,0,1-1.34.77v.78a.64.64,0,0,1-.18.45.61.61,0,0,1-.45.18h-1.6a.6.6,0,0,1-.44-.18.66.66,0,0,1-.19-.45v-.78a4.36,4.36,0,0,1-1.32-.77l-.69.38a.58.58,0,0,1-.48.07.66.66,0,0,1-.38-.3l-.38-.66h.83a1.77,1.77,0,0,0,1.23-.52,1.72,1.72,0,0,0,.51-1.23v-.18a3,3,0,0,0,.49-.28l.15.09a1.83,1.83,0,0,0,.88.23A1.75,1.75,0,0,0,15.84,14l.88-1.52a1.7,1.7,0,0,0,.17-1.32,1.66,1.66,0,0,0-.3-.61,1.84,1.84,0,0,0-.51-.45l-.15-.09,0-.29,0-.28.15-.09a1,1,0,0,0,.26-.18l0,.06v.78a4.34,4.34,0,0,1,1.34.77l.68-.38a.68.68,0,0,1,.48-.06.64.64,0,0,1,.38.29l.8,1.38a.58.58,0,0,1,.07.48.63.63,0,0,1-.3.38l-.68.4a3.84,3.84,0,0,1,.08.76,4.13,4.13,0,0,1-.08.78l.34.18.32.2ZM10.17,7.86a1.9,1.9,0,0,1,1.35,3.23,1.85,1.85,0,0,1-1.35.55A1.9,1.9,0,0,1,8.83,8.41a1.92,1.92,0,0,1,1.34-.55Zm1.58,7.2a.73.73,0,0,1-.21.49.66.66,0,0,1-.48.2H9.29a.68.68,0,0,1-.69-.69V14.2a4.75,4.75,0,0,1-1.48-.86l-.75.45a.73.73,0,0,1-.7,0,.63.63,0,0,1-.25-.26L4.54,12a.67.67,0,0,1-.08-.53.71.71,0,0,1,.32-.42l.75-.43a4.8,4.8,0,0,1-.08-.85,4.71,4.71,0,0,1,.08-.85l-.74-.44a.71.71,0,0,1-.32-.42.65.65,0,0,1,.07-.54L5.42,6a.66.66,0,0,1,.42-.32l.18,0a.73.73,0,0,1,.35.09l.75.43A4.68,4.68,0,0,1,8.6,5.33V4.45a.68.68,0,0,1,.69-.69h1.77a.64.64,0,0,1,.48.2.73.73,0,0,1,.21.49v.88a4.75,4.75,0,0,1,1.48.85L14,5.75a.67.67,0,0,1,.34-.09l.18,0a.71.71,0,0,1,.42.32l.89,1.54a.67.67,0,0,1,.06.52.73.73,0,0,1-.32.43l-.75.42a4.8,4.8,0,0,1,.08.85,4.71,4.71,0,0,1-.08.85l.75.43a.66.66,0,0,1,.32.42.73.73,0,0,1-.06.54l-.89,1.52a.69.69,0,0,1-.25.26.7.7,0,0,1-.35.09.64.64,0,0,1-.34-.09l-.75-.45a4.87,4.87,0,0,1-1.48.86v.87ZM7.23,9.75a3,3,0,0,0,.86,2.08,2.94,2.94,0,1,0,4.16-4.16,3,3,0,0,0-2.08-.85A2.94,2.94,0,0,0,7.23,9.75Z" transform="translate(-4.44 -3.76)"/></g></svg>',
  revert: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.76 14.69"><g><path d="M18.26,15V12.3l1.89-2V15a2.58,2.58,0,0,1-.24,1c-.2.58-.75.92-1.65,1H7.56v2L4.41,15.63,7.56,13v2h10.7ZM6.3,8.28V11L4.41,13V8.28a2.58,2.58,0,0,1,.24-1c.2-.58.75-.92,1.65-1H17v-2l3.15,3.34L17,10.3v-2H6.3Z" transform="translate(-4.4 -4.28)"/></g></svg>',
  auto_size: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 15.74"><g><path d="M6.71,17.19,6.89,16l1.21-.15A6,6,0,0,1,6.81,13.9a5.78,5.78,0,0,1-.45-2.27A6,6,0,0,1,8.1,7.45a5.83,5.83,0,0,1,4.17-1.73l1-1-1-1A7.89,7.89,0,0,0,5,14.64a7.73,7.73,0,0,0,1.71,2.55Zm5.57,2.31h0A7.86,7.86,0,0,0,17.85,6.07L17.67,7.3l-1.21.15a5.9,5.9,0,0,1,1.29,1.92,5.81,5.81,0,0,1,.45,2.26,5.91,5.91,0,0,1-5.9,5.9l-1,1,.49.49.47.5Z" transform="translate(-4.41 -3.76)"/></g></svg>',
  insert_row_below: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.8 15.8"><g><path d="M15.7,1.3c-0.1-0.1-0.1-0.2-0.2-0.2L15.3,1H0.4L0.3,1.1c0,0-0.1,0.1-0.1,0.1c0,0-0.1,0.1-0.1,0.1L0,1.4v7.7l0.1,0.1c0,0.1,0.1,0.1,0.2,0.2l0.1,0.1h2.3V9.3l0.1-0.5L3,8.5l0.1-0.2c-0.1,0-0.2,0-0.3,0H1.2v-6h13.3v6h-1.6c-0.1,0-0.2,0-0.3,0l0.1,0.2l0.2,0.4C12.9,9,13,9.2,13,9.3v0.1h2.3l0.2-0.1c0.1,0,0.1-0.1,0.2-0.2l0.1-0.1V1.4L15.7,1.3z"/><path d="M10.5,7.5C9.9,7.1,9.3,6.8,8.6,6.7c-0.2,0-0.5-0.1-0.7,0c-0.2,0-0.5,0-0.7,0C6.6,6.7,6.1,6.9,5.6,7.3C5.2,7.6,4.7,8,4.4,8.4C4.3,8.6,4.2,8.8,4.2,8.9C4.1,9.1,4,9.3,3.9,9.4C3.9,9.6,3.8,9.7,3.8,9.9c0,0.2-0.1,0.3-0.1,0.5v-0.1c-0.1,0.8,0.1,1.6,0.5,2.4c0.4,0.7,1,1.3,1.7,1.7c0.3,0.2,0.6,0.3,0.9,0.3c0.3,0.1,0.7,0.1,1,0.1c0.3,0,0.7,0,1-0.1c0.3-0.1,0.6-0.2,0.9-0.3c0.5-0.3,0.9-0.6,1.3-1c0.3-0.4,0.6-0.8,0.8-1.3c0.1-0.4,0.2-0.9,0.2-1.4c0-0.5-0.1-1-0.3-1.4C11.5,8.6,11.1,8,10.5,7.5z M10.1,11.3H8.5v1.6H8H7.9H7.3v0v-0.1v-1.4H5.7v-0.4v-0.2v-0.6h0h1.5V8.5h1.2v1.6h1.6V11.3z"/></g></svg>',
  insert_row_above: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.8 15.8"><g><path d="M0.1,14.5c0.1,0.1,0.1,0.2,0.2,0.2l0.1,0.1h14.9l0.1-0.1c0,0,0.1-0.1,0.1-0.1c0,0,0.1-0.1,0.1-0.1l0.1-0.1V6.7l-0.1-0.1c0-0.1-0.1-0.1-0.2-0.2l-0.1-0.1h-2.3v0.1l-0.1,0.5l-0.2,0.4l-0.1,0.2c0.1,0,0.2,0,0.3,0h1.6v6H1.3v-6h1.6c0.1,0,0.2,0,0.3,0L3.1,7.3L2.9,6.9C2.8,6.8,2.8,6.6,2.7,6.5V6.3H0.4L0.3,6.4c-0.1,0-0.1,0.1-0.2,0.2L0,6.7v7.7L0.1,14.5z"/><path d="M5.3,8.3c0.6,0.5,1.2,0.8,1.9,0.9c0.2,0,0.5,0.1,0.7,0c0.2,0,0.5,0,0.7,0c0.6-0.1,1.1-0.3,1.6-0.6c0.5-0.3,0.9-0.7,1.2-1.2c0.1-0.2,0.2-0.3,0.3-0.5c0.1-0.2,0.2-0.4,0.2-0.5c0.1-0.1,0.1-0.3,0.1-0.4C12,5.8,12,5.6,12,5.4v0.1c0.1-0.8-0.1-1.6-0.5-2.4c-0.4-0.7-1-1.3-1.7-1.7C9.5,1.3,9.2,1.2,8.9,1.1C8.5,1,8.2,1,7.9,1c-0.3,0-0.7,0-1,0.1C6.6,1.2,6.3,1.3,6,1.4C5.5,1.7,5.1,2,4.7,2.4C4.4,2.8,4.1,3.3,3.9,3.8C3.8,4.2,3.7,4.7,3.7,5.2c0,0.5,0.1,1,0.3,1.4C4.3,7.2,4.7,7.8,5.3,8.3z M5.7,4.5h1.6V2.9h0.5h0.1h0.6v0v0.1v1.4H10v0.4v0.2v0.6h0H8.5v1.6H7.3V5.7H5.7V4.5z"/></g></svg>',
  insert_column_left: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.8 15.8"><g><path d="M14.5,15.7c0.1-0.1,0.2-0.1,0.2-0.2l0.1-0.1V0.4l-0.1-0.1c0,0-0.1-0.1-0.1-0.1c0,0-0.1-0.1-0.1-0.1L14.4,0H6.7L6.6,0.1c-0.1,0-0.1,0.1-0.2,0.2L6.3,0.4v2.3h0.1l0.5,0.1L7.3,3l0.2,0.1c0-0.1,0-0.2,0-0.3V1.2h6v13.3h-6v-1.6c0-0.1,0-0.2,0-0.3l-0.2,0.1l-0.4,0.2C6.7,12.9,6.6,13,6.4,13H6.3v2.3l0.1,0.2c0,0.1,0.1,0.1,0.2,0.2l0.1,0.1h7.7L14.5,15.7z"/><path d="M8.3,10.5C8.7,10,9,9.3,9.1,8.6c0-0.2,0.1-0.5,0-0.7c0-0.2,0-0.5,0-0.7C9,6.7,8.8,6.1,8.5,5.7C8.2,5.2,7.8,4.8,7.3,4.5C7.2,4.4,7,4.3,6.9,4.2C6.7,4.1,6.5,4,6.4,4C6.2,3.9,6.1,3.9,5.9,3.8c-0.2,0-0.3-0.1-0.5-0.1h0.1C4.7,3.7,3.8,3.9,3.1,4.3C2.4,4.7,1.8,5.3,1.4,6C1.3,6.3,1.2,6.6,1.1,6.9C1,7.2,1,7.6,1,7.9c0,0.3,0,0.7,0.1,1c0.1,0.3,0.2,0.6,0.3,0.9c0.3,0.5,0.6,0.9,1,1.3c0.4,0.3,0.8,0.6,1.3,0.8C4.2,12,4.7,12.1,5.1,12c0.5,0,1-0.1,1.4-0.3C7.2,11.5,7.8,11.1,8.3,10.5zM4.5,10.1V8.5H2.9V8V7.9V7.3h0H3h1.4V5.7h0.4h0.2h0.6v0v1.5h1.6v1.2H5.7v1.6H4.5z"/></g></svg>',
  insert_column_right: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.8 15.8"><g><path d="M1.3,0.1C1.2,0.2,1.1,0.2,1.1,0.3L1,0.4v14.9l0.1,0.1c0,0,0.1,0.1,0.1,0.1c0,0,0.1,0.1,0.1,0.1l0.1,0.1h7.7l0.1-0.1c0.1,0,0.1-0.1,0.2-0.2l0.1-0.1v-2.3H9.3l-0.5-0.1l-0.4-0.2l-0.2-0.1c0,0.1,0,0.2,0,0.3v1.6h-6V1.3h6v1.6c0,0.1,0,0.2,0,0.3l0.2-0.1l0.4-0.2C9,2.9,9.2,2.8,9.3,2.8h0.1V0.5L9.4,0.3c0-0.1-0.1-0.1-0.2-0.2L9.1,0H1.4L1.3,0.1z"/><path d="M7.5,5.3C7,5.8,6.7,6.5,6.6,7.2c0,0.2-0.1,0.5,0,0.7c0,0.2,0,0.5,0,0.7c0.1,0.6,0.3,1.1,0.6,1.6c0.3,0.5,0.7,0.9,1.2,1.2c0.2,0.1,0.3,0.2,0.5,0.3c0.2,0.1,0.4,0.2,0.5,0.2c0.1,0.1,0.3,0.1,0.4,0.1c0.2,0,0.3,0.1,0.5,0.1h-0.1c0.8,0.1,1.6-0.1,2.4-0.5c0.7-0.4,1.3-1,1.7-1.7c0.2-0.3,0.3-0.6,0.3-0.9c0.1-0.3,0.1-0.7,0.1-1c0-0.3,0-0.7-0.1-1c-0.1-0.3-0.2-0.6-0.3-0.9c-0.3-0.5-0.6-0.9-1-1.3C13,4.4,12.5,4.2,12,4c-0.4-0.1-0.9-0.2-1.4-0.2c-0.5,0-1,0.1-1.4,0.2C8.5,4.3,7.9,4.7,7.5,5.3z M11.3,5.7v1.6h1.6v0.5v0.1v0.6h0h-0.1h-1.4v1.6h-0.4h-0.2h-0.6v0V8.5H8.5V7.3h1.6V5.7H11.3z"/></g></svg>',
  delete_row: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.75 13.83"><g><path d="M4.7,18.46l.12.08H19.73l.12-.08a.58.58,0,0,0,.22-.22l.08-.12,0-7.69-.08-.11a.77.77,0,0,0-.18-.18l-.11-.08-2.31,0-.08.28-.1.29a1.58,1.58,0,0,1-.12.29l-.14.34s0,0,.18,0H18.9v6H5.64v-6H7.35c.14,0,.2,0,.18,0l-.14-.34a2.85,2.85,0,0,1-.12-.29l-.1-.29-.07-.27-2.31,0-.11.08a.77.77,0,0,0-.18.18l-.08.11,0,7.69.08.12a.47.47,0,0,0,.09.12l.13.09ZM12.11,13a4,4,0,0,0,1.46-.21,4.51,4.51,0,0,0,1.31-.71A4,4,0,0,0,16.26,10a4.32,4.32,0,0,0-.08-2.54,4.34,4.34,0,0,0-1-1.52,4.15,4.15,0,0,0-1.54-1,4.34,4.34,0,0,0-1.35-.22A4.07,4.07,0,0,0,11,4.93,3.94,3.94,0,0,0,9.24,6.07,3.92,3.92,0,0,0,8.15,8.88a3.91,3.91,0,0,0,.12.95A4.16,4.16,0,0,0,12.11,13Zm2.35-4.14v.58H10.09V8.27h4.37v.58Z" transform="translate(-4.4 -4.71)"/></g></svg>',
  delete_column: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13.81 15.74"><g><path d="M5.66,19.42l.12.08,7.69,0,.11-.08a.77.77,0,0,0,.18-.18l.08-.11,0-2.32-.15,0-.45-.15-.42-.18-.17-.07a1,1,0,0,0,0,.27v1.63h-6V5h6V6.62a.9.9,0,0,0,0,.26l.17-.07.42-.17a3.91,3.91,0,0,1,.45-.15l.15,0,0-2.32L13.75,4a.77.77,0,0,0-.18-.18l-.11-.08H5.79l-.13.07a.63.63,0,0,0-.21.22l-.08.12V19.08l.08.12a.47.47,0,0,0,.09.12.35.35,0,0,0,.12.1Zm9-3.67a4.16,4.16,0,0,0,2.36-.51,4.08,4.08,0,0,0,1.67-1.72,4,4,0,0,0,.35-.91,3.79,3.79,0,0,0,.1-1,4.71,4.71,0,0,0-.11-1,5,5,0,0,0-.3-.87,4.25,4.25,0,0,0-1-1.25,4.49,4.49,0,0,0-1.34-.81A4.26,4.26,0,0,0,15,7.48a3.88,3.88,0,0,0-1.41.25A4.32,4.32,0,0,0,11.86,9,4,4,0,0,0,11,10.94a4.4,4.4,0,0,0-.05.68,4.5,4.5,0,0,0,.05.68,3.93,3.93,0,0,0,.61,1.57,4.22,4.22,0,0,0,1.18,1.2,4.59,4.59,0,0,0,.48.27c.2.1.37.17.5.22a2.44,2.44,0,0,0,.45.12,4.61,4.61,0,0,0,.5.07Zm2.54-4.12v.58H12.87V11h4.37v.59Z" transform="translate(-5.37 -3.76)"/></g></svg>',
  fixed_column_width: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6,5H18A1,1 0 0,1 19,6A1,1 0 0,1 18,7H6A1,1 0 0,1 5,6A1,1 0 0,1 6,5M21,2V4H3V2H21M15,8H17V22H15V8M7,8H9V22H7V8M11,8H13V22H11V8Z" /></svg>',
  rotate_left: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.8 15.8"><g><path d="M0.5,10.2c0,0.1,0,0.2,0,0.3v0.2l0,0c0.1,0.3,0.3,0.6,0.4,0.9l0,0C1,11.8,1.3,12,1.5,11.9h0.1h0.2h0.1c0.1-0.1,0.3-0.3,0.4-0.5v-0.2c0-0.1,0-0.2-0.1-0.3l0,0c-0.2-0.2-0.3-0.4-0.3-0.7l0,0C1.8,10,1.7,9.9,1.5,9.8c-0.1,0-0.2,0-0.3,0H0.9C0.7,9.9,0.6,10,0.5,10.2L0.5,10.2z"/><path d="M2.2,11.5L2.2,11.5L2.2,11.5z"/><path d="M5.9,3.6L5.9,3.6L5.9,3.6z"/><path d="M0.1,7.9c0,0.3,0,0.6,0,0.9l0,0l0,0l0,0l0,0c0,0.2,0.1,0.3,0.2,0.4l0,0c0.2,0.1,0.3,0.2,0.5,0.2l0,0l0,0c0.2,0,0.4-0.1,0.5-0.3l0,0c0-0.1,0.1-0.3,0.1-0.4V8.6l0,0c0-0.2,0-0.5,0-0.7l0,0c0-0.2-0.1-0.4-0.2-0.5C1.1,7.3,0.9,7.2,0.7,7.2S0.3,7.3,0.2,7.4C0.1,7.5,0,7.7,0.1,7.9z"/><path d="M1.9,12.7L1.9,12.7c0,0.2,0,0.4,0.2,0.5l0,0l0.2,0.3l0,0c0.2,0.1,0.3,0.2,0.5,0.4l0,0l0,0l0,0l0,0C2.9,14,3,14.1,3.2,14.1s0.4-0.1,0.5-0.2c0.1-0.2,0.2-0.3,0.2-0.5v-0.1c0-0.2-0.1-0.4-0.2-0.5l0,0l-0.4-0.4l-0.2-0.2l0,0C3,12.1,2.8,12,2.6,12l0,0c-0.2,0-0.4,0.1-0.5,0.2l0,0C2,12.3,1.9,12.5,1.9,12.7z"/><path d="M6.6,15c0,0.2,0.1,0.4,0.2,0.5c0.1,0.1,0.2,0.2,0.4,0.3l0,0c0.3,0,0.5,0,0.7,0h0.3l0,0c0.2,0,0.4-0.1,0.5-0.2c0.1-0.2,0.2-0.3,0.2-0.5l0,0l0,0c0-0.2-0.1-0.4-0.2-0.5l0,0c-0.1-0.1-0.3-0.2-0.5-0.2l0,0H7.9c-0.1,0-0.3,0-0.5,0l0,0H7.3c-0.2-0.1-0.3,0-0.5,0.1l0,0C6.7,14.6,6.6,14.8,6.6,15L6.6,15L6.6,15L6.6,15z"/><path d="M4.2,7.4C4,7.5,4,7.7,4,7.9c0,0.2,0,0.4,0.2,0.5l0,0l3.2,3.2l0,0c0.1,0.1,0.3,0.2,0.5,0.2s0.3-0.1,0.5-0.2l0,0l3.2-3.2l0,0c0.1-0.1,0.2-0.3,0.2-0.5c0-0.2-0.1-0.4-0.2-0.5l0,0C11.5,7.3,11,6.7,10,5.8l0,0L8.4,4.2l0,0C8.3,4.1,8.1,4,7.9,4S7.5,4.1,7.4,4.2L4.2,7.4L4.2,7.4z M6.8,9L5.7,7.9l2.2-2.2l2.3,2.2l-2.3,2.2C7.7,9.9,7.3,9.5,6.8,9L6.8,9z"/><path d="M4.1,14.1C4,14.2,4,14.3,4,14.4v0.2l0,0c0.1,0.1,0.2,0.3,0.4,0.4l0,0c0.3,0.1,0.6,0.2,0.9,0.4h0.1h0.1l0,0c0.2,0,0.3-0.1,0.5-0.1l0,0c0.2-0.1,0.3-0.3,0.3-0.4l0,0l0,0l0,0l0,0v-0.2c0-0.1-0.1-0.2-0.1-0.3l0,0C6.1,14.2,6,14.1,5.8,14l0,0c-0.3-0.1-0.5-0.2-0.8-0.2l0,0c-0.1-0.1-0.2-0.1-0.3-0.1H4.5C4.3,13.7,4.2,13.9,4.1,14.1z"/><path d="M9.3,14.4c0,0.1-0.1,0.3,0,0.4V15l0,0c0,0.1,0.1,0.3,0.5,0.4c0.1,0.1,0.3,0.1,0.4,0.1l0,0h0.1l0,0c0.3-0.1,0.6-0.2,0.9-0.3l0,0c0.1-0.1,0.2-0.2,0.3-0.4l0.1-0.3c0-0.1-0.1-0.2-0.1-0.3l0,0c-0.1-0.2-0.2-0.3-0.4-0.4l0,0h-0.3c-0.1,0-0.2,0-0.3,0l0,0c-0.2,0.1-0.5,0.2-0.8,0.3l0,0C9.5,14.1,9.4,14.2,9.3,14.4L9.3,14.4z"/><path d="M11.4,14.7L11.4,14.7L11.4,14.7z"/><path d="M9.5,15.3L9.5,15.3L9.5,15.3z"/><path d="M15.9,7.9c0-1-0.2-2-0.6-3l0,0c-0.4-1-1-1.9-1.7-2.6C12.8,1.6,12,1,11,0.6l0,0C10.1,0.2,9,0,8,0C7.3,0,6.5,0.1,5.8,0.3l0,0C5.2,0.5,4.6,0.8,4,1.1L3.1,0.2l0,0C2.9,0.1,2.8,0,2.6,0H2.4l0,0C2.2,0,2,0.2,1.9,0.4l0,0L0.1,4.9l0,0C0,5,0,5.1,0,5.2c0,0.2,0.1,0.4,0.2,0.5l0,0c0.2,0.1,0.3,0.2,0.5,0.2h0.1H1l0,0l4.7-1.8l0,0C5.9,4,6.1,3.8,6.1,3.6V3.4C6.1,3.2,6,3,5.9,2.9l0,0L5.1,2.1c0.4-0.2,0.8-0.4,1.3-0.5c0.5-0.1,1.1-0.2,1.7-0.2c0.9,0,1.7,0.2,2.5,0.5l0,0c0.8,0.3,1.5,0.8,2.1,1.4c0.6,0.6,1.1,1.3,1.4,2.1l0,0c0.3,0.8,0.5,1.6,0.5,2.5s-0.2,1.7-0.5,2.5l0,0c-0.3,0.8-0.8,1.5-1.4,2.1c-0.2,0.2-0.4,0.3-0.6,0.5l0,0c-0.2,0.1-0.3,0.3-0.3,0.5v0.1c0,0.1,0,0.3,0.1,0.4l0,0c0.1,0.2,0.3,0.3,0.5,0.3l0,0c0.1,0,0.3-0.1,0.4-0.2l0,0l0,0l0,0l0,0c0.2-0.2,0.5-0.4,0.7-0.6l0,0l0,0l0,0l0,0c0.7-0.8,1.3-1.6,1.7-2.6C15.6,10,15.8,9,15.9,7.9z M1.9,4C2,3.8,2.1,3.5,2.3,3.1l0,0L2.7,2l1.2,1.2L1.9,4z"/><path d="M6.8,15.5L6.8,15.5L6.8,15.5z"/></g></svg>',
  rotate_right: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.8 15.8"><g><path d="M9.9,15.3L9.9,15.3L9.9,15.3z"/><path d="M6.9,15.1L6.9,15.1c0,0.1,0.1,0.3,0.2,0.4l0,0c0.1,0.2,0.3,0.3,0.5,0.3l0,0h0.3c0.2,0,0.4,0,0.7,0l0,0c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.2,0.2-0.4V15c0-0.2-0.1-0.4-0.2-0.4c-0.2-0.1-0.3-0.2-0.5-0.2H8.4l0,0c-0.1,0-0.3,0-0.5,0H7.6l0,0c-0.2,0-0.4,0.1-0.5,0.2C7,14.7,6.9,14.9,6.9,15.1z"/><path d="M6.5,14.4L6.5,14.4L6.5,14.4z"/><path d="M5.8,5.8L5.8,5.8c-1,0.9-1.5,1.5-1.7,1.6l0,0C4,7.5,4,7.7,4,7.9c0,0.2,0,0.4,0.2,0.5l0,0l3.2,3.2l0,0c0.2,0.1,0.3,0.2,0.5,0.2s0.4-0.1,0.5-0.2l0,0l3.2-3.2l0,0c0.1-0.1,0.2-0.3,0.2-0.5c0-0.2-0.1-0.4-0.2-0.5l0,0L8.4,4.2C8.3,4.1,8.1,4,7.9,4C7.7,4,7.5,4.1,7.4,4.2l0,0L5.8,5.8z M5.6,7.9l2.3-2.2l2.2,2.2L9,9l0,0l0,0l0,0l0,0c-0.5,0.6-0.9,0.9-1.1,1.1L5.6,7.9z"/><path d="M9,15.5L9,15.5L9,15.5z"/><path d="M9.6,14.7v0.2l0,0l0,0l0,0l0,0c0.1,0.2,0.1,0.3,0.3,0.3c0.1,0.1,0.3,0.1,0.4,0.1l0,0h0.1h0.1c0.3-0.1,0.6-0.3,0.9-0.4l0,0c0.1-0.1,0.2-0.2,0.3-0.4l0,0v-0.2c0-0.1,0-0.2-0.1-0.3c-0.1-0.2-0.2-0.3-0.4-0.4H11c-0.1,0-0.2,0.1-0.3,0.1l0,0c-0.2,0.1-0.4,0.2-0.7,0.3l0,0l0,0c-0.1,0.1-0.3,0.2-0.4,0.4C9.6,14.5,9.6,14.6,9.6,14.7z"/><path d="M9,14.5L9,14.5L9,14.5z"/><path d="M9.6,14.4L9.6,14.4L9.6,14.4z"/><path d="M11.7,14L11.7,14L11.7,14z"/><path d="M15.6,7.4L15.6,7.4L15.6,7.4z"/><path d="M15,9.4c0.2,0,0.4,0,0.6-0.2l0,0c0.1-0.1,0.2-0.2,0.2-0.4l0,0l0,0l0,0l0,0c0-0.3,0-0.6,0-0.9c0-0.2-0.1-0.4-0.2-0.5c-0.1-0.1-0.3-0.2-0.5-0.2s-0.4,0.1-0.5,0.2c-0.1,0.1-0.2,0.3-0.2,0.5l0,0c0,0.2,0,0.4,0,0.7l0,0v0.1c0,0.1,0,0.3,0.1,0.4l0,0C14.6,9.3,14.8,9.4,15,9.4L15,9.4L15,9.4z"/><path d="M14,12h0.1h0.2h0.1c0.2,0,0.5-0.2,0.6-0.4l0,0c0.2-0.3,0.3-0.6,0.4-0.9l0,0v-0.2c0-0.1-0.1-0.2-0.1-0.3c-0.1-0.2-0.2-0.3-0.4-0.4h-0.3c-0.1,0-0.2,0-0.3,0C14.2,9.9,14,10,14,10.3l0,0c-0.1,0.2-0.2,0.5-0.3,0.7l0,0c-0.1,0.1-0.1,0.2-0.1,0.3v0.2l0,0l0,0C13.6,11.6,13.8,11.8,14,12z"/><path d="M14.6,7.4L14.6,7.4L14.6,7.4z"/><path d="M4.4,14.2c-0.1,0.1-0.1,0.2-0.1,0.3l0.1,0.2c0,0.2,0.2,0.3,0.3,0.4l0,0c0.3,0.1,0.6,0.3,1.1,0.4l0,0h0.1l0,0c0.1,0,0.2-0.1,0.4-0.2c0.1,0,0.2-0.2,0.3-0.3l0,0v-0.2c0-0.1-0.1-0.3-0.2-0.4c-0.1-0.1-0.2-0.2-0.4-0.3l0,0c-0.2-0.1-0.5-0.2-0.7-0.3l0,0c-0.1,0-0.2,0-0.3,0H4.7l0,0C4.6,13.9,4.4,14,4.4,14.2L4.4,14.2z"/><path d="M11.9,13.3c0,0.2,0.1,0.4,0.2,0.6c0.1,0.1,0.3,0.2,0.5,0.2s0.4-0.1,0.5-0.2l0,0l0,0l0,0l0,0c0.1-0.1,0.3-0.3,0.4-0.4l0,0l0.2-0.3l0,0c0.1-0.2,0.2-0.3,0.2-0.5l0,0c0-0.2-0.1-0.4-0.2-0.5l0,0c-0.1-0.1-0.3-0.2-0.5-0.2l0,0c-0.2,0-0.4,0.1-0.5,0.2l0,0l-0.2,0.2l-0.4,0.4l0,0C12,13,11.9,13.1,11.9,13.3L11.9,13.3z"/><path d="M12.1,13.8L12.1,13.8L12.1,13.8z"/><path d="M11.9,13.3L11.9,13.3L11.9,13.3z"/><path d="M15.9,5.2c0-0.1-0.1-0.2-0.1-0.3l0,0L14,0.4l0,0C13.9,0.2,13.7,0,13.5,0l0,0l0,0h-0.2c-0.2,0-0.4,0.1-0.5,0.2l0,0l-0.9,0.9c-0.5-0.3-1.1-0.6-1.8-0.8l0,0C9.4,0.1,8.7,0,7.9,0c-1,0-2,0.2-3,0.6S3,1.6,2.3,2.3C1.6,3.1,1,3.9,0.6,4.9l0,0C0.2,5.8,0,6.8,0,7.9c0,1,0.2,2,0.6,3s0.9,1.8,1.7,2.6l0,0l0,0l0,0l0,0c0.2,0.2,0.5,0.4,0.7,0.6l0,0l0,0l0,0l0,0c0.2,0.1,0.3,0.2,0.5,0.2l0,0c0.2,0,0.4-0.1,0.6-0.3l0,0c0.1-0.1,0.1-0.3,0.1-0.4v-0.1l0,0C4.1,13.3,4,13.1,3.9,13l0,0c-0.2-0.1-0.4-0.3-0.6-0.5c-0.6-0.6-1.1-1.3-1.4-2.1l0,0C1.6,9.6,1.4,8.8,1.4,7.9s0.2-1.7,0.5-2.5l0,0c0.3-0.8,0.8-1.5,1.4-2.1c0.6-0.6,1.3-1.1,2.1-1.4l0,0C6.2,1.6,7,1.4,7.9,1.4c0.6,0,1.1,0.1,1.7,0.2c0.5,0.1,0.9,0.3,1.3,0.5l-0.8,0.8l0,0C10,3.1,9.9,3.2,9.9,3.4v0.2l0,0l0,0c0,0.2,0.2,0.4,0.4,0.5l0,0l4.5,1.8l0,0H15h0.1c0.2,0,0.4-0.1,0.5-0.2l0,0C15.7,5.6,15.8,5.4,15.9,5.2z M11.8,3.2L13,2l0.4,1.1l0,0c0.2,0.4,0.3,0.7,0.4,0.9L11.8,3.2z"/></g></svg>',
  mirror_horizontal: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.75 15.74"><g><path d="M13.75,3.76l5.9,15.74h-5.9V3.76ZM4.9,19.5,10.8,3.76V19.5H4.9Z" transform="translate(-4.9 -3.76)"/></g></svg>',
  mirror_vertical: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.74 14.75"><g><path d="M20.15,13.1,4.41,19V13.1H20.15ZM4.41,4.25l15.74,5.9H4.41V4.25Z" transform="translate(-4.41 -4.25)"/></g></svg>',
  checked: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.75 12.1"><g><path d="M4.59,12.23l.12.18L9.43,17.5a.58.58,0,0,0,.84,0L20,7.45h0a.58.58,0,0,0,0-.84l-.85-.85a.58.58,0,0,0-.84,0H18.2l-8.12,8.41a.29.29,0,0,1-.42,0l-3.4-3.63a.58.58,0,0,0-.84,0l-.85.85a.6.6,0,0,0-.14.21.51.51,0,0,0,0,.44c.05.06.1.13.16.19Z" transform="translate(-4.38 -5.58)"/></g></svg>',
  line_break: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H7.41l1.3-1.29A1,1,0,0,0,7.29,9.29l-3,3a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l3,3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L7.41,14H17a3,3,0,0,0,3-3V7A1,1,0,0,0,19,6Z"/></svg>',
  audio: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z" /></svg>',
  image_gallery: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="30 30 150 150"><g><path d="M152.775,120.548V51.651c0-12.271-9.984-22.254-22.254-22.254H43.727c-12.271,0-22.254,9.983-22.254,22.254v68.896c0,12.27,9.983,22.254,22.254,22.254h86.795C142.791,142.802,152.775,132.817,152.775,120.548z M36.394,51.651c0-4.042,3.291-7.333,7.333-7.333h86.795c4.042,0,7.332,3.291,7.332,7.333v23.917l-14.938-17.767c-1.41-1.678-3.487-2.649-5.68-2.658h-0.029c-2.184,0-4.255,0.954-5.674,2.613L76.709,98.519l-9.096-9.398c-1.427-1.474-3.392-2.291-5.448-2.273c-2.052,0.025-4.004,0.893-5.396,2.4L36.394,111.32V51.651z M41.684,127.585l20.697-22.416l9.312,9.622c1.461,1.511,3.489,2.334,5.592,2.27c2.101-0.066,4.075-1.013,5.44-2.612l34.436-40.308l20.693,24.613v21.794c0,4.042-3.29,7.332-7.332,7.332H43.727C43.018,127.88,42.334,127.775,41.684,127.585z M182.616,152.5V75.657c0-4.12-3.34-7.46-7.461-7.46c-4.119,0-7.46,3.34-7.46,7.46V152.5c0,4.112-3.347,7.46-7.461,7.46h-94c-4.119,0-7.46,3.339-7.46,7.459c0,4.123,3.341,7.462,7.46,7.462h94C172.576,174.881,182.616,164.841,182.616,152.5z"/></g></svg>',
  bookmark: '<svg viewBox="0 0 24 24"><path d="M17,3H7A2,2 0 0,0 5,5V21L12,18L19,21V5C19,3.89 18.1,3 17,3Z" /></svg>',
  download: '<svg viewBox="0 0 24 24"><path d="M2 12H4V17H20V12H22V17C22 18.11 21.11 19 20 19H4C2.9 19 2 18.11 2 17V12M12 15L17.55 9.54L16.13 8.13L13 11.25V2H11V11.25L7.88 8.13L6.46 9.55L12 15Z" /></svg>',
  dir_ltr: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M9 4v4c-1.1 0-2-.9-2-2s.9-2 2-2m8-2H9C6.79 2 5 3.79 5 6s1.79 4 4 4v5h2V4h2v11h2V4h2V2zm0 12v3H5v2h12v3l4-4-4-4z"/></svg>',
  dir_rtl: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M10 4v4c-1.1 0-2-.9-2-2s.9-2 2-2m8-2h-8C7.79 2 6 3.79 6 6s1.79 4 4 4v5h2V4h2v11h2V4h2V2zM8 14l-4 4 4 4v-3h12v-2H8v-3z"/></svg>',
  // Error
  alert_outline: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11,15H13V17H11V15M11,7H13V13H11V7M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z" /></svg>',
  // More icons
  more_text: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 180 180"><g><path d="M49.711,142.188h49.027c2.328,0.002,4.394,1.492,5.129,3.699l9.742,29.252c0.363,1.092,1.385,1.828,2.537,1.83l15.883,0.01c0.859,0,1.667-0.412,2.17-1.109s0.641-1.594,0.37-2.41l-16.625-50.045L86.503,28.953c-0.36-1.097-1.383-1.839-2.537-1.842H64.532c-1.153-0.001-2.178,0.736-2.542,1.831L13.847,173.457c-0.271,0.816-0.135,1.713,0.369,2.412c0.503,0.697,1.311,1.109,2.171,1.109h15.872c1.151,0,2.173-0.736,2.537-1.828l9.793-29.287C45.325,143.66,47.39,142.18,49.711,142.188L49.711,142.188z M53.493,119.098l15.607-46.9c0.744-2.196,2.806-3.674,5.125-3.674s4.381,1.478,5.125,3.674l15.607,46.904c0.537,1.621,0.263,3.402-0.736,4.789c-1.018,1.408-2.649,2.24-4.386,2.24H58.615c-1.736,0-3.368-0.832-4.386-2.24C53.23,122.504,52.956,120.721,53.493,119.098L53.493,119.098z M190.465,63.32c0-2.919-1.015-5.396-3.059-7.428c-2.029-2.031-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.016-7.388,3.047c-2.029,2.032-3.056,4.498-3.056,7.386c0,2.889,1.026,5.354,3.056,7.385c2.032,2.032,4.499,3.059,7.388,3.059c2.887,0,5.354-1.026,7.383-3.059C189.45,68.633,190.465,66.178,190.465,63.32L190.465,63.32z M190.465,101.994c0-2.858-1.015-5.313-3.059-7.333c-2.029-2.042-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.005-7.388,3.047c-2.029,2.021-3.056,4.486-3.056,7.376c0,2.887,1.026,5.352,3.056,7.395c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,107.389,190.465,104.914,190.465,101.994L190.465,101.994z M190.465,140.76c0-2.918-1.015-5.395-3.059-7.438c-2.029-2.041-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.006-7.388,3.047c-2.029,2.043-3.056,4.52-3.056,7.438c0,2.922,1.026,5.398,3.056,7.439c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,146.158,190.465,143.682,190.465,140.76L190.465,140.76z"/></g></svg>',
  more_paragraph: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 180 180"><g><path d="M128.39,28.499H63.493c-25.558,0-46.354,20.796-46.354,46.354c0,25.559,20.796,46.353,46.354,46.353h9.271v55.625h18.542V47.04h9.271V176.83h18.543V47.04h9.271V28.499z M72.764,102.664h-9.271c-15.337,0-27.813-12.475-27.813-27.812c0-15.336,12.476-27.813,27.813-27.813h9.271V102.664z M190.465,63.32c0-2.919-1.015-5.396-3.059-7.428c-2.029-2.031-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.016-7.388,3.047c-2.029,2.032-3.056,4.498-3.056,7.386c0,2.889,1.026,5.354,3.056,7.385c2.032,2.032,4.499,3.059,7.388,3.059c2.887,0,5.354-1.026,7.383-3.059C189.45,68.633,190.465,66.178,190.465,63.32L190.465,63.32z M190.465,101.994c0-2.858-1.015-5.313-3.059-7.333c-2.029-2.042-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.005-7.388,3.047c-2.029,2.021-3.056,4.486-3.056,7.376c0,2.887,1.026,5.352,3.056,7.395c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,107.389,190.465,104.914,190.465,101.994L190.465,101.994z M190.465,140.76c0-2.918-1.015-5.395-3.059-7.438c-2.029-2.041-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.006-7.388,3.047c-2.029,2.043-3.056,4.52-3.056,7.438c0,2.922,1.026,5.398,3.056,7.439c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,146.158,190.465,143.682,190.465,140.76L190.465,140.76z"/></g></svg>',
  more_plus: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="35 30 140 140"><g><path d="M137.215,102.045c0,3.498-2.835,6.332-6.333,6.332H24.549c-3.498,0-6.334-2.834-6.334-6.332l0,0c0-3.498,2.836-6.333,6.334-6.333h106.333C134.38,95.711,137.215,98.547,137.215,102.045L137.215,102.045z M77.715,161.545c-3.498,0-6.333-2.836-6.333-6.334V48.878c0-3.498,2.836-6.333,6.333-6.333l0,0c3.498,0,6.334,2.835,6.334,6.333v106.333C84.049,158.709,81.213,161.545,77.715,161.545L77.715,161.545z M190.465,63.32c0-2.919-1.015-5.396-3.059-7.428c-2.029-2.031-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.016-7.388,3.047c-2.029,2.032-3.056,4.498-3.056,7.386c0,2.889,1.026,5.354,3.056,7.385c2.032,2.032,4.499,3.059,7.388,3.059c2.887,0,5.354-1.026,7.383-3.059C189.45,68.632,190.465,66.177,190.465,63.32L190.465,63.32z M190.465,101.993c0-2.858-1.015-5.313-3.059-7.333c-2.029-2.042-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.005-7.388,3.047c-2.029,2.021-3.056,4.486-3.056,7.376c0,2.888,1.026,5.353,3.056,7.396c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,107.389,190.465,104.914,190.465,101.993L190.465,101.993z M190.465,140.76c0-2.918-1.015-5.395-3.059-7.438c-2.029-2.041-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.006-7.388,3.047c-2.029,2.043-3.056,4.52-3.056,7.438c0,2.922,1.026,5.398,3.056,7.439c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,146.158,190.465,143.682,190.465,140.76L190.465,140.76z"/></g></svg>',
  more_horizontal: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.76 3.58"><g><path d="M4.64,10.73a1.84,1.84,0,0,1,.65-.65,1.76,1.76,0,0,1,1.79,0A1.79,1.79,0,0,1,8,11.63a1.84,1.84,0,0,1-.25.9,1.69,1.69,0,0,1-.65.65,1.8,1.8,0,0,1-2.69-1.55A2.08,2.08,0,0,1,4.64,10.73Zm6.09,0a1.84,1.84,0,0,1,.65-.65,1.78,1.78,0,0,1,2.67,1.55,1.73,1.73,0,0,1-.24.9,1.84,1.84,0,0,1-.65.65,1.76,1.76,0,0,1-1.79,0,1.79,1.79,0,0,1-.64-2.44Zm6.08,0a1.69,1.69,0,0,1,.65-.65,1.76,1.76,0,0,1,1.79,0,1.79,1.79,0,0,1,.9,1.54,1.73,1.73,0,0,1-.24.9,1.84,1.84,0,0,1-.65.65,1.8,1.8,0,0,1-2.69-1.55A2,2,0,0,1,16.81,10.73Z" transform="translate(-4.39 -9.84)"/></g></svg>',
  more_vertical: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 3.94 15.75"><g><path d="M12.28,7.69a1.92,1.92,0,0,1-1.39-.58,2,2,0,0,1-.58-1.39,1.92,1.92,0,0,1,.58-1.39,2,2,0,0,1,1.39-.58,1.92,1.92,0,0,1,1.39.58,2,2,0,0,1,.58,1.39,1.92,1.92,0,0,1-.58,1.39,2,2,0,0,1-1.39.58Zm0,2a1.92,1.92,0,0,1,1.39.58,2,2,0,0,1,.58,1.39A1.92,1.92,0,0,1,13.67,13a2,2,0,0,1-1.39.58A1.92,1.92,0,0,1,10.89,13a2,2,0,0,1-.58-1.39,2,2,0,0,1,2-2Zm0,5.9a1.92,1.92,0,0,1,1.39.58,2,2,0,0,1,.58,1.39,1.92,1.92,0,0,1-.58,1.39,2,2,0,0,1-1.39.58,1.92,1.92,0,0,1-1.39-.58,2,2,0,0,1-.58-1.39,1.92,1.92,0,0,1,.58-1.39,1.94,1.94,0,0,1,1.39-.58Z" transform="translate(-10.31 -3.75)"/></g></svg>',
  // Not currently used
  attachment: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8.38 15.68"><g><path d="M15.23,6h1v9.78a3.88,3.88,0,0,1-1.31,2.45,4,4,0,0,1-6.57-2.45V7A3,3,0,0,1,9.2,4.89a3,3,0,0,1,5,2.09v8.31a1.92,1.92,0,0,1-.58,1.39,2,2,0,0,1-1.39.58,1.92,1.92,0,0,1-1.39-.58,2,2,0,0,1-.58-1.39V8h1v7.32a1,1,0,0,0,.29.69,1,1,0,0,0,.69.28A.9.9,0,0,0,13,16a1,1,0,0,0,.29-.69V7a1.92,1.92,0,0,0-.58-1.39A2,2,0,0,0,11.27,5a1.92,1.92,0,0,0-1.39.58A2,2,0,0,0,9.33,7v8.31a3,3,0,1,0,5.9,0V6Z" transform="translate(-8.08 -3.78)"/></g></svg>',
  map: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11.7 15.62"><g><path d="M12.05,12.42a2.93,2.93,0,1,1,2.07-5A2.88,2.88,0,0,1,15,9.49a3,3,0,0,1-.86,2.07,2.89,2.89,0,0,1-2.07.86Zm0-5.36a2.43,2.43,0,0,0-1.72,4.16,2.48,2.48,0,0,0,1.72.72,2.44,2.44,0,0,0,0-4.88Zm0-3.3A5.84,5.84,0,0,1,17.9,9.62a9.94,9.94,0,0,1-1.73,5A33.59,33.59,0,0,1,12.84,19a1.52,1.52,0,0,1-.23.2,1,1,0,0,1-.55.2h0a1,1,0,0,1-.55-.2,1.52,1.52,0,0,1-.23-.2,33.59,33.59,0,0,1-3.33-4.32,9.93,9.93,0,0,1-1.72-5,5.84,5.84,0,0,1,5.85-5.86ZM12,18.34l.08.05.06-.06a35.58,35.58,0,0,0,3.06-3.93,9.35,9.35,0,0,0,1.74-4.77,4.88,4.88,0,0,0-4.88-4.88A4.79,4.79,0,0,0,8.6,6.17,4.84,4.84,0,0,0,7.17,9.62,9.29,9.29,0,0,0,8.91,14.4,36,36,0,0,0,12,18.34Z" transform="translate(-6.2 -3.76)"/></g></svg>',
  magic_stick: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.73 15.75"><g><path d="M19.86,19.21a1,1,0,0,0,.28-.68,1,1,0,0,0-.28-.7L13,10.93a1,1,0,0,0-.7-.28,1,1,0,0,0-.68,1.65l6.9,6.9a1,1,0,0,0,.69.29.93.93,0,0,0,.69-.28ZM9.19,8.55a3,3,0,0,0,1.68,0,14.12,14.12,0,0,0,1.41-.32A11.26,11.26,0,0,0,10.8,7.06c-.56-.36-.86-.56-.91-.58S10,5.91,10,5.11s0-1.26-.15-1.37a4.35,4.35,0,0,0-1.19.71c-.53.4-.81.62-.87.68a9,9,0,0,0-2-.6,6.84,6.84,0,0,0-.76-.09s0,.27.08.77a8.6,8.6,0,0,0,.61,2q-.09.09-.69.87a3.59,3.59,0,0,0-.68,1.17c.12.17.57.23,1.36.15S7,9.26,7.15,9.23s.21.36.57.91a10.49,10.49,0,0,0,1.14,1.48c0-.1.14-.57.31-1.4a3,3,0,0,0,0-1.67Z" transform="translate(-4.41 -3.74)"/></g></svg>',
  empty_file: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12.78 15.75"><g><path d="M14.73,3.76,18.67,7.7v9.84a2,2,0,0,1-2,2H7.84a1.89,1.89,0,0,1-1.38-.58,2,2,0,0,1-.57-1.39V5.73a1.93,1.93,0,0,1,.57-1.38,2,2,0,0,1,1.38-.58h6.62l.26,0v0Zm2.95,4.92h-2a1.93,1.93,0,0,1-1.38-.57,2,2,0,0,1-.58-1.4V6.17c0-.36,0-.84,0-1.43H7.85a1,1,0,0,0-.7.29,1,1,0,0,0-.29.7V17.54a1,1,0,0,0,.29.69,1,1,0,0,0,.69.29h8.85a1,1,0,0,0,.71-.29.92.92,0,0,0,.28-.69Zm0-1L14.73,4.74v2A1,1,0,0,0,15,7.4a1,1,0,0,0,.69.29Z" transform="translate(-5.89 -3.76)"/></g></svg>'
};
var ss = { exports: {} };
(function(t) {
  (function(e, i) {
    t.exports = e.document ? i(e, !0) : function(n) {
      if (!n.document)
        throw new Error("SUNEDITOR_LANG a window with a document");
      return i(n);
    };
  })(typeof window < "u" ? window : Re, function(e, i) {
    const n = {
      code: "en",
      toolbar: {
        default: "Default",
        save: "Save",
        font: "Font",
        formats: "Formats",
        fontSize: "Size",
        bold: "Bold",
        underline: "Underline",
        italic: "Italic",
        strike: "Strike",
        subscript: "Subscript",
        superscript: "Superscript",
        removeFormat: "Remove Format",
        fontColor: "Font Color",
        hiliteColor: "Highlight Color",
        indent: "Indent",
        outdent: "Outdent",
        align: "Align",
        alignLeft: "Align left",
        alignRight: "Align right",
        alignCenter: "Align center",
        alignJustify: "Align justify",
        list: "List",
        orderList: "Ordered list",
        unorderList: "Unordered list",
        horizontalRule: "Horizontal line",
        hr_solid: "Solid",
        hr_dotted: "Dotted",
        hr_dashed: "Dashed",
        table: "Table",
        link: "Link",
        math: "Math",
        image: "Image",
        video: "Video",
        audio: "Audio",
        fullScreen: "Full screen",
        showBlocks: "Show blocks",
        codeView: "Code view",
        undo: "Undo",
        redo: "Redo",
        preview: "Preview",
        print: "print",
        tag_p: "Paragraph",
        tag_div: "Normal (DIV)",
        tag_h: "Header",
        tag_blockquote: "Quote",
        tag_pre: "Code",
        template: "Template",
        lineHeight: "Line height",
        paragraphStyle: "Paragraph style",
        textStyle: "Text style",
        imageGallery: "Image gallery",
        dir_ltr: "Left to right",
        dir_rtl: "Right to left",
        mention: "Mention"
      },
      dialogBox: {
        linkBox: {
          title: "Insert Link",
          url: "URL to link",
          text: "Text to display",
          newWindowCheck: "Open in new window",
          downloadLinkCheck: "Download link",
          bookmark: "Bookmark"
        },
        mathBox: {
          title: "Math",
          inputLabel: "Mathematical Notation",
          fontSizeLabel: "Font Size",
          previewLabel: "Preview"
        },
        imageBox: {
          title: "Insert image",
          file: "Select from files",
          url: "Image URL",
          altText: "Alternative text"
        },
        videoBox: {
          title: "Insert Video",
          file: "Select from files",
          url: "Media embed URL, YouTube/Vimeo"
        },
        audioBox: {
          title: "Insert Audio",
          file: "Select from files",
          url: "Audio URL"
        },
        browser: {
          tags: "Tags",
          search: "Search"
        },
        caption: "Insert description",
        close: "Close",
        submitButton: "Submit",
        revertButton: "Revert",
        proportion: "Constrain proportions",
        basic: "Basic",
        left: "Left",
        right: "Right",
        center: "Center",
        width: "Width",
        height: "Height",
        size: "Size",
        ratio: "Ratio"
      },
      controller: {
        edit: "Edit",
        unlink: "Unlink",
        remove: "Remove",
        insertRowAbove: "Insert row above",
        insertRowBelow: "Insert row below",
        deleteRow: "Delete row",
        insertColumnBefore: "Insert column before",
        insertColumnAfter: "Insert column after",
        deleteColumn: "Delete column",
        fixedColumnWidth: "Fixed column width",
        resize100: "Resize 100%",
        resize75: "Resize 75%",
        resize50: "Resize 50%",
        resize25: "Resize 25%",
        autoSize: "Auto size",
        mirrorHorizontal: "Mirror, Horizontal",
        mirrorVertical: "Mirror, Vertical",
        rotateLeft: "Rotate left",
        rotateRight: "Rotate right",
        maxSize: "Max size",
        minSize: "Min size",
        tableHeader: "Table header",
        mergeCells: "Merge cells",
        splitCells: "Split Cells",
        HorizontalSplit: "Horizontal split",
        VerticalSplit: "Vertical split"
      },
      menu: {
        spaced: "Spaced",
        bordered: "Bordered",
        neon: "Neon",
        translucent: "Translucent",
        shadow: "Shadow",
        code: "Code"
      }
    };
    return typeof i > "u" && (e.SUNEDITOR_LANG || Object.defineProperty(e, "SUNEDITOR_LANG", {
      enumerable: !0,
      writable: !1,
      configurable: !1,
      value: {}
    }), Object.defineProperty(e.SUNEDITOR_LANG, "en", {
      enumerable: !0,
      writable: !0,
      configurable: !0,
      value: n
    })), n;
  });
})(ss);
var La = ss.exports;
const za = /* @__PURE__ */ Kt(La), Yt = {
  _d: null,
  _w: null,
  isIE: null,
  isIE_Edge: null,
  isOSX_IOS: null,
  isChromium: null,
  isResizeObserverSupported: null,
  _propertiesInit: function() {
    this._d || (this._d = document, this._w = window, this.isIE = navigator.userAgent.indexOf("Trident") > -1, this.isIE_Edge = navigator.userAgent.indexOf("Trident") > -1 || navigator.appVersion.indexOf("Edge") > -1, this.isOSX_IOS = /(Mac|iPhone|iPod|iPad)/.test(navigator.platform), this.isChromium = !!window.chrome, this.isResizeObserverSupported = typeof ResizeObserver == "function");
  },
  _allowedEmptyNodeList: ".se-component, pre, blockquote, hr, li, table, img, iframe, video, audio, canvas",
  /**
   * @description HTML Reserved Word Converter.
   * @param {String} contents 
   * @returns {String} HTML string
   * @private
   */
  _HTMLConvertor: function(t) {
    const e = { "&": "&amp;", " ": "&nbsp;", "'": "&apos;", '"': "&quot;", "<": "&lt;", ">": "&gt;" };
    return t.replace(/&|\u00A0|'|"|<|>/g, function(i) {
      return typeof e[i] == "string" ? e[i] : i;
    });
  },
  /**
   * @description Unicode Character 'ZERO WIDTH SPACE' (\u200B)
   */
  zeroWidthSpace: String.fromCharCode(8203),
  /**
   * @description Regular expression to find 'zero width space' (/\u200B/g)
   */
  zeroWidthRegExp: new RegExp(String.fromCharCode(8203), "g"),
  /**
   * @description Regular expression to find only 'zero width space' (/^\u200B+$/)
   */
  onlyZeroWidthRegExp: new RegExp("^" + String.fromCharCode(8203) + "+$"),
  fontValueMap: {
    "xx-small": 1,
    "x-small": 2,
    small: 3,
    medium: 4,
    large: 5,
    "x-large": 6,
    "xx-large": 7
  },
  /**
   * @description A method that checks If the text is blank or to see if it contains 'ZERO WIDTH SPACE' or empty (util.zeroWidthSpace)
   * @param {String|Node} text String value or Node
   * @returns {Boolean}
   */
  onlyZeroWidthSpace: function(t) {
    return t == null ? !1 : (typeof t != "string" && (t = t.textContent), t === "" || this.onlyZeroWidthRegExp.test(t));
  },
  /**
   * @description Gets XMLHttpRequest object
   * @returns {XMLHttpRequest|ActiveXObject}
   */
  getXMLHttpRequest: function() {
    if (this._w.ActiveXObject)
      try {
        return new ActiveXObject("Msxml2.XMLHTTP");
      } catch {
        try {
          return new ActiveXObject("Microsoft.XMLHTTP");
        } catch {
          return null;
        }
      }
    else
      return this._w.XMLHttpRequest ? new XMLHttpRequest() : null;
  },
  /**
   * @description Object.values
   * @param {Object|null} obj Object parameter.
   * @returns {Array}
   */
  getValues: function(t) {
    return t ? this._w.Object.keys(t).map(function(e) {
      return t[e];
    }) : [];
  },
  /**
   * @description Convert the CamelCase To the KebabCase.
   * @param {String|Array} param [Camel string]
   * @returns {String|Array}
   */
  camelToKebabCase: function(t) {
    return typeof t == "string" ? t.replace(/[A-Z]/g, function(e) {
      return "-" + e.toLowerCase();
    }) : t.map(function(e) {
      return Yt.camelToKebabCase(e);
    });
  },
  /**
   * @description Convert the KebabCase To the CamelCase.
   * @param {String|Array} param [KebabCase string]
   * @returns {String|Array}
   */
  kebabToCamelCase: function(t) {
    return typeof t == "string" ? t.replace(/-[a-zA-Z]/g, function(e) {
      return e.replace("-", "").toUpperCase();
    }) : t.map(function(e) {
      return Yt.camelToKebabCase(e);
    });
  },
  /**
   * @description Create Element node
   * @param {String} elementName Element name
   * @returns {Element}
   */
  createElement: function(t) {
    return this._d.createElement(t);
  },
  /**
   * @description Create text node
   * @param {String} text text contents
   * @returns {Node}
   */
  createTextNode: function(t) {
    return this._d.createTextNode(t || "");
  },
  /**
   * @description The editor checks tags by string.
   * If there is "<" or ">" in the attribute of tag, HTML is broken when checking the tag.
   * When using an attribute with "<" or ">", use "HTMLEncoder" to save. (ex: math(katex))
   * @param {String} contents HTML or Text string
   * @returns {String}
   */
  HTMLEncoder: function(t) {
    const e = { "<": "$lt;", ">": "$gt;" };
    return t.replace(/<|>/g, function(i) {
      return typeof e[i] == "string" ? e[i] : i;
    });
  },
  /**
   * @description The editor checks tags by string.
   * If there is "<" or ">" in the attribute of tag, HTML is broken when checking the tag.
   * Decoder of data stored as "HTMLEncoder" (ex: math(katex))
   * @param {String} contents HTML or Text string
   * @returns {String}
   */
  HTMLDecoder: function(t) {
    const e = { "$lt;": "<", "$gt;": ">" };
    return t.replace(/\$lt;|\$gt;/g, function(i) {
      return typeof e[i] == "string" ? e[i] : i;
    });
  },
  /**
   * @description This method run Object.prototype.hasOwnProperty.call(obj, key)
   * @param {Object} obj Object
   * @param {String} key obj.key
   * @returns {Boolean}
   */
  hasOwn: function(t, e) {
    return this._hasOwn.call(t, e);
  },
  _hasOwn: Object.prototype.hasOwnProperty,
  /**
   * @deprecated
   * @description Get the the tag path of the arguments value
   * If not found, return the first found value
   * @param {Array} nameArray File name array
   * @param {String} extension js, css
   * @returns {String}
   */
  getIncludePath: function(t, e) {
    let i = "";
    const n = [], l = e === "js" ? "script" : "link", r = e === "js" ? "src" : "href";
    let u = "(?:";
    for (let m = 0, c = t.length; m < c; m++)
      u += t[m] + (m < c - 1 ? "|" : ")");
    const h = new this._w.RegExp("(^|.*[\\/])" + u + "(\\.[^\\/]+)?." + e + "(?:\\?.*|;.*)?$", "i"), s = new this._w.RegExp(".+\\." + e + "(?:\\?.*|;.*)?$", "i");
    for (let m = this._d.getElementsByTagName(l), c = 0; c < m.length; c++)
      s.test(m[c][r]) && n.push(m[c]);
    for (let m = 0; m < n.length; m++) {
      let c = n[m][r].match(h);
      if (c) {
        i = c[0];
        break;
      }
    }
    if (i === "" && (i = n.length > 0 ? n[0][r] : ""), i.indexOf(":/") === -1 && i.slice(0, 2) !== "//" && (i = i.indexOf("/") === 0 ? location.href.match(/^.*?:\/\/[^\/]*/)[0] + i : location.href.match(/^[^\?]*\/(?:)/)[0] + i), !i)
      throw "[SUNEDITOR.util.getIncludePath.fail] The SUNEDITOR installation path could not be automatically detected. (name: +" + name + ", extension: " + e + ")";
    return i;
  },
  /**
   * @deprecated
   * @description Returns the CSS text that has been applied to the current page.
   * @param {Document|null} doc To get the CSS text of an document(core._wd). If null get the current document.
   * @returns {String} Styles string
   */
  getPageStyle: function(t) {
    let e = "";
    const i = (t || this._d).styleSheets;
    for (let n = 0, l = i.length, r; n < l; n++) {
      try {
        r = i[n].cssRules;
      } catch {
        continue;
      }
      if (r)
        for (let u = 0, h = r.length; u < h; u++)
          e += r[u].cssText;
    }
    return e;
  },
  /**
   * @description Get the argument iframe's document object
   * @param {Element} iframe Iframe element (context.element.wysiwygFrame)
   * @returns {Document}
   */
  getIframeDocument: function(t) {
    let e = t.contentWindow || t.contentDocument;
    return e.document && (e = e.document), e;
  },
  /**
   * @description Get attributes of argument element to string ('class="---" name="---" ')
   * @param {Element} element Element object
   * @param {Array|null} exceptAttrs Array of attribute names to exclude from the result
   * @returns {String}
   */
  getAttributesToString: function(t, e) {
    if (!t.attributes)
      return "";
    const i = t.attributes;
    let n = "";
    for (let l = 0, r = i.length; l < r; l++)
      e && e.indexOf(i[l].name) > -1 || (n += i[l].name + '="' + i[l].value + '" ');
    return n;
  },
  /**
   * @descriptionGets Get the length in bytes of a string.
   * referencing code: "https://github.com/shaan1974/myrdin/blob/master/expressions/string.js#L11"
   * @param {String} text String text
   * @returns {Number}
   */
  getByteLength: function(t) {
    if (!t || !t.toString)
      return 0;
    t = t.toString();
    const e = this._w.encodeURIComponent;
    let i, n;
    return this.isIE_Edge ? (n = this._w.unescape(e(t)).length, i = 0, e(t).match(/(%0A|%0D)/gi) !== null && (i = e(t).match(/(%0A|%0D)/gi).length), n + i) : (n = new this._w.TextEncoder("utf-8").encode(t).length, i = 0, e(t).match(/(%0A|%0D)/gi) !== null && (i = e(t).match(/(%0A|%0D)/gi).length), n + i);
  },
  /**
   * @description It is judged whether it is the edit region top div element or iframe's body tag.
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isWysiwygDiv: function(t) {
    return t && t.nodeType === 1 && (this.hasClass(t, "se-wrapper-wysiwyg") || /^BODY$/i.test(t.nodeName));
  },
  /**
   * @description It is judged whether it is the contenteditable property is false.
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isNonEditable: function(t) {
    return t && t.nodeType === 1 && t.getAttribute("contenteditable") === "false";
  },
  /**
   * @description It is judged whether it is a node related to the text style.
   * (strong|span|font|b|var|i|em|u|ins|s|strike|del|sub|sup|mark|a|label|code)
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isTextStyleElement: function(t) {
    return t && t.nodeType !== 3 && /^(strong|span|font|b|var|i|em|u|ins|s|strike|del|sub|sup|mark|a|label|code|summary)$/i.test(t.nodeName);
  },
  /**
   * @description It is judged whether it is the input element (INPUT, TEXTAREA)
   * @param {Node} element The node to check
   * @returns 
   */
  isInputElement: function(t) {
    return t && t.nodeType === 1 && /^(INPUT|TEXTAREA)$/i.test(t.nodeName);
  },
  /**
   * @description It is judged whether it is the format element (P, DIV, H[1-6], PRE, LI | class="__se__format__replace_xxx")
   * Format element also contain "free format Element"
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isFormatElement: function(t) {
    return t && t.nodeType === 1 && (/^(P|DIV|H[1-6]|PRE|LI|TH|TD|DETAILS)$/i.test(t.nodeName) || this.hasClass(t, "(\\s|^)__se__format__replace_.+(\\s|$)|(\\s|^)__se__format__free_.+(\\s|$)")) && !this.isComponent(t) && !this.isWysiwygDiv(t);
  },
  /**
   * @description It is judged whether it is the range format element. (BLOCKQUOTE, OL, UL, FIGCAPTION, TABLE, THEAD, TBODY, TR, TH, TD | class="__se__format__range_xxx")
   * Range format element is wrap the "format element" and "component"
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isRangeFormatElement: function(t) {
    return t && t.nodeType === 1 && (/^(BLOCKQUOTE|OL|UL|FIGCAPTION|TABLE|THEAD|TBODY|TR|TH|TD|DETAILS)$/i.test(t.nodeName) || this.hasClass(t, "(\\s|^)__se__format__range_.+(\\s|$)"));
  },
  /**
   * @description It is judged whether it is the closure range format element. (TH, TD | class="__se__format__range__closure_xxx")
   * Closure range format elements is included in the range format element.
   *  - Closure range format element is wrap the "format element" and "component"
   * ※ You cannot exit this format with the Enter key or Backspace key.
   * ※ Use it only in special cases. ([ex] format of table cells)
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isClosureRangeFormatElement: function(t) {
    return t && t.nodeType === 1 && (/^(TH|TD)$/i.test(t.nodeName) || this.hasClass(t, "(\\s|^)__se__format__range__closure_.+(\\s|$)"));
  },
  /**
   * @description It is judged whether it is the free format element. (PRE | class="__se__format__free_xxx")
   * Free format elements is included in the format element.
   * Free format elements's line break is "BR" tag.
   * ※ Entering the Enter key in the space on the last line ends "Free Format" and appends "Format".
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isFreeFormatElement: function(t) {
    return t && t.nodeType === 1 && (/^PRE$/i.test(t.nodeName) || this.hasClass(t, "(\\s|^)__se__format__free_.+(\\s|$)")) && !this.isComponent(t) && !this.isWysiwygDiv(t);
  },
  /**
   * @description It is judged whether it is the closure free format element. (class="__se__format__free__closure_xxx")
   * Closure free format elements is included in the free format element.
   *  - Closure free format elements's line break is "BR" tag.
   * ※ You cannot exit this format with the Enter key or Backspace key.
   * ※ Use it only in special cases. ([ex] format of table cells)
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isClosureFreeFormatElement: function(t) {
    return t && t.nodeType === 1 && this.hasClass(t, "(\\s|^)__se__format__free__closure_.+(\\s|$)");
  },
  /**
   * @description It is judged whether it is the component[img, iframe, video, audio, table] cover(class="se-component") and table, hr
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isComponent: function(t) {
    return t && (/se-component/.test(t.className) || /^(TABLE|HR)$/.test(t.nodeName));
  },
  /**
   * @description Checks for "__se__uneditable" in the class list.
   * Components with class "__se__uneditable" cannot be modified.
   * @param {Element} element The element to check
   * @returns {Boolean}
   */
  isUneditableComponent: function(t) {
    return t && this.hasClass(t, "__se__uneditable");
  },
  /**
   * @description It is judged whether it is the component [img, iframe] cover(class="se-component")
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isMediaComponent: function(t) {
    return t && /se-component/.test(t.className);
  },
  /**
   * @description It is judged whether it is the not checking node. (class="katex", "__se__tag")
   * @param {Node} element The node to check
   * @returns {Boolean}
   */
  isNotCheckingNode: function(t) {
    return t && /katex|__se__tag/.test(t.className);
  },
  /**
   * @description If a parent node that contains an argument node finds a format node (util.isFormatElement), it returns that node.
   * @param {Node} element Reference node.
   * @param {Function|null} validation Additional validation function.
   * @returns {Element|null}
   */
  getFormatElement: function(t, e) {
    if (!t)
      return null;
    for (e || (e = function() {
      return !0;
    }); t; ) {
      if (this.isWysiwygDiv(t))
        return null;
      if (this.isRangeFormatElement(t) && t.firstElementChild, this.isFormatElement(t) && e(t))
        return t;
      t = t.parentNode;
    }
    return null;
  },
  /**
   * @description If a parent node that contains an argument node finds a format node (util.isRangeFormatElement), it returns that node.
   * @param {Node} element Reference node.
   * @param {Function|null} validation Additional validation function.
   * @returns {Element|null}
   */
  getRangeFormatElement: function(t, e) {
    if (!t)
      return null;
    for (e || (e = function() {
      return !0;
    }); t; ) {
      if (this.isWysiwygDiv(t))
        return null;
      if (this.isRangeFormatElement(t) && !/^(THEAD|TBODY|TR)$/i.test(t.nodeName) && e(t))
        return t;
      t = t.parentNode;
    }
    return null;
  },
  /**
   * @description If a parent node that contains an argument node finds a free format node (util.isFreeFormatElement), it returns that node.
   * @param {Node} element Reference node.
   * @param {Function|null} validation Additional validation function.
   * @returns {Element|null}
   */
  getFreeFormatElement: function(t, e) {
    if (!t)
      return null;
    for (e || (e = function() {
      return !0;
    }); t; ) {
      if (this.isWysiwygDiv(t))
        return null;
      if (this.isFreeFormatElement(t) && e(t))
        return t;
      t = t.parentNode;
    }
    return null;
  },
  /**
   * @description If a parent node that contains an argument node finds a closure free format node (util.isClosureFreeFormatElement), it returns that node.
   * @param {Node} element Reference node.
   * @param {Function|null} validation Additional validation function.
   * @returns {Element|null}
   */
  getClosureFreeFormatElement: function(t, e) {
    if (!t)
      return null;
    for (e || (e = function() {
      return !0;
    }); t; ) {
      if (this.isWysiwygDiv(t))
        return null;
      if (this.isClosureFreeFormatElement(t) && e(t))
        return t;
      t = t.parentNode;
    }
    return null;
  },
  /**
   * @description Add style and className of copyEl to originEl
   * @param {Element} originEl Origin element
   * @param {Element} copyEl Element to copy
   * @param {Array|null} blacklist Blacklist array(LowerCase)
   */
  copyTagAttributes: function(t, e, i) {
    if (e.style.cssText) {
      const l = e.style;
      for (let r = 0, u = l.length; r < u; r++)
        t.style[l[r]] = l[l[r]];
    }
    const n = e.attributes;
    for (let l = 0, r = n.length, u; l < r; l++)
      u = n[l].name.toLowerCase(), i && i.indexOf(u) > -1 || !n[l].value ? t.removeAttribute(u) : u !== "style" && t.setAttribute(n[l].name, n[l].value);
  },
  /**
   * @description Copy and apply attributes of format tag that should be maintained. (style, class) Ignore "__se__format__" class
   * @param {Element} originEl Origin element
   * @param {Element} copyEl Element to copy
   */
  copyFormatAttributes: function(t, e) {
    e = e.cloneNode(!1), e.className = e.className.replace(/(\s|^)__se__format__[^\s]+/g, ""), this.copyTagAttributes(t, e);
  },
  /**
   * @description Get the item from the array that matches the condition.
   * @param {Array|HTMLCollection|NodeList} array Array to get item
   * @param {Function|null} validation Conditional function
   * @param {Boolean} multi If true, returns all items that meet the criteria otherwise, returns an empty array.
   * If false, returns only one item that meet the criteria otherwise return null.
   * @returns {Array|Node|null}
   */
  getArrayItem: function(t, e, i) {
    if (!t || t.length === 0)
      return null;
    e = e || function() {
      return !0;
    };
    const n = [];
    for (let l = 0, r = t.length, u; l < r; l++)
      if (u = t[l], e(u))
        if (i)
          n.push(u);
        else
          return u;
    return i ? n : null;
  },
  /**
   * @description Check if an array contains an element 
   * @param {Array|HTMLCollection|NodeList} array element array
   * @param {Node} element The element to check for
   * @returns {Boolean}
   */
  arrayIncludes: function(t, e) {
    for (let i = 0; i < t.length; i++)
      if (t[i] === e)
        return !0;
    return !1;
  },
  /**
   * @description Get the index of the argument value in the element array
   * @param {Array|HTMLCollection|NodeList} array element array
   * @param {Node} element The element to find index
   * @returns {Number}
   */
  getArrayIndex: function(t, e) {
    let i = -1;
    for (let n = 0, l = t.length; n < l; n++)
      if (t[n] === e) {
        i = n;
        break;
      }
    return i;
  },
  /**
   * @description Get the next index of the argument value in the element array
   * @param {Array|HTMLCollection|NodeList} array element array
   * @param {Node} item The element to find index
   * @returns {Number}
   */
  nextIdx: function(t, e) {
    let i = this.getArrayIndex(t, e);
    return i === -1 ? -1 : i + 1;
  },
  /**
   * @description Get the previous index of the argument value in the element array
   * @param {Array|HTMLCollection|NodeList} array Element array
   * @param {Node} item The element to find index
   * @returns {Number}
   */
  prevIdx: function(t, e) {
    let i = this.getArrayIndex(t, e);
    return i === -1 ? -1 : i - 1;
  },
  /**
   * @description Returns the index compared to other sibling nodes.
   * @param {Node} node The Node to find index
   * @returns {Number}
   */
  getPositionIndex: function(t) {
    let e = 0;
    for (; t = t.previousSibling; )
      e += 1;
    return e;
  },
  /**
   * @description Returns the position of the "node" in the "parentNode" in a numerical array.
   * ex) <p><span>aa</span><span>bb</span></p> : getNodePath(node: "bb", parentNode: "<P>") -> [1, 0]
   * @param {Node} node The Node to find position path
   * @param {Node|null} parentNode Parent node. If null, wysiwyg div area
   * @param {Object|null} _newOffsets If you send an object of the form "{s: 0, e: 0}", the text nodes that are attached together are merged into one, centered on the "node" argument.
   * "_newOffsets.s" stores the length of the combined characters after "node" and "_newOffsets.e" stores the length of the combined characters before "node".
   * Do not use unless absolutely necessary.
   * @returns {Array}
   */
  getNodePath: function(t, e, i) {
    const n = [];
    let l = !0;
    return this.getParentElement(t, (function(r) {
      if (r === e && (l = !1), l && !this.isWysiwygDiv(r)) {
        if (i && r.nodeType === 3) {
          let u = null, h = null;
          i.s = i.e = 0;
          let s = r.previousSibling;
          for (; s && s.nodeType === 3; )
            h = s.textContent.replace(this.zeroWidthRegExp, ""), i.s += h.length, r.textContent = h + r.textContent, u = s, s = s.previousSibling, this.removeItem(u);
          let m = r.nextSibling;
          for (; m && m.nodeType === 3; )
            h = m.textContent.replace(this.zeroWidthRegExp, ""), i.e += h.length, r.textContent += h, u = m, m = m.nextSibling, this.removeItem(u);
        }
        n.push(r);
      }
      return !1;
    }).bind(this)), n.map(this.getPositionIndex).reverse();
  },
  /**
   * @description Returns the node in the location of the path array obtained from "util.getNodePath".
   * @param {Array} offsets Position array, array obtained from "util.getNodePath"
   * @param {Node} parentNode Base parent element
   * @returns {Node}
   */
  getNodeFromPath: function(t, e) {
    let i = e, n;
    for (let l = 0, r = t.length; l < r && (n = i.childNodes, n.length !== 0); l++)
      n.length <= t[l] ? i = n[n.length - 1] : i = n[t[l]];
    return i;
  },
  /**
   * @description Compares the style and class for equal values.
   * Returns true if both are text nodes.
   * @param {Node} a Node to compare
   * @param {Node} b Node to compare
   * @returns {Boolean}
   */
  isSameAttributes: function(t, e) {
    if (t.nodeType === 3 && e.nodeType === 3)
      return !0;
    if (t.nodeType === 3 || e.nodeType === 3)
      return !1;
    const i = t.style, n = e.style;
    let l = 0;
    for (let m = 0, c = i.length; m < c; m++)
      i[i[m]] === n[i[m]] && l++;
    const r = t.classList, u = e.classList, h = this._w.RegExp;
    let s = 0;
    for (let m = 0, c = r.length; m < c; m++)
      h("(s|^)" + r[m] + "(s|$)").test(u.value) && s++;
    return l === n.length && l === i.length && s === u.length && s === r.length;
  },
  /**
   * @description Check the line element(util.isFormatElement) is empty.
   * @param {Element} element Format element node
   * @returns {Boolean}
   */
  isEmptyLine: function(t) {
    return !t || !t.parentNode || !t.querySelector("IMG, IFRAME, AUDIO, VIDEO, CANVAS, TABLE") && t.children.length === 0 && this.onlyZeroWidthSpace(t.textContent);
  },
  /**
   * @description Check the span's attributes are empty.
   * @param {Element|null} element Element node
   * @returns {Boolean}
   */
  isSpanWithoutAttr: function(t) {
    return !!t && t.nodeType === 1 && /^SPAN$/i.test(t.nodeName) && !t.className && !t.style.cssText;
  },
  /**
   * @description Check the node is a list (ol, ul)
   * @param {Node|String} node The element or element name to check
   * @returns {Boolean}
   */
  isList: function(t) {
    return t && /^(OL|UL)$/i.test(typeof t == "string" ? t : t.nodeName);
  },
  /**
   * @description Check the node is a list cell (li)
   * @param {Node|String} node The element or element name to check
   * @returns {Boolean}
   */
  isListCell: function(t) {
    return t && /^LI$/i.test(typeof t == "string" ? t : t.nodeName);
  },
  /**
   * @description Check the node is a table (table, thead, tbody, tr, th, td)
   * @param {Node|String} node The element or element name to check
   * @returns {Boolean}
   */
  isTable: function(t) {
    return t && /^(TABLE|THEAD|TBODY|TR|TH|TD)$/i.test(typeof t == "string" ? t : t.nodeName);
  },
  /**
   * @description Check the node is a table cell (td, th)
   * @param {Node|String} node The element or element name to check
   * @returns {Boolean}
   */
  isCell: function(t) {
    return t && /^(TD|TH)$/i.test(typeof t == "string" ? t : t.nodeName);
  },
  /**
   * @description Check the node is a break node (BR)
   * @param {Node|String} node The element or element name to check
   * @returns {Boolean}
   */
  isBreak: function(t) {
    return t && /^BR$/i.test(typeof t == "string" ? t : t.nodeName);
  },
  /**
   * @description Check the node is a anchor node (A)
   * @param {Node|String} node The element or element name to check
   * @returns {Boolean}
   */
  isAnchor: function(t) {
    return t && /^A$/i.test(typeof t == "string" ? t : t.nodeName);
  },
  /**
   * @description Check the node is a media node (img, iframe, audio, video, canvas)
   * @param {Node|String} node The element or element name to check
   * @returns {Boolean}
   */
  isMedia: function(t) {
    return t && /^(IMG|IFRAME|AUDIO|VIDEO|CANVAS)$/i.test(typeof t == "string" ? t : t.nodeName);
  },
  /**
   * @description Check the node is a figure tag or util.isMedia()
   * @param {Node|String} node The element or element name to check
   * @returns {Boolean}
   */
  isFigures: function(t) {
    return t && (this.isMedia(t) || /^(FIGURE)$/i.test(typeof t == "string" ? t : t.nodeName));
  },
  /**
   * @description Checks for numeric (with decimal point).
   * @param {String|Number} text Text string or number
   * @returns {Boolean}
   */
  isNumber: function(t) {
    return !!t && /^-?\d+(\.\d+)?$/.test(t + "");
  },
  /**
   * @description Get a number.
   * @param {String|Number} text Text string or number
   * @param {Number} maxDec Maximum number of decimal places (-1 : Infinity)
   * @returns {Number}
   */
  getNumber: function(t, e) {
    if (!t)
      return 0;
    let i = (t + "").match(/-?\d+(\.\d+)?/);
    return !i || !i[0] ? 0 : (i = i[0], e < 0 ? i * 1 : e === 0 ? this._w.Math.round(i * 1) : (i * 1).toFixed(e) * 1);
  },
  /**
   * @description Get all "children" of the argument value element (Without text nodes)
   * @param {Element} element element to get child node
   * @param {Function|null} validation Conditional function
   * @returns {Array}
   */
  getListChildren: function(t, e) {
    const i = [];
    return !t || !t.children || t.children.length === 0 || (e = e || function() {
      return !0;
    }, function n(l) {
      if (t !== l && e(l) && i.push(l), l.children)
        for (let r = 0, u = l.children.length; r < u; r++)
          n(l.children[r]);
    }(t)), i;
  },
  /**
   * @description Get all "childNodes" of the argument value element (Include text nodes)
   * @param {Node} element element to get child node
   * @param {Function|null} validation Conditional function
   * @returns {Array}
   */
  getListChildNodes: function(t, e) {
    const i = [];
    return !t || t.childNodes.length === 0 || (e = e || function() {
      return !0;
    }, function n(l) {
      t !== l && e(l) && i.push(l);
      for (let r = 0, u = l.childNodes.length; r < u; r++)
        n(l.childNodes[r]);
    }(t)), i;
  },
  /**
   * @description Returns the number of parents nodes.
   * "0" when the parent node is the WYSIWYG area.
   * "-1" when the element argument is the WYSIWYG area.
   * @param {Node} element The element to check
   * @returns {Number}
   */
  getElementDepth: function(t) {
    if (!t || this.isWysiwygDiv(t))
      return -1;
    let e = 0;
    for (t = t.parentNode; t && !this.isWysiwygDiv(t); )
      e += 1, t = t.parentNode;
    return e;
  },
  /**
   * @description Compares two elements to find a common ancestor, and returns the order of the two elements.
   * @param {Node} a Node to compare.
   * @param {Node} b Node to compare.
   * @returns {Object} { ancesstor, a, b, result: (a > b ? 1 : a < b ? -1 : 0) };
   */
  compareElements: function(t, e) {
    let i = t, n = e;
    for (; i && n && i.parentNode !== n.parentNode; )
      i = i.parentNode, n = n.parentNode;
    if (!i || !n)
      return { ancestor: null, a: t, b: e, result: 0 };
    const l = i.parentNode.childNodes, r = this.getArrayIndex(l, i), u = this.getArrayIndex(l, n);
    return {
      ancestor: i.parentNode,
      a: i,
      b: n,
      result: r > u ? 1 : r < u ? -1 : 0
    };
  },
  /**
   * @description Get the parent element of the argument value.
   * A tag that satisfies the query condition is imported.
   * Returns null if not found.
   * @param {Node} element Reference element
   * @param {String|Function} query Query String (nodeName, .className, #ID, :name) or validation function.
   * Not use it like jquery.
   * Only one condition can be entered at a time.
   * @returns {Element|null}
   */
  getParentElement: function(t, e) {
    let i;
    if (typeof e == "function")
      i = e;
    else {
      let n;
      /^\./.test(e) ? (n = "className", e = e.split(".")[1]) : /^#/.test(e) ? (n = "id", e = "^" + e.split("#")[1] + "$") : /^:/.test(e) ? (n = "name", e = "^" + e.split(":")[1] + "$") : (n = "nodeName", e = "^" + e + "$");
      const l = new this._w.RegExp(e, "i");
      i = function(r) {
        return l.test(r[n]);
      };
    }
    for (; t && !i(t); ) {
      if (this.isWysiwygDiv(t))
        return null;
      t = t.parentNode;
    }
    return t;
  },
  /**
   * @description Get the child element of the argument value.
   * A tag that satisfies the query condition is imported.
   * Returns null if not found.
   * @param {Node} element Reference element
   * @param {String|Function} query Query String (nodeName, .className, #ID, :name) or validation function.
   * @param {Boolean} last If true returns the last node among the found child nodes. (default: first node)
   * Not use it like jquery.
   * Only one condition can be entered at a time.
   * @returns {Element|null}
   */
  getChildElement: function(t, e, i) {
    let n;
    if (typeof e == "function")
      n = e;
    else {
      let r;
      /^\./.test(e) ? (r = "className", e = e.split(".")[1]) : /^#/.test(e) ? (r = "id", e = "^" + e.split("#")[1] + "$") : /^:/.test(e) ? (r = "name", e = "^" + e.split(":")[1] + "$") : (r = "nodeName", e = "^" + (e === "text" ? "#" + e : e) + "$");
      const u = new this._w.RegExp(e, "i");
      n = function(h) {
        return u.test(h[r]);
      };
    }
    const l = this.getListChildNodes(t, function(r) {
      return n(r);
    });
    return l[i ? l.length - 1 : 0];
  },
  /**
   * @description 1. The first node of all the child nodes of the "first" element is returned.
   * 2. The last node of all the child nodes of the "last" element is returned.
   * 3. When there is no "last" element, the first and last nodes of all the children of the "first" element are returned.
   * { sc: "first", ec: "last" }
   * @param {Node} first First element
   * @param {Node|null} last Last element
   * @returns {Object}
   */
  getEdgeChildNodes: function(t, e) {
    if (t) {
      for (e || (e = t); t && t.nodeType === 1 && t.childNodes.length > 0 && !this.isBreak(t); )
        t = t.firstChild;
      for (; e && e.nodeType === 1 && e.childNodes.length > 0 && !this.isBreak(e); )
        e = e.lastChild;
      return {
        sc: t,
        ec: e || t
      };
    }
  },
  /**
   * @description Returns the position of the left and top of argument. {left:0, top:0}
   * @param {Node} element Target node
   * @param {Element|null} wysiwygFrame When use iframe option, iframe object should be sent (context.element.wysiwygFrame)
   * @returns {Object}
   */
  getOffset: function(t, e) {
    let i = 0, n = 0, l = t.nodeType === 3 ? t.parentElement : t;
    const r = this.getParentElement(t, this.isWysiwygDiv.bind(this));
    for (; l && !this.hasClass(l, "se-container") && l !== r; )
      i += l.offsetLeft, n += l.offsetTop, l = l.offsetParent;
    const u = e && /iframe/i.test(e.nodeName);
    return {
      left: i + (u ? e.parentElement.offsetLeft : 0),
      top: n - (r ? r.scrollTop : 0) + (u ? e.parentElement.offsetTop : 0)
    };
  },
  /**
   * @description It compares the start and end indexes of "a" and "b" and returns the number of overlapping indexes in the range.
   * ex) 1, 5, 4, 6 => "2" (4 ~ 5)
   * @param {Number} aStart Start index of "a"
   * @param {Number} aEnd End index of "a"
   * @param {Number} bStart Start index of "b"
   * @param {Number} bEnd Start index of "b"
   * @returns {Number}
   */
  getOverlapRangeAtIndex: function(t, e, i, n) {
    if (t <= n ? e < i : e > i)
      return 0;
    const l = (t > i ? t : i) - (e < n ? e : n);
    return (l < 0 ? l * -1 : l) + 1;
  },
  /**
   * @description Set the text content value of the argument value element
   * @param {Node} element Element to replace text content
   * @param {String} txt Text to be applied
   */
  changeTxt: function(t, e) {
    !t || !e || (t.textContent = e);
  },
  /**
   * @description Replace element
   * @param {Element} element Target element
   * @param {String|Element} newElement String or element of the new element to apply
   */
  changeElement: function(t, e) {
    if (typeof e == "string")
      if (t.outerHTML)
        t.outerHTML = e;
      else {
        const i = this.createElement("DIV");
        i.innerHTML = e, e = i.firstChild, t.parentNode.replaceChild(e, t);
      }
    else
      e.nodeType === 1 && t.parentNode.replaceChild(e, t);
  },
  /**
   * @description Set style, if all styles are deleted, the style properties are deleted.
   * @param {Element} element Element to set style
   * @param {String} styleName Style attribute name (marginLeft, textAlign...)
   * @param {String|Number} value Style value
   */
  setStyle: function(t, e, i) {
    t.style[e] = i, !i && !t.style.cssText && t.removeAttribute("style");
  },
  /**
   * @description Determine whether any of the matched elements are assigned the given class
   * @param {Element} element Elements to search class name
   * @param {String} className Class name to search for
   * @returns {Boolean}
   */
  hasClass: function(t, e) {
    if (t)
      return new this._w.RegExp(e).test(t.className);
  },
  /**
   * @description Append the className value of the argument value element
   * @param {Element} element Elements to add class name
   * @param {String} className Class name to be add
   */
  addClass: function(t, e) {
    !t || new this._w.RegExp("(\\s|^)" + e + "(\\s|$)").test(t.className) || (t.className += (t.className.length > 0 ? " " : "") + e);
  },
  /**
   * @description Delete the className value of the argument value element
   * @param {Element} element Elements to remove class name
   * @param {String} className Class name to be remove
   */
  removeClass: function(t, e) {
    if (!t)
      return;
    const i = new this._w.RegExp("(\\s|^)" + e + "(\\s|$)");
    t.className = t.className.replace(i, " ").trim(), t.className.trim() || t.removeAttribute("class");
  },
  /**
   * @description Argument value If there is no class name, insert it and delete the class name if it exists
   * @param {Element} element Elements to replace class name
   * @param {String} className Class name to be change
   * @returns {Boolean|undefined}
   */
  toggleClass: function(t, e) {
    if (!t)
      return;
    let i = !1;
    const n = new this._w.RegExp("(\\s|^)" + e + "(\\s|$)");
    return n.test(t.className) ? t.className = t.className.replace(n, " ").trim() : (t.className += " " + e, i = !0), t.className.trim() || t.removeAttribute("class"), i;
  },
  /**
   * @description Checks if element can't be easily enabled
   * @param {Element} element Element to check for
   */
  isImportantDisabled: function(t) {
    return t.hasAttribute("data-important-disabled");
  },
  /**
   * @description In the predefined code view mode, the buttons except the executable button are changed to the 'disabled' state.
   * core.codeViewDisabledButtons (An array of buttons whose class name is not "se-code-view-enabled")
   * core.resizingDisabledButtons (An array of buttons whose class name is not "se-resizing-enabled")
   * @param {Boolean} disabled Disabled value
   * @param {Array|HTMLCollection|NodeList} buttonList Button array
   * @param {Boolean} important If priveleged mode should be used (Necessary to switch importantDisabled buttons)
   */
  setDisabledButtons: function(t, e, i) {
    for (let n = 0, l = e.length; n < l; n++) {
      let r = e[n];
      (i || !this.isImportantDisabled(r)) && (r.disabled = t), i && (t ? r.setAttribute("data-important-disabled", "") : r.removeAttribute("data-important-disabled"));
    }
  },
  /**
   * @description Delete argumenu value element
   * @param {Node} item Node to be remove
   */
  removeItem: function(t) {
    t && (typeof t.remove == "function" ? t.remove() : t.parentNode && t.parentNode.removeChild(t));
  },
  /**
   * @description Delete all parent nodes that match the condition.
   * Returns an {sc: previousSibling, ec: nextSibling}(the deleted node reference) or null.
   * @param {Node} item Node to be remove
   * @param {Function|null} validation Validation function. default(Deleted if it only have breakLine and blanks)
   * @param {Element|null} stopParent Stop when the parent node reaches stopParent
   * @returns {Object|null} {sc: previousSibling, ec: nextSibling}
   */
  removeItemAllParents: function(t, e, i) {
    if (!t)
      return null;
    let n = null;
    return e || (e = (function(l) {
      if (l === i || this.isComponent(l))
        return !1;
      const r = l.textContent.trim();
      return r.length === 0 || /^(\n|\u200B)+$/.test(r);
    }).bind(this)), function l(r) {
      if (!Yt.isWysiwygDiv(r)) {
        const u = r.parentNode;
        u && e(r) && (n = {
          sc: r.previousElementSibling,
          ec: r.nextElementSibling
        }, Yt.removeItem(r), l(u));
      }
    }(t), n;
  },
  /**
   * @description Detach Nested all nested lists under the "baseNode".
   * Returns a list with nested removed.
   * @param {Node} baseNode Element on which to base.
   * @param {Boolean} all If true, it also detach all nested lists of a returned list.
   * @returns {Element}
   */
  detachNestedList: function(t, e) {
    const i = this._deleteNestedList(t);
    let n, l;
    if (i) {
      n = i.cloneNode(!1), l = i.childNodes;
      const u = this.getPositionIndex(t);
      for (; l[u]; )
        n.appendChild(l[u]);
    } else
      n = t;
    let r;
    if (e)
      r = this.getListChildren(n, (function(u) {
        return this.isListCell(u) && !u.previousElementSibling;
      }).bind(this));
    else {
      const u = this.getElementDepth(t) + 2;
      r = this.getListChildren(t, (function(h) {
        return this.isListCell(h) && !h.previousElementSibling && this.getElementDepth(h) === u;
      }).bind(this));
    }
    for (let u = 0, h = r.length; u < h; u++)
      this._deleteNestedList(r[u]);
    return i && (i.parentNode.insertBefore(n, i.nextSibling), l && l.length === 0 && this.removeItem(i)), n === t ? n.parentNode : n;
  },
  /**
   * @description Sub function of util.detachNestedList method.
   * @private
   */
  _deleteNestedList: function(t) {
    const e = t.parentNode;
    let i = e, n = i.parentNode, l, r, u, h, s;
    for (; this.isListCell(n); ) {
      for (h = this.getPositionIndex(t), l = n.nextElementSibling, r = n.parentNode, u = i; u; ) {
        if (i = i.nextSibling, this.isList(u)) {
          for (s = u.childNodes; s[h]; )
            r.insertBefore(s[h], l);
          s.length === 0 && this.removeItem(u);
        } else
          r.appendChild(u);
        u = i;
      }
      i = r, n = r.parentNode;
    }
    return e.children.length === 0 && this.removeItem(e), r;
  },
  /**
   * @description Split all tags based on "baseNode"
   * Returns the last element of the splited tag.
   * @param {Node} baseNode Element or text node on which to base
   * @param {Number|Node|null} offset Text offset of "baseNode" (Only valid when "baseNode" is a text node)
   * @param {Number} depth The nesting depth of the element being split. (default: 0)
   * @returns {Element}
   */
  splitElement: function(t, e, i) {
    if (this.isWysiwygDiv(t))
      return t;
    if (e && !this.isNumber(e)) {
      const x = t.childNodes;
      let T = this.getPositionIndex(e);
      const L = t.cloneNode(!1), A = t.cloneNode(!1);
      for (let a = 0, o = x.length; a < o; a++) {
        if (a < T)
          L.appendChild(x[a]);
        else if (a > T)
          A.appendChild(x[a]);
        else
          continue;
        a--, o--, T--;
      }
      return L.childNodes.length > 0 && t.parentNode.insertBefore(L, t), A.childNodes.length > 0 && t.parentNode.insertBefore(A, t.nextElementSibling), t;
    }
    const n = t.parentNode;
    let l = 0, r = 1, u = !0, h, s, m;
    if ((!i || i < 0) && (i = 0), t.nodeType === 3) {
      if (l = this.getPositionIndex(t), e >= 0 && t.length !== e) {
        t.splitText(e);
        const x = this.getNodeFromPath([l + 1], n);
        this.onlyZeroWidthSpace(x) && (x.data = this.zeroWidthSpace);
      }
    } else if (t.nodeType === 1) {
      if (e === 0) {
        for (; t.firstChild; )
          t = t.firstChild;
        if (t.nodeType === 3) {
          const x = this.createTextNode(this.zeroWidthSpace);
          t.parentNode.insertBefore(x, t), t = x;
        }
      }
      t.previousSibling ? t = t.previousSibling : this.getElementDepth(t) === i && (u = !1);
    }
    t.nodeType === 1 && (r = 0);
    let c = t;
    for (; this.getElementDepth(c) > i; )
      for (l = this.getPositionIndex(c) + r, c = c.parentNode, m = h, h = c.cloneNode(!1), s = c.childNodes, m && (this.isListCell(h) && this.isList(m) && m.firstElementChild ? (h.innerHTML = m.firstElementChild.innerHTML, Yt.removeItem(m.firstElementChild), m.children.length > 0 && h.appendChild(m)) : h.appendChild(m)); s[l]; )
        h.appendChild(s[l]);
    c.childNodes.length <= 1 && (!c.firstChild || c.firstChild.textContent.length === 0) && (c.innerHTML = "<br>");
    const g = c.parentNode;
    return u && (c = c.nextSibling), h ? (this.mergeSameTags(h, null, !1), this.mergeNestedTags(h, (function(x) {
      return this.isList(x);
    }).bind(this)), h.childNodes.length > 0 ? g.insertBefore(h, c) : h = c, this.isListCell(h) && h.children && this.isList(h.children[0]) && h.insertBefore(this.createElement("BR"), h.children[0]), n.childNodes.length === 0 && this.removeItem(n), h) : c;
  },
  /**
   * @description Use with "npdePath (util.getNodePath)" to merge the same attributes and tags if they are present and modify the nodepath.
   * If "offset" has been changed, it will return as much "offset" as it has been modified.
   * An array containing change offsets is returned in the order of the "nodePathArray" array.
   * @param {Element} element Element
   * @param {Array|null} nodePathArray Array of NodePath object ([util.getNodePath(), ..])
   * @param {Boolean} onlyText If true, non-text nodes(!util._isIgnoreNodeChange) like 'span', 'strong'.. are ignored.
   * @returns {Array} [offset, ..]
   */
  mergeSameTags: function(t, e, i) {
    const n = this, l = e ? e.length : 0;
    let r = null;
    return l && (r = this._w.Array.apply(null, new this._w.Array(l)).map(this._w.Number.prototype.valueOf, 0)), function u(h, s, m) {
      const c = h.childNodes;
      for (let g = 0, x = c.length, T, L; g < x && (T = c[g], L = c[g + 1], !!T); g++) {
        if (i && n._isIgnoreNodeChange(T) || !i && (n.isTable(T) || n.isListCell(T) || n.isFormatElement(T) && !n.isFreeFormatElement(T))) {
          (n.isTable(T) || n.isListCell(T)) && u(T, s + 1, g);
          continue;
        }
        if (x === 1 && h.nodeName === T.nodeName && h.parentNode) {
          if (l) {
            let A, a, o, d, p;
            for (let v = 0; v < l; v++)
              if (A = e[v], A && A[s] === g) {
                for (a = T, o = h, d = s, p = !0; d >= 0; ) {
                  if (n.getArrayIndex(o.childNodes, a) !== A[d]) {
                    p = !1;
                    break;
                  }
                  a = T.parentNode, o = a.parentNode, d--;
                }
                p && (A.splice(s, 1), A[s] = g);
              }
          }
          n.copyTagAttributes(T, h), h.parentNode.insertBefore(T, h), n.removeItem(h);
        }
        if (!L) {
          T.nodeType === 1 && u(T, s + 1, g);
          break;
        }
        if (T.nodeName === L.nodeName && n.isSameAttributes(T, L) && T.href === L.href) {
          const A = T.childNodes;
          let a = 0;
          for (let v = 0, _ = A.length; v < _; v++)
            A[v].textContent.length > 0 && a++;
          const o = T.lastChild, d = L.firstChild;
          let p = 0;
          if (o && d) {
            const v = o.nodeType === 3 && d.nodeType === 3;
            p = o.textContent.length;
            let _ = o.previousSibling;
            for (; _ && _.nodeType === 3; )
              p += _.textContent.length, _ = _.previousSibling;
            if (a > 0 && o.nodeType === 3 && d.nodeType === 3 && (o.textContent.length > 0 || d.textContent.length > 0) && a--, l) {
              let b = null;
              for (let S = 0; S < l; S++)
                if (b = e[S], b && b[s] > g) {
                  if (s > 0 && b[s - 1] !== m)
                    continue;
                  b[s] -= 1, b[s + 1] >= 0 && b[s] === g && (b[s + 1] += a, v && o && o.nodeType === 3 && d && d.nodeType === 3 && (r[S] += p));
                }
            }
          }
          if (T.nodeType === 3) {
            if (p = T.textContent.length, T.textContent += L.textContent, l) {
              let v = null;
              for (let _ = 0; _ < l; _++)
                if (v = e[_], v && v[s] > g) {
                  if (s > 0 && v[s - 1] !== m)
                    continue;
                  v[s] -= 1, v[s + 1] >= 0 && v[s] === g && (v[s + 1] += a, r[_] += p);
                }
            }
          } else
            T.innerHTML += L.innerHTML;
          n.removeItem(L), g--;
        } else
          T.nodeType === 1 && u(T, s + 1, g);
      }
    }(t, 0, 0), r;
  },
  /**
   * @description Remove nested tags without other child nodes.
   * @param {Element} element Element object
   * @param {Function|String|null} validation Validation function / String("tag1|tag2..") / If null, all tags are applicable.
   */
  mergeNestedTags: function(t, e) {
    typeof e == "string" ? e = (function(i) {
      return this.test(i.tagName);
    }).bind(new this._w.RegExp("^(" + (e || ".+") + ")$", "i")) : typeof e != "function" && (e = function() {
      return !0;
    }), function i(n) {
      let l = n.children;
      if (l.length === 1 && l[0].nodeName === n.nodeName && e(n)) {
        const r = l[0];
        for (l = r.children; l[0]; )
          n.appendChild(l[0]);
        n.removeChild(r);
      }
      for (let r = 0, u = n.children.length; r < u; r++)
        i(n.children[r]);
    }(t);
  },
  /**
   * @description Delete a empty child node of argument element.
   * @param {Element} element Element node
   * @param {Node|null} notRemoveNode Do not remove node
   * @param {boolean} forceDelete When all child nodes are deleted, the parent node is also deleted.
   */
  removeEmptyNode: function(t, e, i) {
    const n = this;
    e && (e = n.getParentElement(e, function(l) {
      return t === l.parentElement;
    })), function l(r) {
      if (n._notTextNode(r) || r === e || n.isNonEditable(r))
        return 0;
      if (r !== t && n.onlyZeroWidthSpace(r.textContent) && (!r.firstChild || !n.isBreak(r.firstChild)) && !r.querySelector(n._allowedEmptyNodeList)) {
        if (r.parentNode)
          return r.parentNode.removeChild(r), -1;
      } else {
        const u = r.children;
        for (let h = 0, s = u.length, m = 0; h < s; h++)
          !u[h + m] || n.isComponent(u[h + m]) || (m += l(u[h + m]));
      }
      return 0;
    }(t), t.childNodes.length === 0 && (i ? this.removeItem(t) : t.innerHTML = "<br>");
  },
  /**
   * @description Remove whitespace between tags in HTML string.
   * @param {String} html HTML string
   * @returns {String}
   */
  htmlRemoveWhiteSpace: function(t) {
    return t ? t.trim().replace(/<\/?(?!strong|span|font|b|var|i|em|u|ins|s|strike|del|sub|sup|mark|a|label|code|summary)[^>^<]+>\s+(?=<)/ig, function(e) {
      return e.replace(/\n/g, "").replace(/\s+/, " ");
    }) : "";
  },
  /**
  * @description HTML code compression
  * @param {string} html HTML string
  * @returns {string} HTML string
  */
  htmlCompress: function(t) {
    return t.replace(/\n/g, "").replace(/(>)(?:\s+)(<)/g, "$1$2");
  },
  /**
   * @description Sort a element array by depth of element.
   * @param {Array} array Array object
   * @param {Boolean} des true: descending order / false: ascending order
   */
  sortByDepth: function(t, e) {
    const i = e ? 1 : -1, n = i * -1;
    t.sort((function(l, r) {
      return !this.isListCell(l) || !this.isListCell(r) ? 0 : (l = this.getElementDepth(l), r = this.getElementDepth(r), l > r ? i : l < r ? n : 0);
    }).bind(this));
  },
  _isExcludeSelectionElement: function(t) {
    return !/FIGCAPTION/i.test(t.nodeName) && (this.isComponent(t) || /FIGURE/i.test(t.nodeName));
  },
  /**
   * @description Nodes that need to be added without modification when changing text nodes
   * @param {Node} element Element to check
   * @returns {Boolean}
   * @private
   */
  _isIgnoreNodeChange: function(t) {
    return t && t.nodeType !== 3 && (this.isNonEditable(t) || !this.isTextStyleElement(t));
  },
  /**
   * @description Nodes that must remain undetached when changing text nodes (A, Label, Code, Span:font-size)
   * @param {Node|String} element Element to check
   * @returns {Boolean}
   * @private
   */
  _isMaintainedNode: function(t) {
    return t && t.nodeType !== 3 && /^(a|label|code|summary)$/i.test(typeof t == "string" ? t : t.nodeName);
  },
  /**
   * @description Node with font-size style
   * @param {Node} element Element to check
   * @returns {Boolean}
   * @private
   */
  _isSizeNode: function(t) {
    return t && t.nodeType !== 3 && this.isTextStyleElement(t) && !!t.style.fontSize;
  },
  /**
   * @description Nodes without text
   * @param {Node} element Element to check
   * @returns {Boolean}
   * @private
   */
  _notTextNode: function(t) {
    return t && t.nodeType !== 3 && (this.isComponent(t) || /^(br|input|select|canvas|img|iframe|audio|video)$/i.test(typeof t == "string" ? t : t.nodeName));
  },
  /**
   * @deprecated
   * @description Check disallowed tags
   * @param {Node} element Element to check
   * @returns {Boolean}
   * @private
   */
  _disallowedTags: function(t) {
    return /^(meta|script|link|style|[a-z]+\:[a-z]+)$/i.test(t.nodeName);
  },
  /**
   * @description Create whitelist RegExp object.
   * Return RegExp format: new RegExp("<\\/?\\b(?!" + list + ")\\b[^>^<]*+>", "gi")
   * @param {String} list Tags list ("br|p|div|pre...")
   * @returns {RegExp}
   */
  createTagsWhitelist: function(t) {
    return new RegExp("<\\/?\\b(?!\\b" + (t || "").replace(/\|/g, "\\b|\\b") + "\\b)[^>]*>", "gi");
  },
  /**
   * @description Create blacklist RegExp object.
   * Return RegExp format: new RegExp("<\\/?\\b(?:" + list + ")\\b[^>^<]*+>", "gi")
   * @param {String} list Tags list ("br|p|div|pre...")
   * @returns {RegExp}
   */
  createTagsBlacklist: function(t) {
    return new RegExp("<\\/?\\b(?:\\b" + (t || "^").replace(/\|/g, "\\b|\\b") + "\\b)[^>]*>", "gi");
  },
  /**
   * @description Fix tags that do not fit the editor format.
   * @param {Element} documentFragment Document fragment "DOCUMENT_FRAGMENT_NODE" (nodeType === 11)
   * @param {RegExp} htmlCheckWhitelistRegExp Editor tags whitelist (core._htmlCheckWhitelistRegExp)
   * @param {RegExp} htmlCheckBlacklistRegExp Editor tags blacklist (core._htmlCheckBlacklistRegExp)
   * @param {Function} classNameFilter Class name filter function
   * @private
   */
  _consistencyCheckOfHTML: function(t, e, i, n) {
    const l = [], r = [], u = [], h = [], s = this.getListChildNodes(t, (function(c) {
      if (c.nodeType !== 1)
        return this.isList(c.parentElement) && l.push(c), !1;
      if (i.test(c.nodeName) || !e.test(c.nodeName) && c.childNodes.length === 0 && this.isNotCheckingNode(c))
        return l.push(c), !1;
      const g = !this.getParentElement(c, this.isNotCheckingNode);
      if (!this.isTable(c) && !this.isListCell(c) && !this.isAnchor(c) && (this.isFormatElement(c) || this.isRangeFormatElement(c) || this.isTextStyleElement(c)) && c.childNodes.length === 0 && g)
        return r.push(c), !1;
      if (this.isList(c.parentNode) && !this.isList(c) && !this.isListCell(c))
        return u.push(c), !1;
      if (this.isCell(c)) {
        const T = c.firstElementChild;
        if (!this.isFormatElement(T) && !this.isRangeFormatElement(T) && !this.isComponent(T))
          return h.push(c), !1;
      }
      if (g && c.className) {
        const T = new this._w.Array(c.classList).map(n).join(" ").trim();
        T ? c.className = T : c.removeAttribute("class");
      }
      return c.parentNode !== t && g && (this.isListCell(c) && !this.isList(c.parentNode) || (this.isFormatElement(c) || this.isComponent(c)) && !this.isRangeFormatElement(c.parentNode) && !this.getParentElement(c, this.isComponent));
    }).bind(this));
    for (let c = 0, g = l.length; c < g; c++)
      this.removeItem(l[c]);
    const m = [];
    for (let c = 0, g = s.length, x, T; c < g; c++)
      if (x = s[c], T = x.parentNode, !(!T || !T.parentNode))
        if (this.getParentElement(x, this.isListCell)) {
          const L = x.childNodes;
          for (let A = L.length - 1; g >= 0; A--)
            T.insertBefore(x, L[A]);
          m.push(x);
        } else
          T.parentNode.insertBefore(x, T), m.push(T);
    for (let c = 0, g = m.length, x; c < g; c++)
      x = m[c], this.onlyZeroWidthSpace(x.textContent.trim()) && this.removeItem(x);
    for (let c = 0, g = r.length; c < g; c++)
      this.removeItem(r[c]);
    for (let c = 0, g = u.length, x, T, L, A; c < g; c++)
      if (x = u[c], A = x.parentNode, !!A)
        if (T = this.createElement("LI"), this.isFormatElement(x)) {
          for (L = x.childNodes; L[0]; )
            T.appendChild(L[0]);
          A.insertBefore(T, x), this.removeItem(x);
        } else
          x = x.nextSibling, T.appendChild(u[c]), A.insertBefore(T, x);
    for (let c = 0, g = h.length, x, T; c < g; c++)
      x = h[c], T = this.createElement("DIV"), T.innerHTML = x.textContent.trim().length === 0 && x.children.length === 0 ? "<br>" : x.innerHTML, x.innerHTML = T.outerHTML;
  },
  _setDefaultOptionStyle: function(t, e) {
    let i = "";
    t.height && (i += "height:" + t.height + ";"), t.minHeight && (i += "min-height:" + t.minHeight + ";"), t.maxHeight && (i += "max-height:" + t.maxHeight + ";"), t.position && (i += "position:" + t.position + ";"), t.width && (i += "width:" + t.width + ";"), t.minWidth && (i += "min-width:" + t.minWidth + ";"), t.maxWidth && (i += "max-width:" + t.maxWidth + ";");
    let n = "", l = "", r = "";
    e = i + e;
    const u = e.split(";");
    for (let h = 0, s = u.length, m; h < s; h++)
      if (m = u[h].trim(), !!m) {
        if (/^(min-|max-)?width\s*:/.test(m) || /^(z-index|position)\s*:/.test(m)) {
          n += m + ";";
          continue;
        }
        if (/^(min-|max-)?height\s*:/.test(m)) {
          /^height/.test(m) && m.split(":")[1].trim() === "auto" && (t.height = "auto"), l += m + ";";
          continue;
        }
        r += m + ";";
      }
    return {
      top: n,
      frame: l,
      editor: r
    };
  },
  _setIframeDocument: function(t, e) {
    t.setAttribute("scrolling", "auto"), t.contentDocument.head.innerHTML = '<meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">' + this._setIframeCssTags(e), t.contentDocument.body.className = e._editableClass, t.contentDocument.body.setAttribute("contenteditable", !0);
  },
  _setIframeCssTags: function(t) {
    const e = t.iframeCSSFileName, i = this._w.RegExp;
    let n = "";
    for (let l = 0, r = e.length, u; l < r; l++) {
      if (u = [], /(^https?:\/\/)|(^data:text\/css,)/.test(e[l]))
        u.push(e[l]);
      else {
        const h = new i("(^|.*[\\/])" + e[l] + "(\\..+)?\\.css(?:\\?.*|;.*)?$", "i");
        for (let s = document.getElementsByTagName("link"), m = 0, c = s.length, g; m < c; m++)
          g = s[m].href.match(h), g && u.push(g[0]);
      }
      if (!u || u.length === 0)
        throw '[SUNEDITOR.constructor.iframe.fail] The suneditor CSS files installation path could not be automatically detected. Please set the option property "iframeCSSFileName" before creating editor instances.';
      for (let h = 0, s = u.length; h < s; h++)
        n += '<link href="' + u[h] + '" rel="stylesheet">';
    }
    return n + (t.height === "auto" ? `<style>
/** Iframe height auto */
body{height: min-content; overflow: hidden;}
</style>` : "");
  }
}, be = Yt, fn = {
  /**
   * @description document create
   * @param {Element} element Textarea
   * @param {Object} options Options
   * @returns {Object}
   */
  init: function(t, e) {
    typeof e != "object" && (e = {});
    const i = document;
    this._initOptions(t, e);
    const n = i.createElement("DIV");
    n.className = "sun-editor" + (e.rtl ? " se-rtl" : ""), t.id && (n.id = "suneditor_" + t.id);
    const l = i.createElement("DIV");
    l.className = "se-container";
    const r = this._createToolBar(i, e.buttonList, e.plugins, e), u = r.element.cloneNode(!1);
    u.className += " se-toolbar-shadow", r.element.style.visibility = "hidden", r.pluginCallButtons.math && this._checkKatexMath(e.katex);
    const h = i.createElement("DIV");
    h.className = "se-arrow";
    const s = i.createElement("DIV");
    s.className = "se-toolbar-sticky-dummy";
    const m = i.createElement("DIV");
    m.className = "se-wrapper";
    const c = this._initElements(e, n, r.element, h), g = c.bottomBar, x = c.wysiwygFrame, T = c.placeholder;
    let L = c.codeView;
    const A = g.resizingBar, a = g.navigation, o = g.charWrapper, d = g.charCounter, p = i.createElement("DIV");
    p.className = "se-loading-box sun-editor-common", p.innerHTML = '<div class="se-loading-effect"></div>';
    const v = i.createElement("DIV");
    v.className = "se-line-breaker", v.innerHTML = '<button class="se-btn">' + e.icons.line_break + "</button>";
    const _ = i.createElement("DIV");
    _.className += "se-line-breaker-component";
    const b = _.cloneNode(!0);
    _.innerHTML = b.innerHTML = e.icons.line_break;
    const S = i.createElement("DIV");
    S.className = "se-resizing-back";
    const k = e.toolbarContainer;
    k && (k.appendChild(r.element), k.appendChild(u));
    const w = e.resizingBarContainer;
    return A && w && w.appendChild(A), m.appendChild(L), T && m.appendChild(T), k || (l.appendChild(r.element), l.appendChild(u)), l.appendChild(s), l.appendChild(m), l.appendChild(S), l.appendChild(p), l.appendChild(v), l.appendChild(_), l.appendChild(b), A && !w && l.appendChild(A), n.appendChild(l), L = this._checkCodeMirror(e, L), {
      constructed: {
        _top: n,
        _relative: l,
        _toolBar: r.element,
        _toolbarShadow: u,
        _menuTray: r._menuTray,
        _editorArea: m,
        _wysiwygArea: x,
        _codeArea: L,
        _placeholder: T,
        _resizingBar: A,
        _navigation: a,
        _charWrapper: o,
        _charCounter: d,
        _loading: p,
        _lineBreaker: v,
        _lineBreaker_t: _,
        _lineBreaker_b: b,
        _resizeBack: S,
        _stickyDummy: s,
        _arrow: h
      },
      options: e,
      plugins: r.plugins,
      pluginCallButtons: r.pluginCallButtons,
      _responsiveButtons: r.responsiveButtons
    };
  },
  /**
   * @description Check the CodeMirror option to apply the CodeMirror and return the CodeMirror element.
   * @param {Object} options options
   * @param {Element} textarea textarea element
   * @private
   */
  _checkCodeMirror: function(t, e) {
    if (t.codeMirror) {
      const i = [{
        mode: "htmlmixed",
        htmlMode: !0,
        lineNumbers: !0,
        lineWrapping: !0
      }, t.codeMirror.options || {}].reduce(function(l, r) {
        for (let u in r)
          be.hasOwn(r, u) && (l[u] = r[u]);
        return l;
      }, {});
      t.height === "auto" && (i.viewportMargin = 1 / 0, i.height = "auto");
      const n = t.codeMirror.src.fromTextArea(e, i);
      n.display.wrapper.style.cssText = e.style.cssText, t.codeMirrorEditor = n, e = n.display.wrapper, e.className += " se-wrapper-code-mirror";
    }
    return e;
  },
  /**
   * @description Check for a katex object.
   * @param {Object} katex katex object
   * @private
   */
  _checkKatexMath: function(t) {
    if (!t)
      throw Error('[SUNEDITOR.create.fail] To use the math button you need to add a "katex" object to the options.');
    const e = [{
      throwOnError: !1
    }, t.options || {}].reduce(function(i, n) {
      for (let l in n)
        be.hasOwn(n, l) && (i[l] = n[l]);
      return i;
    }, {});
    t.options = e;
  },
  /**
   * @description Add or reset options
   * @param {Object} mergeOptions New options property
   * @param {Object} context Context object of core
   * @param {Object} originOptions Origin options
   * @returns {Object} pluginCallButtons
   * @private
   */
  _setOptions: function(t, e, i) {
    this._initOptions(e.element.originElement, t);
    const n = e.element, l = n.relative, r = n.editorArea, u = t.toolbarContainer && t.toolbarContainer !== i.toolbarContainer, h = t.lang !== i.lang || t.buttonList !== i.buttonList || t.mode !== i.mode || u, s = this._createToolBar(document, h ? t.buttonList : i.buttonList, t.plugins, t);
    s.pluginCallButtons.math && this._checkKatexMath(t.katex);
    const m = document.createElement("DIV");
    m.className = "se-arrow", h && (s.element.style.visibility = "hidden", u ? (t.toolbarContainer.appendChild(s.element), n.toolbar.parentElement.removeChild(n.toolbar)) : n.toolbar.parentElement.replaceChild(s.element, n.toolbar), n.toolbar = s.element, n._menuTray = s._menuTray, n._arrow = m);
    const c = this._initElements(t, n.topArea, h ? s.element : n.toolbar, m), g = c.bottomBar, x = c.wysiwygFrame, T = c.placeholder;
    let L = c.codeView;
    return n.resizingBar && be.removeItem(n.resizingBar), g.resizingBar && (t.resizingBarContainer && t.resizingBarContainer !== i.resizingBarContainer ? t.resizingBarContainer.appendChild(g.resizingBar) : l.appendChild(g.resizingBar)), r.innerHTML = "", r.appendChild(L), T && r.appendChild(T), L = this._checkCodeMirror(t, L), n.resizingBar = g.resizingBar, n.navigation = g.navigation, n.charWrapper = g.charWrapper, n.charCounter = g.charCounter, n.wysiwygFrame = x, n.code = L, n.placeholder = T, t.rtl ? be.addClass(n.topArea, "se-rtl") : be.removeClass(n.topArea, "se-rtl"), {
      callButtons: s.pluginCallButtons,
      plugins: s.plugins,
      toolbar: s
    };
  },
  /**
   * @description Initialize property of suneditor elements
   * @param {Object} options Options
   * @param {Element} topDiv Suneditor top div
   * @param {Element} toolBar Tool bar
   * @param {Element} toolBarArrow Tool bar arrow (balloon editor)
   * @returns {Object} Bottom bar elements (resizingBar, navigation, charWrapper, charCounter)
   * @private
   */
  _initElements: function(t, e, i, n) {
    e.style.cssText = t._editorStyles.top, /inline/i.test(t.mode) ? (i.className += " se-toolbar-inline", i.style.width = t.toolbarWidth) : /balloon/i.test(t.mode) && (i.className += " se-toolbar-balloon", i.style.width = t.toolbarWidth, i.appendChild(n));
    const l = document.createElement(t.iframe ? "IFRAME" : "DIV");
    if (l.className = "se-wrapper-inner se-wrapper-wysiwyg", t.iframe)
      l.allowFullscreen = !0, l.frameBorder = 0, l.style.cssText = t._editorStyles.frame, l.className += t.className;
    else {
      l.setAttribute("contenteditable", !0), l.setAttribute("scrolling", "auto");
      for (let g in t.iframeAttributes)
        l.setAttribute(g, t.iframeAttributes[g]);
      l.className += " " + t._editableClass, l.style.cssText = t._editorStyles.frame + t._editorStyles.editor, l.className += t.className;
    }
    const r = document.createElement("TEXTAREA");
    r.className = "se-wrapper-inner se-wrapper-code" + t.className, r.style.cssText = t._editorStyles.frame, r.style.display = "none", t.height === "auto" && (r.style.overflow = "hidden");
    let u = null, h = null, s = null, m = null;
    if (t.resizingBar && (u = document.createElement("DIV"), u.className = "se-resizing-bar sun-editor-common", h = document.createElement("DIV"), h.className = "se-navigation sun-editor-common", u.appendChild(h), t.charCounter)) {
      if (s = document.createElement("DIV"), s.className = "se-char-counter-wrapper", t.charCounterLabel) {
        const g = document.createElement("SPAN");
        g.className = "se-char-label", g.textContent = t.charCounterLabel, s.appendChild(g);
      }
      if (m = document.createElement("SPAN"), m.className = "se-char-counter", m.textContent = "0", s.appendChild(m), t.maxCharCount > 0) {
        const g = document.createElement("SPAN");
        g.textContent = " / " + t.maxCharCount, s.appendChild(g);
      }
      u.appendChild(s);
    }
    let c = null;
    return t.placeholder && (c = document.createElement("SPAN"), c.className = "se-placeholder", c.innerText = t.placeholder), {
      bottomBar: {
        resizingBar: u,
        navigation: h,
        charWrapper: s,
        charCounter: m
      },
      wysiwygFrame: l,
      codeView: r,
      placeholder: c
    };
  },
  /**
   * @description Initialize options
   * @param {Element} element Options object
   * @param {Object} options Options object
   * @private
   */
  _initOptions: function(t, e) {
    const i = {};
    if (e.plugins) {
      const r = e.plugins, u = r.length ? r : Object.keys(r).map(function(h) {
        return r[h];
      });
      for (let h = 0, s = u.length, m; h < s; h++)
        m = u[h].default || u[h], i[m.name] = m;
    }
    e.plugins = i, e.lang = e.lang || za, e.value = typeof e.value == "string" ? e.value : null, e.allowedClassNames = new be._w.RegExp((e.allowedClassNames && typeof e.allowedClassNames == "string" ? e.allowedClassNames + "|" : "") + "^__se__|se-|katex"), e.historyStackDelayTime = typeof e.historyStackDelayTime == "number" ? e.historyStackDelayTime : 400, e.frameAttrbutes = e.frameAttrbutes || {}, e.defaultTag = typeof e.defaultTag == "string" && e.defaultTag.length > 0 ? e.defaultTag : "p";
    const n = e.textTags = [{ bold: "STRONG", underline: "U", italic: "EM", strike: "DEL", sub: "SUB", sup: "SUP" }, e.textTags || {}].reduce(function(r, u) {
      for (let h in u)
        r[h] = u[h];
      return r;
    }, {});
    e._textTagsMap = {
      strong: n.bold.toLowerCase(),
      b: n.bold.toLowerCase(),
      u: n.underline.toLowerCase(),
      ins: n.underline.toLowerCase(),
      em: n.italic.toLowerCase(),
      i: n.italic.toLowerCase(),
      del: n.strike.toLowerCase(),
      strike: n.strike.toLowerCase(),
      s: n.strike.toLowerCase(),
      sub: n.sub.toLowerCase(),
      sup: n.sup.toLowerCase()
    }, e._defaultCommand = {
      bold: e.textTags.bold,
      underline: e.textTags.underline,
      italic: e.textTags.italic,
      strike: e.textTags.strike,
      subscript: e.textTags.sub,
      superscript: e.textTags.sup
    }, e.__allowedScriptTag = e.__allowedScriptTag === !0;
    const l = "br|p|div|pre|blockquote|h1|h2|h3|h4|h5|h6|ol|ul|li|hr|figure|figcaption|img|iframe|audio|video|source|table|thead|tbody|tr|th|td|a|b|strong|var|i|em|u|ins|s|span|strike|del|sub|sup|code|svg|path|details|summary";
    e.tagsBlacklist = e.tagsBlacklist || "", e._defaultTagsWhitelist = (typeof e._defaultTagsWhitelist == "string" ? e._defaultTagsWhitelist : l) + (e.__allowedScriptTag ? "|script" : ""), e._editorTagsWhitelist = e.addTagsWhitelist === "*" ? "*" : this._setWhitelist(e._defaultTagsWhitelist + (typeof e.addTagsWhitelist == "string" && e.addTagsWhitelist.length > 0 ? "|" + e.addTagsWhitelist : ""), e.tagsBlacklist), e.pasteTagsBlacklist = e.tagsBlacklist + (e.tagsBlacklist && e.pasteTagsBlacklist ? "|" + e.pasteTagsBlacklist : e.pasteTagsBlacklist || ""), e.pasteTagsWhitelist = e.pasteTagsWhitelist === "*" ? "*" : this._setWhitelist(typeof e.pasteTagsWhitelist == "string" ? e.pasteTagsWhitelist : e._editorTagsWhitelist, e.pasteTagsBlacklist), e.attributesWhitelist = !e.attributesWhitelist || typeof e.attributesWhitelist != "object" ? null : e.attributesWhitelist, e.attributesBlacklist = !e.attributesBlacklist || typeof e.attributesBlacklist != "object" ? null : e.attributesBlacklist, e.mode = e.mode || "classic", e.rtl = !!e.rtl, e.lineAttrReset = ["id"].concat(e.lineAttrReset && typeof e.lineAttrReset == "string" ? e.lineAttrReset.toLowerCase().split("|") : []), e._editableClass = "sun-editor-editable" + (e.rtl ? " se-rtl" : ""), e._printClass = typeof e._printClass == "string" ? e._printClass : null, e.toolbarWidth = e.toolbarWidth ? be.isNumber(e.toolbarWidth) ? e.toolbarWidth + "px" : e.toolbarWidth : "auto", e.toolbarContainer = typeof e.toolbarContainer == "string" ? document.querySelector(e.toolbarContainer) : e.toolbarContainer, e.stickyToolbar = /balloon/i.test(e.mode) || e.toolbarContainer ? -1 : e.stickyToolbar === void 0 ? 0 : /^\d+/.test(e.stickyToolbar) ? be.getNumber(e.stickyToolbar, 0) : -1, e.hideToolbar = !!e.hideToolbar, e.fullScreenOffset = e.fullScreenOffset === void 0 ? 0 : /^\d+/.test(e.fullScreenOffset) ? be.getNumber(e.fullScreenOffset, 0) : 0, e.fullPage = !!e.fullPage, e.iframe = e.fullPage || !!e.iframe, e.iframeAttributes = e.iframeAttributes || {}, e.iframeCSSFileName = e.iframe ? typeof e.iframeCSSFileName == "string" ? [e.iframeCSSFileName] : e.iframeCSSFileName || ["suneditor"] : null, e.previewTemplate = typeof e.previewTemplate == "string" ? e.previewTemplate : null, e.printTemplate = typeof e.printTemplate == "string" ? e.printTemplate : null, e.codeMirror = e.codeMirror ? e.codeMirror.src ? e.codeMirror : { src: e.codeMirror } : null, e.katex = e.katex ? e.katex.src ? e.katex : { src: e.katex } : null, e.mathFontSize = e.mathFontSize ? e.mathFontSize : [
      { text: "1", value: "1em" },
      { text: "1.5", value: "1.5em" },
      { text: "2", value: "2em" },
      { text: "2.5", value: "2.5em" }
    ], e.position = typeof e.position == "string" ? e.position : null, e.display = e.display || (t.style.display === "none" || !t.style.display ? "block" : t.style.display), e.popupDisplay = e.popupDisplay || "full", e.resizingBar = e.resizingBar === void 0 ? !/inline|balloon/i.test(e.mode) : e.resizingBar, e.showPathLabel = e.resizingBar ? typeof e.showPathLabel == "boolean" ? e.showPathLabel : !0 : !1, e.resizeEnable = e.resizeEnable === void 0 ? !0 : !!e.resizeEnable, e.resizingBarContainer = typeof e.resizingBarContainer == "string" ? document.querySelector(e.resizingBarContainer) : e.resizingBarContainer, e.charCounter = e.maxCharCount > 0 ? !0 : typeof e.charCounter == "boolean" ? e.charCounter : !1, e.charCounterType = typeof e.charCounterType == "string" ? e.charCounterType : "char", e.charCounterLabel = typeof e.charCounterLabel == "string" ? e.charCounterLabel.trim() : null, e.maxCharCount = be.isNumber(e.maxCharCount) && e.maxCharCount > -1 ? e.maxCharCount * 1 : null, e.width = e.width ? be.isNumber(e.width) ? e.width + "px" : e.width : t.clientWidth ? t.clientWidth + "px" : "100%", e.minWidth = (be.isNumber(e.minWidth) ? e.minWidth + "px" : e.minWidth) || "", e.maxWidth = (be.isNumber(e.maxWidth) ? e.maxWidth + "px" : e.maxWidth) || "", e.height = e.height ? be.isNumber(e.height) ? e.height + "px" : e.height : t.clientHeight ? t.clientHeight + "px" : "auto", e.minHeight = (be.isNumber(e.minHeight) ? e.minHeight + "px" : e.minHeight) || "", e.maxHeight = (be.isNumber(e.maxHeight) ? e.maxHeight + "px" : e.maxHeight) || "", e.className = typeof e.className == "string" && e.className.length > 0 ? " " + e.className : "", e.defaultStyle = typeof e.defaultStyle == "string" ? e.defaultStyle : "", e.font = e.font ? e.font : ["Arial", "Comic Sans MS", "Courier New", "Impact", "Georgia", "tahoma", "Trebuchet MS", "Verdana"], e.fontSize = e.fontSize ? e.fontSize : null, e.formats = e.formats ? e.formats : null, e.colorList = e.colorList ? e.colorList : null, e.lineHeights = e.lineHeights ? e.lineHeights : null, e.paragraphStyles = e.paragraphStyles ? e.paragraphStyles : null, e.textStyles = e.textStyles ? e.textStyles : null, e.fontSizeUnit = typeof e.fontSizeUnit == "string" && e.fontSizeUnit.trim().toLowerCase() || "px", e.alignItems = typeof e.alignItems == "object" ? e.alignItems : e.rtl ? ["right", "center", "left", "justify"] : ["left", "center", "right", "justify"], e.imageResizing = e.imageResizing === void 0 ? !0 : e.imageResizing, e.imageHeightShow = e.imageHeightShow === void 0 ? !0 : !!e.imageHeightShow, e.imageAlignShow = e.imageAlignShow === void 0 ? !0 : !!e.imageAlignShow, e.imageWidth = e.imageWidth ? be.isNumber(e.imageWidth) ? e.imageWidth + "px" : e.imageWidth : "auto", e.imageHeight = e.imageHeight ? be.isNumber(e.imageHeight) ? e.imageHeight + "px" : e.imageHeight : "auto", e.imageSizeOnlyPercentage = !!e.imageSizeOnlyPercentage, e._imageSizeUnit = e.imageSizeOnlyPercentage ? "%" : "px", e.imageRotation = e.imageRotation !== void 0 ? e.imageRotation : !(e.imageSizeOnlyPercentage || !e.imageHeightShow), e.imageFileInput = e.imageFileInput === void 0 ? !0 : e.imageFileInput, e.imageUrlInput = e.imageUrlInput === void 0 || !e.imageFileInput ? !0 : e.imageUrlInput, e.imageUploadHeader = e.imageUploadHeader || null, e.imageUploadUrl = typeof e.imageUploadUrl == "string" ? e.imageUploadUrl : null, e.imageUploadSizeLimit = /\d+/.test(e.imageUploadSizeLimit) ? be.getNumber(e.imageUploadSizeLimit, 0) : null, e.imageMultipleFile = !!e.imageMultipleFile, e.imageAccept = typeof e.imageAccept != "string" || e.imageAccept.trim() === "*" ? "image/*" : e.imageAccept.trim() || "image/*", e.imageGalleryUrl = typeof e.imageGalleryUrl == "string" ? e.imageGalleryUrl : null, e.imageGalleryHeader = e.imageGalleryHeader || null, e.videoResizing = e.videoResizing === void 0 ? !0 : e.videoResizing, e.videoHeightShow = e.videoHeightShow === void 0 ? !0 : !!e.videoHeightShow, e.videoAlignShow = e.videoAlignShow === void 0 ? !0 : !!e.videoAlignShow, e.videoRatioShow = e.videoRatioShow === void 0 ? !0 : !!e.videoRatioShow, e.videoWidth = !e.videoWidth || !be.getNumber(e.videoWidth, 0) ? "" : be.isNumber(e.videoWidth) ? e.videoWidth + "px" : e.videoWidth, e.videoHeight = !e.videoHeight || !be.getNumber(e.videoHeight, 0) ? "" : be.isNumber(e.videoHeight) ? e.videoHeight + "px" : e.videoHeight, e.videoSizeOnlyPercentage = !!e.videoSizeOnlyPercentage, e._videoSizeUnit = e.videoSizeOnlyPercentage ? "%" : "px", e.videoRotation = e.videoRotation !== void 0 ? e.videoRotation : !(e.videoSizeOnlyPercentage || !e.videoHeightShow), e.videoRatio = be.getNumber(e.videoRatio, 4) || 0.5625, e.videoRatioList = e.videoRatioList ? e.videoRatioList : null, e.youtubeQuery = (e.youtubeQuery || "").replace("?", ""), e.videoFileInput = !!e.videoFileInput, e.videoUrlInput = e.videoUrlInput === void 0 || !e.videoFileInput ? !0 : e.videoUrlInput, e.videoUploadHeader = e.videoUploadHeader || null, e.videoUploadUrl = typeof e.videoUploadUrl == "string" ? e.videoUploadUrl : null, e.videoUploadSizeLimit = /\d+/.test(e.videoUploadSizeLimit) ? be.getNumber(e.videoUploadSizeLimit, 0) : null, e.videoMultipleFile = !!e.videoMultipleFile, e.videoTagAttrs = e.videoTagAttrs || null, e.videoIframeAttrs = e.videoIframeAttrs || null, e.videoAccept = typeof e.videoAccept != "string" || e.videoAccept.trim() === "*" ? "video/*" : e.videoAccept.trim() || "video/*", e.audioWidth = e.audioWidth ? be.isNumber(e.audioWidth) ? e.audioWidth + "px" : e.audioWidth : "", e.audioHeight = e.audioHeight ? be.isNumber(e.audioHeight) ? e.audioHeight + "px" : e.audioHeight : "", e.audioFileInput = !!e.audioFileInput, e.audioUrlInput = e.audioUrlInput === void 0 || !e.audioFileInput ? !0 : e.audioUrlInput, e.audioUploadHeader = e.audioUploadHeader || null, e.audioUploadUrl = typeof e.audioUploadUrl == "string" ? e.audioUploadUrl : null, e.audioUploadSizeLimit = /\d+/.test(e.audioUploadSizeLimit) ? be.getNumber(e.audioUploadSizeLimit, 0) : null, e.audioMultipleFile = !!e.audioMultipleFile, e.audioTagAttrs = e.audioTagAttrs || null, e.audioAccept = typeof e.audioAccept != "string" || e.audioAccept.trim() === "*" ? "audio/*" : e.audioAccept.trim() || "audio/*", e.tableCellControllerPosition = typeof e.tableCellControllerPosition == "string" ? e.tableCellControllerPosition.toLowerCase() : "cell", e.linkTargetNewWindow = !!e.linkTargetNewWindow, e.linkProtocol = typeof e.linkProtocol == "string" ? e.linkProtocol : null, e.linkRel = Array.isArray(e.linkRel) ? e.linkRel : [], e.linkRelDefault = e.linkRelDefault || {}, e.tabDisable = !!e.tabDisable, e.shortcutsDisable = Array.isArray(e.shortcutsDisable) ? e.shortcutsDisable : [], e.shortcutsHint = e.shortcutsHint === void 0 ? !0 : !!e.shortcutsHint, e.callBackSave = e.callBackSave ? e.callBackSave : null, e.templates = e.templates ? e.templates : null, e.placeholder = typeof e.placeholder == "string" ? e.placeholder : null, e.mediaAutoSelect = e.mediaAutoSelect === void 0 ? !0 : !!e.mediaAutoSelect, e.buttonList = e.buttonList ? e.buttonList : [
      ["undo", "redo"],
      ["bold", "underline", "italic", "strike", "subscript", "superscript"],
      ["removeFormat"],
      ["outdent", "indent"],
      ["fullScreen", "showBlocks", "codeView"],
      ["preview", "print"]
    ], e.rtl && (e.buttonList = e.buttonList.reverse()), e.icons = !e.icons || typeof e.icons != "object" ? Al : [Al, e.icons].reduce(function(r, u) {
      for (let h in u)
        be.hasOwn(u, h) && (r[h] = u[h]);
      return r;
    }, {}), e.icons = e.rtl ? [e.icons, e.icons.rtl].reduce(function(r, u) {
      for (let h in u)
        be.hasOwn(u, h) && (r[h] = u[h]);
      return r;
    }, {}) : e.icons, e.__listCommonStyle = e.__listCommonStyle || ["fontSize", "color", "fontFamily", "fontWeight", "fontStyle"], e._editorStyles = be._setDefaultOptionStyle(e, e.defaultStyle);
  },
  _setWhitelist: function(t, e) {
    if (typeof e != "string")
      return t;
    e = e.split("|"), t = t.split("|");
    for (let i = 0, n = e.length, l; i < n; i++)
      l = t.indexOf(e[i]), l > -1 && t.splice(l, 1);
    return t.join("|");
  },
  /**
   * @description Suneditor's Default button list
   * @param {Object} options options
   * @private
   */
  _defaultButtons: function(t) {
    const e = t.icons, i = t.lang, n = be.isOSX_IOS ? "⌘" : "CTRL", l = be.isOSX_IOS ? "⇧" : "+SHIFT", r = t.shortcutsHint ? t.shortcutsDisable : ["bold", "strike", "underline", "italic", "undo", "indent", "save"], u = t.rtl ? ["[", "]"] : ["]", "["], h = t.rtl ? [e.outdent, e.indent] : [e.indent, e.outdent];
    return {
      /** default command */
      bold: ["", i.toolbar.bold + '<span class="se-shortcut">' + (r.indexOf("bold") > -1 ? "" : n + '+<span class="se-shortcut-key">B</span>') + "</span>", "bold", "", e.bold],
      underline: ["", i.toolbar.underline + '<span class="se-shortcut">' + (r.indexOf("underline") > -1 ? "" : n + '+<span class="se-shortcut-key">U</span>') + "</span>", "underline", "", e.underline],
      italic: ["", i.toolbar.italic + '<span class="se-shortcut">' + (r.indexOf("italic") > -1 ? "" : n + '+<span class="se-shortcut-key">I</span>') + "</span>", "italic", "", e.italic],
      strike: ["", i.toolbar.strike + '<span class="se-shortcut">' + (r.indexOf("strike") > -1 ? "" : n + l + '+<span class="se-shortcut-key">S</span>') + "</span>", "strike", "", e.strike],
      subscript: ["", i.toolbar.subscript, "SUB", "", e.subscript],
      superscript: ["", i.toolbar.superscript, "SUP", "", e.superscript],
      removeFormat: ["", i.toolbar.removeFormat, "removeFormat", "", e.erase],
      indent: ["", i.toolbar.indent + '<span class="se-shortcut">' + (r.indexOf("indent") > -1 ? "" : n + '+<span class="se-shortcut-key">' + u[0] + "</span>") + "</span>", "indent", "", h[0]],
      outdent: ["", i.toolbar.outdent + '<span class="se-shortcut">' + (r.indexOf("indent") > -1 ? "" : n + '+<span class="se-shortcut-key">' + u[1] + "</span>") + "</span>", "outdent", "", h[1]],
      fullScreen: ["se-code-view-enabled se-resizing-enabled", i.toolbar.fullScreen, "fullScreen", "", e.expansion],
      showBlocks: ["", i.toolbar.showBlocks, "showBlocks", "", e.show_blocks],
      codeView: ["se-code-view-enabled se-resizing-enabled", i.toolbar.codeView, "codeView", "", e.code_view],
      undo: ["", i.toolbar.undo + '<span class="se-shortcut">' + (r.indexOf("undo") > -1 ? "" : n + '+<span class="se-shortcut-key">Z</span>') + "</span>", "undo", "", e.undo],
      redo: ["", i.toolbar.redo + '<span class="se-shortcut">' + (r.indexOf("undo") > -1 ? "" : n + '+<span class="se-shortcut-key">Y</span> / ' + n + l + '+<span class="se-shortcut-key">Z</span>') + "</span>", "redo", "", e.redo],
      preview: ["se-resizing-enabled", i.toolbar.preview, "preview", "", e.preview],
      print: ["se-resizing-enabled", i.toolbar.print, "print", "", e.print],
      dir: ["", i.toolbar[t.rtl ? "dir_ltr" : "dir_rtl"], "dir", "", e[t.rtl ? "dir_ltr" : "dir_rtl"]],
      dir_ltr: ["", i.toolbar.dir_ltr, "dir_ltr", "", e.dir_ltr],
      dir_rtl: ["", i.toolbar.dir_rtl, "dir_rtl", "", e.dir_rtl],
      save: ["se-resizing-enabled", i.toolbar.save + '<span class="se-shortcut">' + (r.indexOf("save") > -1 ? "" : n + '+<span class="se-shortcut-key">S</span>') + "</span>", "save", "", e.save],
      /** plugins - command */
      blockquote: ["", i.toolbar.tag_blockquote, "blockquote", "command", e.blockquote],
      /** plugins - submenu */
      font: ["se-btn-select se-btn-tool-font", i.toolbar.font, "font", "submenu", '<span class="txt">' + i.toolbar.font + "</span>" + e.arrow_down],
      formatBlock: ["se-btn-select se-btn-tool-format", i.toolbar.formats, "formatBlock", "submenu", '<span class="txt">' + i.toolbar.formats + "</span>" + e.arrow_down],
      fontSize: ["se-btn-select se-btn-tool-size", i.toolbar.fontSize, "fontSize", "submenu", '<span class="txt">' + i.toolbar.fontSize + "</span>" + e.arrow_down],
      fontColor: ["", i.toolbar.fontColor, "fontColor", "submenu", e.font_color],
      hiliteColor: ["", i.toolbar.hiliteColor, "hiliteColor", "submenu", e.highlight_color],
      align: ["se-btn-align", i.toolbar.align, "align", "submenu", t.rtl ? e.align_right : e.align_left],
      list: ["", i.toolbar.list, "list", "submenu", e.list_number],
      horizontalRule: ["btn_line", i.toolbar.horizontalRule, "horizontalRule", "submenu", e.horizontal_rule],
      table: ["", i.toolbar.table, "table", "submenu", e.table],
      lineHeight: ["", i.toolbar.lineHeight, "lineHeight", "submenu", e.line_height],
      template: ["", i.toolbar.template, "template", "submenu", e.template],
      paragraphStyle: ["", i.toolbar.paragraphStyle, "paragraphStyle", "submenu", e.paragraph_style],
      textStyle: ["", i.toolbar.textStyle, "textStyle", "submenu", e.text_style],
      /** plugins - dialog */
      link: ["", i.toolbar.link, "link", "dialog", e.link],
      image: ["", i.toolbar.image, "image", "dialog", e.image],
      video: ["", i.toolbar.video, "video", "dialog", e.video],
      audio: ["", i.toolbar.audio, "audio", "dialog", e.audio],
      math: ["", i.toolbar.math, "math", "dialog", e.math],
      /** plugins - fileBrowser */
      imageGallery: ["", i.toolbar.imageGallery, "imageGallery", "fileBrowser", e.image_gallery]
    };
  },
  /**
   * @description Create a group div containing each module
   * @returns {Object}
   * @private
   */
  _createModuleGroup: function() {
    const t = be.createElement("DIV");
    t.className = "se-btn-module se-btn-module-border";
    const e = be.createElement("UL");
    return e.className = "se-menu-list", t.appendChild(e), {
      div: t,
      ul: e
    };
  },
  /**
   * @description Create a button element
   * @param {string} buttonClass className in button
   * @param {string} title Title in button
   * @param {string} dataCommand The data-command property of the button
   * @param {string} dataDisplay The data-display property of the button ('dialog', 'submenu', 'command')
   * @param {string} innerHTML Html in button
   * @param {string} _disabled Button disabled
   * @param {Object} _icons Icons
   * @returns {Object}
   * @private
   */
  _createButton: function(t, e, i, n, l, r, u) {
    const h = be.createElement("LI"), s = be.createElement("BUTTON"), m = e || i;
    return s.setAttribute("type", "button"), s.setAttribute("class", "se-btn" + (t ? " " + t : "") + " se-tooltip"), s.setAttribute("data-command", i), s.setAttribute("data-display", n), s.setAttribute("aria-label", m.replace(/<span .+<\/span>/, "")), s.setAttribute("tabindex", "-1"), l || (l = '<span class="se-icon-text">!</span>'), /^default\./i.test(l) && (l = u[l.replace(/^default\./i, "")]), /^text\./i.test(l) && (l = l.replace(/^text\./i, ""), s.className += " se-btn-more-text"), l += '<span class="se-tooltip-inner"><span class="se-tooltip-text">' + m + "</span></span>", r && s.setAttribute("disabled", !0), s.innerHTML = l, h.appendChild(s), {
      li: h,
      button: s
    };
  },
  /**
   * @description Create editor HTML
   * @param {Array} doc document object
   * @param {Array} buttonList option.buttonList
   * @param {Object|null} plugins Plugins
   * @param {Array} options options
   * @returns {Object} { element: (Element) Toolbar element, plugins: (Array|null) Plugins Array, pluginCallButtons: (Object), responsiveButtons: (Array) }
   * @private
   */
  _createToolBar: function(t, e, i, n) {
    const l = t.createElement("DIV");
    l.className = "se-toolbar-separator-vertical";
    const r = t.createElement("DIV");
    r.className = "se-toolbar sun-editor-common";
    const u = t.createElement("DIV");
    u.className = "se-btn-tray", r.appendChild(u), e = JSON.parse(JSON.stringify(e));
    const h = n.icons, s = this._defaultButtons(n), m = {}, c = [];
    let g = null, x = null, T = null, L = null, A = "", a = !1;
    const o = be.createElement("DIV");
    o.className = "se-toolbar-more-layer";
    e:
      for (let v = 0, _, b, S, k, w; v < e.length; v++)
        if (_ = !1, w = "", k = e[v], T = this._createModuleGroup(), typeof k == "object") {
          for (let z = 0, M; z < k.length; z++) {
            if (x = k[z], M = !1, /^\%\d+/.test(x) && z === 0) {
              k[0] = x.replace(/[^\d]/g, ""), c.push(k), e.splice(v--, 1);
              continue e;
            }
            if (typeof x == "object")
              typeof x.add == "function" ? (A = x.name, g = s[A], i[A] = x) : (A = x.name, g = [x.buttonClass, x.title, x.name, x.dataDisplay, x.innerHTML, x._disabled]);
            else {
              if (/^\-/.test(x)) {
                w = x.substr(1), T.div.className += " module-float-" + w;
                continue;
              }
              if (/^\#/.test(x)) {
                x.substr(1) === "fix" && (T.ul.className += " se-menu-dir-fix");
                continue;
              }
              if (/^\:/.test(x)) {
                M = !0;
                const N = x.match(/^\:([^\-]+)\-([^\-]+)\-([^\-]+)/);
                S = "__se__" + N[1].trim();
                const O = N[2].trim(), I = N[3].trim();
                g = ["se-btn-more", O, S, "MORE", I];
              } else
                g = s[x];
              if (A = x, !g) {
                const N = i[A];
                if (!N)
                  throw Error("[SUNEDITOR.create.toolbar.fail] The button name of a plugin that does not exist. [" + A + "]");
                g = [N.buttonClass, N.title, N.name, N.display, N.innerHTML, N._disabled];
              }
            }
            L = this._createButton(g[0], g[1], g[2], g[3], g[4], g[5], h), (_ ? b : T.ul).appendChild(L.li), i[A] && (m[A] = L.button), M && (_ = !0, b = be.createElement("DIV"), b.className = "se-more-layer " + S, b.innerHTML = '<div class="se-more-form"><ul class="se-menu-list"' + (w ? ' style="float: ' + w + ';"' : "") + "></ul></div>", o.appendChild(b), b = b.firstElementChild.firstElementChild);
          }
          if (a) {
            const z = l.cloneNode(!1);
            u.appendChild(z);
          }
          u.appendChild(T.div), a = !0;
        } else if (/^\/$/.test(k)) {
          const z = t.createElement("DIV");
          z.className = "se-btn-module-enter", u.appendChild(z), a = !1;
        }
    switch (u.children.length) {
      case 0:
        u.style.display = "none";
        break;
      case 1:
        be.removeClass(u.firstElementChild, "se-btn-module-border");
        break;
      default:
        if (n.rtl) {
          const v = l.cloneNode(!1);
          v.style.float = u.lastElementChild.style.float, u.appendChild(v);
        }
    }
    c.length > 0 && c.unshift(e), o.children.length > 0 && u.appendChild(o);
    const d = t.createElement("DIV");
    d.className = "se-menu-tray", r.appendChild(d);
    const p = t.createElement("DIV");
    return p.className = "se-toolbar-cover", r.appendChild(p), n.hideToolbar && (r.style.display = "none"), {
      element: r,
      plugins: i,
      pluginCallButtons: m,
      responsiveButtons: c,
      _menuTray: d,
      _buttonTray: u
    };
  }
}, Ma = function(t, e, i) {
  return {
    element: {
      originElement: t,
      topArea: e._top,
      relative: e._relative,
      toolbar: e._toolBar,
      _toolbarShadow: e._toolbarShadow,
      _buttonTray: e._toolBar.querySelector(".se-btn-tray"),
      _menuTray: e._menuTray,
      resizingBar: e._resizingBar,
      navigation: e._navigation,
      charWrapper: e._charWrapper,
      charCounter: e._charCounter,
      editorArea: e._editorArea,
      wysiwygFrame: e._wysiwygArea,
      wysiwyg: e._wysiwygArea,
      // if (options.iframe) cons._wysiwygArea.contentDocument.body
      code: e._codeArea,
      placeholder: e._placeholder,
      loading: e._loading,
      lineBreaker: e._lineBreaker,
      lineBreaker_t: e._lineBreaker_t,
      lineBreaker_b: e._lineBreaker_b,
      resizeBackground: e._resizeBack,
      _stickyDummy: e._stickyDummy,
      _arrow: e._arrow
    },
    tool: {
      cover: e._toolBar.querySelector(".se-toolbar-cover"),
      bold: e._toolBar.querySelector('[data-command="bold"]'),
      underline: e._toolBar.querySelector('[data-command="underline"]'),
      italic: e._toolBar.querySelector('[data-command="italic"]'),
      strike: e._toolBar.querySelector('[data-command="strike"]'),
      sub: e._toolBar.querySelector('[data-command="SUB"]'),
      sup: e._toolBar.querySelector('[data-command="SUP"]'),
      undo: e._toolBar.querySelector('[data-command="undo"]'),
      redo: e._toolBar.querySelector('[data-command="redo"]'),
      save: e._toolBar.querySelector('[data-command="save"]'),
      outdent: e._toolBar.querySelector('[data-command="outdent"]'),
      indent: e._toolBar.querySelector('[data-command="indent"]'),
      fullScreen: e._toolBar.querySelector('[data-command="fullScreen"]'),
      showBlocks: e._toolBar.querySelector('[data-command="showBlocks"]'),
      codeView: e._toolBar.querySelector('[data-command="codeView"]'),
      dir: e._toolBar.querySelector('[data-command="dir"]'),
      dir_ltr: e._toolBar.querySelector('[data-command="dir_ltr"]'),
      dir_rtl: e._toolBar.querySelector('[data-command="dir_rtl"]')
    },
    options: i,
    option: i
  };
}, mn = Ma;
function Aa(t, e) {
  const i = t._w, n = t.util, l = t.options.historyStackDelayTime;
  let r = t.context.element, u = t.context.tool.undo, h = t.context.tool.redo, s = null, m = 0, c = [];
  function g() {
    const T = c[m];
    r.wysiwyg.innerHTML = T.contents, t.setRange(n.getNodeFromPath(T.s.path, r.wysiwyg), T.s.offset, n.getNodeFromPath(T.e.path, r.wysiwyg), T.e.offset), t.focus(), c.length <= 1 ? (u && u.setAttribute("disabled", !0), h && h.setAttribute("disabled", !0)) : m === 0 ? (u && u.setAttribute("disabled", !0), h && h.removeAttribute("disabled")) : m === c.length - 1 ? (u && u.removeAttribute("disabled"), h && h.setAttribute("disabled", !0)) : (u && u.removeAttribute("disabled"), h && h.removeAttribute("disabled")), t.controllersOff(), t._checkComponents(), t._setCharCount(), t._resourcesStateChange(), e();
  }
  function x() {
    t._checkComponents();
    const T = r.wysiwyg.innerHTML;
    if (!T || c[m] && T === c[m].contents)
      return;
    m++;
    const L = t._variable._range;
    c.length > m && (c = c.slice(0, m), h && h.setAttribute("disabled", !0)), L ? c[m] = {
      contents: T,
      s: {
        path: n.getNodePath(L.startContainer, null, null),
        offset: L.startOffset
      },
      e: {
        path: n.getNodePath(L.endContainer, null, null),
        offset: L.endOffset
      }
    } : c[m] = {
      contents: T,
      s: { path: [0, 0], offset: [0, 0] },
      e: { path: 0, offset: 0 }
    }, m === 1 && u && u.removeAttribute("disabled"), t._setCharCount(), e();
  }
  return {
    /**
     * @description History stack
     */
    stack: c,
    /**
     * @description Saving the current status to the history object stack
     * If "delay" is true, it will be saved after (options.historyStackDelayTime || 400) miliseconds
     * If the function is called again with the "delay" argument true before it is saved, the delay time is renewal
     * You can specify the delay time by sending a number.
     * @param {Boolean|Number} delay If true, Add stack without delay time.
     */
    push: function(T) {
      i.setTimeout(t._resourcesStateChange.bind(t));
      const L = typeof T == "number" ? T > 0 ? T : 0 : T ? l : 0;
      if ((!L || s) && (i.clearTimeout(s), !L)) {
        x();
        return;
      }
      s = i.setTimeout(function() {
        i.clearTimeout(s), s = null, x();
      }, L);
    },
    /**
     * @description Undo function
     */
    undo: function() {
      m > 0 && (m--, g());
    },
    /**
     * @description Redo function
     */
    redo: function() {
      c.length - 1 > m && (m++, g());
    },
    /**
     * @description Go to the history stack for that index.
     * If "index" is -1, go to the last stack
     */
    go: function(T) {
      m = T < 0 ? c.length - 1 : T, g();
    },
    /**
     * @description Get the current history stack index.
     * @returns {Number} Current Stack index
     */
    getCurrentIndex: function() {
      return m;
    },
    /**
     * @description Reset the history object
     */
    reset: function(T) {
      u && u.setAttribute("disabled", !0), h && h.setAttribute("disabled", !0), t._variable.isChanged = !1, t.context.tool.save && t.context.tool.save.setAttribute("disabled", !0), c.splice(0), m = 0, c[m] = {
        contents: t.getContents(!0),
        s: {
          path: [0, 0],
          offset: 0
        },
        e: {
          path: [0, 0],
          offset: 0
        }
      }, T || e();
    },
    /**
     * @description Reset the disabled state of the buttons to fit the current stack.
     * @private
     */
    _resetCachingButton: function() {
      r = t.context.element, u = t.context.tool.undo, h = t.context.tool.redo, m === 0 ? (u && u.setAttribute("disabled", !0), h && m === c.length - 1 && h.setAttribute("disabled", !0), t._variable.isChanged = !1, t.context.tool.save && t.context.tool.save.setAttribute("disabled", !0)) : m === c.length - 1 && h && h.setAttribute("disabled", !0);
    },
    /**
     * @description Remove all stacks and remove the timeout function.
     * @private
     */
    _destroy: function() {
      s && i.clearTimeout(s), c = null;
    }
  };
}
const Bl = {
  name: "notice",
  /**
   * @description Constructor
   * @param {Object} core Core object 
   */
  add: function(t) {
    const e = t.context;
    e.notice = {};
    let i = t.util.createElement("DIV"), n = t.util.createElement("SPAN"), l = t.util.createElement("BUTTON");
    i.className = "se-notice", l.className = "close", l.setAttribute("aria-label", "Close"), l.setAttribute("title", t.lang.dialogBox.close), l.innerHTML = t.icons.cancel, i.appendChild(n), i.appendChild(l), e.notice.modal = i, e.notice.message = n, l.addEventListener("click", this.onClick_cancel.bind(t)), e.element.editorArea.appendChild(i), i = null;
  },
  /**
   * @description Event when clicking the cancel button
   * @param {MouseEvent} e Event object
   */
  onClick_cancel: function(t) {
    t.preventDefault(), t.stopPropagation(), this.plugins.notice.close.call(this);
  },
  /**
   * @description  Open the notice panel
   * @param {String} text Notice message
   */
  open: function(t) {
    this.context.notice.message.textContent = t, this.context.notice.modal.style.display = "block";
  },
  /**
   * @description  Open the notice panel
   */
  close: function() {
    this.context.notice.modal.style.display = "none";
  }
};
function Ba(t, e, i, n, l, r) {
  const u = t.element.originElement.ownerDocument || document, h = u.defaultView || window, s = be, m = l.icons, c = {
    _d: u,
    _w: h,
    _parser: new h.DOMParser(),
    _prevRtl: l.rtl,
    _editorHeight: 0,
    _editorHeightPadding: 0,
    _listCamel: l.__listCommonStyle,
    _listKebab: s.camelToKebabCase(l.__listCommonStyle),
    /**
     * @description Document object of the iframe if created as an iframe || _d
     * @private
     */
    _wd: null,
    /**
     * @description Window object of the iframe if created as an iframe || _w
     * @private
     */
    _ww: null,
    /**
     * @description Closest ShadowRoot to editor if found
     * @private
     */
    _shadowRoot: null,
    /**
     * @description Block controller mousedown events in "shadowRoot" environment
     * @private
     */
    _shadowRootControllerEventTarget: null,
    /**
     * @description Util object
     */
    util: s,
    /**
     * @description Functions object
     */
    functions: null,
    /**
     * @description Editor options
     */
    options: null,
    /**
     * @description Computed style of the wysiwyg area (window.getComputedStyle(context.element.wysiwyg))
     */
    wwComputedStyle: null,
    /**
     * @description Notice object
     */
    notice: Bl,
    /**
     * @description Default icons object
     */
    icons: m,
    /**
     * @description History object for undo, redo
     */
    history: null,
    /**
     * @description Elements and user options parameters of the suneditor
     */
    context: t,
    /**
     * @description Plugin buttons
     */
    pluginCallButtons: e,
    /**
     * @description Loaded plugins
     */
    plugins: i || {},
    /**
     * @description Whether the plugin is initialized
     */
    initPlugins: {},
    /**
     * @description Object for managing submenu elements
     * @private
     */
    _targetPlugins: {},
    /**
     * @description Save rendered submenus and containers
     * @private
     */
    _menuTray: {},
    /**
     * @description loaded language
     */
    lang: n,
    /**
     * @description The selection node (core.getSelectionNode()) to which the effect was last applied
     */
    effectNode: null,
    /**
     * @description submenu element
     */
    submenu: null,
    /**
     * @description container element
     */
    container: null,
    /**
     * @description current subment name
     * @private
     */
    _submenuName: "",
    /**
     * @description binded submenuOff method
     * @private
     */
    _bindedSubmenuOff: null,
    /**
     * @description binded containerOff method
     * @private
     */
    _bindedContainerOff: null,
    /**
     * @description active button element in submenu
     */
    submenuActiveButton: null,
    /**
     * @description active button element in container
     */
    containerActiveButton: null,
    /**
     * @description The elements array to be processed unvisible when the controllersOff function is executed (resizing, link modified button, table controller)
     */
    controllerArray: [],
    /**
     * @description The name of the plugin that called the currently active controller
     */
    currentControllerName: "",
    /**
     * @description The target element of current controller
     */
    currentControllerTarget: null,
    /**
     * @description The file component object of current selected file tag (getFileComponent)
     */
    currentFileComponentInfo: null,
    /**
     * @description An array of buttons whose class name is not "se-code-view-enabled"
     */
    codeViewDisabledButtons: [],
    /**
     * @description An array of buttons whose class name is not "se-resizing-enabled"
     */
    resizingDisabledButtons: [],
    /**
     * @description active more layer element in submenu
     * @private
     */
    _moreLayerActiveButton: null,
    /**
     * @description Tag whitelist RegExp object used in "_consistencyCheckOfHTML" method
     * ^(options._editorTagsWhitelist)$
     * @private
     */
    _htmlCheckWhitelistRegExp: null,
    /**
     * @description Tag blacklist RegExp object used in "_consistencyCheckOfHTML" method
     * @private
     */
    _htmlCheckBlacklistRegExp: null,
    /**
     * @description RegExp when using check disallowd tags. (b, i, ins, strike, s)
     * @private
     */
    _disallowedTextTagsRegExp: null,
    /**
     * @description Editor tags whitelist (RegExp object)
     * util.createTagsWhitelist(options._editorTagsWhitelist)
     */
    editorTagsWhitelistRegExp: null,
    /**
     * @description Editor tags blacklist (RegExp object)
     * util.createTagsBlacklist(options.tagsBlacklist)
     */
    editorTagsBlacklistRegExp: null,
    /**
     * @description Tag whitelist when pasting (RegExp object)
     * util.createTagsWhitelist(options.pasteTagsWhitelist)
     */
    pasteTagsWhitelistRegExp: null,
    /**
     * @description Tag blacklist when pasting (RegExp object)
     * util.createTagsBlacklist(options.pasteTagsBlacklist)
     */
    pasteTagsBlacklistRegExp: null,
    /**
     * @description Boolean value of whether the editor has focus
     */
    hasFocus: !1,
    /**
     * @description Boolean value of whether the editor is disabled
     */
    isDisabled: !1,
    /**
     * @description Boolean value of whether the editor is readOnly
     */
    isReadOnly: !1,
    /**
     * @description Attributes whitelist used by the cleanHTML method
     * @private
     */
    _attributesWhitelistRegExp: null,
    _attributesWhitelistRegExp_all_data: null,
    /**
     * @description Attributes blacklist used by the cleanHTML method
     * @private
     */
    _attributesBlacklistRegExp: null,
    /**
     * @description Attributes of tags whitelist used by the cleanHTML method
     * @private
     */
    _attributesTagsWhitelist: null,
    /**
     * @description Attributes of tags blacklist used by the cleanHTML method
     * @private
     */
    _attributesTagsBlacklist: null,
    /**
     * @description binded controllersOff method
     * @private
     */
    _bindControllersOff: null,
    /**
     * @description Is inline mode?
     * @private
     */
    _isInline: null,
    /**
     * @description Is balloon|balloon-always mode?
     * @private
     */
    _isBalloon: null,
    /**
     * @description Is balloon-always mode?
     * @private
     */
    _isBalloonAlways: null,
    /**
     * @description Required value when using inline mode to sticky toolbar
     * @private
     */
    _inlineToolbarAttr: { top: "", width: "", isShow: !1 },
    /**
     * @description Variable that controls the "blur" event in the editor of inline or balloon mode when the focus is moved to submenu
     * @private
     */
    _notHideToolbar: !1,
    /**
     * @description Variable value that sticky toolbar mode
     * @private
     */
    _sticky: !1,
    /**
     * @description Variables for controlling focus and blur events
     * @private
     */
    _antiBlur: !1,
    /**
     * @description Component line breaker element
     * @private
     */
    _lineBreaker: null,
    _lineBreakerButton: null,
    /**
     * @description If true, (initialize, reset) all indexes of image, video information
     * @private
     */
    _componentsInfoInit: !0,
    _componentsInfoReset: !1,
    /**
     * @description Plugins array with "active" method.
     * "activePlugins" runs the "add" method when creating the editor.
     */
    activePlugins: null,
    /**
     * @description Information of tags that should maintain HTML structure, style, class name, etc. (In use by "math" plugin)
     * When inserting "html" such as paste, it is executed on the "html" to be inserted. (core.cleanHTML)
     * Basic Editor Actions:
     * 1. All classes not starting with "__se__" or "se-" in the editor are removed.
     * 2. The style of all tags except the "span" tag is removed from the editor.
     * "managedTagsInfo" structure ex:
     * managedTagsInfo: {
     *   query: '.__se__xxx, se-xxx'
     *   map: {
     *     '__se__xxx': method.bind(core),
     *     'se-xxx': method.bind(core),
     *   }
     * }
     * @example
     * Define in the following return format in the "managedTagInfo" function of the plugin.
     * managedTagInfo() => {
     *  return {
     *    className: 'string', // Class name to identify the tag. ("__se__xxx", "se-xxx")
     *    // Change the html of the "element". ("element" is the element found with "className".)
     *    // "method" is executed by binding "core".
     *    method: function (element) {
     *      // this === core
     *      element.innerHTML = // (rendered html);
     *    }
     *  }
     * }
     */
    managedTagsInfo: null,
    /**
     * @description cashing: options.charCounterType === 'byte-html'
     * @private
     */
    _charTypeHTML: !1,
    /**
     * @description Array of "checkFileInfo" functions with the core bound
     * (Plugins with "checkFileInfo" and "resetFileInfo" methods)
     * "fileInfoPlugins" runs the "add" method when creating the editor.
     * "checkFileInfo" method is always call just before the "change" event.
     * @private
     */
    _fileInfoPluginsCheck: null,
    /**
     * @description Array of "resetFileInfo" functions with the core bound
     * (Plugins with "checkFileInfo" and "resetFileInfo" methods)
     * "checkFileInfo" method is always call just before the "functions.setOptions" method.
     * @private
     */
    _fileInfoPluginsReset: null,
    /**
     * @description Variables for file component management
     * @private
     */
    _fileManager: {
      tags: null,
      regExp: null,
      queryString: null,
      pluginRegExp: null,
      pluginMap: null
    },
    /**
     * @description Elements that need to change text or className for each selection change
     * After creating the editor, "activePlugins" are added.
     * @property {Element} STRONG bold button
     * @property {Element} U underline button
     * @property {Element} EM italic button
     * @property {Element} DEL strike button
     * @property {Element} SUB subscript button
     * @property {Element} SUP superscript button
     * @property {Element} OUTDENT outdent button
     * @property {Element} INDENT indent button
     */
    commandMap: {},
    /**
     * @description CSS properties related to style tags 
     * @private
     */
    _commandMapStyles: {
      STRONG: ["font-weight"],
      U: ["text-decoration"],
      EM: ["font-style"],
      DEL: ["text-decoration"]
    },
    /**
     * @description Style button related to edit area
     * @property {Element} fullScreen fullScreen button element
     * @property {Element} showBlocks showBlocks button element
     * @property {Element} codeView codeView button element
     * @private
     */
    _styleCommandMap: null,
    /**
     * @private
     */
    _cleanStyleRegExp: {
      span: new h.RegExp("\\s*[^-a-zA-Z](font-family|font-size|color|background-color)\\s*:[^;]+(?!;)*", "ig"),
      format: new h.RegExp("\\s*[^-a-zA-Z](text-align|margin-left|margin-right)\\s*:[^;]+(?!;)*", "ig"),
      fontSizeUnit: new h.RegExp("\\d+" + l.fontSizeUnit + "$", "i")
    },
    /**
     * @description Variables used internally in editor operation
     * @property {Boolean} isCodeView State of code view
     * @property {Boolean} isFullScreen State of full screen
     * @property {Number} innerHeight_fullScreen InnerHeight in editor when in full screen
     * @property {Number} resizeClientY Remember the vertical size of the editor before resizing the editor (Used when calculating during resize operation)
     * @property {Number} tabSize Indent size of tab (4)
     * @property {Number} codeIndent Indent size of Code view mode (2)
     * @property {Number} minResizingSize Minimum size of editing area when resized {Number} (.se-wrapper-inner {min-height: 65px;} || 65)
     * @property {Array} currentNodes  An array of the current cursor's node structure
     * @private
     */
    _variable: {
      isChanged: !1,
      isCodeView: !1,
      isFullScreen: !1,
      innerHeight_fullScreen: 0,
      resizeClientY: 0,
      tabSize: 4,
      codeIndent: 2,
      minResizingSize: s.getNumber(t.element.wysiwygFrame.style.minHeight || "65", 0),
      currentNodes: [],
      currentNodesMap: [],
      _range: null,
      _selectionNode: null,
      _originCssText: t.element.topArea.style.cssText,
      _bodyOverflow: "",
      _editorAreaOriginCssText: "",
      _wysiwygOriginCssText: "",
      _codeOriginCssText: "",
      _fullScreenAttrs: { sticky: !1, balloon: !1, inline: !1 },
      _lineBreakComp: null,
      _lineBreakDir: ""
    },
    /**
     * @description Temp variable for set line attrs
     * @private
     */
    _formatAttrsTemp: null,
    /**
     * @description Save the current buttons states to "allCommandButtons" object
     * @private
     */
    _saveButtonStates: function() {
      this.allCommandButtons || (this.allCommandButtons = {});
      const a = this.context.element._buttonTray.querySelectorAll(".se-menu-list button[data-display]");
      for (let o = 0, d, p; o < a.length; o++)
        d = a[o], p = d.getAttribute("data-command"), this.allCommandButtons[p] = d;
    },
    /**
     * @description Recover the current buttons states from "allCommandButtons" object
     * @private
     */
    _recoverButtonStates: function() {
      if (this.allCommandButtons) {
        const a = this.context.element._buttonTray.querySelectorAll(".se-menu-list button[data-display]");
        for (let o = 0, d, p, v; o < a.length; o++)
          d = a[o], p = d.getAttribute("data-command"), v = this.allCommandButtons[p], v && (d.parentElement.replaceChild(v, d), this.context.tool[p] && (this.context.tool[p] = v));
      }
    },
    /**
     * @description If the plugin is not added, add the plugin and call the 'add' function.
     * If the plugin is added call callBack function.
     * @param {String} pluginName The name of the plugin to call
     * @param {function} callBackFunction Function to be executed immediately after module call
     * @param {Element|null} _target Plugin target button (This is not necessary if you have a button list when creating the editor)
     */
    callPlugin: function(a, o, d) {
      if (d = d || e[a], this.plugins[a])
        this.initPlugins[a] ? typeof this._targetPlugins[a] == "object" && d && this.initMenuTarget(a, d, this._targetPlugins[a]) : (this.plugins[a].add(this, d), this.initPlugins[a] = !0);
      else
        throw Error('[SUNEDITOR.core.callPlugin.fail] The called plugin does not exist or is in an invalid format. (pluginName:"' + a + '")');
      this.plugins[a].active && !this.commandMap[a] && d && (this.commandMap[a] = d, this.activePlugins.push(a)), typeof o == "function" && o();
    },
    /**
     * @description If the module is not added, add the module and call the 'add' function
     * @param {Array} moduleArray module object's Array [dialog, resizing]
     */
    addModule: function(a) {
      for (let o = 0, d = a.length, p; o < d; o++)
        p = a[o].name, this.plugins[p] || (this.plugins[p] = a[o]), this.initPlugins[p] || (this.initPlugins[p] = !0, typeof this.plugins[p].add == "function" && this.plugins[p].add(this));
    },
    /**
     * @description Gets the current editor-relative scroll offset.
     * @returns {Object} {top, left}
     */
    getGlobalScrollOffset: function() {
      let a = 0, o = 0, d = t.element.topArea;
      for (; d; )
        a += d.scrollTop, o += d.scrollLeft, d = d.parentElement;
      for (d = this._shadowRoot ? this._shadowRoot.host : null; d; )
        a += d.scrollTop, o += d.scrollLeft, d = d.parentElement;
      return {
        top: a,
        left: o
      };
    },
    /**
     * @description Method for managing submenu element.
     * You must add the "submenu" element using the this method at custom plugin.
     * @param {String} pluginName Plugin name
     * @param {Element|null} target Target button
     * @param {Element} menu Submenu element
     */
    initMenuTarget: function(a, o, d) {
      o ? (t.element._menuTray.appendChild(d), this._targetPlugins[a] = !0, this._menuTray[o.getAttribute("data-command")] = d) : this._targetPlugins[a] = d;
    },
    /**
     * @description Enable submenu
     * @param {Element} element Submenu's button element to call
     */
    submenuOn: function(a) {
      this._bindedSubmenuOff && this._bindedSubmenuOff(), this._bindControllersOff && this.controllersOff();
      const o = this._submenuName = a.getAttribute("data-command"), d = this.submenu = this._menuTray[o];
      this.submenuActiveButton = a, this._setMenuPosition(a, d), this._bindedSubmenuOff = this.submenuOff.bind(this), this.addDocEvent("mousedown", this._bindedSubmenuOff, !1), this.plugins[o].on && this.plugins[o].on.call(this), this._antiBlur = !0;
    },
    /**
     * @description Disable submenu
     */
    submenuOff: function() {
      this.removeDocEvent("mousedown", this._bindedSubmenuOff), this._bindedSubmenuOff = null, this.submenu && (this._submenuName = "", this.submenu.style.display = "none", this.submenu = null, s.removeClass(this.submenuActiveButton, "on"), this.submenuActiveButton = null, this._notHideToolbar = !1), this._antiBlur = !1;
    },
    /**
     * @description Disable more layer
     */
    moreLayerOff: function() {
      if (this._moreLayerActiveButton) {
        const a = t.element.toolbar.querySelector("." + this._moreLayerActiveButton.getAttribute("data-command"));
        a.style.display = "none", s.removeClass(this._moreLayerActiveButton, "on"), this._moreLayerActiveButton = null;
      }
    },
    /**
     * @description Enable container
     * @param {Element} element Container's button element to call
     */
    containerOn: function(a) {
      this._bindedContainerOff && this._bindedContainerOff();
      const o = this._containerName = a.getAttribute("data-command"), d = this.container = this._menuTray[o];
      this.containerActiveButton = a, this._setMenuPosition(a, d), this._bindedContainerOff = this.containerOff.bind(this), this.addDocEvent("mousedown", this._bindedContainerOff, !1), this.plugins[o].on && this.plugins[o].on.call(this), this._antiBlur = !0;
    },
    /**
     * @description Disable container
     */
    containerOff: function() {
      this.removeDocEvent("mousedown", this._bindedContainerOff), this._bindedContainerOff = null, this.container && (this._containerName = "", this.container.style.display = "none", this.container = null, s.removeClass(this.containerActiveButton, "on"), this.containerActiveButton = null, this._notHideToolbar = !1), this._antiBlur = !1;
    },
    /**
     * @description Set the menu position. (submenu, container)
     * @param {*} element Button element
     * @param {*} menu Menu element
     * @private
     */
    _setMenuPosition: function(a, o) {
      o.style.visibility = "hidden", o.style.display = "block", o.style.height = "", s.addClass(a, "on");
      const d = this.context.element.toolbar, p = d.offsetWidth, v = g._getEditorOffsets(t.element.toolbar), _ = o.offsetWidth, b = a.parentElement.offsetLeft + 3;
      if (l.rtl) {
        const I = a.offsetWidth, $ = _ > I ? _ - I : 0, Y = $ > 0 ? 0 : I - _;
        o.style.left = b - $ + Y + "px", v.left > g._getEditorOffsets(o).left && (o.style.left = "0px");
      } else {
        const I = p <= _ ? 0 : p - (b + _);
        I < 0 ? o.style.left = b + I + "px" : o.style.left = b + "px";
      }
      let S = 0, k = a;
      for (; k && k !== d; )
        S += k.offsetTop, k = k.offsetParent;
      const w = S;
      this._isBalloon ? S += d.offsetTop + a.offsetHeight : S -= a.offsetHeight;
      const z = v.top, M = o.offsetHeight, N = this.getGlobalScrollOffset().top, O = h.innerHeight - (z - N + w + a.parentElement.offsetHeight);
      if (O < M) {
        let I = -1 * (M - w + 3);
        const $ = z - N + I, Y = M + ($ < 0 ? $ : 0);
        Y > O ? (o.style.height = Y + "px", I = -1 * (Y - w + 3)) : (o.style.height = O + "px", I = w + a.parentElement.offsetHeight), o.style.top = I + "px";
      } else
        o.style.top = w + a.parentElement.offsetHeight + "px";
      o.style.visibility = "";
    },
    /**
     * @description Show controller at editor area (controller elements, function, "controller target element(@Required)", "controller name(@Required)", etc..)
     * @param {*} arguments controller elements, functions..
     */
    controllersOn: function() {
      this._bindControllersOff && this._bindControllersOff(), this.controllerArray = [];
      for (let a = 0, o; a < arguments.length; a++)
        if (o = arguments[a], !!o) {
          if (typeof o == "string") {
            this.currentControllerName = o;
            continue;
          }
          if (typeof o == "function") {
            this.controllerArray.push(o);
            continue;
          }
          if (!s.hasClass(o, "se-controller")) {
            this.currentControllerTarget = o, this.currentFileComponentInfo = this.getFileComponent(o);
            continue;
          }
          o.style && (o.style.display = "block", this._shadowRoot && this._shadowRootControllerEventTarget.indexOf(o) === -1 && (o.addEventListener("mousedown", function(d) {
            d.preventDefault(), d.stopPropagation();
          }), this._shadowRootControllerEventTarget.push(o))), this.controllerArray.push(o);
        }
      this._bindControllersOff = this.controllersOff.bind(this), this.addDocEvent("mousedown", this._bindControllersOff, !1), this.addDocEvent("keydown", this._bindControllersOff, !1), this._antiBlur = !0, typeof x.showController == "function" && x.showController(this.currentControllerName, this.controllerArray, this);
    },
    /**
     * @description Hide controller at editor area (link button, image resize button..)
     * @param {KeyboardEvent|MouseEvent|null} e Event object when called from mousedown and keydown events registered in "core.controllersOn"
     */
    controllersOff: function(a) {
      this._lineBreaker.style.display = "none";
      const o = this.controllerArray.length;
      if (a && a.target && o > 0) {
        for (let d = 0; d < o; d++)
          if (typeof this.controllerArray[d].contains == "function" && this.controllerArray[d].contains(a.target))
            return;
      }
      if (!(this._fileManager.pluginRegExp.test(this.currentControllerName) && a && a.type === "keydown" && a.keyCode !== 27) && (t.element.lineBreaker_t.style.display = t.element.lineBreaker_b.style.display = "none", this._variable._lineBreakComp = null, this.currentControllerName = "", this.currentControllerTarget = null, this.currentFileComponentInfo = null, this.effectNode = null, !!this._bindControllersOff)) {
        if (this.removeDocEvent("mousedown", this._bindControllersOff), this.removeDocEvent("keydown", this._bindControllersOff), this._bindControllersOff = null, o > 0) {
          for (let d = 0; d < o; d++)
            typeof this.controllerArray[d] == "function" ? this.controllerArray[d]() : this.controllerArray[d].style.display = "none";
          this.controllerArray = [];
        }
        this._antiBlur = !1;
      }
    },
    /**
     * @description Specify the position of the controller.
     * @param {Element} controller Controller element.
     * @param {Element} referEl Element that is the basis of the controller's position.
     * @param {String} position Type of position ("top" | "bottom")
     * When using the "top" position, there should not be an arrow on the controller.
     * When using the "bottom" position there should be an arrow on the controller.
     * @param {Object} addOffset These are the left and top values that need to be added specially. 
     * This argument is required. - {left: 0, top: 0}
     * Please enter the value based on ltr mode.
     * Calculated automatically in rtl mode.
     */
    setControllerPosition: function(a, o, d, p) {
      l.rtl && (p.left *= -1);
      const v = s.getOffset(o, t.element.wysiwygFrame);
      a.style.visibility = "hidden", a.style.display = "block";
      const _ = d === "top" ? -(a.offsetHeight + 2) : o.offsetHeight + 12;
      a.style.top = v.top + _ + p.top + "px";
      const b = v.left - t.element.wysiwygFrame.scrollLeft + p.left, S = a.offsetWidth, k = o.offsetWidth, w = s.hasClass(a.firstElementChild, "se-arrow") ? a.firstElementChild : null;
      if (l.rtl) {
        const z = S > k ? S - k : 0, M = z > 0 ? 0 : k - S;
        a.style.left = b - z + M + "px", z > 0 && w && (w.style.left = (S - 14 < 10 + z ? S - 14 : 10 + z) + "px");
        const N = t.element.wysiwygFrame.offsetLeft - a.offsetLeft;
        N > 0 && (a.style.left = "0px", w && (w.style.left = N + "px"));
      } else {
        a.style.left = b + "px";
        const z = t.element.wysiwygFrame.offsetWidth - (a.offsetLeft + S);
        z < 0 ? (a.style.left = a.offsetLeft + z + "px", w && (w.style.left = 20 - z + "px")) : w && (w.style.left = "20px");
      }
      a.style.visibility = "";
    },
    /**
     * @description javascript execCommand
     * @param {String} command javascript execCommand function property
     * @param {Boolean|undefined} showDefaultUI javascript execCommand function property
     * @param {String|undefined} value javascript execCommand function property
     */
    execCommand: function(a, o, d) {
      this._wd.execCommand(a, o, a === "formatBlock" ? "<" + d + ">" : d), this.history.push(!0);
    },
    /**
     * @description Focus to wysiwyg area using "native focus function"
     */
    nativeFocus: function() {
      this.__focus(), this._editorRange();
    },
    /**
     * @description Focus method
     * @private
     */
    __focus: function() {
      const a = s.getParentElement(this.getSelectionNode(), "figcaption");
      a ? a.focus() : t.element.wysiwyg.focus();
    },
    /**
     * @description Focus to wysiwyg area
     */
    focus: function() {
      if (t.element.wysiwygFrame.style.display !== "none") {
        if (l.iframe)
          this.nativeFocus();
        else
          try {
            const a = this.getRange();
            if (a.startContainer === a.endContainer && s.isWysiwygDiv(a.startContainer)) {
              const o = a.commonAncestorContainer.children[a.startOffset];
              if (!s.isFormatElement(o) && !s.isComponent(o)) {
                const d = s.createElement(l.defaultTag), p = s.createElement("BR");
                d.appendChild(p), t.element.wysiwyg.insertBefore(d, o), this.setRange(p, 0, p, 0);
                return;
              }
            }
            this.setRange(a.startContainer, a.startOffset, a.endContainer, a.endOffset);
          } catch {
            this.nativeFocus();
          }
        g._applyTagEffects(), this._isBalloon && g._toggleToolbarBalloon();
      }
    },
    /**
     * @description If "focusEl" is a component, then that component is selected; if it is a format element, the last text is selected
     * If "focusEdge" is null, then selected last element
     * @param {Element|null} focusEl Focus element
     */
    focusEdge: function(a) {
      a || (a = t.element.wysiwyg.lastElementChild);
      const o = this.getFileComponent(a);
      o ? this.selectComponent(o.target, o.pluginName) : a ? (a = s.getChildElement(a, function(d) {
        return d.childNodes.length === 0 || d.nodeType === 3;
      }, !0), a ? this.setRange(a, a.textContent.length, a, a.textContent.length) : this.nativeFocus()) : this.focus();
    },
    /**
     * @description Focusout to wysiwyg area (.blur())
     */
    blur: function() {
      l.iframe ? t.element.wysiwygFrame.blur() : t.element.wysiwyg.blur();
    },
    /**
     * @description Set current editor's range object and return.
     * @param {Node} startCon The startContainer property of the selection object.
     * @param {Number} startOff The startOffset property of the selection object.
     * @param {Node} endCon The endContainer property of the selection object.
     * @param {Number} endOff The endOffset property of the selection object.
     * @returns {Object} Range object.
     */
    setRange: function(a, o, d, p) {
      if (!a || !d)
        return;
      o > a.textContent.length && (o = a.textContent.length), p > d.textContent.length && (p = d.textContent.length), s.isFormatElement(a) && (a = a.childNodes[o] || a.childNodes[o - 1] || a, o = o > 0 ? a.nodeType === 1 ? 1 : a.textContent ? a.textContent.length : 0 : 0), s.isFormatElement(d) && (d = d.childNodes[p] || d.childNodes[p - 1] || d, p = p > 0 ? d.nodeType === 1 ? 1 : d.textContent ? d.textContent.length : 0 : 0);
      const v = this._wd.createRange();
      try {
        v.setStart(a, o), v.setEnd(d, p);
      } catch (b) {
        console.warn("[SUNEDITOR.core.focus.error] " + b), this.nativeFocus();
        return;
      }
      const _ = this.getSelection();
      return _.removeAllRanges && _.removeAllRanges(), _.addRange(v), this._rangeInfo(v, this.getSelection()), l.iframe && this.__focus(), v;
    },
    /**
     * @description Remove range object and button effect
     */
    removeRange: function() {
      this._variable._range = null, this._variable._selectionNode = null, this.hasFocus && this.getSelection().removeAllRanges(), this._setKeyEffect([]);
    },
    /**
     * @description Get current editor's range object
     * @returns {Object}
     */
    getRange: function() {
      const a = this._variable._range || this._createDefaultRange(), o = this.getSelection();
      if (a.collapsed === o.isCollapsed || !t.element.wysiwyg.contains(o.focusNode))
        return a;
      if (o.rangeCount > 0)
        return this._variable._range = o.getRangeAt(0), this._variable._range;
      {
        const d = o.anchorNode, p = o.focusNode, v = o.anchorOffset, _ = o.focusOffset, b = s.compareElements(d, p), S = b.ancestor && (b.result === 0 ? v <= _ : b.result > 1);
        return this.setRange(
          S ? d : p,
          S ? v : _,
          S ? p : d,
          S ? _ : v
        );
      }
    },
    /**
     * @description If the "range" object is a non-editable area, add a line at the top of the editor and update the "range" object.
     * Returns a new "range" or argument "range".
     * @param {Object} range core.getRange()
     * @param {Element|null} container If there is "container" argument, it creates a line in front of the container.
     * @returns {Object} range
     */
    getRange_addLine: function(a, o) {
      if (this._selectionVoid(a)) {
        const d = t.element.wysiwyg, p = s.createElement(l.defaultTag);
        p.innerHTML = "<br>", d.insertBefore(p, o && o !== d ? o.nextElementSibling : d.firstElementChild), this.setRange(p.firstElementChild, 0, p.firstElementChild, 1), a = this._variable._range;
      }
      return a;
    },
    /**
     * @description Get window selection obejct
     * @returns {Object}
     */
    getSelection: function() {
      const a = this._shadowRoot && this._shadowRoot.getSelection ? this._shadowRoot.getSelection() : this._ww.getSelection();
      return !this._variable._range && !t.element.wysiwyg.contains(a.focusNode) && (a.removeAllRanges(), a.addRange(this._createDefaultRange())), a;
    },
    /**
     * @description Get current select node
     * @returns {Node}
     */
    getSelectionNode: function() {
      if (t.element.wysiwyg.contains(this._variable._selectionNode) || this._editorRange(), !this._variable._selectionNode) {
        const a = s.getChildElement(t.element.wysiwyg.firstChild, function(o) {
          return o.childNodes.length === 0 || o.nodeType === 3;
        }, !1);
        if (!a)
          this._editorRange();
        else
          return this._variable._selectionNode = a, a;
      }
      return this._variable._selectionNode;
    },
    /**
     * @description Saving the range object and the currently selected node of editor
     * @private
     */
    _editorRange: function() {
      const a = this._wd.activeElement;
      if (s.isInputElement(a))
        return this._variable._selectionNode = a, a;
      const o = this.getSelection();
      if (!o)
        return null;
      let d = null;
      o.rangeCount > 0 ? d = o.getRangeAt(0) : d = this._createDefaultRange(), this._rangeInfo(d, o);
    },
    /**
     * @description Set "range" and "selection" info.
     * @param {Object} range range object.
     * @param {Object} selection selection object.
     */
    _rangeInfo: function(a, o) {
      let d = null;
      this._variable._range = a, a.collapsed ? s.isWysiwygDiv(a.commonAncestorContainer) ? d = a.commonAncestorContainer.children[a.startOffset] || a.commonAncestorContainer : d = a.commonAncestorContainer : d = o.extentNode || o.anchorNode, this._variable._selectionNode = d;
    },
    /**
     * @description Return the range object of editor's first child node
     * @returns {Object}
     * @private
     */
    _createDefaultRange: function() {
      const a = t.element.wysiwyg, o = this._wd.createRange();
      let d = a.firstElementChild, p = null;
      return d ? (p = d.firstChild, p || (p = s.createElement("BR"), d.appendChild(p))) : (d = s.createElement(l.defaultTag), p = s.createElement("BR"), d.appendChild(p), a.appendChild(d)), o.setStart(p, 0), o.setEnd(p, 0), o;
    },
    /**
     * @description Returns true if there is no valid "selection".
     * @param {Object} range core.getRange()
     * @returns {Object} range
     * @private
     */
    _selectionVoid: function(a) {
      const o = a.commonAncestorContainer;
      return s.isWysiwygDiv(a.startContainer) && s.isWysiwygDiv(a.endContainer) || /FIGURE/i.test(o.nodeName) || this._fileManager.regExp.test(o.nodeName) || s.isMediaComponent(o);
    },
    /**
     * @description Reset range object to text node selected status.
     * @returns {Boolean} Returns false if there is no valid selection.
     * @private
     */
    _resetRangeToTextNode: function() {
      const a = this.getRange();
      if (this._selectionVoid(a))
        return !1;
      let o = a.startContainer, d = a.startOffset, p = a.endContainer, v = a.endOffset, _, b, S;
      if (s.isFormatElement(o))
        for (o.childNodes[d] ? (o = o.childNodes[d] || o, d = 0) : (o = o.lastChild || o, d = o.textContent.length); o && o.nodeType === 1 && o.firstChild; )
          o = o.firstChild || o, d = 0;
      if (s.isFormatElement(p)) {
        for (p = p.childNodes[v] || p.lastChild || p; p && p.nodeType === 1 && p.lastChild; )
          p = p.lastChild;
        v = p.textContent.length;
      }
      if (_ = s.isWysiwygDiv(o) ? t.element.wysiwyg.firstChild : o, b = d, s.isBreak(_) || _.nodeType === 1 && _.childNodes.length > 0) {
        const k = s.isBreak(_);
        if (!k) {
          for (; _ && !s.isBreak(_) && _.nodeType === 1; )
            _ = _.childNodes[b] || _.nextElementSibling || _.nextSibling, b = 0;
          let w = s.getFormatElement(_, null);
          w === s.getRangeFormatElement(w, null) && (w = s.createElement(s.getParentElement(_, s.isCell) ? "DIV" : l.defaultTag), _.parentNode.insertBefore(w, _), w.appendChild(_));
        }
        if (s.isBreak(_)) {
          const w = s.createTextNode(s.zeroWidthSpace);
          _.parentNode.insertBefore(w, _), _ = w, k && o === p && (p = _, v = 1);
        }
      }
      if (o = _, d = b, _ = s.isWysiwygDiv(p) ? t.element.wysiwyg.lastChild : p, b = v, s.isBreak(_) || _.nodeType === 1 && _.childNodes.length > 0) {
        const k = s.isBreak(_);
        if (!k) {
          for (; _ && !s.isBreak(_) && _.nodeType === 1 && (S = _.childNodes, S.length !== 0); )
            _ = S[b > 0 ? b - 1 : b] || !/FIGURE/i.test(S[0].nodeName) ? S[0] : _.previousElementSibling || _.previousSibling || o, b = b > 0 ? _.textContent.length : b;
          let w = s.getFormatElement(_, null);
          w === s.getRangeFormatElement(w, null) && (w = s.createElement(s.isCell(w) ? "DIV" : l.defaultTag), _.parentNode.insertBefore(w, _), w.appendChild(_));
        }
        if (s.isBreak(_)) {
          const w = s.createTextNode(s.zeroWidthSpace);
          _.parentNode.insertBefore(w, _), _ = w, b = 1, k && !_.previousSibling && s.removeItem(p);
        }
      }
      return p = _, v = b, this.setRange(o, d, p, v), !0;
    },
    /**
     * @description Returns a "formatElement"(util.isFormatElement) array from the currently selected range.
     * @param {Function|null} validation The validation function. (Replaces the default validation function-util.isFormatElement(current))
     * @returns {Array}
     */
    getSelectedElements: function(a) {
      if (!this._resetRangeToTextNode())
        return [];
      let o = this.getRange();
      if (s.isWysiwygDiv(o.startContainer)) {
        const I = t.element.wysiwyg.children;
        if (I.length === 0)
          return [];
        this.setRange(I[0], 0, I[I.length - 1], I[I.length - 1].textContent.trim().length), o = this.getRange();
      }
      const d = o.startContainer, p = o.endContainer, v = o.commonAncestorContainer, _ = s.getListChildren(v, function(I) {
        return a ? a(I) : s.isFormatElement(I);
      });
      if (!s.isWysiwygDiv(v) && !s.isRangeFormatElement(v) && _.unshift(s.getFormatElement(v, null)), d === p || _.length === 1)
        return _;
      let b = s.getFormatElement(d, null), S = s.getFormatElement(p, null), k = null, w = null;
      const z = function(I) {
        return s.isTable(I) ? /^TABLE$/i.test(I.nodeName) : !0;
      };
      let M = s.getRangeFormatElement(b, z), N = s.getRangeFormatElement(S, z);
      s.isTable(M) && s.isListCell(M.parentNode) && (M = M.parentNode), s.isTable(N) && s.isListCell(N.parentNode) && (N = N.parentNode);
      const O = M === N;
      for (let I = 0, $ = _.length, Y; I < $; I++) {
        if (Y = _[I], b === Y || !O && Y === M) {
          k = I;
          continue;
        }
        if (S === Y || !O && Y === N) {
          w = I;
          break;
        }
      }
      return k === null && (k = 0), w === null && (w = _.length - 1), _.slice(k, w + 1);
    },
    /**
     * @description Get format elements and components from the selected area. (P, DIV, H[1-6], OL, UL, TABLE..)
     * If some of the component are included in the selection, get the entire that component.
     * @param {Boolean} removeDuplicate If true, if there is a parent and child tag among the selected elements, the child tag is excluded.
     * @returns {Array}
     */
    getSelectedElementsAndComponents: function(a) {
      const o = this.getRange().commonAncestorContainer, d = s.getParentElement(o, s.isComponent), p = s.isTable(o) ? this.getSelectedElements(null) : this.getSelectedElements((function(v) {
        const _ = this.getParentElement(v, this.isComponent);
        return this.isFormatElement(v) && (!_ || _ === d) || this.isComponent(v) && !this.getFormatElement(v);
      }).bind(s));
      if (a) {
        for (let v = 0, _ = p.length; v < _; v++)
          for (let b = v - 1; b >= 0; b--)
            if (p[b].contains(p[v])) {
              p.splice(v, 1), v--, _--;
              break;
            }
      }
      return p;
    },
    /**
     * @description Determine if this offset is the edge offset of container
     * @param {Node} container The node of the selection object. (range.startContainer..)
     * @param {Number} offset The offset of the selection object. (core.getRange().startOffset...)
     * @param {String|undefined} dir Select check point - Both edge, Front edge or End edge. ("front": Front edge, "end": End edge, undefined: Both edge)
     * @returns {Boolean}
     */
    isEdgePoint: function(a, o, d) {
      return d !== "end" && o === 0 || (!d || d !== "front") && !a.nodeValue && o === 1 || (!d || d === "end") && !!a.nodeValue && o === a.nodeValue.length;
    },
    /**
     * @description Check if the container and offset values are the edges of the format tag
     * @param {Node} container The node of the selection object. (range.startContainer..)
     * @param {Number} offset The offset of the selection object. (core.getRange().startOffset...)
     * @param {String} dir Select check point - "front": Front edge, "end": End edge, undefined: Both edge.
     * @returns {Array|null}
     * @private
     */
    _isEdgeFormat: function(a, o, d) {
      if (!this.isEdgePoint(a, o, d))
        return !1;
      const p = [];
      for (d = d === "front" ? "previousSibling" : "nextSibling"; a && !s.isFormatElement(a) && !s.isWysiwygDiv(a); )
        if (!a[d] || s.isBreak(a[d]) && !a[d][d])
          a.nodeType === 1 && p.push(a.cloneNode(!1)), a = a.parentNode;
        else
          return null;
      return p;
    },
    /**
     * @description Show loading box
     */
    showLoading: function() {
      t.element.loading.style.display = "block";
    },
    /**
     * @description Close loading box
     */
    closeLoading: function() {
      t.element.loading.style.display = "none";
    },
    /**
     * @description Append format element to sibling node of argument element.
     * If the "formatNodeName" argument value is present, the tag of that argument value is inserted,
     * If not, the currently selected format tag is inserted.
     * @param {Element} element Insert as siblings of that element
     * @param {String|Element|null} formatNode Node name or node obejct to be inserted
     * @returns {Element}
     */
    appendFormatTag: function(a, o) {
      if (!a || !a.parentNode)
        return null;
      const d = s.getFormatElement(this.getSelectionNode(), null);
      let p = null;
      if (!s.isFormatElement(a) && s.isFreeFormatElement(d || a.parentNode))
        p = s.createElement("BR");
      else {
        const v = o ? typeof o == "string" ? o : o.nodeName : s.isFormatElement(d) && !s.isRangeFormatElement(d) && !s.isFreeFormatElement(d) ? d.nodeName : l.defaultTag;
        p = s.createElement(v), p.innerHTML = "<br>", (o && typeof o != "string" || !o && s.isFormatElement(d)) && s.copyTagAttributes(p, o || d, ["id"]);
      }
      return s.isCell(a) ? a.insertBefore(p, a.nextElementSibling) : a.parentNode.insertBefore(p, a.nextElementSibling), p;
    },
    /**
     * @description The method to insert a element and return. (used elements : table, hr, image, video)
     * If "element" is "HR", insert and return the new line.
     * @param {Element} element Element to be inserted
     * @param {Boolean} notHistoryPush When true, it does not update the history stack and the selection object and return EdgeNodes (util.getEdgeChildNodes)
     * @param {Boolean} checkCharCount If true, if "options.maxCharCount" is exceeded when "element" is added, null is returned without addition.
     * @param {Boolean} notSelect If true, Do not automatically select the inserted component.
     * @returns {Element}
     */
    insertComponent: function(a, o, d, p) {
      if (this.isReadOnly || d && !this.checkCharCount(a, null))
        return null;
      const v = this.removeNode();
      this.getRange_addLine(this.getRange(), v.container);
      let _ = null, b = this.getSelectionNode(), S = s.getFormatElement(b, null);
      if (s.isListCell(S))
        this.insertNode(a, b === S ? null : v.container.nextSibling, !1), a.nextSibling || a.parentNode.appendChild(s.createElement("BR"));
      else {
        if (this.getRange().collapsed && (v.container.nodeType === 3 || s.isBreak(v.container))) {
          const k = s.getParentElement(v.container, (function(w) {
            return this.isRangeFormatElement(w);
          }).bind(s));
          _ = s.splitElement(v.container, v.offset, k ? s.getElementDepth(k) + 1 : 0), _ && (S = _.previousSibling);
        }
        this.insertNode(a, s.isRangeFormatElement(S) ? null : S, !1), S && s.onlyZeroWidthSpace(S) && s.removeItem(S);
      }
      if (!p) {
        this.setRange(a, 0, a, 0);
        const k = this.getFileComponent(a);
        k ? this.selectComponent(k.target, k.pluginName) : _ && (_ = s.getEdgeChildNodes(_, null).sc || _, this.setRange(_, 0, _, 0));
      }
      return o || this.history.push(1), _ || a;
    },
    /**
     * @description Gets the file component and that plugin name
     * return: {target, component, pluginName} | null
     * @param {Element} element Target element (figure tag, component div, file tag)
     * @returns {Object|null}
     */
    getFileComponent: function(a) {
      if (!this._fileManager.queryString || !a)
        return null;
      let o, d;
      return (/^FIGURE$/i.test(a.nodeName) || /se-component/.test(a.className)) && (o = a.querySelector(this._fileManager.queryString)), !o && a.nodeName && this._fileManager.regExp.test(a.nodeName) && (o = a), o && (d = this._fileManager.pluginMap[o.nodeName.toLowerCase()], d) ? {
        target: o,
        component: s.getParentElement(o, s.isComponent),
        pluginName: d
      } : null;
    },
    /**
     * @description The component(image, video) is selected and the resizing module is called.
     * @param {Element} element Element tag (img, iframe, video)
     * @param {String} pluginName Plugin name (image, video)
     */
    selectComponent: function(a, o) {
      if (s.isUneditableComponent(s.getParentElement(a, s.isComponent)) || s.isUneditableComponent(a))
        return !1;
      this.hasFocus || this.focus();
      const d = this.plugins[o];
      d && h.setTimeout((function() {
        typeof d.select == "function" && this.callPlugin(o, d.select.bind(this, a), null), this._setComponentLineBreaker(a);
      }).bind(this));
    },
    /**
     * @description Set line breaker of component
     * @param {Element} element Element tag (img, iframe, video)
     * @private
     */
    _setComponentLineBreaker: function(a) {
      this._lineBreaker.style.display = "none";
      const o = s.getParentElement(a, s.isComponent), d = t.element.lineBreaker_t.style, p = t.element.lineBreaker_b.style, v = this.context.resizing.resizeContainer.style.display === "block" ? this.context.resizing.resizeContainer : a, _ = s.isListCell(o.parentNode);
      let b, S, k;
      (_ ? !o.previousSibling : !s.isFormatElement(o.previousElementSibling)) ? (this._variable._lineBreakComp = o, S = t.element.wysiwyg.scrollTop, b = s.getOffset(a, t.element.wysiwygFrame).top + S, k = v.offsetWidth / 2 / 2, d.top = b - S - 12 + "px", d.left = s.getOffset(v).left + k + "px", d.display = "block") : d.display = "none", (_ ? !o.nextSibling : !s.isFormatElement(o.nextElementSibling)) ? (b || (this._variable._lineBreakComp = o, S = t.element.wysiwyg.scrollTop, b = s.getOffset(a, t.element.wysiwygFrame).top + S, k = v.offsetWidth / 2 / 2), p.top = b + v.offsetHeight - S - 12 + "px", p.left = s.getOffset(v).left + v.offsetWidth - k - 24 + "px", p.display = "block") : p.display = "none";
    },
    _checkDuplicateNode: function(a, o) {
      (function d(p) {
        c._dupleCheck(p, o);
        const v = p.childNodes;
        for (let _ = 0, b = v.length; _ < b; _++)
          d(v[_]);
      })(a);
    },
    _dupleCheck: function(a, o) {
      if (!s.isTextStyleElement(a))
        return;
      const d = (a.style.cssText.match(/[^;]+;/g) || []).map(function(_) {
        return _.trim();
      }), p = a.nodeName;
      if (/^span$/i.test(p) && d.length === 0)
        return a;
      let v = !1;
      return function _(b) {
        if (!(s.isWysiwygDiv(b) || !s.isTextStyleElement(b))) {
          if (b.nodeName === p) {
            v = !0;
            const S = b.style.cssText.match(/[^;]+;/g) || [];
            for (let k = 0, w = S.length, z; k < w; k++)
              (z = d.indexOf(S[k].trim())) > -1 && d.splice(z, 1);
            for (let k = 0, w = b.classList.length; k < w; k++)
              a.classList.remove(b.classList[k]);
          }
          _(b.parentElement);
        }
      }(o), v && ((a.style.cssText = d.join(" ")) || (a.setAttribute("style", ""), a.removeAttribute("style")), a.attributes.length || a.setAttribute("data-se-duple", "true")), a;
    },
    /**
     * @description Delete selected node and insert argument value node and return.
     * If the "afterNode" exists, it is inserted after the "afterNode"
     * Inserting a text node merges with both text nodes on both sides and returns a new "{ container, startOffset, endOffset }".
     * @param {Node} oNode Element to be inserted
     * @param {Node|null} afterNode If the node exists, it is inserted after the node
     * @param {Boolean} checkCharCount If true, if "options.maxCharCount" is exceeded when "element" is added, null is returned without addition.
     * @returns {Object|Node|null}
     */
    insertNode: function(a, o, d) {
      if (this.isReadOnly || d && !this.checkCharCount(a, null))
        return null;
      let p = this.getRange(), v = s.isListCell(p.commonAncestorContainer) ? p.commonAncestorContainer : s.getFormatElement(this.getSelectionNode(), null), _ = s.isListCell(v) && (s.isListCell(a) || s.isList(a)), b, S, k, w = null;
      const z = s.isFreeFormatElement(v), M = !z && (s.isFormatElement(a) || s.isRangeFormatElement(a)) || s.isComponent(a);
      if (_ && (k = o || s.isList(a) ? v.lastChild : v.nextElementSibling, w = s.isList(a) ? v : (k || v).parentNode), !o && (M || s.isComponent(a) || s.isMedia(a))) {
        const R = this.isEdgePoint(p.endContainer, p.endOffset, "end"), Z = this.removeNode(), W = Z.container, H = W === Z.prevContainer && p.collapsed ? null : Z.prevContainer;
        if (_ && H)
          if (w = H.nodeType === 3 ? H.parentNode : H, w.contains(W)) {
            let q = !0;
            for (k = W; k.parentNode && k.parentNode !== w; )
              k = k.parentNode, q = !1;
            q && W === H && (k = k.nextSibling);
          } else
            k = null;
        else if (_ && s.isListCell(W) && !v.parentElement)
          v = s.createElement("LI"), w.appendChild(v), W.appendChild(w), k = null;
        else if (W.nodeType === 3 || s.isBreak(W) || _) {
          const q = s.getParentElement(W, (function(P) {
            return this.isRangeFormatElement(P) || this.isListCell(P);
          }).bind(s));
          if (o = s.splitElement(W, Z.offset, q ? s.getElementDepth(q) + 1 : 0), !o)
            k = o = v;
          else if (_) {
            if (v.contains(W)) {
              const P = s.isList(v.lastElementChild);
              let V = null;
              R || (V = v.cloneNode(!1), V.appendChild(o.textContent.trim() ? o : s.createTextNode(s.zeroWidthSpace))), P && (V || (V = v.cloneNode(!1), V.appendChild(s.createTextNode(s.zeroWidthSpace))), V.appendChild(v.lastElementChild)), V && (v.parentNode.insertBefore(V, v.nextElementSibling), k = o = V);
            }
          } else
            o = o.previousSibling;
        }
      }
      p = !o && !M ? this.getRange_addLine(this.getRange(), null) : this.getRange();
      const N = p.commonAncestorContainer, O = p.startOffset, I = p.endOffset, $ = p.startContainer === N && s.isFormatElement(N), Y = $ && (N.childNodes[O] || N.childNodes[0]) || p.startContainer, j = $ && (N.childNodes[I] || N.childNodes[N.childNodes.length - 1]) || p.endContainer;
      if (!_)
        if (o)
          b = o.parentNode, o = o.nextSibling, S = !0;
        else if (b = Y, Y.nodeType === 3 && (b = Y.parentNode), p.collapsed)
          if (N.nodeType === 3)
            N.textContent.length > I ? o = N.splitText(I) : o = N.nextSibling;
          else if (s.isBreak(b))
            o = b, b = b.parentNode;
          else {
            let R = b.childNodes[O];
            const Z = R && R.nodeType === 3 && s.onlyZeroWidthSpace(R) && s.isBreak(R.nextSibling) ? R.nextSibling : R;
            Z ? !Z.nextSibling && s.isBreak(Z) ? (b.removeChild(Z), o = null) : o = s.isBreak(Z) && !s.isBreak(a) ? Z : Z.nextSibling : o = null;
          }
        else if (Y === j) {
          this.isEdgePoint(j, I) ? o = j.nextSibling : o = j.splitText(I);
          let Z = Y;
          this.isEdgePoint(Y, O) || (Z = Y.splitText(O)), b.removeChild(Z), b.childNodes.length === 0 && M && (b.innerHTML = "<br>");
        } else {
          const Z = this.removeNode(), W = Z.container, H = Z.prevContainer;
          if (W && W.childNodes.length === 0 && M && (s.isFormatElement(W) ? W.innerHTML = "<br>" : s.isRangeFormatElement(W) && (W.innerHTML = "<" + l.defaultTag + "><br></" + l.defaultTag + ">")), s.isListCell(W) && a.nodeType === 3)
            b = W, o = null;
          else if (!M && H)
            if (b = H.nodeType === 3 ? H.parentNode : H, b.contains(W)) {
              let q = !0;
              for (o = W; o.parentNode && o.parentNode !== b; )
                o = o.parentNode, q = !1;
              q && W === H && (o = o.nextSibling);
            } else
              o = null;
          else
            s.isWysiwygDiv(W) && !s.isFormatElement(a) ? (b = W.appendChild(s.createElement(l.defaultTag)), o = null) : (o = M ? j : W === H ? W.nextSibling : W, b = !o || !o.parentNode ? N : o.parentNode);
          for (; o && !s.isFormatElement(o) && o.parentNode !== N; )
            o = o.parentNode;
        }
      try {
        if (!_) {
          if ((s.isWysiwygDiv(o) || b === t.element.wysiwyg.parentNode) && (b = t.element.wysiwyg, o = null), s.isFormatElement(a) || s.isRangeFormatElement(a) || !s.isListCell(b) && s.isComponent(a)) {
            const R = b;
            if (s.isList(o))
              b = o, o = null;
            else if (s.isListCell(o))
              b = o.previousElementSibling || o;
            else if (!S && !o) {
              const Z = this.removeNode(), W = Z.container.nodeType === 3 ? s.isListCell(s.getFormatElement(Z.container, null)) ? Z.container : s.getFormatElement(Z.container, null) || Z.container.parentNode : Z.container, H = s.isWysiwygDiv(W) || s.isRangeFormatElement(W);
              b = H ? W : W.parentNode, o = H ? null : W.nextSibling;
            }
            R.childNodes.length === 0 && b !== R && s.removeItem(R);
          }
          if (M && !z && !s.isRangeFormatElement(b) && !s.isListCell(b) && !s.isWysiwygDiv(b) && (o = b.nextElementSibling, b = b.parentNode), s.isWysiwygDiv(b) && (a.nodeType === 3 || s.isBreak(a))) {
            const R = s.createElement(l.defaultTag);
            R.appendChild(a), a = R;
          }
        }
        if (_ ? w.parentNode ? (b = w, o = k) : (b = t.element.wysiwyg, o = null) : o = b === o ? b.lastChild : o, s.isListCell(a) && !s.isList(b)) {
          if (s.isListCell(b))
            o = b.nextElementSibling, b = b.parentNode;
          else {
            const R = s.createElement("ol");
            b.insertBefore(R, o), b = R, o = null;
          }
          _ = !0;
        }
        if (this._checkDuplicateNode(a, b), b.insertBefore(a, o), _)
          if (s.onlyZeroWidthSpace(v.textContent.trim()))
            s.removeItem(v), a = a.lastChild;
          else {
            const R = s.getArrayItem(v.children, s.isList);
            R && (a !== R ? (a.appendChild(R), a = R.previousSibling) : (b.appendChild(a), a = b), s.onlyZeroWidthSpace(v.textContent.trim()) && s.removeItem(v));
          }
      } catch (R) {
        b.appendChild(a), console.warn("[SUNEDITOR.insertNode.warn] " + R);
      } finally {
        const R = b.querySelectorAll("[data-se-duple]");
        if (R.length > 0)
          for (let Z = 0, W = R.length, H, q, P, V; Z < W; Z++) {
            for (H = R[Z], P = H.childNodes, V = H.parentNode; P[0]; )
              q = P[0], V.insertBefore(q, H);
            H === a && (a = q), s.removeItem(H);
          }
        if ((s.isFormatElement(a) || s.isComponent(a)) && Y === j) {
          const Z = s.getFormatElement(N, null);
          Z && Z.nodeType === 1 && s.isEmptyLine(Z) && s.removeItem(Z);
        }
        if (z && (s.isFormatElement(a) || s.isRangeFormatElement(a)) && (a = this._setIntoFreeFormat(a)), !s.isComponent(a)) {
          let Z = 1;
          if (a.nodeType === 3) {
            const W = a.previousSibling, H = a.nextSibling, q = !W || W.nodeType === 1 || s.onlyZeroWidthSpace(W) ? "" : W.textContent, P = !H || H.nodeType === 1 || s.onlyZeroWidthSpace(H) ? "" : H.textContent;
            W && q.length > 0 && (a.textContent = q + a.textContent, s.removeItem(W)), H && H.length > 0 && (a.textContent += P, s.removeItem(H));
            const V = {
              container: a,
              startOffset: q.length,
              endOffset: a.textContent.length - P.length
            };
            return this.setRange(a, V.startOffset, a, V.endOffset), V;
          } else if (!s.isBreak(a) && !s.isListCell(a) && s.isFormatElement(b)) {
            let W = null;
            (!a.previousSibling || s.isBreak(a.previousSibling)) && (W = s.createTextNode(s.zeroWidthSpace), a.parentNode.insertBefore(W, a)), (!a.nextSibling || s.isBreak(a.nextSibling)) && (W = s.createTextNode(s.zeroWidthSpace), a.parentNode.insertBefore(W, a.nextSibling)), s._isIgnoreNodeChange(a) && (a = a.nextSibling, Z = 0);
          }
          this.setRange(a, Z, a, Z);
        }
        return this.history.push(!0), a;
      }
    },
    _setIntoFreeFormat: function(a) {
      const o = a.parentNode;
      let d, p;
      for (; s.isFormatElement(a) || s.isRangeFormatElement(a); ) {
        for (d = a.childNodes, p = null; d[0]; ) {
          if (p = d[0], s.isFormatElement(p) || s.isRangeFormatElement(p)) {
            if (this._setIntoFreeFormat(p), !a.parentNode)
              break;
            d = a.childNodes;
            continue;
          }
          o.insertBefore(p, a);
        }
        a.childNodes.length === 0 && s.removeItem(a), a = s.createElement("BR"), o.insertBefore(a, p.nextSibling);
      }
      return a;
    },
    /**
     * @description Delete the currently selected nodes and reset selection range
     * Returns {container: "the last element after deletion", offset: "offset", prevContainer: "previousElementSibling Of the deleted area"}
     * @returns {Object}
     */
    removeNode: function() {
      this._resetRangeToTextNode();
      const a = this.getRange(), o = a.startOffset === 0, d = c.isEdgePoint(a.endContainer, a.endOffset, "end");
      let p = null, v = null, _ = null;
      o && (v = s.getFormatElement(a.startContainer), p = v.previousElementSibling, v = v && p), d && (_ = s.getFormatElement(a.endContainer), _ = _ && _.nextElementSibling);
      let b, S = 0, k = a.startContainer, w = a.endContainer, z = a.startOffset, M = a.endOffset;
      const N = a.commonAncestorContainer.nodeType === 3 && a.commonAncestorContainer.parentNode === k.parentNode ? k.parentNode : a.commonAncestorContainer;
      if (N === k && N === w && (k = N.children[z], w = N.children[M], z = M = 0), !k || !w)
        return {
          container: N,
          offset: 0
        };
      if (k === w && a.collapsed && k.textContent && s.onlyZeroWidthSpace(k.textContent.substr(z)))
        return {
          container: k,
          offset: z,
          prevContainer: k && k.parentNode ? k : null
        };
      let O = null, I = null;
      const $ = s.getListChildNodes(N, null);
      let Y = s.getArrayIndex($, k), j = s.getArrayIndex($, w);
      if ($.length > 0 && Y > -1 && j > -1) {
        for (let W = Y + 1, H = k; W >= 0; W--)
          $[W] === H.parentNode && $[W].firstChild === H && z === 0 && (Y = W, H = H.parentNode);
        for (let W = j - 1, H = w; W > Y; W--)
          $[W] === H.parentNode && $[W].nodeType === 1 && ($.splice(W, 1), H = H.parentNode, --j);
      } else {
        if ($.length === 0) {
          if (s.isFormatElement(N) || s.isRangeFormatElement(N) || s.isWysiwygDiv(N) || s.isBreak(N) || s.isMedia(N))
            return {
              container: N,
              offset: 0
            };
          if (N.nodeType === 3)
            return {
              container: N,
              offset: M
            };
          $.push(N), k = w = N;
        } else if (k = w = $[0], s.isBreak(k) || s.onlyZeroWidthSpace(k))
          return {
            container: s.isMedia(N) ? N : k,
            offset: 0
          };
        Y = j = 0;
      }
      for (let W = Y; W <= j; W++) {
        const H = $[W];
        if (H.length === 0 || H.nodeType === 3 && H.data === void 0) {
          this._nodeRemoveListItem(H);
          continue;
        }
        if (H === k) {
          if (k.nodeType === 1) {
            if (s.isComponent(k))
              continue;
            O = s.createTextNode(k.textContent);
          } else
            H === w ? (O = s.createTextNode(k.substringData(0, z) + w.substringData(M, w.length - M)), S = z) : O = s.createTextNode(k.substringData(0, z));
          if (O.length > 0 ? k.data = O.data : this._nodeRemoveListItem(k), H === w)
            break;
          continue;
        }
        if (H === w) {
          if (w.nodeType === 1) {
            if (s.isComponent(w))
              continue;
            I = s.createTextNode(w.textContent);
          } else
            I = s.createTextNode(w.substringData(M, w.length - M));
          I.length > 0 ? w.data = I.data : this._nodeRemoveListItem(w);
          continue;
        }
        this._nodeRemoveListItem(H);
      }
      const R = s.getParentElement(w, "ul"), Z = s.getParentElement(k, "li");
      if (R && Z && Z.contains(R) ? (b = R.previousSibling, S = b.textContent.length) : (b = w && w.parentNode ? w : k && k.parentNode ? k : a.endContainer || a.startContainer, S = !o && !d ? S : d ? b.textContent.length : 0), !s.isWysiwygDiv(b) && b.childNodes.length === 0) {
        const W = s.removeItemAllParents(b, null, null);
        W && (b = W.sc || W.ec || t.element.wysiwyg);
      }
      return !s.getFormatElement(b) && !(k && k.parentNode) && (_ ? (b = _, S = 0) : v && (b = v, S = 1)), this.setRange(b, S, b, S), this.history.push(!0), {
        container: b,
        offset: S,
        prevContainer: p
      };
    },
    _nodeRemoveListItem: function(a) {
      const o = s.getFormatElement(a, null);
      s.removeItem(a), s.isListCell(o) && (s.removeItemAllParents(o, null, null), o && s.isList(o.firstChild) && o.insertBefore(s.createTextNode(s.zeroWidthSpace), o.firstChild));
    },
    /**
     * @description Appended all selected format Element to the argument element and insert
     * @param {Element} rangeElement Element of wrap the arguments (BLOCKQUOTE...)
     */
    applyRangeFormatElement: function(a) {
      this.getRange_addLine(this.getRange(), null);
      const o = this.getSelectedElementsAndComponents(!1);
      if (!o || o.length === 0)
        return;
      e:
        for (let M = 0, N = o.length, O, I, $, Y, j, R; M < N; M++)
          if (O = o[M], !!s.isListCell(O) && (I = O.lastElementChild, I && s.isListCell(O.nextElementSibling) && o.indexOf(O.nextElementSibling) > -1 && (Y = I.lastElementChild, o.indexOf(Y) > -1))) {
            let Z = null;
            for (; Z = Y.lastElementChild; )
              if (s.isList(Z))
                if (o.indexOf(Z.lastElementChild) > -1)
                  Y = Z.lastElementChild;
                else
                  continue e;
            $ = I.firstElementChild, j = o.indexOf($), R = o.indexOf(Y), o.splice(j, R - j + 1), N = o.length;
            continue;
          }
      let d = o[o.length - 1], p, v, _;
      s.isRangeFormatElement(d) || s.isFormatElement(d) ? p = d : p = s.getRangeFormatElement(d, null) || s.getFormatElement(d, null), s.isCell(p) ? (v = null, _ = p) : (v = p.nextSibling, _ = p.parentNode);
      let b = s.getElementDepth(p), S = null;
      const k = [], w = function(M, N, O) {
        let I = null;
        if (M !== N && !s.isTable(N)) {
          if (N && s.getElementDepth(M) === s.getElementDepth(N))
            return O;
          I = s.removeItemAllParents(N, null, M);
        }
        return I ? I.ec : O;
      };
      for (let M = 0, N = o.length, O, I, $, Y, j, R, Z; M < N; M++)
        if (O = o[M], I = O.parentNode, !(!I || a.contains(I)))
          if ($ = s.getElementDepth(O), s.isList(I)) {
            if (S === null && (R ? (S = R, Z = !0, R = null) : S = I.cloneNode(!1)), k.push(O), j = o[M + 1], M === N - 1 || j && j.parentNode !== I) {
              j && O.contains(j.parentNode) && (R = j.parentNode.cloneNode(!1));
              let W = I.parentNode, H;
              for (; s.isList(W); )
                H = s.createElement(W.nodeName), H.appendChild(S), S = H, W = W.parentNode;
              const q = this.detachRangeFormatElement(I, k, null, !0, !0);
              b >= $ ? (b = $, _ = q.cc, v = w(_, I, q.ec), v && (_ = v.parentNode)) : _ === q.cc && (v = q.ec), _ !== q.cc && (Y = w(_, q.cc, Y), Y !== void 0 ? v = Y : v = q.cc);
              for (let P = 0, V = q.removeArray.length; P < V; P++)
                S.appendChild(q.removeArray[P]);
              Z || a.appendChild(S), R && q.removeArray[q.removeArray.length - 1].appendChild(R), S = null, Z = !1;
            }
          } else
            b >= $ && (b = $, _ = I, v = O.nextSibling), a.appendChild(O), _ !== I && (Y = w(_, I), Y !== void 0 && (v = Y));
      if (this.effectNode = null, s.mergeSameTags(a, null, !1), s.mergeNestedTags(a, (function(M) {
        return this.isList(M);
      }).bind(s)), v && s.getElementDepth(v) > 0 && (s.isList(v.parentNode) || s.isList(v.parentNode.parentNode))) {
        const M = s.getParentElement(v, (function(O) {
          return this.isRangeFormatElement(O) && !this.isList(O);
        }).bind(s)), N = s.splitElement(v, null, M ? s.getElementDepth(M) + 1 : 0);
        N.parentNode.insertBefore(a, N);
      } else
        _.insertBefore(a, v), w(a, v);
      const z = s.getEdgeChildNodes(a.firstElementChild, a.lastElementChild);
      o.length > 1 ? this.setRange(z.sc, 0, z.ec, z.ec.textContent.length) : this.setRange(z.ec, z.ec.textContent.length, z.ec, z.ec.textContent.length), this.history.push(!1);
    },
    /**
     * @description The elements of the "selectedFormats" array are detached from the "rangeElement" element. ("LI" tags are converted to "P" tags)
     * When "selectedFormats" is null, all elements are detached and return {cc: parentNode, sc: nextSibling, ec: previousSibling, removeArray: [Array of removed elements]}.
     * @param {Element} rangeElement Range format element (PRE, BLOCKQUOTE, OL, UL...)
     * @param {Array|null} selectedFormats Array of format elements (P, DIV, LI...) to remove.
     * If null, Applies to all elements and return {cc: parentNode, sc: nextSibling, ec: previousSibling}
     * @param {Element|null} newRangeElement The node(rangeElement) to replace the currently wrapped node.
     * @param {Boolean} remove If true, deleted without detached.
     * @param {Boolean} notHistoryPush When true, it does not update the history stack and the selection object and return EdgeNodes (util.getEdgeChildNodes)
     * @returns {Object}
     */
    detachRangeFormatElement: function(a, o, d, p, v) {
      const _ = this.getRange();
      let b = _.startOffset, S = _.endOffset, k = s.getListChildNodes(a, function(q) {
        return q.parentNode === a;
      }), w = a.parentNode, z = null, M = null, N = a.cloneNode(!1);
      const O = [], I = s.isList(d);
      let $ = !1, Y = !1, j = !1;
      function R(q, P, V, X) {
        if (s.onlyZeroWidthSpace(P) && (P.innerHTML = s.zeroWidthSpace, b = S = 1), P.nodeType === 3)
          return q.insertBefore(P, V), P;
        const le = (j ? P : X).childNodes;
        let te = P.cloneNode(!1), se = null, ne = null;
        for (; le[0]; )
          ne = le[0], s._notTextNode(ne) && !s.isBreak(ne) && !s.isListCell(te) ? (te.childNodes.length > 0 && (se || (se = te), q.insertBefore(te, V), te = P.cloneNode(!1)), q.insertBefore(ne, V), se || (se = ne)) : te.appendChild(ne);
        if (te.childNodes.length > 0) {
          if (s.isListCell(q) && s.isListCell(te) && s.isList(V))
            if (I) {
              for (se = V; V; )
                te.appendChild(V), V = V.nextSibling;
              q.parentNode.insertBefore(te, q.nextElementSibling);
            } else {
              const J = X.nextElementSibling, ce = s.detachNestedList(X, !1);
              if (a !== ce || J !== X.nextElementSibling) {
                const fe = te.childNodes;
                for (; fe[0]; )
                  X.appendChild(fe[0]);
                a = ce, Y = !0;
              }
            }
          else
            q.insertBefore(te, V);
          se || (se = te);
        }
        return se;
      }
      for (let q = 0, P = k.length, V, X, le; q < P; q++)
        if (V = k[q], !(V.nodeType === 3 && s.isList(N)))
          if (j = !1, p && q === 0 && (!o || o.length === P || o[0] === V ? z = a.previousSibling : z = N), o && (X = o.indexOf(V)), o && X === -1)
            N || (N = a.cloneNode(!1)), N.appendChild(V);
          else {
            if (o && (le = o[X + 1]), N && N.children.length > 0 && (w.insertBefore(N, a), N = null), !I && s.isListCell(V))
              if (le && s.getElementDepth(V) !== s.getElementDepth(le) && (s.isListCell(w) || s.getArrayItem(V.children, s.isList, !1))) {
                const te = V.nextElementSibling, se = s.detachNestedList(V, !1);
                (a !== se || te !== V.nextElementSibling) && (a = se, Y = !0);
              } else {
                const te = V;
                V = s.createElement(p ? te.nodeName : s.isList(a.parentNode) || s.isListCell(a.parentNode) ? "LI" : s.isCell(a.parentNode) ? "DIV" : l.defaultTag);
                const se = s.isListCell(V), ne = te.childNodes;
                for (; ne[0] && !(s.isList(ne[0]) && !se); )
                  V.appendChild(ne[0]);
                s.copyFormatAttributes(V, te), j = !0;
              }
            else
              V = V.cloneNode(!1);
            if (!Y && (p ? (O.push(V), s.removeItem(k[q])) : (d ? ($ || (w.insertBefore(d, a), $ = !0), V = R(d, V, null, k[q])) : V = R(w, V, a, k[q]), Y || (o ? (M = V, z || (z = V)) : z || (z = M = V))), Y)) {
              Y = j = !1, k = s.getListChildNodes(a, function(te) {
                return te.parentNode === a;
              }), N = a.cloneNode(!1), w = a.parentNode, q = -1, P = k.length;
              continue;
            }
          }
      const Z = a.parentNode;
      let W = a.nextSibling;
      N && N.children.length > 0 && Z.insertBefore(N, W), d ? z = d.previousSibling : z || (z = a.previousSibling), W = a.nextSibling !== N ? a.nextSibling : N ? N.nextSibling : null, a.children.length === 0 || a.textContent.length === 0 ? s.removeItem(a) : s.removeEmptyNode(a, null, !1);
      let H = null;
      if (p)
        H = {
          cc: Z,
          sc: z,
          so: b,
          ec: W,
          eo: S,
          removeArray: O
        };
      else {
        z || (z = M), M || (M = z);
        const q = s.getEdgeChildNodes(z, M.parentNode ? z : M);
        H = {
          cc: (q.sc || q.ec).parentNode,
          sc: q.sc,
          so: b,
          ec: q.ec,
          eo: S,
          removeArray: null
        };
      }
      if (this.effectNode = null, v)
        return H;
      !p && H && (o ? this.setRange(H.sc, b, H.ec, S) : this.setRange(H.sc, 0, H.sc, 0)), this.history.push(!1);
    },
    /**
     * @description "selectedFormats" array are detached from the list element.
     * The return value is applied when the first and last lines of "selectedFormats" are "LI" respectively.
     * @param {Array} selectedFormats Array of format elements (LI, P...) to remove.
     * @param {Boolean} remove If true, deleted without detached.
     * @returns {Object} {sc: <LI>, ec: <LI>}.
     */
    detachList: function(a, o) {
      let d = {}, p = !1, v = !1, _ = null, b = null;
      const S = (function(k) {
        return !this.isComponent(k);
      }).bind(s);
      for (let k = 0, w = a.length, z, M, N, O; k < w; k++) {
        if (N = k === w - 1, M = s.getRangeFormatElement(a[k], S), O = s.isList(M), !z && O)
          z = M, d = { r: z, f: [s.getParentElement(a[k], "LI")] }, k === 0 && (p = !0);
        else if (z && O)
          if (z !== M) {
            const I = this.detachRangeFormatElement(d.f[0].parentNode, d.f, null, o, !0);
            M = a[k].parentNode, p && (_ = I.sc, p = !1), N && (b = I.ec), O ? (z = M, d = { r: z, f: [s.getParentElement(a[k], "LI")] }, N && (v = !0)) : z = null;
          } else
            d.f.push(s.getParentElement(a[k], "LI")), N && (v = !0);
        if (N && s.isList(z)) {
          const I = this.detachRangeFormatElement(d.f[0].parentNode, d.f, null, o, !0);
          (v || w === 1) && (b = I.ec), p && (_ = I.sc || b);
        }
      }
      return {
        sc: _,
        ec: b
      };
    },
    /**
     * @description Add, update, and delete nodes from selected text.
     * 1. If there is a node in the "appendNode" argument, a node with the same tags and attributes as "appendNode" is added to the selection text.
     * 2. If it is in the same tag, only the tag's attributes are changed without adding a tag.
     * 3. If the "appendNode" argument is null, the node of the selection is update or remove without adding a new node.
     * 4. The same style as the style attribute of the "styleArray" argument is deleted.
     *    (Styles should be put with attribute names from css. ["background-color"])
     * 5. The same class name as the class attribute of the "styleArray" argument is deleted.
     *    (The class name is preceded by "." [".className"])
     * 6. Use a list of styles and classes of "appendNode" in "styleArray" to avoid duplicate property values.
     * 7. If a node with all styles and classes removed has the same tag name as "appendNode" or "removeNodeArray", or "appendNode" is null, that node is deleted.
     * 8. Regardless of the style and class of the node, the tag with the same name as the "removeNodeArray" argument value is deleted.
     * 9. If the "strictRemove" argument is true, only nodes with all styles and classes removed from the nodes of "removeNodeArray" are removed.
     *10. It won't work if the parent node has the same class and same value style.
     *    However, if there is a value in "removeNodeArray", it works and the text node is separated even if there is no node to replace.
     * @param {Element|null} appendNode The element to be added to the selection. If it is null, only delete the node.
     * @param {Array|null} styleArray The style or className attribute name Array to check (['font-size'], ['.className'], ['font-family', 'color', '.className']...])
     * @param {Array|null} removeNodeArray An array of node names to remove types from, remove all formats when "appendNode" is null and there is an empty array or null value. (['span'], ['strong', 'em'] ...])
     * @param {Boolean|null} strictRemove If true, only nodes with all styles and classes removed from the nodes of "removeNodeArray" are removed.
     */
    nodeChange: function(a, o, d, p) {
      this._resetRangeToTextNode();
      let v = this.getRange_addLine(this.getRange(), null);
      o = o && o.length > 0 ? o : !1, d = d && d.length > 0 ? d : !1;
      const _ = !a, b = _ && !d && !o;
      let S = v.startContainer, k = v.startOffset, w = v.endContainer, z = v.endOffset;
      if (b && v.collapsed && s.isFormatElement(S.parentNode) || S === w && S.nodeType === 1 && s.isNonEditable(S)) {
        const ne = S.parentNode;
        if (!s.isListCell(ne) || !s.getValues(ne.style).some((function(J) {
          return this._listKebab.indexOf(J) > -1;
        }).bind(this)))
          return;
      }
      if (v.collapsed && !b && S.nodeType === 1 && !s.isBreak(S) && !s.isComponent(S)) {
        let ne = null;
        const J = S.childNodes[k];
        J && (J.nextSibling ? ne = s.isBreak(J) ? J : J.nextSibling : ne = null);
        const ce = s.createTextNode(s.zeroWidthSpace);
        S.insertBefore(ce, ne), this.setRange(ce, 1, ce, 1), v = this.getRange(), S = v.startContainer, k = v.startOffset, w = v.endContainer, z = v.endOffset;
      }
      s.isFormatElement(S) && (S = S.childNodes[k] || S.firstChild, k = 0), s.isFormatElement(w) && (w = w.childNodes[z] || w.lastChild, z = w.textContent.length), _ && (a = s.createElement("DIV"));
      const M = h.RegExp, N = a.nodeName;
      if (!b && S === w && !d && a) {
        let ne = S, J = 0;
        const ce = [], fe = a.style;
        for (let ve = 0, _e = fe.length; ve < _e; ve++)
          ce.push(fe[ve]);
        const we = a.classList;
        for (let ve = 0, _e = we.length; ve < _e; ve++)
          ce.push("." + we[ve]);
        if (ce.length > 0) {
          for (; !s.isFormatElement(ne) && !s.isWysiwygDiv(ne); ) {
            for (let ve = 0; ve < ce.length; ve++)
              if (ne.nodeType === 1) {
                const _e = ce[ve], Me = /^\./.test(_e) ? new M("\\s*" + _e.replace(/^\./, "") + "(\\s+|$)", "ig") : !1, $e = _ ? !!ne.style[_e] : !!ne.style[_e] && !!a.style[_e] && ne.style[_e] === a.style[_e], xe = Me === !1 ? !1 : _ ? !!ne.className.match(Me) : !!ne.className.match(Me) && !!a.className.match(Me);
                ($e || xe) && J++;
              }
            ne = ne.parentNode;
          }
          if (J >= ce.length)
            return;
        }
      }
      let O = {}, I = {}, $, Y = "", j = "", R = "";
      if (o) {
        for (let ne = 0, J = o.length, ce; ne < J; ne++)
          ce = o[ne], /^\./.test(ce) ? j += (j ? "|" : "\\s*(?:") + ce.replace(/^\./, "") : Y += (Y ? "|" : "(?:;|^|\\s)(?:") + ce;
        Y && (Y += ")\\s*:[^;]*\\s*(?:;|$)", Y = new M(Y, "ig")), j && (j += ")(?=\\s+|$)", j = new M(j, "ig"));
      }
      if (d) {
        R = "^(?:" + d[0];
        for (let ne = 1; ne < d.length; ne++)
          R += "|" + d[ne];
        R += ")$", R = new M(R, "i");
      }
      const Z = h.Boolean, W = { v: !1 }, H = function(ne) {
        const J = ne.cloneNode(!1);
        if (J.nodeType === 3 || s.isBreak(J))
          return J;
        if (b)
          return null;
        const ce = !R && _ || R && R.test(J.nodeName);
        if (ce && !p)
          return W.v = !0, null;
        const fe = J.style.cssText;
        let we = "";
        Y && fe.length > 0 && (we = fe.replace(Y, "").trim(), we !== fe && (W.v = !0));
        const ve = J.className;
        let _e = "";
        return j && ve.length > 0 && (_e = ve.replace(j, "").trim(), _e !== ve && (W.v = !0)), _ && (j || !ve) && (Y || !fe) && !we && !_e && ce ? (W.v = !0, null) : we || _e || J.nodeName !== N || Z(Y) !== Z(fe) || Z(j) !== Z(ve) ? (Y && fe.length > 0 && (J.style.cssText = we), J.style.cssText || J.removeAttribute("style"), j && ve.length > 0 && (J.className = _e.trim()), J.className.trim() || J.removeAttribute("class"), !J.style.cssText && !J.className && (J.nodeName === N || ce) ? (W.v = !0, null) : J) : (W.v = !0, null);
      }, q = this.getSelectedElements(null);
      v = this.getRange(), S = v.startContainer, k = v.startOffset, w = v.endContainer, z = v.endOffset, s.getFormatElement(S, null) || (S = s.getChildElement(q[0], function(ne) {
        return ne.nodeType === 3;
      }, !1), k = 0), s.getFormatElement(w, null) || (w = s.getChildElement(q[q.length - 1], function(ne) {
        return ne.nodeType === 3;
      }, !1), z = w.textContent.length);
      const P = s.getFormatElement(S, null) === s.getFormatElement(w, null), V = q.length - (P ? 0 : 1);
      $ = a.cloneNode(!1);
      const X = b || _ && function(ne) {
        for (let J = 0, ce = ne.length; J < ce; J++)
          if (s._isMaintainedNode(ne[J]) || s._isSizeNode(ne[J]))
            return !0;
        return !1;
      }(d), le = _ || s._isSizeNode($), te = this._util_getMaintainedNode.bind(s, X, le), se = this._util_isMaintainedNode.bind(s, X, le);
      if (P) {
        this._resetCommonListCell(q[0], o) && (v = this.setRange(S, k, w, z));
        const ne = this._nodeChange_oneLine(q[0], $, H, S, k, w, z, b, _, v.collapsed, W, te, se);
        O.container = ne.startContainer, O.offset = ne.startOffset, I.container = ne.endContainer, I.offset = ne.endOffset, O.container === I.container && s.onlyZeroWidthSpace(O.container) && (O.offset = I.offset = 1), this._setCommonListStyle(ne.ancestor, null);
      } else {
        let ne = !1;
        V > 0 && this._resetCommonListCell(q[V], o) && (ne = !0), this._resetCommonListCell(q[0], o) && (ne = !0), ne && this.setRange(S, k, w, z), V > 0 && ($ = a.cloneNode(!1), I = this._nodeChange_endLine(q[V], $, H, w, z, b, _, W, te, se));
        for (let J = V - 1, ce; J > 0; J--)
          this._resetCommonListCell(q[J], o), $ = a.cloneNode(!1), ce = this._nodeChange_middleLine(q[J], $, H, b, _, W, I.container), ce.endContainer && ce.ancestor.contains(ce.endContainer) && (I.ancestor = null, I.container = ce.endContainer), this._setCommonListStyle(ce.ancestor, null);
        $ = a.cloneNode(!1), O = this._nodeChange_startLine(q[0], $, H, S, k, b, _, W, te, se, I.container), O.endContainer && (I.ancestor = null, I.container = O.endContainer), V <= 0 ? I = O : I.container || (I.ancestor = null, I.container = O.container, I.offset = O.container.textContent.length), this._setCommonListStyle(O.ancestor, null), this._setCommonListStyle(I.ancestor || s.getFormatElement(I.container), null);
      }
      this.controllersOff(), this.setRange(O.container, O.offset, I.container, I.offset), this.history.push(!1);
    },
    /**
     * @description Reset common style of list cell
     * @param {Element} el List cell element. <li>
     * @param {Array|null} styleArray Style array
     * @private
     */
    _resetCommonListCell: function(a, o) {
      if (!s.isListCell(a))
        return;
      o || (o = this._listKebab);
      const d = s.getArrayItem(a.childNodes, function(M) {
        return !s.isBreak(M);
      }, !0), p = a.style, v = [], _ = [], b = s.getValues(p);
      for (let M = 0, N = this._listKebab.length; M < N; M++)
        b.indexOf(this._listKebab[M]) > -1 && o.indexOf(this._listKebab[M]) > -1 && (v.push(this._listCamel[M]), _.push(this._listKebab[M]));
      if (!v.length)
        return;
      const S = s.createElement("SPAN");
      for (let M = 0, N = v.length; M < N; M++)
        S.style[v[M]] = p[_[M]], p.removeProperty(_[M]);
      let k = S.cloneNode(!1), w = null, z = !1;
      for (let M = 0, N = d.length, O, I; M < N; M++)
        O = d[M], !l._textTagsMap[O.nodeName.toLowerCase()] && (I = s.getValues(O.style), I.length === 0 || v.some(function($) {
          return I.indexOf($) === -1;
        }) && I.some(function($) {
        }) ? (w = O.nextSibling, k.appendChild(O)) : k.childNodes.length > 0 && (a.insertBefore(k, w), k = S.cloneNode(!1), w = null, z = !0));
      return k.childNodes.length > 0 && (a.insertBefore(k, w), z = !0), p.length || a.removeAttribute("style"), z;
    },
    /**
     * @description If certain styles are applied to all child nodes of the list cell, the style of the list cell is also changed. (bold, color, size)
     * @param {Element} el List cell element. <li>
     * @param {Element|null} child Variable for recursive call. ("null" on the first call)
     * @private
     */
    _setCommonListStyle: function(a, o) {
      if (!s.isListCell(a))
        return;
      const d = s.getArrayItem((o || a).childNodes, function(k) {
        return !s.isBreak(k);
      }, !0);
      if (o = d[0], !o || d.length > 1 || o.nodeType !== 1)
        return;
      const p = o.style, v = a.style, _ = o.nodeName.toLowerCase();
      let b = !1;
      l._textTagsMap[_] === l._defaultCommand.bold.toLowerCase() && (v.fontWeight = "bold"), l._textTagsMap[_] === l._defaultCommand.italic.toLowerCase() && (v.fontStyle = "italic");
      const S = s.getValues(p);
      if (S.length > 0)
        for (let k = 0, w = this._listCamel.length; k < w; k++)
          S.indexOf(this._listKebab[k]) > -1 && (v[this._listCamel[k]] = p[this._listCamel[k]], p.removeProperty(this._listKebab[k]), b = !0);
      if (this._setCommonListStyle(a, o), !!b && !p.length) {
        const k = o.childNodes, w = o.parentNode, z = o.nextSibling;
        for (; k.length > 0; )
          w.insertBefore(k[0], z);
        s.removeItem(o);
      }
    },
    /**
     * @description Strip remove node
     * @param {Node} removeNode The remove node
     * @private
     */
    _stripRemoveNode: function(a) {
      const o = a.parentNode;
      if (!a || a.nodeType === 3 || !o)
        return;
      const d = a.childNodes;
      for (; d[0]; )
        o.insertBefore(d[0], a);
      o.removeChild(a);
    },
    /**
     * @description Return the parent maintained tag. (bind and use a util object)
     * @param {Element} element Element
     * @returns {Element}
     * @private
     */
    _util_getMaintainedNode: function(a, o, d) {
      return !d || a ? null : this.getParentElement(d, this._isMaintainedNode.bind(this)) || (o ? null : this.getParentElement(d, this._isSizeNode.bind(this)));
    },
    /**
     * @description Check if element is a tag that should be persisted. (bind and use a util object)
     * @param {Element} element Element
     * @returns {Element}
     * @private
     */
    _util_isMaintainedNode: function(a, o, d) {
      if (!d || a || d.nodeType !== 1)
        return !1;
      const p = this._isMaintainedNode(d);
      return this.getParentElement(d, this._isMaintainedNode.bind(this)) ? p : p || (o ? !1 : this._isSizeNode(d));
    },
    /**
     * @description wraps text nodes of line selected text.
     * @param {Element} element The node of the line that contains the selected text node.
     * @param {Element} newInnerNode The dom that will wrap the selected text area
     * @param {Function} validation Check if the node should be stripped.
     * @param {Node} startCon The startContainer property of the selection object.
     * @param {Number} startOff The startOffset property of the selection object.
     * @param {Node} endCon The endContainer property of the selection object.
     * @param {Number} endOff The endOffset property of the selection object.
     * @param {Boolean} isRemoveFormat Is the remove all formats command?
     * @param {Boolean} isRemoveNode "newInnerNode" is remove node?
     * @param {Boolean} collapsed range.collapsed
     * @returns {{ancestor: *, startContainer: *, startOffset: *, endContainer: *, endOffset: *}}
     * @private
     */
    _nodeChange_oneLine: function(a, o, d, p, v, _, b, S, k, w, z, M, N) {
      let O = p.parentNode;
      for (; !O.nextSibling && !O.previousSibling && !s.isFormatElement(O.parentNode) && !s.isWysiwygDiv(O.parentNode) && O.nodeName !== o.nodeName; )
        O = O.parentNode;
      if (!k && O === _.parentNode && O.nodeName === o.nodeName && s.onlyZeroWidthSpace(p.textContent.slice(0, v)) && s.onlyZeroWidthSpace(_.textContent.slice(b))) {
        const xe = O.childNodes;
        let Ae = !0;
        for (let Be = 0, wt = xe.length, Ye, dt, Ge, Te; Be < wt; Be++) {
          if (Ye = xe[Be], Te = !s.onlyZeroWidthSpace(Ye), Ye === p) {
            dt = !0;
            continue;
          }
          if (Ye === _) {
            Ge = !0;
            continue;
          }
          if (!dt && Te || dt && Ge && Te) {
            Ae = !1;
            break;
          }
        }
        if (Ae)
          return s.copyTagAttributes(O, o), {
            ancestor: a,
            startContainer: p,
            startOffset: v,
            endContainer: _,
            endOffset: b
          };
      }
      z.v = !1;
      const I = a, $ = [o], Y = a.cloneNode(!1), j = p === _;
      let R = p, Z = v, W = _, H = b, q = !1, P = !1, V, X, le, te, se;
      const ne = h.RegExp;
      function J(xe) {
        const Ae = new ne("(?:;|^|\\s)(?:" + te + "null)\\s*:[^;]*\\s*(?:;|$)", "ig");
        let Be = "";
        return Ae && xe.style.cssText.length > 0 && (Be = Ae.test(xe.style.cssText)), !Be;
      }
      if (function xe(Ae, Be) {
        const wt = Ae.childNodes;
        for (let Ye = 0, dt = wt.length, Ge; Ye < dt; Ye++) {
          let Te = wt[Ye];
          if (!Te)
            continue;
          let ei = Be, nt;
          if (!q && Te === R) {
            let et = Y;
            se = M(Te);
            const Oe = s.createTextNode(R.nodeType === 1 ? "" : R.substringData(0, Z)), je = s.createTextNode(
              R.nodeType === 1 ? "" : R.substringData(
                Z,
                j && H >= Z ? H - Z : R.data.length - Z
              )
            );
            if (se) {
              const qt = M(Be);
              if (qt && qt.parentNode !== et) {
                let mt = qt, ti = null;
                for (; mt.parentNode !== et; ) {
                  for (Be = ti = mt.parentNode.cloneNode(!1); mt.childNodes[0]; )
                    ti.appendChild(mt.childNodes[0]);
                  mt.appendChild(ti), mt = mt.parentNode;
                }
                mt.parentNode.appendChild(qt);
              }
              se = se.cloneNode(!1);
            }
            s.onlyZeroWidthSpace(Oe) || Be.appendChild(Oe);
            const We = M(Be);
            for (We && (se = We), se && (et = se), X = Te, V = [], te = ""; X !== et && X !== I && X !== null; )
              Ge = N(X) ? null : d(X), Ge && X.nodeType === 1 && J(X) && (V.push(Ge), te += X.style.cssText.substr(0, X.style.cssText.indexOf(":")) + "|"), X = X.parentNode;
            const Ut = V.pop() || je;
            for (le = X = Ut; V.length > 0; )
              X = V.pop(), le.appendChild(X), le = X;
            if (o.appendChild(Ut), et.appendChild(o), se && !M(W) && (o = o.cloneNode(!1), Y.appendChild(o), $.push(o)), R = je, Z = 0, q = !0, X !== je && X.appendChild(R), !j)
              continue;
          }
          if (!P && Te === W) {
            se = M(Te);
            const et = s.createTextNode(W.nodeType === 1 ? "" : W.substringData(H, W.length - H)), Oe = s.createTextNode(j || W.nodeType === 1 ? "" : W.substringData(0, H));
            if (se ? se = se.cloneNode(!1) : N(o.parentNode) && !se && (o = o.cloneNode(!1), Y.appendChild(o), $.push(o)), !s.onlyZeroWidthSpace(et)) {
              X = Te, te = "", V = [];
              const We = [];
              for (; X !== Y && X !== I && X !== null; )
                X.nodeType === 1 && J(X) && (N(X) ? We.push(X.cloneNode(!1)) : V.push(X.cloneNode(!1)), te += X.style.cssText.substr(0, X.style.cssText.indexOf(":")) + "|"), X = X.parentNode;
              for (V = V.concat(We), nt = le = X = V.pop() || et; V.length > 0; )
                X = V.pop(), le.appendChild(X), le = X;
              Y.appendChild(nt), X.textContent = et.data;
            }
            if (se && nt) {
              const We = M(nt);
              We && (se = We);
            }
            for (X = Te, V = [], te = ""; X !== Y && X !== I && X !== null; )
              Ge = N(X) ? null : d(X), Ge && X.nodeType === 1 && J(X) && (V.push(Ge), te += X.style.cssText.substr(0, X.style.cssText.indexOf(":")) + "|"), X = X.parentNode;
            const je = V.pop() || Oe;
            for (le = X = je; V.length > 0; )
              X = V.pop(), le.appendChild(X), le = X;
            se ? (o = o.cloneNode(!1), o.appendChild(je), se.insertBefore(o, se.firstChild), Y.appendChild(se), $.push(o), se = null) : o.appendChild(je), W = Oe, H = Oe.data.length, P = !0, !S && w && (o = Oe, Oe.textContent = s.zeroWidthSpace), X !== Oe && X.appendChild(W);
            continue;
          }
          if (q) {
            if (Te.nodeType === 1 && !s.isBreak(Te)) {
              s._isIgnoreNodeChange(Te) ? (Y.appendChild(Te.cloneNode(!0)), w || (o = o.cloneNode(!1), Y.appendChild(o), $.push(o))) : xe(Te, Te);
              continue;
            }
            X = Te, V = [], te = "";
            const et = [];
            for (; X.parentNode !== null && X !== I && X !== o; )
              Ge = P ? X.cloneNode(!1) : d(X), X.nodeType === 1 && !s.isBreak(Te) && Ge && J(X) && (N(X) ? se || et.push(Ge) : V.push(Ge), te += X.style.cssText.substr(0, X.style.cssText.indexOf(":")) + "|"), X = X.parentNode;
            V = V.concat(et);
            const Oe = V.pop() || Te;
            for (le = X = Oe; V.length > 0; )
              X = V.pop(), le.appendChild(X), le = X;
            if (N(o.parentNode) && !N(Oe) && !s.onlyZeroWidthSpace(o) && (o = o.cloneNode(!1), Y.appendChild(o), $.push(o)), !P && !se && N(Oe)) {
              o = o.cloneNode(!1);
              const je = Oe.childNodes;
              for (let We = 0, Ut = je.length; We < Ut; We++)
                o.appendChild(je[We]);
              Oe.appendChild(o), Y.appendChild(Oe), $.push(o), o.children.length > 0 ? Be = X : Be = o;
            } else
              Oe === Te ? P ? Be = Y : Be = o : P ? (Y.appendChild(Oe), Be = X) : (o.appendChild(Oe), Be = X);
            if (se && Te.nodeType === 3)
              if (M(Te)) {
                const je = s.getParentElement(Be, (function(We) {
                  return this._isMaintainedNode(We.parentNode) || We.parentNode === Y;
                }).bind(s));
                se.appendChild(je), o = je.cloneNode(!1), $.push(o), Y.appendChild(o);
              } else
                se = null;
          }
          nt = Te.cloneNode(!1), Be.appendChild(nt), Te.nodeType === 1 && !s.isBreak(Te) && (ei = nt), xe(Te, ei);
        }
      }(a, Y), k && !S && !z.v)
        return {
          ancestor: a,
          startContainer: p,
          startOffset: v,
          endContainer: _,
          endOffset: b
        };
      if (S = S && k, S)
        for (let xe = 0; xe < $.length; xe++) {
          let Ae = $[xe], Be, wt, Ye;
          if (w)
            Be = s.createTextNode(s.zeroWidthSpace), Y.replaceChild(Be, Ae);
          else {
            const dt = Ae.childNodes;
            for (wt = dt[0]; dt[0]; )
              Ye = dt[0], Y.insertBefore(Ye, Ae);
            s.removeItem(Ae);
          }
          xe === 0 && (w ? R = W = Be : (R = wt, W = Ye));
        }
      else {
        if (k)
          for (let xe = 0; xe < $.length; xe++)
            this._stripRemoveNode($[xe]);
        w && (R = W = o);
      }
      s.removeEmptyNode(Y, o, !1), w && (Z = R.textContent.length, H = W.textContent.length);
      const ce = S || W.textContent.length === 0;
      !s.isBreak(W) && W.textContent.length === 0 && (s.removeItem(W), W = R), H = ce ? W.textContent.length : H;
      const fe = { s: 0, e: 0 }, we = s.getNodePath(R, Y, fe), ve = !W.parentNode;
      ve && (W = R);
      const _e = { s: 0, e: 0 }, Me = s.getNodePath(W, Y, !ve && !ce ? _e : null);
      Z += fe.s, H = w ? Z : ve ? R.textContent.length : ce ? H + fe.s : H + _e.s;
      const $e = s.mergeSameTags(Y, [we, Me], !0);
      return a.parentNode.replaceChild(Y, a), R = s.getNodeFromPath(we, Y), W = s.getNodeFromPath(Me, Y), {
        ancestor: Y,
        startContainer: R,
        startOffset: Z + $e[0],
        endContainer: W,
        endOffset: H + $e[1]
      };
    },
    /**
     * @description wraps first line selected text.
     * @param {Element} element The node of the line that contains the selected text node.
     * @param {Element} newInnerNode The dom that will wrap the selected text area
     * @param {Function} validation Check if the node should be stripped.
     * @param {Node} startCon The startContainer property of the selection object.
     * @param {Number} startOff The startOffset property of the selection object.
     * @param {Boolean} isRemoveFormat Is the remove all formats command?
     * @param {Boolean} isRemoveNode "newInnerNode" is remove node?
     * @returns {null|Node} If end container is renewed, returned renewed node
     * @returns {Object} { ancestor, container, offset, endContainer }
     * @private
     */
    _nodeChange_startLine: function(a, o, d, p, v, _, b, S, k, w, z) {
      let M = p.parentNode;
      for (; !M.nextSibling && !M.previousSibling && !s.isFormatElement(M.parentNode) && !s.isWysiwygDiv(M.parentNode) && M.nodeName !== o.nodeName; )
        M = M.parentNode;
      if (!b && M.nodeName === o.nodeName && !s.isFormatElement(M) && !M.nextSibling && s.onlyZeroWidthSpace(p.textContent.slice(0, v))) {
        let q = !0, P = p.previousSibling;
        for (; P; ) {
          if (!s.onlyZeroWidthSpace(P)) {
            q = !1;
            break;
          }
          P = P.previousSibling;
        }
        if (q)
          return s.copyTagAttributes(M, o), {
            ancestor: a,
            container: p,
            offset: v
          };
      }
      S.v = !1;
      const N = a, O = [o], I = a.cloneNode(!1);
      let $ = p, Y = v, j = !1, R, Z, W, H;
      if (function q(P, V) {
        const X = P.childNodes;
        for (let le = 0, te = X.length, se, ne; le < te; le++) {
          const J = X[le];
          if (!J)
            continue;
          let ce = V;
          if (j && !s.isBreak(J)) {
            if (J.nodeType === 1) {
              if (s._isIgnoreNodeChange(J)) {
                if (o = o.cloneNode(!1), ne = J.cloneNode(!0), I.appendChild(ne), I.appendChild(o), O.push(o), z && J.contains(z)) {
                  const _e = s.getNodePath(z, J);
                  z = s.getNodeFromPath(_e, ne);
                }
              } else
                q(J, J);
              continue;
            }
            Z = J, R = [];
            const fe = [];
            for (; Z.parentNode !== null && Z !== N && Z !== o; )
              se = d(Z), Z.nodeType === 1 && se && (w(Z) ? H || fe.push(se) : R.push(se)), Z = Z.parentNode;
            R = R.concat(fe);
            const we = R.length > 0, ve = R.pop() || J;
            for (W = Z = ve; R.length > 0; )
              Z = R.pop(), W.appendChild(Z), W = Z;
            if (w(o.parentNode) && !w(ve) && (o = o.cloneNode(!1), I.appendChild(o), O.push(o)), !H && w(ve)) {
              o = o.cloneNode(!1);
              const _e = ve.childNodes;
              for (let Me = 0, $e = _e.length; Me < $e; Me++)
                o.appendChild(_e[Me]);
              ve.appendChild(o), I.appendChild(ve), V = w(Z) ? o : Z, O.push(o);
            } else
              we ? (o.appendChild(ve), V = Z) : V = o;
            if (H && J.nodeType === 3)
              if (k(J)) {
                const _e = s.getParentElement(V, (function(Me) {
                  return this._isMaintainedNode(Me.parentNode) || Me.parentNode === I;
                }).bind(s));
                H.appendChild(_e), o = _e.cloneNode(!1), O.push(o), I.appendChild(o);
              } else
                H = null;
          }
          if (!j && J === $) {
            let fe = I;
            H = k(J);
            const we = s.createTextNode($.nodeType === 1 ? "" : $.substringData(0, Y)), ve = s.createTextNode($.nodeType === 1 ? "" : $.substringData(Y, $.length - Y));
            if (H) {
              const $e = k(V);
              if ($e && $e.parentNode !== fe) {
                let xe = $e, Ae = null;
                for (; xe.parentNode !== fe; ) {
                  for (V = Ae = xe.parentNode.cloneNode(!1); xe.childNodes[0]; )
                    Ae.appendChild(xe.childNodes[0]);
                  xe.appendChild(Ae), xe = xe.parentNode;
                }
                xe.parentNode.appendChild($e);
              }
              H = H.cloneNode(!1);
            }
            s.onlyZeroWidthSpace(we) || V.appendChild(we);
            const _e = k(V);
            for (_e && (H = _e), H && (fe = H), Z = V, R = []; Z !== fe && Z !== null; )
              se = d(Z), Z.nodeType === 1 && se && R.push(se), Z = Z.parentNode;
            const Me = R.pop() || V;
            for (W = Z = Me; R.length > 0; )
              Z = R.pop(), W.appendChild(Z), W = Z;
            Me !== V ? (o.appendChild(Me), V = Z) : V = o, s.isBreak(J) && o.appendChild(J.cloneNode(!1)), fe.appendChild(o), $ = ve, Y = 0, j = !0, V.appendChild($);
            continue;
          }
          se = j ? d(J) : J.cloneNode(!1), se && (V.appendChild(se), J.nodeType === 1 && !s.isBreak(J) && (ce = se)), q(J, ce);
        }
      }(a, I), b && !_ && !S.v)
        return {
          ancestor: a,
          container: p,
          offset: v,
          endContainer: z
        };
      if (_ = _ && b, _)
        for (let q = 0; q < O.length; q++) {
          let P = O[q];
          const V = P.childNodes, X = V[0];
          for (; V[0]; )
            I.insertBefore(V[0], P);
          s.removeItem(P), q === 0 && ($ = X);
        }
      else if (b) {
        o = o.firstChild;
        for (let q = 0; q < O.length; q++)
          this._stripRemoveNode(O[q]);
      }
      if (!_ && I.childNodes.length === 0)
        a.childNodes ? $ = a.childNodes[0] : ($ = s.createTextNode(s.zeroWidthSpace), a.appendChild($));
      else {
        s.removeEmptyNode(I, o, !1), s.onlyZeroWidthSpace(I.textContent) && ($ = I.firstChild, Y = 0);
        const q = { s: 0, e: 0 }, P = s.getNodePath($, I, q);
        Y += q.s;
        const V = s.mergeSameTags(I, [P], !0);
        a.parentNode.replaceChild(I, a), $ = s.getNodeFromPath(P, I), Y += V[0];
      }
      return {
        ancestor: I,
        container: $,
        offset: Y,
        endContainer: z
      };
    },
    /**
     * @description wraps mid lines selected text.
     * @param {Element} element The node of the line that contains the selected text node.
     * @param {Element} newInnerNode The dom that will wrap the selected text area
     * @param {Function} validation Check if the node should be stripped.
     * @param {Boolean} isRemoveFormat Is the remove all formats command?
     * @param {Boolean} isRemoveNode "newInnerNode" is remove node?
     * @param {Node} _endContainer Offset node of last line already modified (end.container)
     * @returns {Object} { ancestor, endContainer: "If end container is renewed, returned renewed node" }
     * @private
     */
    _nodeChange_middleLine: function(a, o, d, p, v, _, b) {
      if (!v) {
        let z = null;
        b && a.contains(b) && (z = s.getNodePath(b, a));
        const M = a.cloneNode(!0), N = o.nodeName, O = o.style.cssText, I = o.className;
        let $ = M.childNodes, Y = 0, j = $.length;
        for (let R; Y < j && (R = $[Y], R.nodeType !== 3); Y++)
          if (R.nodeName === N)
            R.style.cssText += O, s.addClass(R, I);
          else {
            if (!s.isBreak(R) && s._isIgnoreNodeChange(R))
              continue;
            if (j === 1) {
              $ = R.childNodes, j = $.length, Y = -1;
              continue;
            } else
              break;
          }
        if (j > 0 && Y === j)
          return a.innerHTML = M.innerHTML, {
            ancestor: a,
            endContainer: z ? s.getNodeFromPath(z, a) : null
          };
      }
      _.v = !1;
      const S = a.cloneNode(!1), k = [o];
      let w = !0;
      if (function z(M, N) {
        const O = M.childNodes;
        for (let I = 0, $ = O.length, Y, j; I < $; I++) {
          let R = O[I];
          if (!R)
            continue;
          let Z = N;
          if (!s.isBreak(R) && s._isIgnoreNodeChange(R)) {
            if (o.childNodes.length > 0 && (S.appendChild(o), o = o.cloneNode(!1)), j = R.cloneNode(!0), S.appendChild(j), S.appendChild(o), k.push(o), N = o, b && R.contains(b)) {
              const W = s.getNodePath(b, R);
              b = s.getNodeFromPath(W, j);
            }
            continue;
          } else
            Y = d(R), Y && (w = !1, N.appendChild(Y), R.nodeType === 1 && (Z = Y));
          s.isBreak(R) || z(R, Z);
        }
      }(a, o), w || v && !p && !_.v)
        return { ancestor: a, endContainer: b };
      if (S.appendChild(o), p && v)
        for (let z = 0; z < k.length; z++) {
          let M = k[z];
          const N = M.childNodes;
          for (; N[0]; )
            S.insertBefore(N[0], M);
          s.removeItem(M);
        }
      else if (v) {
        o = o.firstChild;
        for (let z = 0; z < k.length; z++)
          this._stripRemoveNode(k[z]);
      }
      return s.removeEmptyNode(S, o, !1), s.mergeSameTags(S, null, !0), a.parentNode.replaceChild(S, a), { ancestor: S, endContainer: b };
    },
    /**
     * @description wraps last line selected text.
     * @param {Element} element The node of the line that contains the selected text node.
     * @param {Element} newInnerNode The dom that will wrap the selected text area
     * @param {Function} validation Check if the node should be stripped.
     * @param {Node} endCon The endContainer property of the selection object.
     * @param {Number} endOff The endOffset property of the selection object.
     * @param {Boolean} isRemoveFormat Is the remove all formats command?
     * @param {Boolean} isRemoveNode "newInnerNode" is remove node?
     * @returns {Object} { ancestor, container, offset }
     * @private
     */
    _nodeChange_endLine: function(a, o, d, p, v, _, b, S, k, w) {
      let z = p.parentNode;
      for (; !z.nextSibling && !z.previousSibling && !s.isFormatElement(z.parentNode) && !s.isWysiwygDiv(z.parentNode) && z.nodeName !== o.nodeName; )
        z = z.parentNode;
      if (!b && z.nodeName === o.nodeName && !s.isFormatElement(z) && !z.previousSibling && s.onlyZeroWidthSpace(p.textContent.slice(v))) {
        let H = !0, q = p.nextSibling;
        for (; q; ) {
          if (!s.onlyZeroWidthSpace(q)) {
            H = !1;
            break;
          }
          q = q.nextSibling;
        }
        if (H)
          return s.copyTagAttributes(z, o), {
            ancestor: a,
            container: p,
            offset: v
          };
      }
      S.v = !1;
      const M = a, N = [o], O = a.cloneNode(!1);
      let I = p, $ = v, Y = !1, j, R, Z, W;
      if (function H(q, P) {
        const V = q.childNodes;
        for (let X = V.length - 1, le; 0 <= X; X--) {
          const te = V[X];
          if (!te)
            continue;
          let se = P;
          if (Y && !s.isBreak(te)) {
            if (te.nodeType === 1) {
              if (s._isIgnoreNodeChange(te)) {
                o = o.cloneNode(!1);
                const fe = te.cloneNode(!0);
                O.insertBefore(fe, P), O.insertBefore(o, fe), N.push(o);
              } else
                H(te, te);
              continue;
            }
            R = te, j = [];
            const ne = [];
            for (; R.parentNode !== null && R !== M && R !== o; )
              le = d(R), le && R.nodeType === 1 && (w(R) ? W || ne.push(le) : j.push(le)), R = R.parentNode;
            j = j.concat(ne);
            const J = j.length > 0, ce = j.pop() || te;
            for (Z = R = ce; j.length > 0; )
              R = j.pop(), Z.appendChild(R), Z = R;
            if (w(o.parentNode) && !w(ce) && (o = o.cloneNode(!1), O.insertBefore(o, O.firstChild), N.push(o)), !W && w(ce)) {
              o = o.cloneNode(!1);
              const fe = ce.childNodes;
              for (let we = 0, ve = fe.length; we < ve; we++)
                o.appendChild(fe[we]);
              ce.appendChild(o), O.insertBefore(ce, O.firstChild), N.push(o), o.children.length > 0 ? P = R : P = o;
            } else
              J ? (o.insertBefore(ce, o.firstChild), P = R) : P = o;
            if (W && te.nodeType === 3)
              if (k(te)) {
                const fe = s.getParentElement(P, (function(we) {
                  return this._isMaintainedNode(we.parentNode) || we.parentNode === O;
                }).bind(s));
                W.appendChild(fe), o = fe.cloneNode(!1), N.push(o), O.insertBefore(o, O.firstChild);
              } else
                W = null;
          }
          if (!Y && te === I) {
            W = k(te);
            const ne = s.createTextNode(I.nodeType === 1 ? "" : I.substringData($, I.length - $)), J = s.createTextNode(I.nodeType === 1 ? "" : I.substringData(0, $));
            if (W) {
              W = W.cloneNode(!1);
              const fe = k(P);
              if (fe && fe.parentNode !== O) {
                let we = fe, ve = null;
                for (; we.parentNode !== O; ) {
                  for (P = ve = we.parentNode.cloneNode(!1); we.childNodes[0]; )
                    ve.appendChild(we.childNodes[0]);
                  we.appendChild(ve), we = we.parentNode;
                }
                we.parentNode.insertBefore(fe, we.parentNode.firstChild);
              }
              W = W.cloneNode(!1);
            } else
              w(o.parentNode) && !W && (o = o.cloneNode(!1), O.appendChild(o), N.push(o));
            for (s.onlyZeroWidthSpace(ne) || P.insertBefore(ne, P.firstChild), R = P, j = []; R !== O && R !== null; )
              le = w(R) ? null : d(R), le && R.nodeType === 1 && j.push(le), R = R.parentNode;
            const ce = j.pop() || P;
            for (Z = R = ce; j.length > 0; )
              R = j.pop(), Z.appendChild(R), Z = R;
            ce !== P ? (o.insertBefore(ce, o.firstChild), P = R) : P = o, s.isBreak(te) && o.appendChild(te.cloneNode(!1)), W ? (W.insertBefore(o, W.firstChild), O.insertBefore(W, O.firstChild), W = null) : O.insertBefore(o, O.firstChild), I = J, $ = J.data.length, Y = !0, P.insertBefore(I, P.firstChild);
            continue;
          }
          le = Y ? d(te) : te.cloneNode(!1), le && (P.insertBefore(le, P.firstChild), te.nodeType === 1 && !s.isBreak(te) && (se = le)), H(te, se);
        }
      }(a, O), b && !_ && !S.v)
        return {
          ancestor: a,
          container: p,
          offset: v
        };
      if (_ = _ && b, _)
        for (let H = 0; H < N.length; H++) {
          let q = N[H];
          const P = q.childNodes;
          let V = null;
          for (; P[0]; )
            V = P[0], O.insertBefore(V, q);
          s.removeItem(q), H === N.length - 1 && (I = V, $ = V.textContent.length);
        }
      else if (b) {
        o = o.firstChild;
        for (let H = 0; H < N.length; H++)
          this._stripRemoveNode(N[H]);
      }
      if (!_ && O.childNodes.length === 0)
        a.childNodes ? I = a.childNodes[0] : (I = s.createTextNode(s.zeroWidthSpace), a.appendChild(I));
      else {
        if (!b && o.textContent.length === 0)
          return s.removeEmptyNode(O, null, !1), {
            ancestor: null,
            container: null,
            offset: 0
          };
        s.removeEmptyNode(O, o, !1), s.onlyZeroWidthSpace(O.textContent) ? (I = O.firstChild, $ = I.textContent.length) : s.onlyZeroWidthSpace(I) && (I = o, $ = 1);
        const H = { s: 0, e: 0 }, q = s.getNodePath(I, O, H);
        $ += H.s;
        const P = s.mergeSameTags(O, [q], !0);
        a.parentNode.replaceChild(O, a), I = s.getNodeFromPath(q, O), $ += P[0];
      }
      return {
        ancestor: O,
        container: I,
        offset: I.nodeType === 1 && $ === 1 ? I.childNodes.length : $
      };
    },
    /**
     * @description Run plugin calls and basic commands.
     * @param {String} command Command string
     * @param {String} display Display type string ('command', 'submenu', 'dialog', 'container')
     * @param {Element} target The element of command button
     */
    actionCall: function(a, o, d) {
      if (o) {
        if (/more/i.test(o)) {
          if (d !== this._moreLayerActiveButton) {
            const p = t.element.toolbar.querySelector("." + a);
            p && (this._moreLayerActiveButton && this.moreLayerOff(), this._moreLayerActiveButton = d, p.style.display = "block", g._showToolbarBalloon(), g._showToolbarInline()), s.addClass(d, "on");
          } else
            t.element.toolbar.querySelector("." + this._moreLayerActiveButton.getAttribute("data-command")) && (this.moreLayerOff(), g._showToolbarBalloon(), g._showToolbarInline());
          return;
        }
        if (/container/.test(o) && (this._menuTray[a] === null || d !== this.containerActiveButton)) {
          this.callPlugin(a, this.containerOn.bind(this, d), d);
          return;
        }
        if (this.isReadOnly && s.arrayIncludes(this.resizingDisabledButtons, d))
          return;
        if (/submenu/.test(o) && (this._menuTray[a] === null || d !== this.submenuActiveButton)) {
          this.callPlugin(a, this.submenuOn.bind(this, d), d);
          return;
        } else if (/dialog/.test(o)) {
          this.callPlugin(a, this.plugins[a].open.bind(this), d);
          return;
        } else
          /command/.test(o) ? this.callPlugin(a, this.plugins[a].action.bind(this), d) : /fileBrowser/.test(o) && this.callPlugin(a, this.plugins[a].open.bind(this, null), d);
      } else
        a && this.commandHandler(d, a);
      /submenu/.test(o) ? this.submenuOff() : /command/.test(o) || (this.submenuOff(), this.containerOff());
    },
    /**
     * @description Execute command of command button(All Buttons except submenu and dialog)
     * (selectAll, codeView, fullScreen, indent, outdent, undo, redo, removeFormat, print, preview, showBlocks, save, bold, underline, italic, strike, subscript, superscript, copy, cut, paste)
     * @param {Element|null} target The element of command button
     * @param {String} command Property of command button (data-value)
     */
    commandHandler: function(a, o) {
      if (!(c.isReadOnly && !/copy|cut|selectAll|codeView|fullScreen|print|preview|showBlocks/.test(o)))
        switch (o) {
          case "copy":
          case "cut":
            this.execCommand(o);
            break;
          case "paste":
            break;
          case "selectAll":
            this.containerOff();
            const d = t.element.wysiwyg;
            let p = s.getChildElement(d.firstChild, function(k) {
              return k.childNodes.length === 0 || k.nodeType === 3;
            }, !1) || d.firstChild, v = s.getChildElement(d.lastChild, function(k) {
              return k.childNodes.length === 0 || k.nodeType === 3;
            }, !0) || d.lastChild;
            if (!p || !v)
              return;
            if (s.isMedia(p)) {
              const k = this.getFileComponent(p), w = s.createElement("BR"), z = s.createElement(l.defaultTag);
              z.appendChild(w), p = k ? k.component : p, p.parentNode.insertBefore(z, p), p = w;
            }
            if (s.isMedia(v)) {
              const k = s.createElement("BR"), w = s.createElement(l.defaultTag);
              w.appendChild(k), d.appendChild(w), v = k;
            }
            g._showToolbarBalloon(this.setRange(p, 0, v, v.textContent.length));
            break;
          case "codeView":
            this.toggleCodeView();
            break;
          case "fullScreen":
            this.toggleFullScreen(a);
            break;
          case "indent":
          case "outdent":
            this.indent(o);
            break;
          case "undo":
            this.history.undo();
            break;
          case "redo":
            this.history.redo();
            break;
          case "removeFormat":
            this.removeFormat(), this.focus();
            break;
          case "print":
            this.print();
            break;
          case "preview":
            this.preview();
            break;
          case "showBlocks":
            this.toggleDisplayBlocks();
            break;
          case "dir":
            this.setDir(l.rtl ? "ltr" : "rtl");
            break;
          case "dir_ltr":
            this.setDir("ltr");
            break;
          case "dir_rtl":
            this.setDir("rtl");
            break;
          case "save":
            if (typeof l.callBackSave == "function")
              l.callBackSave(this.getContents(!1), this._variable.isChanged);
            else if (this._variable.isChanged && typeof x.save == "function")
              x.save();
            else
              throw Error("[SUNEDITOR.core.commandHandler.fail] Please register call back function in creation option. (callBackSave : Function)");
            this._variable.isChanged = !1, t.tool.save && t.tool.save.setAttribute("disabled", !0);
            break;
          default:
            o = l._defaultCommand[o.toLowerCase()] || o, this.commandMap[o] || (this.commandMap[o] = a);
            const _ = this._variable.currentNodesMap, b = _.indexOf(o) > -1 ? null : s.createElement(o);
            let S = o;
            /^SUB$/i.test(o) && _.indexOf("SUP") > -1 ? S = "SUP" : /^SUP$/i.test(o) && _.indexOf("SUB") > -1 && (S = "SUB"), this.nodeChange(b, this._commandMapStyles[o] || null, [S], !1), this.focus();
        }
    },
    /**
     * @description Remove format of the currently selected range
     */
    removeFormat: function() {
      this.nodeChange(null, null, null, null);
    },
    /**
     * @description This method implements indentation to selected range.
     * Setted "margin-left" to "25px" in the top "P" tag of the parameter node.
     * @param {String} command Separator ("indent" or "outdent")
     */
    indent: function(a) {
      const o = this.getRange(), d = this.getSelectedElements(null), p = [], v = a !== "indent", _ = l.rtl ? "marginRight" : "marginLeft";
      let b = o.startContainer, S = o.endContainer, k = o.startOffset, w = o.endOffset;
      for (let z = 0, M = d.length, N, O; z < M; z++)
        N = d[z], !s.isListCell(N) || !this.plugins.list ? (O = /\d+/.test(N.style[_]) ? s.getNumber(N.style[_], 0) : 0, v ? O -= 25 : O += 25, s.setStyle(N, _, O <= 0 ? "" : O + "px")) : (v || N.previousElementSibling) && p.push(N);
      p.length > 0 && this.plugins.list.editInsideList.call(this, v, p), this.effectNode = null, this.setRange(b, k, S, w), this.history.push(!1);
    },
    /**
     * @description Add or remove the class name of "body" so that the code block is visible
     */
    toggleDisplayBlocks: function() {
      const a = t.element.wysiwyg;
      s.toggleClass(a, "se-show-block"), s.hasClass(a, "se-show-block") ? s.addClass(this._styleCommandMap.showBlocks, "active") : s.removeClass(this._styleCommandMap.showBlocks, "active"), this._resourcesStateChange();
    },
    /**
     * @description Changes to code view or wysiwyg view
     */
    toggleCodeView: function() {
      const a = this._variable.isCodeView;
      this.controllersOff(), s.setDisabledButtons(!a, this.codeViewDisabledButtons), a ? (s.isNonEditable(t.element.wysiwygFrame) || this._setCodeDataToEditor(), t.element.wysiwygFrame.scrollTop = 0, t.element.code.style.display = "none", t.element.wysiwygFrame.style.display = "block", this._variable._codeOriginCssText = this._variable._codeOriginCssText.replace(/(\s?display(\s+)?:(\s+)?)[a-zA-Z]+(?=;)/, "display: none"), this._variable._wysiwygOriginCssText = this._variable._wysiwygOriginCssText.replace(/(\s?display(\s+)?:(\s+)?)[a-zA-Z]+(?=;)/, "display: block"), l.height === "auto" && !l.codeMirrorEditor && (t.element.code.style.height = "0px"), this._variable.isCodeView = !1, this._variable.isFullScreen || (this._notHideToolbar = !1, /balloon|balloon-always/i.test(l.mode) && (t.element._arrow.style.display = "", this._isInline = !1, this._isBalloon = !0, g._hideToolbar())), this.nativeFocus(), s.removeClass(this._styleCommandMap.codeView, "active"), s.isNonEditable(t.element.wysiwygFrame) || (this.history.push(!1), this.history._resetCachingButton())) : (this._setEditorDataToCodeView(), this._variable._codeOriginCssText = this._variable._codeOriginCssText.replace(/(\s?display(\s+)?:(\s+)?)[a-zA-Z]+(?=;)/, "display: block"), this._variable._wysiwygOriginCssText = this._variable._wysiwygOriginCssText.replace(/(\s?display(\s+)?:(\s+)?)[a-zA-Z]+(?=;)/, "display: none"), this._variable.isFullScreen ? t.element.code.style.height = "100%" : l.height === "auto" && !l.codeMirrorEditor && (t.element.code.style.height = t.element.code.scrollHeight > 0 ? t.element.code.scrollHeight + "px" : "auto"), l.codeMirrorEditor && l.codeMirrorEditor.refresh(), this._variable.isCodeView = !0, this._variable.isFullScreen || (this._notHideToolbar = !0, this._isBalloon && (t.element._arrow.style.display = "none", t.element.toolbar.style.left = "", this._isInline = !0, this._isBalloon = !1, g._showToolbarInline())), this._variable._range = null, t.element.code.focus(), s.addClass(this._styleCommandMap.codeView, "active")), this._checkPlaceholder(), this.isReadOnly && s.setDisabledButtons(!0, this.resizingDisabledButtons), typeof x.toggleCodeView == "function" && x.toggleCodeView(this._variable.isCodeView, this);
    },
    /**
     * @description Convert the data of the code view and put it in the WYSIWYG area.
     * @private
     */
    _setCodeDataToEditor: function() {
      const a = this._getCodeView();
      if (l.fullPage) {
        const o = this._parser.parseFromString(a, "text/html");
        if (!this.options.__allowedScriptTag) {
          const v = o.head.children;
          for (let _ = 0, b = v.length; _ < b; _++)
            /^script$/i.test(v[_].tagName) && (o.head.removeChild(v[_]), _--, b--);
        }
        let d = o.head.innerHTML;
        (!o.head.querySelector('link[rel="stylesheet"]') || this.options.height === "auto" && !o.head.querySelector("style")) && (d += s._setIframeCssTags(this.options)), this._wd.head.innerHTML = d, this._wd.body.innerHTML = this.convertContentsForEditor(o.body.innerHTML);
        const p = o.body.attributes;
        for (let v = 0, _ = p.length; v < _; v++)
          p[v].name !== "contenteditable" && this._wd.body.setAttribute(p[v].name, p[v].value);
        if (!s.hasClass(this._wd.body, "sun-editor-editable")) {
          const v = l._editableClass.split(" ");
          for (let _ = 0; _ < v.length; _++)
            s.addClass(this._wd.body, l._editableClass[_]);
        }
      } else
        t.element.wysiwyg.innerHTML = a.length > 0 ? this.convertContentsForEditor(a) : "<" + l.defaultTag + "><br></" + l.defaultTag + ">";
    },
    /**
     * @description Convert the data of the WYSIWYG area and put it in the code view area.
     * @private
     */
    _setEditorDataToCodeView: function() {
      const a = this.convertHTMLForCodeView(t.element.wysiwyg, !1);
      let o = "";
      if (l.fullPage) {
        const d = s.getAttributesToString(this._wd.body, null);
        o = `<!DOCTYPE html>
<html>
` + this._wd.head.outerHTML.replace(/>(?!\n)/g, `>
`) + "<body " + d + `>
` + a + `</body>
</html>`;
      } else
        o = a;
      t.element.code.style.display = "block", t.element.wysiwygFrame.style.display = "none", this._setCodeView(o);
    },
    /**
     * @description Changes to full screen or default screen
     * @param {Element|null} element full screen button
     */
    toggleFullScreen: function(a) {
      const o = t.element.topArea, d = t.element.toolbar, p = t.element.editorArea, v = t.element.wysiwygFrame, _ = t.element.code, b = this._variable;
      this.controllersOff();
      const S = d.style.display === "none" || this._isInline && !this._inlineToolbarAttr.isShow;
      b.isFullScreen ? (b.isFullScreen = !1, v.style.cssText = b._wysiwygOriginCssText, _.style.cssText = b._codeOriginCssText, d.style.cssText = "", p.style.cssText = b._editorAreaOriginCssText, o.style.cssText = b._originCssText, u.body.style.overflow = b._bodyOverflow, l.height === "auto" && !l.codeMirrorEditor && g._codeViewAutoHeight(), l.toolbarContainer && l.toolbarContainer.appendChild(d), l.stickyToolbar > -1 && s.removeClass(d, "se-toolbar-sticky"), b._fullScreenAttrs.sticky && !l.toolbarContainer && (b._fullScreenAttrs.sticky = !1, t.element._stickyDummy.style.display = "block", s.addClass(d, "se-toolbar-sticky")), this._isInline = b._fullScreenAttrs.inline, this._isBalloon = b._fullScreenAttrs.balloon, this._isInline && g._showToolbarInline(), l.toolbarContainer && s.removeClass(d, "se-toolbar-balloon"), g.onScroll_window(), a && s.changeElement(a.firstElementChild, m.expansion), t.element.topArea.style.marginTop = "", s.removeClass(this._styleCommandMap.fullScreen, "active")) : (b.isFullScreen = !0, b._fullScreenAttrs.inline = this._isInline, b._fullScreenAttrs.balloon = this._isBalloon, (this._isInline || this._isBalloon) && (this._isInline = !1, this._isBalloon = !1), l.toolbarContainer && t.element.relative.insertBefore(d, p), o.style.position = "fixed", o.style.top = "0", o.style.left = "0", o.style.width = "100%", o.style.maxWidth = "100%", o.style.height = "100%", o.style.zIndex = "2147483647", t.element._stickyDummy.style.display !== "" && (b._fullScreenAttrs.sticky = !0, t.element._stickyDummy.style.display = "none", s.removeClass(d, "se-toolbar-sticky")), b._bodyOverflow = u.body.style.overflow, u.body.style.overflow = "hidden", b._editorAreaOriginCssText = p.style.cssText, b._wysiwygOriginCssText = v.style.cssText, b._codeOriginCssText = _.style.cssText, p.style.cssText = d.style.cssText = "", v.style.cssText = (v.style.cssText.match(/\s?display(\s+)?:(\s+)?[a-zA-Z]+;/) || [""])[0] + l._editorStyles.editor, _.style.cssText = (_.style.cssText.match(/\s?display(\s+)?:(\s+)?[a-zA-Z]+;/) || [""])[0], d.style.width = v.style.height = _.style.height = "100%", d.style.position = "relative", d.style.display = "block", b.innerHeight_fullScreen = h.innerHeight - d.offsetHeight, p.style.height = b.innerHeight_fullScreen - l.fullScreenOffset + "px", a && s.changeElement(a.firstElementChild, m.reduction), l.iframe && l.height === "auto" && (p.style.overflow = "auto", this._iframeAutoHeight()), t.element.topArea.style.marginTop = l.fullScreenOffset + "px", s.addClass(this._styleCommandMap.fullScreen, "active")), S && x.toolbar.hide(), typeof x.toggleFullScreen == "function" && x.toggleFullScreen(this._variable.isFullScreen, this);
    },
    /**
     * @description Prints the current contents of the editor.
     */
    print: function() {
      const a = s.createElement("IFRAME");
      a.style.display = "none", u.body.appendChild(a);
      const o = l.printTemplate ? l.printTemplate.replace(/\{\{\s*contents\s*\}\}/i, this.getContents(!0)) : this.getContents(!0), d = s.getIframeDocument(a), p = this._wd;
      if (l.iframe) {
        const v = l._printClass !== null ? 'class="' + l._printClass + '"' : l.fullPage ? s.getAttributesToString(p.body, ["contenteditable"]) : 'class="' + l._editableClass + '"';
        d.write(
          "<!DOCTYPE html><html><head>" + p.head.innerHTML + "</head><body " + v + ">" + o + "</body></html>"
        );
      } else {
        const v = u.head.getElementsByTagName("link"), _ = u.head.getElementsByTagName("style");
        let b = "";
        for (let S = 0, k = v.length; S < k; S++)
          b += v[S].outerHTML;
        for (let S = 0, k = _.length; S < k; S++)
          b += _[S].outerHTML;
        d.write(
          "<!DOCTYPE html><html><head>" + b + '</head><body class="' + (l._printClass !== null ? l._printClass : l._editableClass) + '">' + o + "</body></html>"
        );
      }
      this.showLoading(), h.setTimeout(function() {
        try {
          if (a.focus(), s.isIE_Edge || s.isChromium || u.documentMode || h.StyleMedia)
            try {
              a.contentWindow.document.execCommand("print", !1, null);
            } catch {
              a.contentWindow.print();
            }
          else
            a.contentWindow.print();
        } catch (v) {
          throw Error("[SUNEDITOR.core.print.fail] error: " + v);
        } finally {
          c.closeLoading(), s.removeItem(a);
        }
      }, 1e3);
    },
    /**
     * @description Open the preview window.
     */
    preview: function() {
      c.submenuOff(), c.containerOff(), c.controllersOff();
      const a = l.previewTemplate ? l.previewTemplate.replace(/\{\{\s*contents\s*\}\}/i, this.getContents(!0)) : this.getContents(!0), o = h.open("", "_blank");
      o.mimeType = "text/html";
      const d = this._wd;
      if (l.iframe) {
        const p = l._printClass !== null ? 'class="' + l._printClass + '"' : l.fullPage ? s.getAttributesToString(d.body, ["contenteditable"]) : 'class="' + l._editableClass + '"';
        o.document.write(
          "<!DOCTYPE html><html><head>" + d.head.innerHTML + "<style>body {overflow:auto !important; margin: 10px auto !important; height:auto !important; outline:1px dashed #ccc;}</style></head><body " + p + ">" + a + "</body></html>"
        );
      } else {
        const p = u.head.getElementsByTagName("link"), v = u.head.getElementsByTagName("style");
        let _ = "";
        for (let b = 0, S = p.length; b < S; b++)
          _ += p[b].outerHTML;
        for (let b = 0, S = v.length; b < S; b++)
          _ += v[b].outerHTML;
        o.document.write(
          '<!DOCTYPE html><html><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>' + n.toolbar.preview + "</title>" + _ + '</head><body class="' + (l._printClass !== null ? l._printClass : l._editableClass) + '" style="margin:10px auto !important; height:auto !important; outline:1px dashed #ccc;">' + a + "</body></html>"
        );
      }
    },
    /**
     * @description Set direction to "rtl" or "ltr".
     * @param {String} dir "rtl" or "ltr"
     */
    setDir: function(a) {
      const o = a === "rtl", d = this._prevRtl !== o;
      this._prevRtl = l.rtl = o, d && (this.plugins.align && this.plugins.align.exchangeDir.call(this), t.tool.indent && s.changeElement(t.tool.indent.firstElementChild, m.indent), t.tool.outdent && s.changeElement(t.tool.outdent.firstElementChild, m.outdent));
      const p = t.element;
      o ? (s.addClass(p.topArea, "se-rtl"), s.addClass(p.wysiwygFrame, "se-rtl")) : (s.removeClass(p.topArea, "se-rtl"), s.removeClass(p.wysiwygFrame, "se-rtl"));
      const v = s.getListChildren(p.wysiwyg, function(b) {
        return s.isFormatElement(b) && (b.style.marginRight || b.style.marginLeft || b.style.textAlign);
      });
      for (let b = 0, S = v.length, k, w, z; b < S; b++)
        k = v[b], z = k.style.marginRight, w = k.style.marginLeft, (z || w) && (k.style.marginRight = w, k.style.marginLeft = z), z = k.style.textAlign, z === "left" ? k.style.textAlign = "right" : z === "right" && (k.style.textAlign = "left");
      const _ = t.tool;
      _.dir && (s.changeTxt(_.dir.querySelector(".se-tooltip-text"), n.toolbar[l.rtl ? "dir_ltr" : "dir_rtl"]), s.changeElement(_.dir.firstElementChild, m[l.rtl ? "dir_ltr" : "dir_rtl"])), _.dir_ltr && (o ? s.removeClass(_.dir_ltr, "active") : s.addClass(_.dir_ltr, "active")), _.dir_rtl && (o ? s.addClass(_.dir_rtl, "active") : s.removeClass(_.dir_rtl, "active"));
    },
    /**
     * @description Sets the HTML string
     * @param {String|undefined} html HTML string
     */
    setContents: function(a) {
      this.removeRange();
      const o = a == null ? "" : this.convertContentsForEditor(a, null, null);
      if (!this._variable.isCodeView)
        t.element.wysiwyg.innerHTML = o, this._resetComponents(), this.history.push(!1);
      else {
        const d = this.convertHTMLForCodeView(o, !1);
        this._setCodeView(d);
      }
    },
    /**
     * @description Sets the contents of the iframe's head tag and body tag when using the "iframe" or "fullPage" option.
     * @param {Object} ctx { head: HTML string, body: HTML string}
     */
    setIframeContents: function(a) {
      if (!l.iframe)
        return !1;
      a.head && (this._wd.head.innerHTML = this.options.__allowedScriptTag ? a.head : a.head.replace(this.__scriptTagRegExp, "")), a.body && (this._wd.body.innerHTML = this.convertContentsForEditor(a.body)), this._resetComponents();
    },
    /**
     * @description Gets the current contents
     * @param {Boolean} onlyContents Return only the contents of the body without headers when the "fullPage" option is true
     * @returns {Object}
     */
    getContents: function(a) {
      const o = this.cleanHTML(t.element.wysiwyg.innerHTML, null, null), d = s.createElement("DIV");
      d.innerHTML = o;
      const p = s.getListChildren(d, function(v) {
        return v.hasAttribute("contenteditable");
      });
      for (let v = 0, _ = p.length; v < _; v++)
        p[v].removeAttribute("contenteditable");
      if (l.fullPage && !a) {
        const v = s.getAttributesToString(this._wd.body, ["contenteditable"]);
        return "<!DOCTYPE html><html>" + this._wd.head.outerHTML + "<body " + v + ">" + d.innerHTML + "</body></html>";
      } else
        return d.innerHTML;
    },
    /**
     * @description Gets the current contents with containing parent div(div.sun-editor-editable).
     * <div class="sun-editor-editable">{contents}</div>
     * @param {Boolean} onlyContents Return only the contents of the body without headers when the "fullPage" option is true
     * @returns {String}
     */
    getFullContents: function(a) {
      return '<div class="sun-editor-editable' + (l.rtl ? " se-rtl" : "") + '">' + this.getContents(a) + "</div>";
    },
    /**
     * @description Returns HTML string according to tag type and configuration.
     * Use only "cleanHTML"
     * @param {Node} node Node
     * @param {Boolean} requireFormat If true, text nodes that do not have a format node is wrapped with the format tag.
     * @private
     */
    _makeLine: function(a, o) {
      const d = l.defaultTag;
      if (a.nodeType === 1) {
        if (this.__disallowedTagNameRegExp.test(a.nodeName))
          return "";
        if (/__se__tag/.test(a.className))
          return a.outerHTML;
        const p = s.getListChildNodes(a, function(v) {
          return s.isSpanWithoutAttr(v) && !s.getParentElement(v, s.isNotCheckingNode);
        }) || [];
        for (let v = p.length - 1; v >= 0; v--)
          p[v].outerHTML = p[v].innerHTML;
        return !o || s.isFormatElement(a) || s.isRangeFormatElement(a) || s.isComponent(a) || s.isMedia(a) || s.isAnchor(a) && s.isMedia(a.firstElementChild) ? s.isSpanWithoutAttr(a) ? a.innerHTML : a.outerHTML : "<" + d + ">" + (s.isSpanWithoutAttr(a) ? a.innerHTML : a.outerHTML) + "</" + d + ">";
      }
      if (a.nodeType === 3) {
        if (!o)
          return s._HTMLConvertor(a.textContent);
        const p = a.textContent.split(/\n/g);
        let v = "";
        for (let _ = 0, b = p.length, S; _ < b; _++)
          S = p[_].trim(), S.length > 0 && (v += "<" + d + ">" + s._HTMLConvertor(S) + "</" + d + ">");
        return v;
      }
      return a.nodeType === 8 && this._allowHTMLComments ? "<!--" + a.textContent.trim() + "-->" : "";
    },
    /**
     * @description Removes attribute values such as style and converts tags that do not conform to the "html5" standard.
     * @param {String} text 
     * @returns {String} HTML string
     * @private
     */
    _tagConvertor: function(a) {
      if (!this._disallowedTextTagsRegExp)
        return a;
      const o = l._textTagsMap;
      return a.replace(this._disallowedTextTagsRegExp, function(d, p, v, _) {
        return p + (typeof o[v] == "string" ? o[v] : v) + (_ ? " " + _ : "");
      });
    },
    /**
     * @description Delete disallowed tags
     * @param {String} html HTML string
     * @returns {String}
     * @private
     */
    _deleteDisallowedTags: function(a) {
      return a = a.replace(this.__disallowedTagsRegExp, "").replace(/<[a-z0-9]+\:[a-z0-9]+[^>^\/]*>[^>]*<\/[a-z0-9]+\:[a-z0-9]+>/gi, ""), /\bfont\b/i.test(this.options._editorTagsWhitelist) || (a = a.replace(/(<\/?)font(\s?)/gi, "$1span$2")), a.replace(this.editorTagsWhitelistRegExp, "").replace(this.editorTagsBlacklistRegExp, "");
    },
    _convertFontSize: function(a, o) {
      const d = this._w.Math, p = o.match(/(\d+(?:\.\d+)?)(.+)/), v = p ? p[1] * 1 : s.fontValueMap[o], _ = p ? p[2] : "rem";
      let b = v;
      switch (/em/.test(_) ? b = d.round(v / 0.0625) : _ === "pt" ? b = d.round(v * 1.333) : _ === "%" && (b = v / 100), a) {
        case "em":
        case "rem":
        case "%":
          return (b * 0.0625).toFixed(2) + a;
        case "pt":
          return d.floor(b / 1.333) + a;
        default:
          return b + a;
      }
    },
    _cleanStyle: function(a, o, d) {
      let p = (a.match(/style\s*=\s*(?:"|')[^"']*(?:"|')/) || [])[0];
      if (/span/i.test(d) && !p && (a.match(/<span\s(.+)/) || [])[1]) {
        const v = (a.match(/\ssize="([^"]+)"/i) || [])[1], _ = (a.match(/\sface="([^"]+)"/i) || [])[1], b = (a.match(/\scolor="([^"]+)"/i) || [])[1];
        (v || _ || b) && (p = 'style="' + (v ? "font-size:" + this.util.getNumber(v / 3.333, 1) + "rem;" : "") + (_ ? "font-family:" + _ + ";" : "") + (b ? "color:" + b + ";" : "") + '"');
      }
      if (p) {
        o || (o = []);
        const v = p.replace(/&quot;/g, "").match(this._cleanStyleRegExp[d]);
        if (v) {
          const _ = [];
          for (let b = 0, S = v.length, k; b < S; b++)
            if (k = v[b].match(/([a-zA-Z0-9-]+)(:)([^"]+)/), k && !/inherit|initial|revert|unset/i.test(k[3])) {
              const w = s.kebabToCamelCase(k[1].trim()), z = this.wwComputedStyle[w].replace(/"/g, ""), M = k[3].trim();
              switch (w) {
                case "fontFamily":
                  if (!l.plugins.font || l.font.indexOf(M) === -1)
                    continue;
                  break;
                case "fontSize":
                  if (!l.plugins.fontSize)
                    continue;
                  this._cleanStyleRegExp.fontSizeUnit.test(k[0]) || (k[0] = k[0].replace((k[0].match(/:\s*([^;]+)/) || [])[1], this._convertFontSize.bind(this, l.fontSizeUnit)));
                  break;
                case "color":
                  if (!l.plugins.fontColor || /rgba\(([0-9]+\s*,\s*){3}0\)|windowtext/i.test(M))
                    continue;
                  break;
                case "backgroundColor":
                  if (!l.plugins.hiliteColor || /rgba\(([0-9]+\s*,\s*){3}0\)|windowtext/i.test(M))
                    continue;
                  break;
              }
              z !== M && _.push(k[0]);
            }
          _.length > 0 && o.push('style="' + _.join(";") + '"');
        }
      }
      return o;
    },
    /**
     * @description Tag and tag attribute check RegExp function. (used by "cleanHTML" and "convertContentsForEditor")
     * @param {Boolean} lowLevelCheck Row level check
     * @param {String} m RegExp value
     * @param {String} t RegExp value
     * @returns {String}
     * @private
     */
    _cleanTags: function(a, o, d) {
      if (/^<[a-z0-9]+\:[a-z0-9]+/i.test(o))
        return o;
      let p = null;
      const v = d.match(/(?!<)[a-zA-Z0-9\-]+/)[0].toLowerCase(), _ = this._attributesTagsBlacklist[v];
      o = o.replace(/\s(?:on[a-z]+)\s*=\s*(")[^"]*\1/ig, ""), _ ? o = o.replace(_, "") : o = o.replace(this._attributesBlacklistRegExp, "");
      const b = this._attributesTagsWhitelist[v];
      if (b ? p = o.match(b) : p = o.match(a ? this._attributesWhitelistRegExp : this._attributesWhitelistRegExp_all_data), a || v === "span")
        if (v === "a") {
          const S = o.match(/(?:(?:id|name)\s*=\s*(?:"|')[^"']*(?:"|'))/g);
          S && (p || (p = []), p.push(S[0]));
        } else
          (!p || !/style=/i.test(p.toString())) && (v === "span" ? p = this._cleanStyle(o, p, "span") : /^(P|DIV|H[1-6]|PRE)$/i.test(v) && (p = this._cleanStyle(o, p, "format")));
      else {
        const S = o.match(/style\s*=\s*(?:"|')[^"']*(?:"|')/);
        S && !p ? p = [S[0]] : S && !p.some(function(k) {
          return /^style/.test(k.trim());
        }) && p.push(S[0]);
      }
      if (s.isFigures(v)) {
        const S = o.match(/style\s*=\s*(?:"|')[^"']*(?:"|')/);
        p || (p = []), S && p.push(S[0]);
      }
      if (p)
        for (let S = 0, k = p.length, w; S < k; S++)
          w = /^(?:href|src)\s*=\s*('|"|\s)*javascript\s*\:/i.test(p[S].trim()) ? "" : p[S], d += (/^\s/.test(w) ? "" : " ") + w;
      return d;
    },
    /**
     * @description Determines if formatting is required and returns a domTree
     * @param {Element} dom documentFragment
     * @returns {Element}
     * @private
     */
    _editFormat: function(a) {
      let o = "", d;
      const p = a.childNodes;
      for (let v = 0, _ = p.length, b; v < _; v++)
        b = p[v], b.nodeType === 8 ? o += "<!-- " + b.textContent + " -->" : !s.isFormatElement(b) && !s.isRangeFormatElement(b) && !s.isComponent(b) && !/meta/i.test(b.nodeName) ? (d || (d = s.createElement(l.defaultTag)), d.appendChild(b), v--, _--) : (d && (o += d.outerHTML, d = null), o += b.outerHTML);
      return d && (o += d.outerHTML), u.createRange().createContextualFragment(o);
    },
    _convertListCell: function(a) {
      let o = "";
      for (let d = 0, p = a.length, v; d < p; d++)
        v = a[d], v.nodeType === 1 ? s.isList(v) ? o += v.innerHTML : s.isListCell(v) ? o += v.outerHTML : s.isFormatElement(v) ? o += "<li>" + (v.innerHTML.trim() || "<br>") + "</li>" : s.isRangeFormatElement(v) && !s.isTable(v) ? o += this._convertListCell(v) : o += "<li>" + v.outerHTML + "</li>" : o += "<li>" + (v.textContent || "<br>") + "</li>";
      return o;
    },
    _isFormatData: function(a) {
      let o = !1;
      for (let d = 0, p = a.length, v; d < p; d++)
        if (v = a[d], v.nodeType === 1 && !s.isTextStyleElement(v) && !s.isBreak(v) && !this.__disallowedTagNameRegExp.test(v.nodeName)) {
          o = !0;
          break;
        }
      return o;
    },
    /**
     * @description Gets the clean HTML code for editor
     * @param {String} html HTML string
     * @param {String|RegExp|null} whitelist Regular expression of allowed tags.
     * RegExp object is create by util.createTagsWhitelist method. (core.pasteTagsWhitelistRegExp)
     * @param {String|RegExp|null} blacklist Regular expression of disallowed tags.
     * RegExp object is create by util.createTagsBlacklist method. (core.pasteTagsBlacklistRegExp)
     * @returns {String}
     */
    cleanHTML: function(a, o, d) {
      a = this._deleteDisallowedTags(this._parser.parseFromString(s.htmlCompress(a), "text/html").body.innerHTML).replace(/(<[a-zA-Z0-9\-]+)[^>]*(?=>)/g, this._cleanTags.bind(this, !0)).replace(/<br\/?>$/i, "");
      const p = u.createRange().createContextualFragment(a);
      try {
        s._consistencyCheckOfHTML(p, this._htmlCheckWhitelistRegExp, this._htmlCheckBlacklistRegExp, this._classNameFilter);
      } catch (S) {
        console.warn("[SUNEDITOR.cleanHTML.consistencyCheck.fail] " + S);
      }
      if (this.managedTagsInfo && this.managedTagsInfo.query) {
        const S = p.querySelectorAll(this.managedTagsInfo.query);
        for (let k = 0, w = S.length, z, M; k < w; k++) {
          M = [].slice.call(S[k].classList);
          for (let N = 0, O = M.length; N < O; N++)
            if (z = this.managedTagsInfo.map[M[N]], z) {
              z(S[k]);
              break;
            }
        }
      }
      let v = p.childNodes, _ = "";
      const b = this._isFormatData(v);
      b && (v = this._editFormat(p).childNodes);
      for (let S = 0, k = v.length, w; S < k; S++) {
        if (w = v[S], this.__allowedScriptRegExp.test(w.nodeName)) {
          _ += w.outerHTML;
          continue;
        }
        _ += this._makeLine(w, b);
      }
      return _ = s.htmlRemoveWhiteSpace(_), _ ? (o && (_ = _.replace(typeof o == "string" ? s.createTagsWhitelist(o) : o, "")), d && (_ = _.replace(typeof d == "string" ? s.createTagsBlacklist(d) : d, ""))) : _ = a, this._tagConvertor(_);
    },
    /**
     * @description Converts contents into a format that can be placed in an editor
     * @param {String} contents contents
     * @returns {String}
     */
    convertContentsForEditor: function(a) {
      a = this._deleteDisallowedTags(this._parser.parseFromString(s.htmlCompress(a), "text/html").body.innerHTML).replace(/(<[a-zA-Z0-9\-]+)[^>]*(?=>)/g, this._cleanTags.bind(this, !0));
      const o = u.createRange().createContextualFragment(a);
      try {
        s._consistencyCheckOfHTML(o, this._htmlCheckWhitelistRegExp, this._htmlCheckBlacklistRegExp, this._classNameFilter);
      } catch (_) {
        console.warn("[SUNEDITOR.convertContentsForEditor.consistencyCheck.fail] " + _);
      }
      if (this.managedTagsInfo && this.managedTagsInfo.query) {
        const _ = o.querySelectorAll(this.managedTagsInfo.query);
        for (let b = 0, S = _.length, k, w; b < S; b++) {
          w = [].slice.call(_[b].classList);
          for (let z = 0, M = w.length; z < M; z++)
            if (k = this.managedTagsInfo.map[w[z]], k) {
              k(_[b]);
              break;
            }
        }
      }
      const d = o.childNodes;
      let p = "", v = null;
      for (let _ = 0, b; _ < d.length; _++) {
        if (b = d[_], this.__allowedScriptRegExp.test(b.nodeName)) {
          p += b.outerHTML;
          continue;
        }
        if (!s.isFormatElement(b) && !s.isRangeFormatElement(b) && !s.isComponent(b) && !s.isMedia(b) && b.nodeType !== 8 && !/__se__tag/.test(b.className)) {
          if (v || (v = s.createElement(l.defaultTag)), v.appendChild(b), _--, d[_ + 1] && !s.isFormatElement(d[_ + 1]))
            continue;
          b = v, v = null;
        }
        v && (p += this._makeLine(v, !0), v = null), p += this._makeLine(b, !0);
      }
      return v && (p += this._makeLine(v, !0)), p.length === 0 ? "<" + l.defaultTag + "><br></" + l.defaultTag + ">" : (p = s.htmlRemoveWhiteSpace(p), this._tagConvertor(p));
    },
    /**
     * @description Converts wysiwyg area element into a format that can be placed in an editor of code view mode
     * @param {Element|String} html WYSIWYG element (context.element.wysiwyg) or HTML string.
     * @param {Boolean} comp If true, does not line break and indentation of tags.
     * @returns {String}
     */
    convertHTMLForCodeView: function(a, o) {
      let d = "";
      const p = h.RegExp, v = new p("^(BLOCKQUOTE|PRE|TABLE|THEAD|TBODY|TR|TH|TD|OL|UL|IMG|IFRAME|VIDEO|AUDIO|FIGURE|FIGCAPTION|HR|BR|CANVAS|SELECT)$", "i"), _ = typeof a == "string" ? u.createRange().createContextualFragment(a) : a, b = (function(w) {
        return this.isFormatElement(w) || this.isComponent(w);
      }).bind(s), S = o ? "" : `
`;
      let k = o ? 0 : this._variable.codeIndent * 1;
      return k = k > 0 ? new h.Array(k + 1).join(" ") : "", function w(z, M) {
        const N = z.childNodes, O = v.test(z.nodeName), I = O ? M : "";
        for (let $ = 0, Y = N.length, j, R, Z, W, H, q; $ < Y; $++) {
          if (j = N[$], W = v.test(j.nodeName), R = W ? S : "", Z = b(j) && !O && !/^(TH|TD)$/i.test(z.nodeName) ? S : "", j.nodeType === 8) {
            d += `
<!-- ` + j.textContent.trim() + " -->" + R;
            continue;
          }
          if (j.nodeType === 3) {
            s.isList(j.parentElement) || (d += s._HTMLConvertor(/^\n+$/.test(j.data) ? "" : j.data));
            continue;
          }
          if (j.childNodes.length === 0) {
            d += (/^HR$/i.test(j.nodeName) ? S : "") + (/^PRE$/i.test(j.parentElement.nodeName) && /^BR$/i.test(j.nodeName) ? "" : I) + j.outerHTML + R;
            continue;
          }
          j.outerHTML ? (H = j.nodeName.toLowerCase(), q = I || W ? M : "", d += (Z || (O ? "" : R)) + q + j.outerHTML.match(p("<" + H + "[^>]*>", "i"))[0] + R, w(j, M + k), d += (/\n$/.test(d) ? q : "") + "</" + H + ">" + (Z || R || O || /^(TH|TD)$/i.test(j.nodeName) ? S : "")) : d += new h.XMLSerializer().serializeToString(j);
        }
      }(_, ""), d.trim() + S;
    },
    /**
     * @description Add an event to document.
     * When created as an Iframe, the same event is added to the document in the Iframe.
     * @param {String} type Event type
     * @param {Function} listener Event listener
     * @param {Boolean} useCapture Use event capture
     */
    addDocEvent: function(a, o, d) {
      u.addEventListener(a, o, d), l.iframe && this._wd.addEventListener(a, o);
    },
    /**
             * @description Remove events from document.
             * When created as an Iframe, the event of the document inside the Iframe is also removed.
             * @param {String} type Event type
             * @param {Function} listener Event listener
             */
    removeDocEvent: function(a, o) {
      u.removeEventListener(a, o), l.iframe && this._wd.removeEventListener(a, o);
    },
    /**
     * @description The current number of characters is counted and displayed.
     * @param {String} inputText Text added.
     * @returns {Boolean}
     * @private
     */
    _charCount: function(a) {
      const o = l.maxCharCount, d = l.charCounterType;
      let p = 0;
      if (a && (p = this.getCharLength(a, d)), this._setCharCount(), o > 0) {
        let v = !1;
        const _ = x.getCharCount(d);
        if (_ > o) {
          if (v = !0, p > 0) {
            this._editorRange();
            const b = this.getRange(), S = b.endOffset - 1, k = this.getSelectionNode().textContent, w = b.endOffset - (_ - o);
            this.getSelectionNode().textContent = k.slice(0, w < 0 ? 0 : w) + k.slice(b.endOffset, k.length), this.setRange(b.endContainer, S, b.endContainer, S);
          }
        } else
          _ + p > o && (v = !0);
        if (v && (this._callCounterBlink(), p > 0))
          return !1;
      }
      return !0;
    },
    /**
     * @description When "element" is added, if it is greater than "options.maxCharCount", false is returned.
     * @param {Node|String} element Element node or String.
     * @param {String|null} charCounterType charCounterType. If it is null, the options.charCounterType
     * @returns {Boolean}
     */
    checkCharCount: function(a, o) {
      if (l.maxCharCount) {
        const d = o || l.charCounterType, p = this.getCharLength(typeof a == "string" ? a : this._charTypeHTML && a.nodeType === 1 ? a.outerHTML : a.textContent, d);
        if (p > 0 && p + x.getCharCount(d) > l.maxCharCount)
          return this._callCounterBlink(), !1;
      }
      return !0;
    },
    /**
     * @description Get the length of the content.
     * Depending on the option, the length of the character is taken. (charCounterType)
     * @param {String} content Content to count
     * @param {String} charCounterType options.charCounterType
     * @returns {Number}
     */
    getCharLength: function(a, o) {
      return /byte/.test(o) ? s.getByteLength(a) : a.length;
    },
    /**
     * @description Reset buttons of the responsive toolbar.
     */
    resetResponsiveToolbar: function() {
      c.controllersOff();
      const a = g._responsiveButtonSize;
      if (a) {
        let o = 0;
        (c._isBalloon || c._isInline) && l.toolbarWidth === "auto" ? o = t.element.topArea.offsetWidth : o = t.element.toolbar.offsetWidth;
        let d = "default";
        for (let p = 1, v = a.length; p < v; p++)
          if (o < a[p]) {
            d = a[p] + "";
            break;
          }
        g._responsiveCurrentSize !== d && (g._responsiveCurrentSize = d, x.setToolbarButtons(g._responsiveButtons[d]));
      }
    },
    /**
     * @description Set the char count to charCounter element textContent.
     * @private
     */
    _setCharCount: function() {
      t.element.charCounter && h.setTimeout(function() {
        t.element.charCounter.textContent = x.getCharCount(l.charCounterType);
      });
    },
    /**
     * @description The character counter blinks.
     * @private
     */
    _callCounterBlink: function() {
      const a = t.element.charWrapper;
      a && !s.hasClass(a, "se-blink") && (s.addClass(a, "se-blink"), h.setTimeout(function() {
        s.removeClass(a, "se-blink");
      }, 600));
    },
    /**
     * @description Check the components such as image and video and modify them according to the format.
     * @private
     */
    _checkComponents: function() {
      for (let a = 0, o = this._fileInfoPluginsCheck.length; a < o; a++)
        this._fileInfoPluginsCheck[a]();
    },
    /**
     * @description Initialize the information of the components.
     * @private
     */
    _resetComponents: function() {
      for (let a = 0, o = this._fileInfoPluginsReset.length; a < o; a++)
        this._fileInfoPluginsReset[a]();
    },
    /**
     * @description Set method in the code view area
     * @param {String} value HTML string
     * @private
     */
    _setCodeView: function(a) {
      l.codeMirrorEditor ? l.codeMirrorEditor.getDoc().setValue(a) : t.element.code.value = a;
    },
    /**
     * @description Get method in the code view area
     * @private
     */
    _getCodeView: function() {
      return l.codeMirrorEditor ? l.codeMirrorEditor.getDoc().getValue() : t.element.code.value;
    },
    /**
     * @description remove class, display text.
     * @param {Array|null} ignoredList Igonred button list
     */
    _setKeyEffect: function(a) {
      const o = this.commandMap, d = this.activePlugins;
      for (let p in o)
        a.indexOf(p) > -1 || !s.hasOwn(o, p) || (d.indexOf(p) > -1 ? i[p].active.call(this, null) : o.OUTDENT && /^OUTDENT$/i.test(p) ? s.isImportantDisabled(o.OUTDENT) || o.OUTDENT.setAttribute("disabled", !0) : o.INDENT && /^INDENT$/i.test(p) ? s.isImportantDisabled(o.INDENT) || o.INDENT.removeAttribute("disabled") : s.removeClass(o[p], "active"));
    },
    /**
     * @description Initializ core variable
     * @param {Boolean} reload Is relooad?
     * @param {String} _initHTML initial html string
     * @private
     */
    _init: function(a, o) {
      const d = h.RegExp;
      this._ww = l.iframe ? t.element.wysiwygFrame.contentWindow : h, this._wd = u, this._charTypeHTML = l.charCounterType === "byte-html", this.wwComputedStyle = h.getComputedStyle(t.element.wysiwyg), this._editorHeight = t.element.wysiwygFrame.offsetHeight, this._editorHeightPadding = s.getNumber(this.wwComputedStyle.getPropertyValue("padding-top")) + s.getNumber(this.wwComputedStyle.getPropertyValue("padding-bottom")), this._classNameFilter = (function(R) {
        return this.test(R) ? R : "";
      }).bind(l.allowedClassNames);
      const p = l.__allowedScriptTag ? "" : "script|";
      if (this.__scriptTagRegExp = new d("<(script)[^>]*>([\\s\\S]*?)<\\/\\1>|<script[^>]*\\/?>", "gi"), this.__disallowedTagsRegExp = new d("<(" + p + "style)[^>]*>([\\s\\S]*?)<\\/\\1>|<(" + p + "style)[^>]*\\/?>", "gi"), this.__disallowedTagNameRegExp = new d("^(" + p + "meta|link|style|[a-z]+:[a-z]+)$", "i"), this.__allowedScriptRegExp = new d("^" + (l.__allowedScriptTag ? "script" : "") + "$", "i"), !l.iframe && typeof h.ShadowRoot == "function") {
        let R = t.element.wysiwygFrame;
        for (; R; ) {
          if (R.shadowRoot) {
            this._shadowRoot = R.shadowRoot;
            break;
          } else if (R instanceof h.ShadowRoot) {
            this._shadowRoot = R;
            break;
          }
          R = R.parentNode;
        }
        this._shadowRoot && (this._shadowRootControllerEventTarget = []);
      }
      const v = h.Object.keys(l._textTagsMap), _ = l.addTagsWhitelist ? l.addTagsWhitelist.split("|").filter(function(R) {
        return /b|i|ins|s|strike/i.test(R);
      }) : [];
      for (let R = 0; R < _.length; R++)
        v.splice(v.indexOf(_[R].toLowerCase()), 1);
      this._disallowedTextTagsRegExp = v.length === 0 ? null : new d("(<\\/?)(" + v.join("|") + ")\\b\\s*([^>^<]+)?\\s*(?=>)", "gi");
      const b = function(R, Z) {
        return R ? R === "*" ? "[a-z-]+" : Z ? R + "|" + Z : R : "^";
      }, S = "contenteditable|colspan|rowspan|target|href|download|rel|src|alt|class|type|controls|origin-size", k = "data-format|data-size|data-file-size|data-file-name|data-origin|data-align|data-image-link|data-rotate|data-proportion|data-percentage|data-exp|data-font-size";
      this._allowHTMLComments = l._editorTagsWhitelist.indexOf("//") > -1 || l._editorTagsWhitelist === "*", this._htmlCheckWhitelistRegExp = new d("^(" + b(l._editorTagsWhitelist.replace("|//", ""), "") + ")$", "i"), this._htmlCheckBlacklistRegExp = new d("^(" + (l.tagsBlacklist || "^") + ")$", "i"), this.editorTagsWhitelistRegExp = s.createTagsWhitelist(b(l._editorTagsWhitelist.replace("|//", "|<!--|-->"), "")), this.editorTagsBlacklistRegExp = s.createTagsBlacklist(l.tagsBlacklist.replace("|//", "|<!--|-->")), this.pasteTagsWhitelistRegExp = s.createTagsWhitelist(b(l.pasteTagsWhitelist, "")), this.pasteTagsBlacklistRegExp = s.createTagsBlacklist(l.pasteTagsBlacklist);
      const w = '\\s*=\\s*(")[^"]*\\1', z = l.attributesWhitelist;
      let M = {}, N = "";
      if (z)
        for (let R in z)
          !s.hasOwn(z, R) || /^on[a-z]+$/i.test(z[R]) || (R === "all" ? N = b(z[R], S) : M[R] = new d("\\s(?:" + b(z[R], "") + ")" + w, "ig"));
      this._attributesWhitelistRegExp = new d("\\s(?:" + (N || S + "|" + k) + ")" + w, "ig"), this._attributesWhitelistRegExp_all_data = new d("\\s(?:" + ((N || S) + "|data-[a-z0-9\\-]+") + ")" + w, "ig"), this._attributesTagsWhitelist = M;
      const O = l.attributesBlacklist;
      if (M = {}, N = "", O)
        for (let R in O)
          s.hasOwn(O, R) && (R === "all" ? N = b(O[R], "") : M[R] = new d("\\s(?:" + b(O[R], "") + ")" + w, "ig"));
      this._attributesBlacklistRegExp = new d("\\s(?:" + (N || "^") + ")" + w, "ig"), this._attributesTagsBlacklist = M, this._isInline = /inline/i.test(l.mode), this._isBalloon = /balloon|balloon-always/i.test(l.mode), this._isBalloonAlways = /balloon-always/i.test(l.mode), this._cachingButtons(), this._fileInfoPluginsCheck = [], this._fileInfoPluginsReset = [], this.managedTagsInfo = { query: "", map: {} };
      const I = [];
      this.activePlugins = [], this._fileManager.tags = [], this._fileManager.pluginMap = {};
      let $ = [], Y, j;
      for (let R in i)
        if (s.hasOwn(i, R)) {
          if (Y = i[R], j = e[R], (Y.active || Y.action) && j && this.callPlugin(R, null, j), typeof Y.checkFileInfo == "function" && typeof Y.resetFileInfo == "function" && (this.callPlugin(R, null, j), this._fileInfoPluginsCheck.push(Y.checkFileInfo.bind(this)), this._fileInfoPluginsReset.push(Y.resetFileInfo.bind(this))), h.Array.isArray(Y.fileTags)) {
            const Z = Y.fileTags;
            this.callPlugin(R, null, j), this._fileManager.tags = this._fileManager.tags.concat(Z), $.push(R);
            for (let W = 0, H = Z.length; W < H; W++)
              this._fileManager.pluginMap[Z[W].toLowerCase()] = R;
          }
          if (Y.managedTags) {
            const Z = Y.managedTags();
            I.push("." + Z.className), this.managedTagsInfo.map[Z.className] = Z.method.bind(this);
          }
        }
      this.managedTagsInfo.query = I.toString(), this._fileManager.queryString = this._fileManager.tags.join(","), this._fileManager.regExp = new d("^(" + (this._fileManager.tags.join("|") || "^") + ")$", "i"), this._fileManager.pluginRegExp = new d("^(" + ($.length === 0 ? "^" : $.join("|")) + ")$", "i"), this._variable._originCssText = t.element.topArea.style.cssText, this._placeholder = t.element.placeholder, this._lineBreaker = t.element.lineBreaker, this._lineBreakerButton = this._lineBreaker.querySelector("button"), this.history = Aa(this, this._onChange_historyStack.bind(this)), this.addModule([Bl]), l.iframe && (this._wd = t.element.wysiwygFrame.contentDocument, t.element.wysiwyg = this._wd.body, l._editorStyles.editor && (t.element.wysiwyg.style.cssText = l._editorStyles.editor), l.height === "auto" && (this._iframeAuto = this._wd.body)), this._initWysiwygArea(a, o);
    },
    /**
     * @description Caching basic buttons to use
     * @private
     */
    _cachingButtons: function() {
      this.codeViewDisabledButtons = t.element._buttonTray.querySelectorAll('.se-menu-list button[data-display]:not([class~="se-code-view-enabled"]):not([data-display="MORE"])'), this.resizingDisabledButtons = t.element._buttonTray.querySelectorAll('.se-menu-list button[data-display]:not([class~="se-resizing-enabled"]):not([data-display="MORE"])');
      const a = t.tool, o = this.commandMap;
      o.INDENT = a.indent, o.OUTDENT = a.outdent, o[l.textTags.bold.toUpperCase()] = a.bold, o[l.textTags.underline.toUpperCase()] = a.underline, o[l.textTags.italic.toUpperCase()] = a.italic, o[l.textTags.strike.toUpperCase()] = a.strike, o[l.textTags.sub.toUpperCase()] = a.subscript, o[l.textTags.sup.toUpperCase()] = a.superscript, this._styleCommandMap = {
        fullScreen: a.fullScreen,
        showBlocks: a.showBlocks,
        codeView: a.codeView
      }, this._saveButtonStates();
    },
    /**
     * @description Initializ wysiwyg area (Only called from core._init)
     * @param {Boolean} reload Is relooad?
     * @param {String} _initHTML initial html string
     * @private
     */
    _initWysiwygArea: function(a, o) {
      t.element.wysiwyg.innerHTML = a ? o : this.convertContentsForEditor((typeof o == "string" ? o : /^TEXTAREA$/i.test(t.element.originElement.nodeName) ? t.element.originElement.value : t.element.originElement.innerHTML) || "");
    },
    /**
     * @description Called when there are changes to tags in the wysiwyg region.
     * @private
     */
    _resourcesStateChange: function() {
      this._iframeAutoHeight(), this._checkPlaceholder();
    },
    /**
     * @description Called when after execute "history.push"
     * @private
     */
    _onChange_historyStack: function() {
      this.hasFocus && g._applyTagEffects(), this._variable.isChanged = !0, t.tool.save && t.tool.save.removeAttribute("disabled"), x.onChange && x.onChange(this.getContents(!0), this), t.element.toolbar.style.display === "block" && g._showToolbarBalloon();
    },
    /**
     * @description Modify the height value of the iframe when the height of the iframe is automatic.
     * @private
     */
    _iframeAutoHeight: function() {
      this._iframeAuto ? h.setTimeout(function() {
        const a = c._iframeAuto.offsetHeight;
        t.element.wysiwygFrame.style.height = a + "px", s.isResizeObserverSupported || c.__callResizeFunction(a, null);
      }) : s.isResizeObserverSupported || c.__callResizeFunction(t.element.wysiwygFrame.offsetHeight, null);
    },
    __callResizeFunction: function(a, o) {
      a = a === -1 ? o.borderBoxSize && o.borderBoxSize[0] ? o.borderBoxSize[0].blockSize : o.contentRect.height + this._editorHeightPadding : a, this._editorHeight !== a && (typeof x.onResizeEditor == "function" && x.onResizeEditor(a, this._editorHeight, c, o), this._editorHeight = a);
    },
    /**
     * @description Set display property when there is placeholder.
     * @private
     */
    _checkPlaceholder: function() {
      if (this._placeholder) {
        if (this._variable.isCodeView) {
          this._placeholder.style.display = "none";
          return;
        }
        const a = t.element.wysiwyg;
        !s.onlyZeroWidthSpace(a.textContent) || a.querySelector(s._allowedEmptyNodeList) || (a.innerText.match(/\n/g) || "").length > 1 ? this._placeholder.style.display = "none" : this._placeholder.style.display = "block";
      }
    },
    /**
     * @description If there is no default format, add a format and move "selection".
     * @param {String|null} formatName Format tag name (default: 'P')
     * @returns {undefined|null}
     * @private
     */
    _setDefaultFormat: function(a) {
      if (this._fileManager.pluginRegExp.test(this.currentControllerName))
        return;
      const o = this.getRange(), d = o.commonAncestorContainer, p = o.startContainer, v = s.getRangeFormatElement(d, null);
      let _, b, S;
      const k = s.getParentElement(d, s.isComponent);
      if (!(k && !s.isTable(k))) {
        if (d.nodeType === 1 && d.getAttribute("data-se-embed") === "true") {
          let w = d.nextElementSibling;
          s.isFormatElement(w) || (w = this.appendFormatTag(d, l.defaultTag)), this.setRange(w.firstChild, 0, w.firstChild, 0);
          return;
        }
        if (!((s.isRangeFormatElement(p) || s.isWysiwygDiv(p)) && (s.isComponent(p.children[o.startOffset]) || s.isComponent(p.children[o.startOffset - 1])))) {
          if (s.getParentElement(d, s.isNotCheckingNode))
            return null;
          if (v) {
            S = s.createElement(a || l.defaultTag), S.innerHTML = v.innerHTML, S.childNodes.length === 0 && (S.innerHTML = s.zeroWidthSpace), v.innerHTML = S.outerHTML, S = v.firstChild, _ = s.getEdgeChildNodes(S, null).sc, _ || (_ = s.createTextNode(s.zeroWidthSpace), S.insertBefore(_, S.firstChild)), b = _.textContent.length, this.setRange(_, b, _, b);
            return;
          }
          if (s.isRangeFormatElement(d) && d.childNodes.length <= 1) {
            let w = null;
            d.childNodes.length === 1 && s.isBreak(d.firstChild) ? w = d.firstChild : (w = s.createTextNode(s.zeroWidthSpace), d.appendChild(w)), this.setRange(w, 1, w, 1);
            return;
          }
          if (this.execCommand("formatBlock", !1, a || l.defaultTag), _ = s.getEdgeChildNodes(d, d), _ = _ ? _.ec : d, S = s.getFormatElement(_, null), !S) {
            this.removeRange(), this._editorRange();
            return;
          }
          if (s.isBreak(S.nextSibling) && s.removeItem(S.nextSibling), s.isBreak(S.previousSibling) && s.removeItem(S.previousSibling), s.isBreak(_)) {
            const w = s.createTextNode(s.zeroWidthSpace);
            _.parentNode.insertBefore(w, _), _ = w;
          }
          this.effectNode = null, this.nativeFocus();
        }
      }
    },
    /**
     * @description Initialization after "setOptions"
     * @param {Object} el context.element
     * @param {String} _initHTML Initial html string
     * @private
     */
    _setOptionsInit: function(a, o) {
      this.context = t = mn(a.originElement, this._getConstructed(a), l), this._componentsInfoReset = !0, this._editorInit(!0, o);
    },
    /**
     * @description Initializ editor
     * @param {Boolean} reload Is relooad?
     * @param {String} _initHTML initial html string
     * @private
     */
    _editorInit: function(a, o) {
      this._init(a, o), g._addEvent(), this._setCharCount(), g._offStickyToolbar(), g.onResize_window(), t.element.toolbar.style.visibility = "";
      const d = l.frameAttrbutes;
      for (let p in d)
        t.element.wysiwyg.setAttribute(p, d[p]);
      this._checkComponents(), this._componentsInfoInit = !1, this._componentsInfoReset = !1, this.history.reset(!0), h.setTimeout(function() {
        typeof c._resourcesStateChange == "function" && (g._resizeObserver && g._resizeObserver.observe(t.element.wysiwygFrame), g._toolbarObserver && g._toolbarObserver.observe(t.element._toolbarShadow), c._resourcesStateChange(), typeof x.onload == "function" && x.onload(c, a));
      });
    },
    /**
     * @description Create and return an object to cache the new context.
     * @param {Element} contextEl context.element
     * @returns {Object}
     * @private
     */
    _getConstructed: function(a) {
      return {
        _top: a.topArea,
        _relative: a.relative,
        _toolBar: a.toolbar,
        _toolbarShadow: a._toolbarShadow,
        _menuTray: a._menuTray,
        _editorArea: a.editorArea,
        _wysiwygArea: a.wysiwygFrame,
        _codeArea: a.code,
        _placeholder: a.placeholder,
        _resizingBar: a.resizingBar,
        _navigation: a.navigation,
        _charCounter: a.charCounter,
        _charWrapper: a.charWrapper,
        _loading: a.loading,
        _lineBreaker: a.lineBreaker,
        _lineBreaker_t: a.lineBreaker_t,
        _lineBreaker_b: a.lineBreaker_b,
        _resizeBack: a.resizeBackground,
        _stickyDummy: a._stickyDummy,
        _arrow: a._arrow
      };
    }
  }, g = {
    _IEisComposing: !1,
    // In IE, there is no "e.isComposing" in the key-up event.
    _lineBreakerBind: null,
    _responsiveCurrentSize: "default",
    _responsiveButtonSize: null,
    _responsiveButtons: null,
    _cursorMoveKeyCode: new h.RegExp("^(8|3[2-9]|40|46)$"),
    _directionKeyCode: new h.RegExp("^(8|13|3[2-9]|40|46)$"),
    _nonTextKeyCode: new h.RegExp("^(8|13|1[6-9]|20|27|3[3-9]|40|45|46|11[2-9]|12[0-3]|144|145)$"),
    _historyIgnoreKeyCode: new h.RegExp("^(1[6-9]|20|27|3[3-9]|40|45|11[2-9]|12[0-3]|144|145)$"),
    _onButtonsCheck: new h.RegExp("^(" + h.Object.keys(l._textTagsMap).join("|") + ")$", "i"),
    _frontZeroWidthReg: new h.RegExp(s.zeroWidthSpace + "+", ""),
    _keyCodeShortcut: {
      65: "A",
      66: "B",
      83: "S",
      85: "U",
      73: "I",
      89: "Y",
      90: "Z",
      219: "[",
      221: "]"
    },
    _shortcutCommand: function(a, o) {
      let d = null;
      const p = g._keyCodeShortcut[a];
      switch (p) {
        case "A":
          d = "selectAll";
          break;
        case "B":
          l.shortcutsDisable.indexOf("bold") === -1 && (d = "bold");
          break;
        case "S":
          o && l.shortcutsDisable.indexOf("strike") === -1 ? d = "strike" : !o && l.shortcutsDisable.indexOf("save") === -1 && (d = "save");
          break;
        case "U":
          l.shortcutsDisable.indexOf("underline") === -1 && (d = "underline");
          break;
        case "I":
          l.shortcutsDisable.indexOf("italic") === -1 && (d = "italic");
          break;
        case "Z":
          l.shortcutsDisable.indexOf("undo") === -1 && (o ? d = "redo" : d = "undo");
          break;
        case "Y":
          l.shortcutsDisable.indexOf("undo") === -1 && (d = "redo");
          break;
        case "[":
          l.shortcutsDisable.indexOf("indent") === -1 && (d = l.rtl ? "indent" : "outdent");
          break;
        case "]":
          l.shortcutsDisable.indexOf("indent") === -1 && (d = l.rtl ? "outdent" : "indent");
          break;
      }
      return d ? (c.commandHandler(c.commandMap[d], d), !0) : !!p;
    },
    _applyTagEffects: function() {
      let a = c.getSelectionNode();
      if (a === c.effectNode)
        return;
      c.effectNode = a;
      const o = l.rtl ? "marginRight" : "marginLeft", d = c.commandMap, p = g._onButtonsCheck, v = [], _ = [], b = c.activePlugins, S = b.length;
      let k = "";
      for (; a.firstChild; )
        a = a.firstChild;
      for (let w = a; !s.isWysiwygDiv(w) && w; w = w.parentNode)
        if (!(w.nodeType !== 1 || s.isBreak(w))) {
          if (k = w.nodeName.toUpperCase(), _.push(k), !c.isReadOnly)
            for (let z = 0, M; z < S; z++)
              M = b[z], v.indexOf(M) === -1 && i[M].active.call(c, w) && v.push(M);
          if (s.isFormatElement(w)) {
            v.indexOf("OUTDENT") === -1 && d.OUTDENT && !s.isImportantDisabled(d.OUTDENT) && (s.isListCell(w) || w.style[o] && s.getNumber(w.style[o], 0) > 0) && (v.push("OUTDENT"), d.OUTDENT.removeAttribute("disabled")), v.indexOf("INDENT") === -1 && d.INDENT && !s.isImportantDisabled(d.INDENT) && (v.push("INDENT"), s.isListCell(w) && !w.previousElementSibling ? d.INDENT.setAttribute("disabled", !0) : d.INDENT.removeAttribute("disabled"));
            continue;
          }
          p && p.test(k) && (v.push(k), s.addClass(d[k], "active"));
        }
      c._setKeyEffect(v), c._variable.currentNodes = _.reverse(), c._variable.currentNodesMap = v, l.showPathLabel && (t.element.navigation.textContent = c._variable.currentNodes.join(" > "));
    },
    _buttonsEventHandler: function(a) {
      let o = a.target;
      if (c._bindControllersOff && a.stopPropagation(), /^(input|textarea|select|option)$/i.test(o.nodeName) ? c._antiBlur = !1 : a.preventDefault(), s.getParentElement(o, ".se-submenu"))
        a.stopPropagation(), c._notHideToolbar = !0;
      else {
        let d = o.getAttribute("data-command"), p = o.className;
        for (; !d && !/se-menu-list/.test(p) && !/sun-editor-common/.test(p); )
          o = o.parentNode, d = o.getAttribute("data-command"), p = o.className;
        (d === c._submenuName || d === c._containerName) && a.stopPropagation();
      }
    },
    onClick_toolbar: function(a) {
      let o = a.target, d = o.getAttribute("data-display"), p = o.getAttribute("data-command"), v = o.className;
      for (c.controllersOff(); o.parentNode && !p && !/se-menu-list/.test(v) && !/se-toolbar/.test(v); )
        o = o.parentNode, p = o.getAttribute("data-command"), d = o.getAttribute("data-display"), v = o.className;
      !p && !d || o.disabled || c.actionCall(p, d, o);
    },
    onMouseDown_wysiwyg: function(a) {
      if (c.isReadOnly || s.isNonEditable(t.element.wysiwyg))
        return;
      if (s._isExcludeSelectionElement(a.target)) {
        a.preventDefault();
        return;
      }
      if (h.setTimeout(c._editorRange.bind(c)), typeof x.onMouseDown == "function" && x.onMouseDown(a, c) === !1)
        return;
      const o = s.getParentElement(a.target, s.isCell);
      if (o) {
        const d = c.plugins.table;
        d && o !== d._fixedCell && !d._shift && c.callPlugin("table", function() {
          d.onTableCellMultiSelect.call(c, o, !1);
        }, null);
      }
      c._isBalloon && g._hideToolbar();
    },
    onClick_wysiwyg: function(a) {
      const o = a.target;
      if (c.isReadOnly)
        return a.preventDefault(), s.isAnchor(o) && h.open(o.href, o.target), !1;
      if (s.isNonEditable(t.element.wysiwyg) || typeof x.onClick == "function" && x.onClick(a, c) === !1)
        return;
      const d = c.getFileComponent(o);
      if (d) {
        a.preventDefault(), c.selectComponent(d.target, d.pluginName);
        return;
      }
      const p = s.getParentElement(o, "FIGCAPTION");
      if (p && s.isNonEditable(p) && (a.preventDefault(), p.focus(), c._isInline && !c._inlineToolbarAttr.isShow)) {
        g._showToolbarInline();
        const S = function() {
          g._hideToolbar(), p.removeEventListener("blur", S);
        };
        p.addEventListener("blur", S);
      }
      if (c._editorRange(), a.detail === 3) {
        let S = c.getRange();
        s.isFormatElement(S.endContainer) && S.endOffset === 0 && (S = c.setRange(S.startContainer, S.startOffset, S.startContainer, S.startContainer.length), c._rangeInfo(S, c.getSelection()));
      }
      const v = c.getSelectionNode(), _ = s.getFormatElement(v, null), b = s.getRangeFormatElement(v, null);
      if (!_ && !s.isNonEditable(o) && !s.isList(b)) {
        const S = c.getRange();
        if (s.getFormatElement(S.startContainer) === s.getFormatElement(S.endContainer))
          if (s.isList(b)) {
            a.preventDefault();
            const k = s.createElement("LI"), w = v.nextElementSibling;
            k.appendChild(v), b.insertBefore(k, w), c.focus();
          } else
            !s.isWysiwygDiv(v) && !s.isComponent(v) && (!s.isTable(v) || s.isCell(v)) && c._setDefaultFormat(s.isRangeFormatElement(b) ? "DIV" : l.defaultTag) !== null ? (a.preventDefault(), c.focus()) : g._applyTagEffects();
      } else
        g._applyTagEffects();
      c._isBalloon && h.setTimeout(g._toggleToolbarBalloon);
    },
    _balloonDelay: null,
    _showToolbarBalloonDelay: function() {
      g._balloonDelay && h.clearTimeout(g._balloonDelay), g._balloonDelay = h.setTimeout((function() {
        h.clearTimeout(this._balloonDelay), this._balloonDelay = null, this._showToolbarBalloon();
      }).bind(g), 350);
    },
    _toggleToolbarBalloon: function() {
      c._editorRange();
      const a = c.getRange();
      c._bindControllersOff || !c._isBalloonAlways && a.collapsed ? g._hideToolbar() : g._showToolbarBalloon(a);
    },
    _showToolbarBalloon: function(a) {
      if (!c._isBalloon)
        return;
      const o = a || c.getRange(), d = t.element.toolbar, p = t.element.topArea, v = c.getSelection();
      let _;
      if (c._isBalloonAlways && o.collapsed)
        _ = !0;
      else if (v.focusNode === v.anchorNode)
        _ = v.focusOffset < v.anchorOffset;
      else {
        const R = s.getListChildNodes(o.commonAncestorContainer, null);
        _ = s.getArrayIndex(R, v.focusNode) < s.getArrayIndex(R, v.anchorNode);
      }
      let b = o.getClientRects();
      b = b[_ ? 0 : b.length - 1];
      const S = c.getGlobalScrollOffset();
      let k = S.left, w = S.top;
      const z = p.offsetWidth, M = g._getEditorOffsets(null), N = M.top, O = M.left;
      if (d.style.top = "-10000px", d.style.visibility = "hidden", d.style.display = "block", !b) {
        const R = c.getSelectionNode();
        if (s.isFormatElement(R)) {
          const Z = s.createTextNode(s.zeroWidthSpace);
          c.insertNode(Z, null, !1), c.setRange(Z, 1, Z, 1), c._editorRange(), b = c.getRange().getClientRects(), b = b[_ ? 0 : b.length - 1];
        }
        if (!b) {
          const Z = s.getOffset(R, t.element.wysiwygFrame);
          b = {
            left: Z.left,
            top: Z.top,
            right: Z.left,
            bottom: Z.top + R.offsetHeight,
            noText: !0
          }, k = 0, w = 0;
        }
        _ = !0;
      }
      const I = h.Math.round(t.element._arrow.offsetWidth / 2), $ = d.offsetWidth, Y = d.offsetHeight, j = /iframe/i.test(t.element.wysiwygFrame.nodeName) ? t.element.wysiwygFrame.getClientRects()[0] : null;
      if (j && (b = {
        left: b.left + j.left,
        top: b.top + j.top,
        right: b.right + j.right - j.width,
        bottom: b.bottom + j.bottom - j.height
      }), g._setToolbarOffset(_, b, d, O, z, k, w, N, I), ($ !== d.offsetWidth || Y !== d.offsetHeight) && g._setToolbarOffset(_, b, d, O, z, k, w, N, I), l.toolbarContainer) {
        const R = p.parentElement;
        let Z = l.toolbarContainer, W = Z.offsetLeft, H = Z.offsetTop;
        for (; !Z.parentElement.contains(R) || !/^(BODY|HTML)$/i.test(Z.parentElement.nodeName); )
          Z = Z.offsetParent, W += Z.offsetLeft, H += Z.offsetTop;
        d.style.left = d.offsetLeft - W + p.offsetLeft + "px", d.style.top = d.offsetTop - H + p.offsetTop + "px";
      }
      d.style.visibility = "";
    },
    _setToolbarOffset: function(a, o, d, p, v, _, b, S, k) {
      const z = d.offsetWidth, M = o.noText && !a ? 0 : d.offsetHeight, N = (a ? o.left : o.right) - p - z / 2 + _, O = N + z - v;
      let I = (a ? o.top - M - k : o.bottom + k) - (o.noText ? 0 : S) + b, $ = N < 0 ? 1 : O < 0 ? N : N - O - 1 - 1, Y = !1;
      const j = I + (a ? g._getEditorOffsets(null).top : d.offsetHeight - t.element.wysiwyg.offsetHeight);
      !a && j > 0 && g._getPageBottomSpace() < j ? (a = !0, Y = !0) : a && u.documentElement.offsetTop > j && (a = !1, Y = !0), Y && (I = (a ? o.top - M - k : o.bottom + k) - (o.noText ? 0 : S) + b), d.style.left = h.Math.floor($) + "px", d.style.top = h.Math.floor(I) + "px", a ? (s.removeClass(t.element._arrow, "se-arrow-up"), s.addClass(t.element._arrow, "se-arrow-down"), t.element._arrow.style.top = M + "px") : (s.removeClass(t.element._arrow, "se-arrow-down"), s.addClass(t.element._arrow, "se-arrow-up"), t.element._arrow.style.top = -k + "px");
      const R = h.Math.floor(z / 2 + (N - $));
      t.element._arrow.style.left = (R + k > d.offsetWidth ? d.offsetWidth - k : R < k ? k : R) + "px";
    },
    _showToolbarInline: function() {
      if (!c._isInline)
        return;
      const a = t.element.toolbar;
      l.toolbarContainer ? a.style.position = "relative" : a.style.position = "absolute", a.style.visibility = "hidden", a.style.display = "block", c._inlineToolbarAttr.width = a.style.width = l.toolbarWidth, c._inlineToolbarAttr.top = a.style.top = (l.toolbarContainer ? 0 : -1 - a.offsetHeight) + "px", typeof x.showInline == "function" && x.showInline(a, t, c), g.onScroll_window(), c._inlineToolbarAttr.isShow = !0, a.style.visibility = "";
    },
    _hideToolbar: function() {
      !c._notHideToolbar && !c._variable.isFullScreen && (t.element.toolbar.style.display = "none", c._inlineToolbarAttr.isShow = !1);
    },
    onInput_wysiwyg: function(a) {
      if (c.isReadOnly || c.isDisabled)
        return a.preventDefault(), a.stopPropagation(), c.history.go(c.history.getCurrentIndex()), !1;
      c._editorRange();
      const o = (a.data === null ? "" : a.data === void 0 ? " " : a.data) || "";
      if (!c._charCount(o))
        return a.preventDefault(), a.stopPropagation(), !1;
      typeof x.onInput == "function" && x.onInput(a, c) === !1 || c.history.push(!0);
    },
    _isUneditableNode: function(a, o) {
      const d = o ? a.startContainer : a.endContainer, p = o ? a.startOffset : a.endOffset, v = o ? "previousSibling" : "nextSibling", _ = d.nodeType === 1;
      let b;
      return _ ? (b = g._isUneditableNode_getSibling(d.childNodes[p], v, d), b && b.nodeType === 1 && b.getAttribute("contenteditable") === "false") : (b = g._isUneditableNode_getSibling(d, v, d), c.isEdgePoint(d, p, o ? "front" : "end") && b && b.nodeType === 1 && b.getAttribute("contenteditable") === "false");
    },
    _isUneditableNode_getSibling: function(a, o, d) {
      if (!a)
        return null;
      let p = a[o];
      if (!p)
        if (p = s.getFormatElement(d), p = p ? p[o] : null, p && !s.isComponent(p))
          p = o === "previousSibling" ? p.firstChild : p.lastChild;
        else
          return null;
      return p;
    },
    _onShortcutKey: !1,
    onKeyDown_wysiwyg: function(a) {
      let o = c.getSelectionNode();
      if (s.isInputElement(o))
        return;
      const d = a.keyCode, p = a.shiftKey, v = a.ctrlKey || a.metaKey || d === 91 || d === 92 || d === 224, _ = a.altKey;
      if (g._IEisComposing = d === 229, !v && c.isReadOnly && !g._cursorMoveKeyCode.test(d))
        return a.preventDefault(), !1;
      if (c.submenuOff(), c._isBalloon && g._hideToolbar(), typeof x.onKeyDown == "function" && x.onKeyDown(a, c) === !1)
        return;
      if (v && g._shortcutCommand(d, p))
        return g._onShortcutKey = !0, a.preventDefault(), a.stopPropagation(), !1;
      g._onShortcutKey && (g._onShortcutKey = !1);
      const b = c.getRange(), S = !b.collapsed || b.startContainer !== b.endContainer, k = c._fileManager.pluginRegExp.test(c.currentControllerName) ? c.currentControllerName : "";
      let w = s.getFormatElement(o, null) || o, z = s.getRangeFormatElement(w, null);
      switch (d) {
        case 8:
          if (!S && k) {
            a.preventDefault(), a.stopPropagation(), c.plugins[k].destroy.call(c);
            break;
          }
          if (S && g._hardDelete()) {
            a.preventDefault(), a.stopPropagation();
            break;
          }
          if (!s.isFormatElement(w) && !t.element.wysiwyg.firstElementChild && !s.isComponent(o) && c._setDefaultFormat(l.defaultTag) !== null)
            return a.preventDefault(), a.stopPropagation(), !1;
          if (!S && !w.previousElementSibling && b.startOffset === 0 && !o.previousSibling && !s.isListCell(w) && s.isFormatElement(w) && (!s.isFreeFormatElement(w) || s.isClosureFreeFormatElement(w))) {
            if (s.isClosureRangeFormatElement(w.parentNode))
              return a.preventDefault(), a.stopPropagation(), !1;
            if (s.isWysiwygDiv(w.parentNode) && w.childNodes.length <= 1 && (!w.firstChild || s.onlyZeroWidthSpace(w.textContent))) {
              if (a.preventDefault(), a.stopPropagation(), w.nodeName.toUpperCase() === l.defaultTag.toUpperCase()) {
                w.innerHTML = "<br>";
                const H = w.attributes;
                for (; H[0]; )
                  w.removeAttribute(H[0].name);
              } else {
                const H = s.createElement(l.defaultTag);
                H.innerHTML = "<br>", w.parentElement.replaceChild(H, w);
              }
              return c.nativeFocus(), !1;
            }
          }
          const M = b.startContainer;
          if (w && !w.previousElementSibling && b.startOffset === 0 && M.nodeType === 3 && !s.isFormatElement(M.parentNode)) {
            let H = M.parentNode.previousSibling;
            const q = M.parentNode.nextSibling;
            H || (q ? H = q : (H = s.createElement("BR"), w.appendChild(H)));
            let P = M;
            for (; w.contains(P) && !P.previousSibling; )
              P = P.parentNode;
            if (!w.contains(P)) {
              M.textContent = "", s.removeItemAllParents(M, null, w);
              break;
            }
          }
          if (g._isUneditableNode(b, !0)) {
            a.preventDefault(), a.stopPropagation();
            break;
          }
          !S && c._isEdgeFormat(b.startContainer, b.startOffset, "start") && s.isFormatElement(w.previousElementSibling) && (c._formatAttrsTemp = w.previousElementSibling.attributes);
          const N = b.commonAncestorContainer;
          if (w = s.getFormatElement(b.startContainer, null), z = s.getRangeFormatElement(w, null), z && w && !s.isCell(z) && !/^FIGCAPTION$/i.test(z.nodeName)) {
            if (s.isListCell(w) && s.isList(z) && (s.isListCell(z.parentNode) || w.previousElementSibling) && (o === w || o.nodeType === 3 && (!o.previousSibling || s.isList(o.previousSibling))) && (s.getFormatElement(b.startContainer, null) !== s.getFormatElement(b.endContainer, null) ? z.contains(b.startContainer) : b.startOffset === 0 && b.collapsed)) {
              if (b.startContainer !== b.endContainer)
                a.preventDefault(), c.removeNode(), b.startContainer.nodeType === 3 && c.setRange(b.startContainer, b.startContainer.textContent.length, b.startContainer, b.startContainer.textContent.length), c.history.push(!0);
              else {
                let H = w.previousElementSibling || z.parentNode;
                if (s.isListCell(H)) {
                  a.preventDefault();
                  let q = H;
                  if (!H.contains(w) && s.isListCell(q) && s.isList(q.lastElementChild)) {
                    for (q = q.lastElementChild.lastElementChild; s.isListCell(q) && s.isList(q.lastElementChild); )
                      q = q.lastElementChild && q.lastElementChild.lastElementChild;
                    H = q;
                  }
                  let P = H === z.parentNode ? z.previousSibling : H.lastChild;
                  P || (P = s.createTextNode(s.zeroWidthSpace), z.parentNode.insertBefore(P, z.parentNode.firstChild));
                  const V = P.nodeType === 3 ? P.textContent.length : 1, X = w.childNodes;
                  let le = P, te = X[0];
                  for (; te = X[0]; )
                    H.insertBefore(te, le.nextSibling), le = te;
                  s.removeItem(w), z.children.length === 0 && s.removeItem(z), c.setRange(P, V, P, V), c.history.push(!0);
                }
              }
              break;
            }
            if (!S && b.startOffset === 0) {
              let H = !0, q = N;
              for (; q && q !== z && !s.isWysiwygDiv(q); ) {
                if (q.previousSibling && (q.previousSibling.nodeType === 1 || !s.onlyZeroWidthSpace(q.previousSibling.textContent.trim()))) {
                  H = !1;
                  break;
                }
                q = q.parentNode;
              }
              if (H && z.parentNode) {
                a.preventDefault(), c.detachRangeFormatElement(z, s.isListCell(w) ? [w] : null, null, !1, !1), c.history.push(!0);
                break;
              }
            }
          }
          if (!S && w && (b.startOffset === 0 || o === w && w.childNodes[b.startOffset])) {
            const H = o === w ? w.childNodes[b.startOffset] : o, q = w.previousSibling, P = (N.nodeType === 3 || s.isBreak(N)) && !N.previousSibling && b.startOffset === 0;
            if (H && !H.previousSibling && (N && s.isComponent(N.previousSibling) || P && s.isComponent(q))) {
              const V = c.getFileComponent(q);
              V ? (a.preventDefault(), a.stopPropagation(), w.textContent.length === 0 && s.removeItem(w), c.selectComponent(V.target, V.pluginName) === !1 && c.blur()) : s.isComponent(q) && (a.preventDefault(), a.stopPropagation(), s.removeItem(q));
              break;
            }
            if (H && s.isNonEditable(H.previousSibling)) {
              a.preventDefault(), a.stopPropagation(), s.removeItem(H.previousSibling);
              break;
            }
          }
          break;
        case 46:
          if (k) {
            a.preventDefault(), a.stopPropagation(), c.plugins[k].destroy.call(c);
            break;
          }
          if (S && g._hardDelete()) {
            a.preventDefault(), a.stopPropagation();
            break;
          }
          if (g._isUneditableNode(b, !1)) {
            a.preventDefault(), a.stopPropagation();
            break;
          }
          if ((s.isFormatElement(o) || o.nextSibling === null || s.onlyZeroWidthSpace(o.nextSibling) && o.nextSibling.nextSibling === null) && b.startOffset === o.textContent.length) {
            const H = w.nextElementSibling;
            if (!H)
              break;
            if (s.isComponent(H)) {
              if (a.preventDefault(), s.onlyZeroWidthSpace(w) && (s.removeItem(w), s.isTable(H))) {
                let P = s.getChildElement(H, s.isCell, !1);
                P = P.firstElementChild || P, c.setRange(P, 0, P, 0);
                break;
              }
              const q = c.getFileComponent(H);
              q ? (a.stopPropagation(), c.selectComponent(q.target, q.pluginName) === !1 && c.blur()) : s.isComponent(H) && (a.stopPropagation(), s.removeItem(H));
              break;
            }
          }
          if (!S && (c.isEdgePoint(b.endContainer, b.endOffset) || o === w && w.childNodes[b.startOffset])) {
            const H = o === w && w.childNodes[b.startOffset] || o;
            if (H && s.isNonEditable(H.nextSibling)) {
              a.preventDefault(), a.stopPropagation(), s.removeItem(H.nextSibling);
              break;
            } else if (s.isComponent(H)) {
              a.preventDefault(), a.stopPropagation(), s.removeItem(H);
              break;
            }
          }
          if (!S && c._isEdgeFormat(b.endContainer, b.endOffset, "end") && s.isFormatElement(w.nextElementSibling) && (c._formatAttrsTemp = w.attributes), w = s.getFormatElement(b.startContainer, null), z = s.getRangeFormatElement(w, null), s.isListCell(w) && s.isList(z) && (o === w || o.nodeType === 3 && (!o.nextSibling || s.isList(o.nextSibling)) && (s.getFormatElement(b.startContainer, null) !== s.getFormatElement(b.endContainer, null) ? z.contains(b.endContainer) : b.endOffset === o.textContent.length && b.collapsed))) {
            b.startContainer !== b.endContainer && c.removeNode();
            let H = s.getArrayItem(w.children, s.isList, !1);
            if (H = H || w.nextElementSibling || z.parentNode.nextElementSibling, H && (s.isList(H) || s.getArrayItem(H.children, s.isList, !1))) {
              a.preventDefault();
              let q, P;
              if (s.isList(H)) {
                const V = H.firstElementChild;
                for (P = V.childNodes, q = P[0]; P[0]; )
                  w.insertBefore(P[0], H);
                s.removeItem(V);
              } else {
                for (q = H.firstChild, P = H.childNodes; P[0]; )
                  w.appendChild(P[0]);
                s.removeItem(H);
              }
              c.setRange(q, 0, q, 0), c.history.push(!0);
            }
            break;
          }
          break;
        case 9:
          if (k || l.tabDisable || (a.preventDefault(), v || _ || s.isWysiwygDiv(o)))
            break;
          const O = !b.collapsed || c.isEdgePoint(b.startContainer, b.startOffset), I = c.getSelectedElements(null);
          o = c.getSelectionNode();
          const $ = [];
          let Y = [], j = s.isListCell(I[0]), R = s.isListCell(I[I.length - 1]), Z = { sc: b.startContainer, so: b.startOffset, ec: b.endContainer, eo: b.endOffset };
          for (let H = 0, q = I.length, P; H < q; H++)
            if (P = I[H], s.isListCell(P)) {
              if (!P.previousElementSibling && !p)
                continue;
              $.push(P);
            } else
              Y.push(P);
          if ($.length > 0 && O && c.plugins.list)
            Z = c.plugins.list.editInsideList.call(c, p, $);
          else {
            const H = s.getParentElement(o, s.isCell);
            if (H && O) {
              const q = s.getParentElement(H, "table"), P = s.getListChildren(q, s.isCell);
              let V = p ? s.prevIdx(P, H) : s.nextIdx(P, H);
              V === P.length && !p && (V = 0), V === -1 && p && (V = P.length - 1);
              let X = P[V];
              if (!X)
                break;
              X = X.firstElementChild || X, c.setRange(X, 0, X, 0);
              break;
            }
            Y = Y.concat($), j = R = null;
          }
          if (Y.length > 0)
            if (p) {
              const H = Y.length - 1;
              for (let V = 0, X; V <= H; V++) {
                X = Y[V].childNodes;
                for (let le = 0, te = X.length, se; le < te && (se = X[le], !!se); le++)
                  if (!s.onlyZeroWidthSpace(se)) {
                    /^\s{1,4}$/.test(se.textContent) ? s.removeItem(se) : /^\s{1,4}/.test(se.textContent) && (se.textContent = se.textContent.replace(/^\s{1,4}/, ""));
                    break;
                  }
              }
              const q = s.getChildElement(Y[0], "text", !1), P = s.getChildElement(Y[H], "text", !0);
              !j && q && (Z.sc = q, Z.so = 0), !R && P && (Z.ec = P, Z.eo = P.textContent.length);
            } else {
              const H = s.createTextNode(new h.Array(c._variable.tabSize + 1).join(" "));
              if (Y.length === 1) {
                const q = c.insertNode(H, null, !0);
                if (!q)
                  return !1;
                j || (Z.sc = H, Z.so = q.endOffset), R || (Z.ec = H, Z.eo = q.endOffset);
              } else {
                const q = Y.length - 1;
                for (let X = 0, le; X <= q; X++)
                  le = Y[X].firstChild, le && (s.isBreak(le) ? Y[X].insertBefore(H.cloneNode(!1), le) : le.textContent = H.textContent + le.textContent);
                const P = s.getChildElement(Y[0], "text", !1), V = s.getChildElement(Y[q], "text", !0);
                !j && P && (Z.sc = P, Z.so = 0), !R && V && (Z.ec = V, Z.eo = V.textContent.length);
              }
            }
          c.setRange(Z.sc, Z.so, Z.ec, Z.eo), c.history.push(!1);
          break;
        case 13:
          const W = s.getFreeFormatElement(o, null);
          if (c._charTypeHTML) {
            let H = "";
            if (!p && W || p ? H = "<br>" : H = "<" + w.nodeName + "><br></" + w.nodeName + ">", !c.checkCharCount(H, "byte-html"))
              return a.preventDefault(), !1;
          }
          if (!p) {
            const H = c._isEdgeFormat(b.endContainer, b.endOffset, "end"), q = c._isEdgeFormat(b.startContainer, b.startOffset, "start");
            if (H && (/^H[1-6]$/i.test(w.nodeName) || /^HR$/i.test(w.nodeName))) {
              a.preventDefault();
              let P = null;
              const V = c.appendFormatTag(w, l.defaultTag);
              if (H && H.length > 0) {
                P = H.pop();
                const X = P;
                for (; H.length > 0; )
                  P = P.appendChild(H.pop());
                V.appendChild(X);
              }
              P = P ? P.appendChild(V.firstChild) : V.firstChild, c.setRange(P, 0, P, 0);
              break;
            } else if (z && w && !s.isCell(z) && !/^FIGCAPTION$/i.test(z.nodeName)) {
              const P = c.getRange();
              if (c.isEdgePoint(P.endContainer, P.endOffset) && s.isList(o.nextSibling)) {
                a.preventDefault();
                const V = s.createElement("LI"), X = s.createElement("BR");
                V.appendChild(X), w.parentNode.insertBefore(V, w.nextElementSibling), V.appendChild(o.nextSibling), c.setRange(X, 1, X, 1);
                break;
              }
              if ((P.commonAncestorContainer.nodeType !== 3 || !P.commonAncestorContainer.nextElementSibling) && s.onlyZeroWidthSpace(w.innerText.trim()) && !s.isListCell(w.nextElementSibling)) {
                a.preventDefault();
                let V = null;
                if (s.isListCell(z.parentNode)) {
                  if (z = w.parentNode.parentNode.parentNode, V = s.splitElement(w, null, s.getElementDepth(w) - 2), !V) {
                    const X = s.createElement("LI");
                    X.innerHTML = "<br>", s.copyTagAttributes(X, w, l.lineAttrReset), z.insertBefore(X, V), V = X;
                  }
                } else {
                  const X = s.isCell(z.parentNode) ? "DIV" : s.isList(z.parentNode) ? "LI" : s.isFormatElement(z.nextElementSibling) && !s.isRangeFormatElement(z.nextElementSibling) ? z.nextElementSibling.nodeName : s.isFormatElement(z.previousElementSibling) && !s.isRangeFormatElement(z.previousElementSibling) ? z.previousElementSibling.nodeName : l.defaultTag;
                  V = s.createElement(X), s.copyTagAttributes(V, w, l.lineAttrReset);
                  const le = c.detachRangeFormatElement(z, [w], null, !0, !0);
                  le.cc.insertBefore(V, le.ec);
                }
                V.innerHTML = "<br>", s.removeItemAllParents(w, null, null), c.setRange(V, 1, V, 1);
                break;
              }
            }
            if (W) {
              a.preventDefault();
              const P = o === W, V = c.getSelection(), X = o.childNodes, le = V.focusOffset, te = o.previousElementSibling, se = o.nextSibling;
              if (!s.isClosureFreeFormatElement(W) && X && (P && b.collapsed && X.length - 1 <= le + 1 && s.isBreak(X[le]) && (!X[le + 1] || (!X[le + 2] || s.onlyZeroWidthSpace(X[le + 2].textContent)) && X[le + 1].nodeType === 3 && s.onlyZeroWidthSpace(X[le + 1].textContent)) && le > 0 && s.isBreak(X[le - 1]) || !P && s.onlyZeroWidthSpace(o.textContent) && s.isBreak(te) && (s.isBreak(te.previousSibling) || !s.onlyZeroWidthSpace(te.previousSibling.textContent)) && (!se || !s.isBreak(se) && s.onlyZeroWidthSpace(se.textContent)))) {
                P ? s.removeItem(X[le - 1]) : s.removeItem(o);
                const ne = c.appendFormatTag(W, s.isFormatElement(W.nextElementSibling) && !s.isRangeFormatElement(W.nextElementSibling) ? W.nextElementSibling : null);
                s.copyFormatAttributes(ne, W), c.setRange(ne, 1, ne, 1);
                break;
              }
              if (P) {
                x.insertHTML(b.collapsed && s.isBreak(b.startContainer.childNodes[b.startOffset - 1]) ? "<br>" : "<br><br>", !0, !1);
                let ne = V.focusNode;
                const J = V.focusOffset;
                W === ne && (ne = ne.childNodes[J - le > 1 ? J - 1 : J]), c.setRange(ne, 1, ne, 1);
              } else {
                const ne = V.focusNode.nextSibling, J = s.createElement("BR");
                c.insertNode(J, null, !1);
                const ce = J.previousSibling, fe = J.nextSibling;
                !s.isBreak(ne) && !s.isBreak(ce) && (!fe || s.onlyZeroWidthSpace(fe)) ? (J.parentNode.insertBefore(J.cloneNode(!1), J), c.setRange(J, 1, J, 1)) : c.setRange(fe, 0, fe, 0);
              }
              g._onShortcutKey = !0;
              break;
            }
            if (b.collapsed && (q || H)) {
              a.preventDefault();
              const P = s.createElement("BR"), V = s.createElement(w.nodeName);
              s.copyTagAttributes(V, w, l.lineAttrReset);
              let X = P;
              do {
                if (!s.isBreak(o) && o.nodeType === 1) {
                  const le = o.cloneNode(!1);
                  le.appendChild(X), X = le;
                }
                o = o.parentNode;
              } while (w !== o && w.contains(o));
              V.appendChild(X), w.parentNode.insertBefore(V, q && !H ? w : w.nextElementSibling), H && c.setRange(P, 1, P, 1);
              break;
            }
            if (w) {
              a.stopPropagation();
              let P, V = 0;
              if (b.collapsed)
                s.onlyZeroWidthSpace(w) ? P = c.appendFormatTag(w, w.cloneNode(!1)) : P = s.splitElement(b.endContainer, b.endOffset, s.getElementDepth(w));
              else {
                const X = s.getFormatElement(b.startContainer, null) !== s.getFormatElement(b.endContainer, null), le = w.cloneNode(!1);
                le.innerHTML = "<br>";
                const te = c.removeNode();
                if (P = s.getFormatElement(te.container, null), !P) {
                  s.isWysiwygDiv(te.container) && (a.preventDefault(), t.element.wysiwyg.appendChild(le), P = le, s.copyTagAttributes(P, w, l.lineAttrReset), c.setRange(P, V, P, V));
                  break;
                }
                const se = s.getRangeFormatElement(te.container);
                if (P = P.contains(se) ? s.getChildElement(se, s.getFormatElement.bind(s)) : P, X) {
                  if (H && !q)
                    P.parentNode.insertBefore(le, !te.prevContainer || te.container === te.prevContainer ? P.nextElementSibling : P), P = le, V = 0;
                  else if (V = te.offset, q) {
                    const ne = P.parentNode.insertBefore(le, P);
                    H && (P = ne, V = 0);
                  }
                } else
                  H && q ? (P.parentNode.insertBefore(le, te.prevContainer && te.container === te.prevContainer ? P.nextElementSibling : P), P = le, V = 0) : P = s.splitElement(te.container, te.offset, s.getElementDepth(w));
              }
              a.preventDefault(), s.copyTagAttributes(P, w, l.lineAttrReset), c.setRange(P, V, P, V);
              break;
            }
          }
          if (S)
            break;
          if (z && s.getParentElement(z, "FIGCAPTION") && s.getParentElement(z, s.isList) && (a.preventDefault(), w = c.appendFormatTag(w, null), c.setRange(w, 0, w, 0)), k) {
            a.preventDefault(), a.stopPropagation();
            const H = t[k], q = H._container, P = q.previousElementSibling || q.nextElementSibling;
            let V = null;
            s.isListCell(q.parentNode) ? V = s.createElement("BR") : (V = s.createElement(s.isFormatElement(P) && !s.isRangeFormatElement(P) ? P.nodeName : l.defaultTag), V.innerHTML = "<br>"), q.parentNode.insertBefore(V, q), c.callPlugin(k, function() {
              c.selectComponent(H._element, k) === !1 && c.blur();
            }, null);
          }
          break;
        case 27:
          if (k)
            return a.preventDefault(), a.stopPropagation(), c.controllersOff(), !1;
          break;
      }
      if (p && d === 16) {
        a.preventDefault(), a.stopPropagation();
        const M = c.plugins.table;
        if (M && !M._shift && !M._ref) {
          const N = s.getParentElement(w, s.isCell);
          if (N) {
            M.onTableCellMultiSelect.call(c, N, !0);
            return;
          }
        }
      } else if (p && (s.isOSX_IOS ? _ : v) && d === 32) {
        a.preventDefault(), a.stopPropagation();
        const M = c.insertNode(s.createTextNode(" "));
        if (M && M.container) {
          c.setRange(M.container, M.endOffset, M.container, M.endOffset);
          return;
        }
      }
      if (s.isIE && !v && !_ && !S && !g._nonTextKeyCode.test(d) && s.isBreak(b.commonAncestorContainer)) {
        const M = s.createTextNode(s.zeroWidthSpace);
        c.insertNode(M, null, !1), c.setRange(M, 1, M, 1);
      }
      g._directionKeyCode.test(d) && (c._editorRange(), g._applyTagEffects());
    },
    onKeyUp_wysiwyg: function(a) {
      if (g._onShortcutKey)
        return;
      c._editorRange();
      const o = a.keyCode, d = a.ctrlKey || a.metaKey || o === 91 || o === 92 || o === 224, p = a.altKey;
      if (c.isReadOnly) {
        !d && g._cursorMoveKeyCode.test(o) && g._applyTagEffects();
        return;
      }
      const v = c.getRange();
      let _ = c.getSelectionNode();
      if (c._isBalloon && (c._isBalloonAlways && o !== 27 || !v.collapsed))
        if (c._isBalloonAlways)
          o !== 27 && g._showToolbarBalloonDelay();
        else {
          g._showToolbarBalloon();
          return;
        }
      if (o === 8 && s.isWysiwygDiv(_) && _.textContent === "" && _.children.length === 0) {
        a.preventDefault(), a.stopPropagation(), _.innerHTML = "";
        const z = s.createElement(s.isFormatElement(c._variable.currentNodes[0]) ? c._variable.currentNodes[0] : l.defaultTag);
        z.innerHTML = "<br>", _.appendChild(z), c.setRange(z, 0, z, 0), g._applyTagEffects(), c.history.push(!1);
        return;
      }
      const b = s.getFormatElement(_, null), S = s.getRangeFormatElement(_, null), k = c._formatAttrsTemp;
      if (k) {
        for (let z = 0, M = k.length; z < M; z++) {
          if (o === 13 && /^id$/i.test(k[z].name)) {
            b.removeAttribute("id");
            continue;
          }
          b.setAttribute(k[z].name, k[z].value);
        }
        c._formatAttrsTemp = null;
      }
      if (!b && v.collapsed && !s.isComponent(_) && !s.isList(_) && c._setDefaultFormat(s.isRangeFormatElement(S) ? "DIV" : l.defaultTag) !== null && (_ = c.getSelectionNode()), !d && !p && !g._nonTextKeyCode.test(o) && _.nodeType === 3 && s.zeroWidthRegExp.test(_.textContent) && !(a.isComposing !== void 0 ? a.isComposing : g._IEisComposing)) {
        let z = v.startOffset, M = v.endOffset;
        const N = (_.textContent.substring(0, M).match(g._frontZeroWidthReg) || "").length;
        z = v.startOffset - N, M = v.endOffset - N, _.textContent = _.textContent.replace(s.zeroWidthRegExp, ""), c.setRange(_, z < 0 ? 0 : z, _, M < 0 ? 0 : M);
      }
      c._charCount(""), !(typeof x.onKeyUp == "function" && x.onKeyUp(a, c) === !1) && !d && !p && !g._historyIgnoreKeyCode.test(o) && c.history.push(!0);
    },
    onScroll_wysiwyg: function(a) {
      c.controllersOff(), c._isBalloon && g._hideToolbar(), typeof x.onScroll == "function" && x.onScroll(a, c);
    },
    onFocus_wysiwyg: function(a) {
      c._antiBlur || (c.hasFocus = !0, h.setTimeout(g._applyTagEffects), c._isInline && g._showToolbarInline(), typeof x.onFocus == "function" && x.onFocus(a, c));
    },
    onBlur_wysiwyg: function(a) {
      c._antiBlur || c._variable.isCodeView || (c.hasFocus = !1, c.effectNode = null, c.controllersOff(), (c._isInline || c._isBalloon) && g._hideToolbar(), c._setKeyEffect([]), c._variable.currentNodes = [], c._variable.currentNodesMap = [], l.showPathLabel && (t.element.navigation.textContent = ""), typeof x.onBlur == "function" && x.onBlur(a, c, this));
    },
    onMouseDown_resizingBar: function(a) {
      a.stopPropagation(), c.submenuOff(), c.controllersOff(), c._variable.resizeClientY = a.clientY, t.element.resizeBackground.style.display = "block";
      function o() {
        t.element.resizeBackground.style.display = "none", u.removeEventListener("mousemove", g._resize_editor), u.removeEventListener("mouseup", o);
      }
      u.addEventListener("mousemove", g._resize_editor), u.addEventListener("mouseup", o);
    },
    _resize_editor: function(a) {
      const o = t.element.editorArea.offsetHeight + (a.clientY - c._variable.resizeClientY), d = o < c._variable.minResizingSize ? c._variable.minResizingSize : o;
      t.element.wysiwygFrame.style.height = t.element.code.style.height = d + "px", c._variable.resizeClientY = a.clientY, s.isResizeObserverSupported || c.__callResizeFunction(d, null);
    },
    onResize_window: function() {
      s.isResizeObserverSupported || c.resetResponsiveToolbar();
      const a = t.element.toolbar, o = a.style.display === "none" || c._isInline && !c._inlineToolbarAttr.isShow;
      if (!(a.offsetWidth === 0 && !o)) {
        if (t.fileBrowser && t.fileBrowser.area.style.display === "block" && (t.fileBrowser.body.style.maxHeight = h.innerHeight - t.fileBrowser.header.offsetHeight - 50 + "px"), c.submenuActiveButton && c.submenu && c._setMenuPosition(c.submenuActiveButton, c.submenu), c._variable.isFullScreen) {
          c._variable.innerHeight_fullScreen += h.innerHeight - a.offsetHeight - c._variable.innerHeight_fullScreen, t.element.editorArea.style.height = c._variable.innerHeight_fullScreen + "px";
          return;
        }
        if (c._variable.isCodeView && c._isInline) {
          g._showToolbarInline();
          return;
        }
        c._iframeAutoHeight(), c._sticky && (a.style.width = t.element.topArea.offsetWidth - 2 + "px", g.onScroll_window());
      }
    },
    onScroll_window: function() {
      if (c._variable.isFullScreen || t.element.toolbar.offsetWidth === 0 || l.stickyToolbar < 0)
        return;
      const a = t.element, o = a.editorArea.offsetHeight, d = (this.scrollY || u.documentElement.scrollTop) + l.stickyToolbar, p = g._getEditorOffsets(l.toolbarContainer).top - (c._isInline ? a.toolbar.offsetHeight : 0), v = c._isInline && d - p > 0 ? d - p - t.element.toolbar.offsetHeight : 0;
      d < p ? g._offStickyToolbar() : d + c._variable.minResizingSize >= o + p ? (c._sticky || g._onStickyToolbar(v), a.toolbar.style.top = v + o + p + l.stickyToolbar - d - c._variable.minResizingSize + "px") : d >= p && g._onStickyToolbar(v);
    },
    _getEditorOffsets: function(a) {
      let o = a || t.element.topArea, d = 0, p = 0, v = 0;
      for (; o; )
        d += o.offsetTop, p += o.offsetLeft, v += o.scrollTop, o = o.offsetParent;
      return {
        top: d,
        left: p,
        scroll: v
      };
    },
    _getPageBottomSpace: function() {
      return u.documentElement.scrollHeight - (g._getEditorOffsets(null).top + t.element.topArea.offsetHeight);
    },
    _onStickyToolbar: function(a) {
      const o = t.element;
      !c._isInline && !l.toolbarContainer && (o._stickyDummy.style.height = o.toolbar.offsetHeight + "px", o._stickyDummy.style.display = "block"), o.toolbar.style.top = l.stickyToolbar + a + "px", o.toolbar.style.width = c._isInline ? c._inlineToolbarAttr.width : o.toolbar.offsetWidth + "px", s.addClass(o.toolbar, "se-toolbar-sticky"), c._sticky = !0;
    },
    _offStickyToolbar: function() {
      const a = t.element;
      a._stickyDummy.style.display = "none", a.toolbar.style.top = c._isInline ? c._inlineToolbarAttr.top : "", a.toolbar.style.width = c._isInline ? c._inlineToolbarAttr.width : "", a.editorArea.style.marginTop = "", s.removeClass(a.toolbar, "se-toolbar-sticky"), c._sticky = !1;
    },
    _codeViewAutoHeight: function() {
      c._variable.isFullScreen || (t.element.code.style.height = t.element.code.scrollHeight + "px");
    },
    // FireFox - table delete, Chrome - image, video, audio
    _hardDelete: function() {
      const a = c.getRange(), o = a.startContainer, d = a.endContainer, p = s.getRangeFormatElement(o), v = s.getRangeFormatElement(d), _ = s.isCell(p), b = s.isCell(v), S = a.commonAncestorContainer;
      if ((_ && !p.previousElementSibling && !p.parentElement.previousElementSibling || b && !v.nextElementSibling && !v.parentElement.nextElementSibling) && p !== v)
        if (!_)
          s.removeItem(s.getParentElement(v, function(z) {
            return S === z.parentNode;
          }));
        else if (!b)
          s.removeItem(s.getParentElement(p, function(z) {
            return S === z.parentNode;
          }));
        else
          return s.removeItem(s.getParentElement(p, function(z) {
            return S === z.parentNode;
          })), c.nativeFocus(), !0;
      const k = o.nodeType === 1 ? s.getParentElement(o, ".se-component") : null, w = d.nodeType === 1 ? s.getParentElement(d, ".se-component") : null;
      return k && s.removeItem(k), w && s.removeItem(w), !1;
    },
    onPaste_wysiwyg: function(a) {
      const o = s.isIE ? h.clipboardData : a.clipboardData;
      return o ? g._dataTransferAction("paste", a, o) : !0;
    },
    _setClipboardComponent: function(a, o, d) {
      a.preventDefault(), a.stopPropagation(), d.setData("text/html", o.component.outerHTML);
    },
    onCopy_wysiwyg: function(a) {
      const o = s.isIE ? h.clipboardData : a.clipboardData;
      if (typeof x.onCopy == "function" && x.onCopy(a, o, c) === !1)
        return a.preventDefault(), a.stopPropagation(), !1;
      const d = c.currentFileComponentInfo;
      d && !s.isIE && (g._setClipboardComponent(a, d, o), s.addClass(d.component, "se-component-copy"), h.setTimeout(function() {
        s.removeClass(d.component, "se-component-copy");
      }, 150));
    },
    onSave_wysiwyg: function(a) {
      if (typeof x.onSave == "function") {
        x.onSave(a, c);
        return;
      }
    },
    onCut_wysiwyg: function(a) {
      const o = s.isIE ? h.clipboardData : a.clipboardData;
      if (typeof x.onCut == "function" && x.onCut(a, o, c) === !1)
        return a.preventDefault(), a.stopPropagation(), !1;
      const d = c.currentFileComponentInfo;
      d && !s.isIE && (g._setClipboardComponent(a, d, o), s.removeItem(d.component), c.controllersOff()), h.setTimeout(function() {
        c.history.push(!1);
      });
    },
    onDrop_wysiwyg: function(a) {
      if (c.isReadOnly || s.isIE)
        return a.preventDefault(), a.stopPropagation(), !1;
      const o = a.dataTransfer;
      return o ? (c.removeNode(), g._setDropLocationSelection(a), g._dataTransferAction("drop", a, o)) : !0;
    },
    _setDropLocationSelection: function(a) {
      if (a.rangeParent)
        c.setRange(a.rangeParent, a.rangeOffset, a.rangeParent, a.rangeOffset);
      else if (c._wd.caretRangeFromPoint) {
        const o = c._wd.caretRangeFromPoint(a.clientX, a.clientY);
        c.setRange(o.startContainer, o.startOffset, o.endContainer, o.endOffset);
      } else {
        const o = c.getRange();
        c.setRange(o.startContainer, o.startOffset, o.endContainer, o.endOffset);
      }
    },
    _dataTransferAction: function(a, o, d) {
      let p, v;
      if (s.isIE) {
        p = d.getData("Text");
        const _ = c.getRange(), b = s.createElement("DIV"), S = {
          sc: _.startContainer,
          so: _.startOffset,
          ec: _.endContainer,
          eo: _.endOffset
        };
        return b.setAttribute("contenteditable", !0), b.style.cssText = "position:absolute; top:0; left:0; width:1px; height:1px; overflow:hidden;", t.element.relative.appendChild(b), b.focus(), h.setTimeout(function() {
          v = b.innerHTML, s.removeItem(b), c.setRange(S.sc, S.so, S.ec, S.eo), g._setClipboardData(a, o, p, v, d);
        }), !0;
      } else if (p = d.getData("text/plain"), v = d.getData("text/html"), g._setClipboardData(a, o, p, v, d) === !1)
        return o.preventDefault(), o.stopPropagation(), !1;
    },
    _setClipboardData: function(a, o, d, p, v) {
      const _ = /class=["']*Mso(Normal|List)/i.test(p) || /content=["']*Word.Document/i.test(p) || /content=["']*OneNote.File/i.test(p) || /content=["']*Excel.Sheet/i.test(p);
      !p ? p = s._HTMLConvertor(d).replace(/\n/g, "<br>") : (p = p.replace(/^<html>\r?\n?<body>\r?\n?\x3C!--StartFragment--\>|\x3C!--EndFragment-->\r?\n?<\/body\>\r?\n?<\/html>$/g, ""), _ && (p = p.replace(/\n/g, " "), d = d.replace(/\n/g, " ")), p = c.cleanHTML(p, c.pasteTagsWhitelistRegExp, c.pasteTagsBlacklistRegExp));
      const S = c._charCount(c._charTypeHTML ? p : d);
      if (a === "paste" && typeof x.onPaste == "function") {
        const w = x.onPaste(o, p, S, c);
        if (w === !1)
          return !1;
        if (typeof w == "string") {
          if (!w)
            return !1;
          p = w;
        }
      }
      if (a === "drop" && typeof x.onDrop == "function") {
        const w = x.onDrop(o, p, S, c);
        if (w === !1)
          return !1;
        if (typeof w == "string") {
          if (!w)
            return !1;
          p = w;
        }
      }
      const k = v.files;
      if (k.length > 0 && !_)
        return /^image/.test(k[0].type) && c.plugins.image && x.insertImage(k), !1;
      if (!S)
        return !1;
      if (p)
        return x.insertHTML(p, !0, !1), !1;
    },
    onMouseMove_wysiwyg: function(a) {
      if (c.isDisabled || c.isReadOnly)
        return !1;
      const o = s.getParentElement(a.target, s.isComponent), d = c._lineBreaker.style;
      if (o && !c.currentControllerName) {
        const p = t.element;
        let v = 0, _ = p.wysiwyg;
        do
          v += _.scrollTop, _ = _.parentElement;
        while (_ && !/^(BODY|HTML)$/i.test(_.nodeName));
        const b = p.wysiwyg.scrollTop, S = g._getEditorOffsets(null), k = s.getOffset(o, p.wysiwygFrame).top + b, w = a.pageY + v + (l.iframe && !l.toolbarContainer ? p.toolbar.offsetHeight : 0), z = k + (l.iframe ? v : S.top), M = s.isListCell(o.parentNode);
        let N = "", O = "";
        if ((M ? !o.previousSibling : !s.isFormatElement(o.previousElementSibling)) && w < z + 20)
          O = k, N = "t";
        else if ((M ? !o.nextSibling : !s.isFormatElement(o.nextElementSibling)) && w > z + o.offsetHeight - 20)
          O = k + o.offsetHeight, N = "b";
        else {
          d.display = "none";
          return;
        }
        c._variable._lineBreakComp = o, c._variable._lineBreakDir = N, d.top = O - b + "px", c._lineBreakerButton.style.left = s.getOffset(o).left + o.offsetWidth / 2 - 15 + "px", d.display = "block";
      } else
        d.display !== "none" && (d.display = "none");
    },
    _onMouseDown_lineBreak: function(a) {
      a.preventDefault();
    },
    _onLineBreak: function(a) {
      a.preventDefault();
      const o = c._variable._lineBreakComp, d = this ? this : c._variable._lineBreakDir, p = s.isListCell(o.parentNode), v = s.createElement(p ? "BR" : s.isCell(o.parentNode) ? "DIV" : l.defaultTag);
      if (p || (v.innerHTML = "<br>"), c._charTypeHTML && !c.checkCharCount(v.outerHTML, "byte-html"))
        return;
      o.parentNode.insertBefore(v, d === "t" ? o : o.nextSibling), c._lineBreaker.style.display = "none", c._variable._lineBreakComp = null;
      const _ = p ? v : v.firstChild;
      c.setRange(_, 1, _, 1), c.history.push(!1);
    },
    _resizeObserver: null,
    _toolbarObserver: null,
    _addEvent: function() {
      const a = l.iframe ? c._ww : t.element.wysiwyg;
      s.isResizeObserverSupported && (this._resizeObserver = new h.ResizeObserver(function(o) {
        c.__callResizeFunction(-1, o[0]);
      })), t.element.toolbar.addEventListener("mousedown", g._buttonsEventHandler, !1), t.element._menuTray.addEventListener("mousedown", g._buttonsEventHandler, !1), t.element.toolbar.addEventListener("click", g.onClick_toolbar, !1), a.addEventListener("mousedown", g.onMouseDown_wysiwyg, !1), a.addEventListener("click", g.onClick_wysiwyg, !1), a.addEventListener(s.isIE ? "textinput" : "input", g.onInput_wysiwyg, !1), a.addEventListener("keydown", g.onKeyDown_wysiwyg, !1), a.addEventListener("keyup", g.onKeyUp_wysiwyg, !1), a.addEventListener("paste", g.onPaste_wysiwyg, !1), a.addEventListener("copy", g.onCopy_wysiwyg, !1), a.addEventListener("cut", g.onCut_wysiwyg, !1), a.addEventListener("drop", g.onDrop_wysiwyg, !1), a.addEventListener("scroll", g.onScroll_wysiwyg, !1), a.addEventListener("focus", g.onFocus_wysiwyg, !1), a.addEventListener("blur", g.onBlur_wysiwyg, !1), g._lineBreakerBind = { a: g._onLineBreak.bind(""), t: g._onLineBreak.bind("t"), b: g._onLineBreak.bind("b") }, a.addEventListener("mousemove", g.onMouseMove_wysiwyg, !1), c._lineBreakerButton.addEventListener("mousedown", g._onMouseDown_lineBreak, !1), c._lineBreakerButton.addEventListener("click", g._lineBreakerBind.a, !1), t.element.lineBreaker_t.addEventListener("mousedown", g._lineBreakerBind.t, !1), t.element.lineBreaker_b.addEventListener("mousedown", g._lineBreakerBind.b, !1), a.addEventListener("touchstart", g.onMouseDown_wysiwyg, { passive: !0, useCapture: !1 }), a.addEventListener("touchend", g.onClick_wysiwyg, { passive: !0, useCapture: !1 }), l.height === "auto" && !l.codeMirrorEditor && (t.element.code.addEventListener("keydown", g._codeViewAutoHeight, !1), t.element.code.addEventListener("keyup", g._codeViewAutoHeight, !1), t.element.code.addEventListener("paste", g._codeViewAutoHeight, !1)), t.element.resizingBar && (/\d+/.test(l.height) && l.resizeEnable ? t.element.resizingBar.addEventListener("mousedown", g.onMouseDown_resizingBar, !1) : s.addClass(t.element.resizingBar, "se-resizing-none")), g._setResponsiveToolbar(), s.isResizeObserverSupported && (this._toolbarObserver = new h.ResizeObserver(c.resetResponsiveToolbar)), h.addEventListener("resize", g.onResize_window, !1), l.stickyToolbar > -1 && h.addEventListener("scroll", g.onScroll_window, !1);
    },
    _removeEvent: function() {
      const a = l.iframe ? c._ww : t.element.wysiwyg;
      t.element.toolbar.removeEventListener("mousedown", g._buttonsEventHandler), t.element._menuTray.removeEventListener("mousedown", g._buttonsEventHandler), t.element.toolbar.removeEventListener("click", g.onClick_toolbar), a.removeEventListener("mousedown", g.onMouseDown_wysiwyg), a.removeEventListener("click", g.onClick_wysiwyg), a.removeEventListener(s.isIE ? "textinput" : "input", g.onInput_wysiwyg), a.removeEventListener("keydown", g.onKeyDown_wysiwyg), a.removeEventListener("keyup", g.onKeyUp_wysiwyg), a.removeEventListener("paste", g.onPaste_wysiwyg), a.removeEventListener("copy", g.onCopy_wysiwyg), a.removeEventListener("cut", g.onCut_wysiwyg), a.removeEventListener("drop", g.onDrop_wysiwyg), a.removeEventListener("scroll", g.onScroll_wysiwyg), a.removeEventListener("mousemove", g.onMouseMove_wysiwyg), c._lineBreakerButton.removeEventListener("mousedown", g._onMouseDown_lineBreak), c._lineBreakerButton.removeEventListener("click", g._lineBreakerBind.a), t.element.lineBreaker_t.removeEventListener("mousedown", g._lineBreakerBind.t), t.element.lineBreaker_b.removeEventListener("mousedown", g._lineBreakerBind.b), g._lineBreakerBind = null, a.removeEventListener("touchstart", g.onMouseDown_wysiwyg, { passive: !0, useCapture: !1 }), a.removeEventListener("touchend", g.onClick_wysiwyg, { passive: !0, useCapture: !1 }), a.removeEventListener("focus", g.onFocus_wysiwyg), a.removeEventListener("blur", g.onBlur_wysiwyg), t.element.code.removeEventListener("keydown", g._codeViewAutoHeight), t.element.code.removeEventListener("keyup", g._codeViewAutoHeight), t.element.code.removeEventListener("paste", g._codeViewAutoHeight), t.element.resizingBar && t.element.resizingBar.removeEventListener("mousedown", g.onMouseDown_resizingBar), g._resizeObserver && (g._resizeObserver.unobserve(t.element.wysiwygFrame), g._resizeObserver = null), g._toolbarObserver && (g._toolbarObserver.unobserve(t.element._toolbarShadow), g._toolbarObserver = null), h.removeEventListener("resize", g.onResize_window), h.removeEventListener("scroll", g.onScroll_window);
    },
    _setResponsiveToolbar: function() {
      if (r.length === 0) {
        r = null;
        return;
      }
      g._responsiveCurrentSize = "default";
      const a = g._responsiveButtonSize = [], o = g._responsiveButtons = { default: r[0] };
      for (let d = 1, p = r.length, v, _; d < p; d++)
        _ = r[d], v = _[0] * 1, a.push(v), o[v] = _[1];
      a.sort(function(d, p) {
        return d - p;
      }).unshift("default");
    }
  }, x = {
    /**
     * @description Core, Util object
     */
    core: c,
    util: s,
    /**
     * @description Event functions
     * @param {Object} e Event Object
     * @param {Object} core Core object
     */
    onload: null,
    onScroll: null,
    onMouseDown: null,
    onClick: null,
    onInput: null,
    onKeyDown: null,
    onKeyUp: null,
    onCopy: null,
    onCut: null,
    onFocus: null,
    /**
     * @description Event functions
     * @param {Object} e Event Object
     * @param {Object} core Core object
     * @param {String} contents Current contents
     */
    onBlur: null,
    /**
     * @description Event functions
     * @param {String} contents Current contents
     * @param {Object} core Core object
     */
    onChange: null,
    /**
     * @description Event functions
     * @param {String} contents Current contents
     * @param {Object} core Core object
     */
    onSave: null,
    /**
     * @description Event functions (drop, paste)
     * When false is returned, the default behavior is stopped.
     * If the string is returned, the cleanData value is modified to the return value.
     * @param {Object} e Event object.
     * @param {String} cleanData HTML string modified for editor format.
     * @param {Boolean} maxChartCount option (true if max character is exceeded)
     * @param {Object} core Core object
     * @returns {Boolean|String}
     */
    onDrop: null,
    onPaste: null,
    /**
     * @description Called just before the inline toolbar is positioned and displayed on the screen.
     * @param {Element} toolbar Toolbar Element
     * @param {Object} context The editor's context object (editor.getContext())
     * @param {Object} core Core object
     */
    showInline: null,
    /**
     * @description Called just after the controller is positioned and displayed on the screen.
     * controller - editing elements displayed on the screen [image resizing, table editor, link editor..]]
     * @param {String} name The name of the plugin that called the controller
     * @param {Array} controllers Array of Controller elements
     * @param {Object} core Core object
     */
    showController: null,
    /**
     * @description An event when toggling between code view and wysiwyg view.
     * @param {Boolean} isCodeView Whether the current code view mode
     * @param {Object} core Core object
     */
    toggleCodeView: null,
    /**
     * @description An event when toggling full screen.
     * @param {Boolean} isFullScreen Whether the current full screen mode
     * @param {Object} core Core object
     */
    toggleFullScreen: null,
    /**
     * @description It replaces the default callback function of the image upload
     * @param {Object} response Response object
     * @param {Object} info Input information
     * - linkValue: Link url value
     * - linkNewWindow: Open in new window Check Value
     * - inputWidth: Value of width input
     * - inputHeight: Value of height input
     * - align: Align Check Value
     * - isUpdate: Update image if true, create image if false
     * - element: If isUpdate is true, the currently selected image.
     * @param {Object} core Core object
     */
    imageUploadHandler: null,
    /**
     * @description It replaces the default callback function of the video upload
     * @param xmlHttp xmlHttpRequest object
     * @param info Input information
     * - inputWidth: Value of width input
     * - inputHeight: Value of height input
     * - align: Align Check Value
     * - isUpdate: Update video if true, create video if false
     * - element: If isUpdate is true, the currently selected video.
     * @param core Core object
     */
    videoUploadHandler: null,
    /**
     * @description It replaces the default callback function of the audio upload
     * @param xmlHttp xmlHttpRequest object
     * @param info Input information
     * - isUpdate: Update audio if true, create audio if false
     * - element: If isUpdate is true, the currently selected audio.
     * @param core Core object
     */
    audioUploadHandler: null,
    /**
     * @description Called before the image is uploaded
     * If true is returned, the internal upload process runs normally.
     * If false is returned, no image upload is performed.
     * If new fileList are returned,  replaced the previous fileList
     * If undefined is returned, it waits until "uploadHandler" is executed.
     * @param {Array} files Files array
     * @param {Object} info info: {
     * - linkValue: Link url value
     * - linkNewWindow: Open in new window Check Value
     * - inputWidth: Value of width input
     * - inputHeight: Value of height input
     * - align: Align Check Value
     * - isUpdate: Update image if true, create image if false
     * - element: If isUpdate is true, the currently selected image.
     * }
     * @param {Object} core Core object
     * @param {Function} uploadHandler If undefined is returned, it waits until "uploadHandler" is executed.
     *                "uploadHandler" is an upload function with "core" and "info" bound.
     *                [upload files] : uploadHandler(files or [new File(...),])
     *                [error]        : uploadHandler("Error message")
     *                [Just finish]  : uploadHandler()
     *                [directly register] : uploadHandler(response) // Same format as "imageUploadUrl" response
     *                                   ex) {
     *                                      // "errorMessage": "insert error message",
     *                                      "result": [ { "url": "...", "name": "...", "size": "999" }, ]
     *                                   }
     * @returns {Boolean|Array|undefined}
     */
    onImageUploadBefore: null,
    /**
     * @description Called before the video is uploaded
     * If true is returned, the internal upload process runs normally.
     * If false is returned, no video(iframe, video) upload is performed.
     * If new fileList are returned,  replaced the previous fileList
     * If undefined is returned, it waits until "uploadHandler" is executed.
     * @param {Array} files Files array
     * @param {Object} info info: {
     * - inputWidth: Value of width input
     * - inputHeight: Value of height input
     * - align: Align Check Value
     * - isUpdate: Update video if true, create video if false
     * - element: If isUpdate is true, the currently selected video.
     * }
     * @param {Object} core Core object
     * @param {Function} uploadHandler If undefined is returned, it waits until "uploadHandler" is executed.
     *                "uploadHandler" is an upload function with "core" and "info" bound.
     *                [upload files] : uploadHandler(files or [new File(...),])
     *                [error]        : uploadHandler("Error message")
     *                [Just finish]  : uploadHandler()
     *                [directly register] : uploadHandler(response) // Same format as "videoUploadUrl" response
     *                                   ex) {
     *                                      // "errorMessage": "insert error message",
     *                                      "result": [ { "url": "...", "name": "...", "size": "999" }, ]
     *                                   }
     * @returns {Boolean|Array|undefined}
     */
    onVideoUploadBefore: null,
    /**
     * @description Called before the audio is uploaded
     * If true is returned, the internal upload process runs normally.
     * If false is returned, no audio upload is performed.
     * If new fileList are returned,  replaced the previous fileList
     * If undefined is returned, it waits until "uploadHandler" is executed.
     * @param {Array} files Files array
     * @param {Object} info info: {
     * - isUpdate: Update audio if true, create audio if false
     * - element: If isUpdate is true, the currently selected audio.
     * }
     * @param {Object} core Core object
     * @param {Function} uploadHandler If undefined is returned, it waits until "uploadHandler" is executed.
     *                "uploadHandler" is an upload function with "core" and "info" bound.
     *                [upload files] : uploadHandler(files or [new File(...),])
     *                [error]        : uploadHandler("Error message")
     *                [Just finish]  : uploadHandler()
     *                [directly register] : uploadHandler(response) // Same format as "audioUploadUrl" response
     *                                   ex) {
     *                                      // "errorMessage": "insert error message",
     *                                      "result": [ { "url": "...", "name": "...", "size": "999" }, ]
     *                                   }
     * @returns {Boolean|Array|undefined}
     */
    onAudioUploadBefore: null,
    /**
     * @description Called when the image is uploaded, updated, deleted
     * @param {Element} targetElement Target element
     * @param {Number} index Uploaded index
     * @param {String} state Upload status ('create', 'update', 'delete')
     * @param {Object} info Image info object
     * - index: data index
     * - name: file name
     * - size: file size
     * - select: select function
     * - delete: delete function
     * - element: target element
     * - src: src attribute of tag
     * @param {Number} remainingFilesCount Count of remaining files to upload (0 when added as a url)
     * @param {Object} core Core object
     */
    onImageUpload: null,
    /**
    * @description Called when the video(iframe, video) is is uploaded, updated, deleted
    * -- arguments is same "onImageUpload" --
    */
    onVideoUpload: null,
    /**
    * @description Called when the audio is is uploaded, updated, deleted
    * -- arguments is same "onImageUpload" --
    */
    onAudioUpload: null,
    /**
     * @description Called when the image is upload failed
     * @param {String} errorMessage Error message
     * @param {Object} result Response Object
     * @param {Object} core Core object
     * @returns {Boolean}
     */
    onImageUploadError: null,
    /**
     * @description Called when the video(iframe, video) upload failed
     * -- arguments is same "onImageUploadError" --
     */
    onVideoUploadError: null,
    /**
     * @description Called when the audio upload failed
     * -- arguments is same "onImageUploadError" --
     */
    onAudioUploadError: null,
    /**
     * @description Called when the editor is resized using the bottom bar
     */
    onResizeEditor: null,
    /**
     * @description Called after the "setToolbarButtons" invocation.
     * Can be used to tweak buttons properties (useful for custom buttons)
     * @param {Array} buttonList Button list 
     * @param {Object} core Core object
     */
    onSetToolbarButtons: null,
    /**
     * @description Reset the buttons on the toolbar. (Editor is not reloaded)
     * You cannot set a new plugin for the button.
     * @param {Array} buttonList Button list 
     */
    setToolbarButtons: function(a) {
      c.submenuOff(), c.containerOff(), c.moreLayerOff();
      const o = fn._createToolBar(u, a, c.plugins, l);
      r = o.responsiveButtons, g._setResponsiveToolbar(), t.element.toolbar.replaceChild(o._buttonTray, t.element._buttonTray);
      const d = mn(t.element.originElement, c._getConstructed(t.element), l);
      t.element = d.element, t.tool = d.tool, l.iframe && (t.element.wysiwyg = c._wd.body), c._recoverButtonStates(), c._cachingButtons(), c.history._resetCachingButton(), c.effectNode = null, c.hasFocus && g._applyTagEffects(), c.isReadOnly && s.setDisabledButtons(!0, c.resizingDisabledButtons), typeof x.onSetToolbarButtons == "function" && x.onSetToolbarButtons(o._buttonTray.querySelectorAll("button"), c);
    },
    /**
     * @description Add or reset option property (Editor is reloaded)
     * @param {Object} _options Options
     */
    setOptions: function(a) {
      g._removeEvent(), c._resetComponents(), s.removeClass(c._styleCommandMap.showBlocks, "active"), s.removeClass(c._styleCommandMap.codeView, "active"), c._variable.isCodeView = !1, c._iframeAuto = null, c.plugins = a.plugins || c.plugins;
      const o = [l, a].reduce(function(_, b) {
        for (let S in b)
          if (s.hasOwn(b, S))
            if (S === "plugins" && b[S] && _[S]) {
              let k = _[S], w = b[S];
              k = k.length ? k : h.Object.keys(k).map(function(z) {
                return k[z];
              }), w = w.length ? w : h.Object.keys(w).map(function(z) {
                return w[z];
              }), _[S] = w.filter(function(z) {
                return k.indexOf(z) === -1;
              }).concat(k);
            } else
              _[S] = b[S];
        return _;
      }, {}), d = t.element, p = d.wysiwyg.innerHTML, v = fn._setOptions(o, t, l);
      v.callButtons && (e = v.callButtons, c.initPlugins = {}), v.plugins && (c.plugins = i = v.plugins), d._menuTray.children.length === 0 && (this._menuTray = {}), r = v.toolbar.responsiveButtons, c.options = l = o, c.lang = n = l.lang, l.iframe && d.wysiwygFrame.addEventListener("load", function() {
        s._setIframeDocument(this, l), c._setOptionsInit(d, p);
      }), d.editorArea.appendChild(d.wysiwygFrame), l.iframe || c._setOptionsInit(d, p);
    },
    /**
     * @description Set "options.defaultStyle" style.
     * Define the style of the edit area
     * It can also be defined with the "setOptions" method, but the "setDefaultStyle" method does not render the editor again.
     * @param {String} style Style string
     */
    setDefaultStyle: function(a) {
      const o = l._editorStyles = s._setDefaultOptionStyle(l, a), d = t.element;
      d.topArea.style.cssText = o.top, d.code.style.cssText = l._editorStyles.frame, d.code.style.display = "none", l.height === "auto" ? d.code.style.overflow = "hidden" : d.code.style.overflow = "", l.iframe ? (d.wysiwygFrame.style.cssText = o.frame, d.wysiwyg.style.cssText = o.editor) : d.wysiwygFrame.style.cssText = o.frame + o.editor;
    },
    /**
     * @description Open a notice area
     * @param {String} message Notice message
     */
    noticeOpen: function(a) {
      c.notice.open.call(c, a);
    },
    /**
     * @description Close a notice area
     */
    noticeClose: function() {
      c.notice.close.call(c);
    },
    /**
     * @description Copying the contents of the editor to the original textarea and execute onSave callback
     * * not working during enabled codeView mode
     */
    save: function() {
      const a = c.getContents(!1);
      t.element.originElement.value = a, g.onSave_wysiwyg(a, c);
    },
    /**
     * @description Gets the suneditor's context object. Contains settings, plugins, and cached element objects
     * @returns {Object}
     */
    getContext: function() {
      return t;
    },
    /**
     * @description Gets the contents of the suneditor
     * * not working during enabled codeView mode
     * @param {Boolean} onlyContents - Return only the contents of the body without headers when the "fullPage" option is true
     * @returns {String}
     */
    getContents: function(a) {
      return c.getContents(a);
    },
    /**
     * @description Gets only the text of the suneditor contents
     * * not working during enabled codeView mode
     * @returns {String}
     */
    getText: function() {
      return t.element.wysiwyg.textContent;
    },
    /**
     * @description Get the editor's number of characters or binary data size.
     * You can use the "charCounterType" option format.
     * @param {String|null} charCounterType options - charCounterType ('char', 'byte', 'byte-html')
     * If argument is no value, the currently set "charCounterType" option is used.
     * @returns {Number}
     */
    getCharCount: function(a) {
      return a = typeof a == "string" ? a : l.charCounterType, c.getCharLength(c._charTypeHTML ? t.element.wysiwyg.innerHTML : t.element.wysiwyg.textContent, a);
    },
    /**
     * @description Gets uploaded images informations
     * - index: data index
     * - name: file name
     * - size: file size
     * - select: select function
     * - delete: delete function
     * - element: target element
     * - src: src attribute of tag
     * @returns {Array}
     */
    getImagesInfo: function() {
      return t.image ? t.image._infoList : [];
    },
    /**
     * @description Gets uploaded files(plugin using fileManager) information list.
     * image: [img], video: [video, iframe], audio: [audio]
     * When the argument value is 'image', it is the same function as "getImagesInfo".
     * - index: data index
     * - name: file name
     * - size: file size
     * - select: select function
     * - delete: delete function
     * - element: target element
     * - src: src attribute of tag
     * @param {String} pluginName Plugin name (image, video, audio)
     * @returns {Array}
     */
    getFilesInfo: function(a) {
      return t[a] ? t[a]._infoList : [];
    },
    /**
     * @description Upload images using image plugin
     * @param {FileList} files FileList
     */
    insertImage: function(a) {
      !c.plugins.image || !a || (c.initPlugins.image ? c.plugins.image.submitAction.call(c, a) : c.callPlugin("image", c.plugins.image.submitAction.bind(c, a), null), c.focus());
    },
    /**
     * @description Inserts an HTML element or HTML string or plain string at the current cursor position
     * @param {Element|String} html HTML Element or HTML string or plain string
     * @param {Boolean} notCleaningData If true, inserts the HTML string without refining it with core.cleanHTML.
     * @param {Boolean} checkCharCount If true, if "options.maxCharCount" is exceeded when "element" is added, null is returned without addition.
     * @param {Boolean} rangeSelection If true, range select the inserted node.
     */
    insertHTML: function(a, o, d, p) {
      if (t.element.wysiwygFrame.contains(c.getSelection().focusNode) || c.focus(), typeof a == "string") {
        o || (a = c.cleanHTML(a, null, null));
        try {
          if (s.isListCell(s.getFormatElement(c.getSelectionNode(), null))) {
            const O = u.createRange().createContextualFragment(a).childNodes;
            c._isFormatData(O) && (a = c._convertListCell(O));
          }
          const _ = u.createRange().createContextualFragment(a).childNodes;
          if (d) {
            const N = c._charTypeHTML ? "outerHTML" : "textContent";
            let O = "";
            for (let I = 0, $ = _.length; I < $; I++)
              O += _[I][N];
            if (!c.checkCharCount(O, null))
              return;
          }
          let b, S, k, w, z;
          for (; b = _[0]; ) {
            if (w && w.nodeType === 3 && S && S.nodeType === 1 && s.isBreak(b)) {
              w = b, s.removeItem(b);
              continue;
            }
            k = c.insertNode(b, S, !1), S = k.container || k, z || (z = k), w = b;
          }
          w.nodeType === 3 && S.nodeType === 1 && (S = w);
          const M = S.nodeType === 3 ? k.endOffset || S.textContent.length : S.childNodes.length;
          p ? c.setRange(z.container || z, z.startOffset || 0, S, M) : c.setRange(S, M, S, M);
        } catch (v) {
          if (c.isDisabled || c.isReadOnly)
            return;
          console.warn("[SUNEDITOR.insertHTML.fail] " + v), c.execCommand("insertHTML", !1, a);
        }
      } else if (s.isComponent(a))
        c.insertComponent(a, !1, d, !1);
      else {
        let v = null;
        (s.isFormatElement(a) || s.isMedia(a)) && (v = s.getFormatElement(c.getSelectionNode(), null)), c.insertNode(a, v, d);
      }
      c.effectNode = null, c.focus(), c.history.push(!1);
    },
    /**
     * @description Change the contents of the suneditor
     * @param {String|undefined} contents Contents to Input
     */
    setContents: function(a) {
      c.setContents(a);
    },
    /**
     * @description Add contents to the suneditor
     * @param {String} contents Contents to Input
     */
    appendContents: function(a) {
      const o = c.convertContentsForEditor(a);
      if (c._variable.isCodeView)
        c._setCodeView(c._getCodeView() + `
` + c.convertHTMLForCodeView(o, !1));
      else {
        const d = s.createElement("DIV");
        d.innerHTML = o;
        const p = t.element.wysiwyg, v = d.children;
        for (let _ = 0, b = v.length; _ < b; _++)
          v[_] && p.appendChild(v[_]);
      }
      c.history.push(!1);
    },
    /**
     * @description Switch to or off "ReadOnly" mode.
     * @param {Boolean} value "readOnly" boolean value.
     */
    readOnly: function(a) {
      c.isReadOnly = a, s.setDisabledButtons(!!a, c.resizingDisabledButtons), a ? (c.controllersOff(), c.submenuActiveButton && c.submenuActiveButton.disabled && c.submenuOff(), c._moreLayerActiveButton && c._moreLayerActiveButton.disabled && c.moreLayerOff(), c.containerActiveButton && c.containerActiveButton.disabled && c.containerOff(), c.modalForm && c.plugins.dialog.close.call(c), t.element.code.setAttribute("readOnly", "true"), s.addClass(t.element.wysiwygFrame, "se-read-only")) : (t.element.code.removeAttribute("readOnly"), s.removeClass(t.element.wysiwygFrame, "se-read-only")), l.codeMirrorEditor && l.codeMirrorEditor.setOption("readOnly", !!a);
    },
    /**
     * @description Disable the suneditor
     */
    disable: function() {
      this.toolbar.disable(), this.wysiwyg.disable();
    },
    /**
     * @description Provided for backward compatibility and will be removed in 3.0.0 version
     */
    disabled: function() {
      this.disable();
    },
    /**
     * @description Enable the suneditor
     */
    enable: function() {
      this.toolbar.enable(), this.wysiwyg.enable();
    },
    /**
     * @description Provided for backward compatibility and will be removed in 3.0.0 version
     */
    enabled: function() {
      this.enable();
    },
    /**
     * @description Show the suneditor
     */
    show: function() {
      const a = t.element.topArea.style;
      a.display === "none" && (a.display = l.display);
    },
    /**
     * @description Hide the suneditor
     */
    hide: function() {
      t.element.topArea.style.display = "none";
    },
    /**
     * @description Destroy the suneditor
     */
    destroy: function() {
      c.submenuOff(), c.containerOff(), c.controllersOff(), c.notice && c.notice.close.call(c), c.modalForm && c.plugins.dialog.close.call(c), c.history._destroy(), g._removeEvent(), s.removeItem(t.element.toolbar), s.removeItem(t.element.topArea);
      for (let a in c.functions)
        s.hasOwn(c, a) && delete c.functions[a];
      for (let a in c)
        s.hasOwn(c, a) && delete c[a];
      for (let a in g)
        s.hasOwn(g, a) && delete g[a];
      for (let a in t)
        s.hasOwn(t, a) && delete t[a];
      for (let a in e)
        s.hasOwn(e, a) && delete e[a];
      for (let a in this)
        s.hasOwn(this, a) && delete this[a];
    },
    /**
     * @description Toolbar methods
     */
    toolbar: {
      /**
       * @description Disable the toolbar
       */
      disable: function() {
        c.submenuOff(), c.moreLayerOff(), c.containerOff(), t.tool.cover.style.display = "block";
      },
      /**
       * @description Provided for backward compatibility and will be removed in 3.0.0 version
       */
      disabled: function() {
        this.disable();
      },
      /**
       * @description Enable the toolbar
       */
      enable: function() {
        t.tool.cover.style.display = "none";
      },
      /**
       * @description Provided for backward compatibility and will be removed in 3.0.0 version
       */
      enabled: function() {
        this.enable();
      },
      /**
       * @description Show the toolbar
       */
      show: function() {
        c._isInline ? g._showToolbarInline() : (t.element.toolbar.style.display = "", t.element._stickyDummy.style.display = ""), g.onResize_window();
      },
      /**
       * @description Hide the toolbar
       */
      hide: function() {
        c._isInline ? g._hideToolbar() : (t.element.toolbar.style.display = "none", t.element._stickyDummy.style.display = "none"), g.onResize_window();
      }
    },
    /**
     * @description Wysiwyg methods
     */
    wysiwyg: {
      /**
       * @description Disable the wysiwyg area
       */
      disable: function() {
        c.controllersOff(), c.modalForm && c.plugins.dialog.close.call(c), t.element.wysiwyg.setAttribute("contenteditable", !1), c.isDisabled = !0, l.codeMirrorEditor ? l.codeMirrorEditor.setOption("readOnly", !0) : t.element.code.setAttribute("disabled", "disabled");
      },
      /**
       * @description Enable the wysiwyg area
       */
      enable: function() {
        t.element.wysiwyg.setAttribute("contenteditable", !0), c.isDisabled = !1, l.codeMirrorEditor ? l.codeMirrorEditor.setOption("readOnly", !1) : t.element.code.removeAttribute("disabled");
      }
    }
  };
  c.functions = x, c.options = l;
  let T = t.element, L = T.originElement, A = T.topArea;
  return L.style.display = "none", A.style.display = "block", l.iframe && T.wysiwygFrame.addEventListener("load", function() {
    s._setIframeDocument(this, l), c._editorInit(!1, l.value), l.value = null;
  }), typeof L.nextElementSibling == "object" ? L.parentNode.insertBefore(A, L.nextElementSibling) : L.parentNode.appendChild(A), T.editorArea.appendChild(T.wysiwygFrame), T = L = A = null, l.iframe || (c._editorInit(!1, l.value), l.value = null), x;
}
const Na = {
  /**
   * @description Returns the create function with preset options.
   * If the options overlap, the options of the 'create' function take precedence.
   * @param {Json} options Initialization options
   * @returns {Object}
   */
  init: function(t) {
    return {
      create: (function(e, i) {
        return this.create(e, i, t);
      }).bind(this)
    };
  },
  /**
   * @description Create the suneditor
   * @param {String|Element} idOrElement textarea Id or textarea element
   * @param {JSON|Object} options user options
   * @returns {Object}
   */
  create: function(t, e, i) {
    be._propertiesInit(), typeof e != "object" && (e = {}), i && (e = [i, e].reduce(function(r, u) {
      for (let h in u)
        if (be.hasOwn(u, h))
          if (h === "plugins" && u[h] && r[h]) {
            let s = r[h], m = u[h];
            s = s.length ? s : Object.keys(s).map(function(c) {
              return s[c];
            }), m = m.length ? m : Object.keys(m).map(function(c) {
              return m[c];
            }), r[h] = m.filter(function(c) {
              return s.indexOf(c) === -1;
            }).concat(s);
          } else
            r[h] = u[h];
      return r;
    }, {}));
    const n = typeof t == "string" ? document.getElementById(t) : t;
    if (!n)
      throw Error(typeof t == "string" ? '[SUNEDITOR.create.fail] The element for that id was not found (ID:"' + t + '")' : "[SUNEDITOR.create.fail] suneditor requires textarea's element or id value");
    const l = fn.init(n, e);
    if (l.constructed._top.id && document.getElementById(l.constructed._top.id))
      throw Error('[SUNEDITOR.create.fail] The ID of the suneditor you are trying to create already exists (ID:"' + l.constructed._top.id + '")');
    return Ba(mn(n, l.constructed, l.options), l.pluginCallButtons, l.plugins, l.options.lang, e, l._responsiveButtons);
  }
}, Ra = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Na
}, Symbol.toStringTag, { value: "Module" })), Da = /* @__PURE__ */ Dl(Ra);
function Ha(t) {
  throw new Error('Could not dynamically require "' + t + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
var Fn = {};
Object.defineProperty(Fn, "__esModule", { value: !0 });
var Ia = function(t) {
  switch (typeof t) {
    case "object":
      return t;
    case "string":
      return Ha("suneditor/src/lang/".concat(t, ".js"));
    default:
      return;
  }
};
Fn.default = Ia;
var Xt = {};
Object.defineProperty(Xt, "__esModule", { value: !0 });
Xt.uploadBeforeEvents = Xt.events = void 0;
Xt.events = [
  "onMouseDown",
  "onScroll",
  "onInput",
  "onClick",
  "onKeyUp",
  "onKeyDown",
  "onFocus",
  "onImageUpload",
  "onAudioUpload",
  "onVideoUpload",
  "onImageUploadError",
  "onVideoUploadError",
  "onAudioUploadError",
  "onSave",
  "onSetToolbarButtons",
  "imageUploadHandler",
  "toggleCodeView",
  "toggleFullScreen",
  "showInline",
  "showController",
  "onCopy",
  "onCut",
  "onDrop",
  "onPaste"
];
Xt.uploadBeforeEvents = [
  "onImageUploadBefore",
  "onVideoUploadBefore",
  "onAudioUploadBefore"
];
var ai = Re && Re.__assign || function() {
  return ai = Object.assign || function(t) {
    for (var e, i = 1, n = arguments.length; i < n; i++) {
      e = arguments[i];
      for (var l in e)
        Object.prototype.hasOwnProperty.call(e, l) && (t[l] = e[l]);
    }
    return t;
  }, ai.apply(this, arguments);
}, Oa = Re && Re.__createBinding || (Object.create ? function(t, e, i, n) {
  n === void 0 && (n = i);
  var l = Object.getOwnPropertyDescriptor(e, i);
  (!l || ("get" in l ? !e.__esModule : l.writable || l.configurable)) && (l = { enumerable: !0, get: function() {
    return e[i];
  } }), Object.defineProperty(t, n, l);
} : function(t, e, i, n) {
  n === void 0 && (n = i), t[n] = e[i];
}), Fa = Re && Re.__setModuleDefault || (Object.create ? function(t, e) {
  Object.defineProperty(t, "default", { enumerable: !0, value: e });
} : function(t, e) {
  t.default = e;
}), Pa = Re && Re.__importStar || function(t) {
  if (t && t.__esModule)
    return t;
  var e = {};
  if (t != null)
    for (var i in t)
      i !== "default" && Object.prototype.hasOwnProperty.call(t, i) && Oa(e, t, i);
  return Fa(e, t), e;
}, Pn = Re && Re.__importDefault || function(t) {
  return t && t.__esModule ? t : { default: t };
};
Object.defineProperty(Hn, "__esModule", { value: !0 });
var at = Pa(pn), Va = Pn(Ea), Ua = Pn(Da), Nl = Pn(Fn), Rl = Xt, qa = function(t) {
  var e = t.name, i = t.lang, n = t.setOptions, l = n === void 0 ? {} : n, r = t.placeholder, u = t.width, h = u === void 0 ? "100%" : u, s = t.height, m = t.defaultValue, c = t.setContents, g = t.setDefaultStyle, x = t.getSunEditorInstance, T = t.appendContents, L = t.setAllPlugins, A = L === void 0 ? !0 : L, a = t.disable, o = a === void 0 ? !1 : a, d = t.readOnly, p = d === void 0 ? !1 : d, v = t.hide, _ = v === void 0 ? !1 : v, b = t.hideToolbar, S = b === void 0 ? !1 : b, k = t.disableToolbar, w = k === void 0 ? !1 : k, z = t.onChange, M = t.autoFocus, N = t.onBlur, O = t.onLoad, I = (0, at.useRef)(null), $ = (0, at.useRef)(null), Y = (0, at.useRef)(!0);
  return (0, at.useEffect)(function() {
    var j, R = ai(ai({}, l), { lang: i ? (0, Nl.default)(i) : l.lang, width: h ?? l.width, placeholder: r ?? l.placeholder, plugins: (j = l.plugins) !== null && j !== void 0 ? j : A ? Va.default : void 0, height: s ?? l.height, value: m ?? l.value, defaultStyle: g ?? l.defaultStyle });
    return e && R.value && (I.current.value = R.value), $.current = Ua.default.create(I.current, R), x && x($.current), $.current.onload = function(Z, W) {
      return W || (c && ($.current.setContents(c), $.current.core.focusEdge(null)), T && $.current.appendContents(T), $.current.util.isIE && $.current.core._createDefaultRange(), o && $.current.disable(), p && $.current.readOnly(!0), _ && $.current.hide(), S && $.current.toolbar.hide(), w && $.current.toolbar.disable(), M === !1 ? $.current.core.context.element.wysiwyg.blur() : M && $.current.core.context.element.wysiwyg.focus()), O == null ? void 0 : O(W);
    }, $.current.onChange = function(Z) {
      e && I.current && (I.current.value = Z), z && z(Z);
    }, N && ($.current.onBlur = function(Z) {
      return N(Z, $.current.getContents(!0));
    }), Rl.uploadBeforeEvents.forEach(function(Z) {
      var W = t[Z];
      $.current && W && ($.current[Z] = function(H, q, P, V) {
        return W(H, q, V);
      });
    }), Rl.events.forEach(function(Z) {
      var W = t[Z];
      W && $.current && ($.current[Z] = W);
    }), function() {
      $.current && $.current.destroy(), $.current = null;
    };
  }, []), (0, at.useEffect)(function() {
    var j;
    Y.current || (j = $.current) === null || j === void 0 || j.setOptions({
      lang: (0, Nl.default)(i)
    });
  }, [i]), (0, at.useEffect)(function() {
    var j;
    Y.current || (j = $.current) === null || j === void 0 || j.setOptions({
      placeholder: r,
      height: s,
      width: h
    });
  }, [r, s, h]), (0, at.useEffect)(function() {
    var j;
    g && !Y.current && ((j = $.current) === null || j === void 0 || j.setDefaultStyle(g));
  }, [g]), (0, at.useEffect)(function() {
    var j, R;
    !Y.current && c !== void 0 && !(!((j = $.current) === null || j === void 0) && j.core.hasFocus) && ((R = $.current) === null || R === void 0 || R.setContents(c));
  }, [c]), (0, at.useEffect)(function() {
    var j, R, Z;
    !Y.current && T !== void 0 && !(!((j = $.current) === null || j === void 0) && j.core.hasFocus) && ((R = $.current) === null || R === void 0 || R.appendContents(T), (Z = $.current) === null || Z === void 0 || Z.core.focusEdge(null));
  }, [T]), (0, at.useEffect)(function() {
    var j, R, Z, W, H, q, P, V, X;
    Y.current || ((j = $.current) === null || j === void 0 || j.readOnly(p), S ? (R = $.current) === null || R === void 0 || R.toolbar.hide() : (Z = $.current) === null || Z === void 0 || Z.toolbar.show(), w ? (W = $.current) === null || W === void 0 || W.toolbar.disable() : (H = $.current) === null || H === void 0 || H.toolbar.enable(), o ? (q = $.current) === null || q === void 0 || q.disable() : (P = $.current) === null || P === void 0 || P.enable(), _ ? (V = $.current) === null || V === void 0 || V.hide() : (X = $.current) === null || X === void 0 || X.show());
  }, [o, S, w, _, p]), (0, at.useEffect)(function() {
    Y.current = !1;
  }, []), at.default.createElement("textarea", ai({ style: { visibility: "hidden" }, ref: I }, { name: e }));
};
Hn.default = qa;
var Rt = {};
Object.defineProperty(Rt, "__esModule", { value: !0 });
Rt.formatting = Rt.complex = Rt.basic = void 0;
Rt.basic = [
  ["font", "fontSize"],
  ["fontColor"],
  ["horizontalRule"],
  ["link", "image"]
];
Rt.complex = [
  ["undo", "redo"],
  ["font", "fontSize", "formatBlock"],
  ["bold", "underline", "italic", "strike", "subscript", "superscript"],
  ["removeFormat"],
  "/",
  ["fontColor", "hiliteColor"],
  ["outdent", "indent"],
  ["align", "horizontalRule", "list", "table"],
  ["link", "image", "video"],
  ["fullScreen", "showBlocks", "codeView"],
  ["preview", "print"],
  ["save", "template"]
];
Rt.formatting = [
  ["undo", "redo"],
  ["bold", "underline", "italic", "strike", "subscript", "superscript"],
  ["removeFormat"],
  ["outdent", "indent"],
  ["fullScreen", "showBlocks", "codeView"],
  ["preview", "print"]
];
var Wa = Re && Re.__createBinding || (Object.create ? function(t, e, i, n) {
  n === void 0 && (n = i);
  var l = Object.getOwnPropertyDescriptor(e, i);
  (!l || ("get" in l ? !e.__esModule : l.writable || l.configurable)) && (l = { enumerable: !0, get: function() {
    return e[i];
  } }), Object.defineProperty(t, n, l);
} : function(t, e, i, n) {
  n === void 0 && (n = i), t[n] = e[i];
}), Za = Re && Re.__setModuleDefault || (Object.create ? function(t, e) {
  Object.defineProperty(t, "default", { enumerable: !0, value: e });
} : function(t, e) {
  t.default = e;
}), $a = Re && Re.__importStar || function(t) {
  if (t && t.__esModule)
    return t;
  var e = {};
  if (t != null)
    for (var i in t)
      i !== "default" && Object.prototype.hasOwnProperty.call(t, i) && Wa(e, t, i);
  return Za(e, t), e;
}, Ya = Re && Re.__importDefault || function(t) {
  return t && t.__esModule ? t : { default: t };
};
Object.defineProperty(Oi, "__esModule", { value: !0 });
Oi.buttonList = void 0;
var ja = Ya(Hn);
Oi.buttonList = $a(Rt);
var Ga = Oi.default = ja.default;
function Ka(t) {
  const { name: e, defaultValue: i, ...n } = t, [l, r] = vs(i || "");
  return /* @__PURE__ */ pi.jsxs(pi.Fragment, { children: [
    /* @__PURE__ */ pi.jsx("input", { type: "hidden", value: l, name: e }),
    /* @__PURE__ */ pi.jsx(
      Ga,
      {
        setContents: l,
        onChange: r,
        setOptions: {
          katex: va,
          buttonList: [
            ["undo", "redo"],
            ["formatBlock"],
            [
              "bold",
              "underline",
              "italic",
              "strike",
              "subscript",
              "superscript"
            ],
            ["fontColor", "hiliteColor"],
            ["align", "list"],
            ["outdent", "indent"],
            ["table", "horizontalRule", "link", "image", "video", "math"]
          ],
          defaultTag: "div",
          minHeight: "300px",
          showPathLabel: !1
        },
        ...n
      }
    )
  ] });
}
export {
  Ka as RichText
};
